var jm=t=>{throw TypeError(t)};var If=(t,e,n)=>e.has(t)||jm("Cannot "+n);var J=(t,e,n)=>(If(t,e,"read from private field"),n?n.call(t):e.get(t)),it=(t,e,n)=>e.has(t)?jm("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(t):e.set(t,n),Fe=(t,e,n,r)=>(If(t,e,"write to private field"),r?r.call(t,n):e.set(t,n),n),Sn=(t,e,n)=>(If(t,e,"access private method"),n);var Iu=(t,e,n,r)=>({set _(s){Fe(t,e,s,n)},get _(){return J(t,e,r)}});function o2(t,e){for(var n=0;n<e.length;n++){const r=e[n];if(typeof r!="string"&&!Array.isArray(r)){for(const s in r)if(s!=="default"&&!(s in t)){const o=Object.getOwnPropertyDescriptor(r,s);o&&Object.defineProperty(t,s,o.get?o:{enumerable:!0,get:()=>r[s]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const o of s)if(o.type==="childList")for(const c of o.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&r(c)}).observe(document,{childList:!0,subtree:!0});function n(s){const o={};return s.integrity&&(o.integrity=s.integrity),s.referrerPolicy&&(o.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?o.credentials="include":s.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function r(s){if(s.ep)return;s.ep=!0;const o=n(s);fetch(s.href,o)}})();var Ll=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function _p(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var a2={exports:{}},_h={},l2={exports:{}},Ye={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var su=Symbol.for("react.element"),W_=Symbol.for("react.portal"),$_=Symbol.for("react.fragment"),G_=Symbol.for("react.strict_mode"),Y_=Symbol.for("react.profiler"),X_=Symbol.for("react.provider"),K_=Symbol.for("react.context"),q_=Symbol.for("react.forward_ref"),Z_=Symbol.for("react.suspense"),Q_=Symbol.for("react.memo"),J_=Symbol.for("react.lazy"),Um=Symbol.iterator;function eT(t){return t===null||typeof t!="object"?null:(t=Um&&t[Um]||t["@@iterator"],typeof t=="function"?t:null)}var c2={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},u2=Object.assign,d2={};function pl(t,e,n){this.props=t,this.context=e,this.refs=d2,this.updater=n||c2}pl.prototype.isReactComponent={};pl.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};pl.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function h2(){}h2.prototype=pl.prototype;function Tp(t,e,n){this.props=t,this.context=e,this.refs=d2,this.updater=n||c2}var Ip=Tp.prototype=new h2;Ip.constructor=Tp;u2(Ip,pl.prototype);Ip.isPureReactComponent=!0;var Vm=Array.isArray,f2=Object.prototype.hasOwnProperty,Rp={current:null},p2={key:!0,ref:!0,__self:!0,__source:!0};function g2(t,e,n){var r,s={},o=null,c=null;if(e!=null)for(r in e.ref!==void 0&&(c=e.ref),e.key!==void 0&&(o=""+e.key),e)f2.call(e,r)&&!p2.hasOwnProperty(r)&&(s[r]=e[r]);var h=arguments.length-2;if(h===1)s.children=n;else if(1<h){for(var g=Array(h),p=0;p<h;p++)g[p]=arguments[p+2];s.children=g}if(t&&t.defaultProps)for(r in h=t.defaultProps,h)s[r]===void 0&&(s[r]=h[r]);return{$$typeof:su,type:t,key:o,ref:c,props:s,_owner:Rp.current}}function tT(t,e){return{$$typeof:su,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function Np(t){return typeof t=="object"&&t!==null&&t.$$typeof===su}function nT(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var zm=/\/+/g;function Rf(t,e){return typeof t=="object"&&t!==null&&t.key!=null?nT(""+t.key):e.toString(36)}function ld(t,e,n,r,s){var o=typeof t;(o==="undefined"||o==="boolean")&&(t=null);var c=!1;if(t===null)c=!0;else switch(o){case"string":case"number":c=!0;break;case"object":switch(t.$$typeof){case su:case W_:c=!0}}if(c)return c=t,s=s(c),t=r===""?"."+Rf(c,0):r,Vm(s)?(n="",t!=null&&(n=t.replace(zm,"$&/")+"/"),ld(s,e,n,"",function(p){return p})):s!=null&&(Np(s)&&(s=tT(s,n+(!s.key||c&&c.key===s.key?"":(""+s.key).replace(zm,"$&/")+"/")+t)),e.push(s)),1;if(c=0,r=r===""?".":r+":",Vm(t))for(var h=0;h<t.length;h++){o=t[h];var g=r+Rf(o,h);c+=ld(o,e,n,g,s)}else if(g=eT(t),typeof g=="function")for(t=g.call(t),h=0;!(o=t.next()).done;)o=o.value,g=r+Rf(o,h++),c+=ld(o,e,n,g,s);else if(o==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return c}function Ru(t,e,n){if(t==null)return t;var r=[],s=0;return ld(t,r,"","",function(o){return e.call(n,o,s++)}),r}function rT(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var jn={current:null},cd={transition:null},iT={ReactCurrentDispatcher:jn,ReactCurrentBatchConfig:cd,ReactCurrentOwner:Rp};function m2(){throw Error("act(...) is not supported in production builds of React.")}Ye.Children={map:Ru,forEach:function(t,e,n){Ru(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return Ru(t,function(){e++}),e},toArray:function(t){return Ru(t,function(e){return e})||[]},only:function(t){if(!Np(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};Ye.Component=pl;Ye.Fragment=$_;Ye.Profiler=Y_;Ye.PureComponent=Tp;Ye.StrictMode=G_;Ye.Suspense=Z_;Ye.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=iT;Ye.act=m2;Ye.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=u2({},t.props),s=t.key,o=t.ref,c=t._owner;if(e!=null){if(e.ref!==void 0&&(o=e.ref,c=Rp.current),e.key!==void 0&&(s=""+e.key),t.type&&t.type.defaultProps)var h=t.type.defaultProps;for(g in e)f2.call(e,g)&&!p2.hasOwnProperty(g)&&(r[g]=e[g]===void 0&&h!==void 0?h[g]:e[g])}var g=arguments.length-2;if(g===1)r.children=n;else if(1<g){h=Array(g);for(var p=0;p<g;p++)h[p]=arguments[p+2];r.children=h}return{$$typeof:su,type:t.type,key:s,ref:o,props:r,_owner:c}};Ye.createContext=function(t){return t={$$typeof:K_,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:X_,_context:t},t.Consumer=t};Ye.createElement=g2;Ye.createFactory=function(t){var e=g2.bind(null,t);return e.type=t,e};Ye.createRef=function(){return{current:null}};Ye.forwardRef=function(t){return{$$typeof:q_,render:t}};Ye.isValidElement=Np;Ye.lazy=function(t){return{$$typeof:J_,_payload:{_status:-1,_result:t},_init:rT}};Ye.memo=function(t,e){return{$$typeof:Q_,type:t,compare:e===void 0?null:e}};Ye.startTransition=function(t){var e=cd.transition;cd.transition={};try{t()}finally{cd.transition=e}};Ye.unstable_act=m2;Ye.useCallback=function(t,e){return jn.current.useCallback(t,e)};Ye.useContext=function(t){return jn.current.useContext(t)};Ye.useDebugValue=function(){};Ye.useDeferredValue=function(t){return jn.current.useDeferredValue(t)};Ye.useEffect=function(t,e){return jn.current.useEffect(t,e)};Ye.useId=function(){return jn.current.useId()};Ye.useImperativeHandle=function(t,e,n){return jn.current.useImperativeHandle(t,e,n)};Ye.useInsertionEffect=function(t,e){return jn.current.useInsertionEffect(t,e)};Ye.useLayoutEffect=function(t,e){return jn.current.useLayoutEffect(t,e)};Ye.useMemo=function(t,e){return jn.current.useMemo(t,e)};Ye.useReducer=function(t,e,n){return jn.current.useReducer(t,e,n)};Ye.useRef=function(t){return jn.current.useRef(t)};Ye.useState=function(t){return jn.current.useState(t)};Ye.useSyncExternalStore=function(t,e,n){return jn.current.useSyncExternalStore(t,e,n)};Ye.useTransition=function(){return jn.current.useTransition()};Ye.version="18.3.1";l2.exports=Ye;var M=l2.exports;const de=_p(M),y2=o2({__proto__:null,default:de},[M]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var sT=M,oT=Symbol.for("react.element"),aT=Symbol.for("react.fragment"),lT=Object.prototype.hasOwnProperty,cT=sT.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,uT={key:!0,ref:!0,__self:!0,__source:!0};function w2(t,e,n){var r,s={},o=null,c=null;n!==void 0&&(o=""+n),e.key!==void 0&&(o=""+e.key),e.ref!==void 0&&(c=e.ref);for(r in e)lT.call(e,r)&&!uT.hasOwnProperty(r)&&(s[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)s[r]===void 0&&(s[r]=e[r]);return{$$typeof:oT,type:t,key:o,ref:c,props:s,_owner:cT.current}}_h.Fragment=aT;_h.jsx=w2;_h.jsxs=w2;a2.exports=_h;var U=a2.exports,x2={exports:{}},mr={},v2={exports:{}},E2={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(q,Z){var ue=q.length;q.push(Z);e:for(;0<ue;){var De=ue-1>>>1,ge=q[De];if(0<s(ge,Z))q[De]=Z,q[ue]=ge,ue=De;else break e}}function n(q){return q.length===0?null:q[0]}function r(q){if(q.length===0)return null;var Z=q[0],ue=q.pop();if(ue!==Z){q[0]=ue;e:for(var De=0,ge=q.length,Pe=ge>>>1;De<Pe;){var Re=2*(De+1)-1,Ct=q[Re],me=Re+1,qe=q[me];if(0>s(Ct,ue))me<ge&&0>s(qe,Ct)?(q[De]=qe,q[me]=ue,De=me):(q[De]=Ct,q[Re]=ue,De=Re);else if(me<ge&&0>s(qe,ue))q[De]=qe,q[me]=ue,De=me;else break e}}return Z}function s(q,Z){var ue=q.sortIndex-Z.sortIndex;return ue!==0?ue:q.id-Z.id}if(typeof performance=="object"&&typeof performance.now=="function"){var o=performance;t.unstable_now=function(){return o.now()}}else{var c=Date,h=c.now();t.unstable_now=function(){return c.now()-h}}var g=[],p=[],y=1,x=null,E=3,b=!1,I=!1,S=!1,R=typeof setTimeout=="function"?setTimeout:null,A=typeof clearTimeout=="function"?clearTimeout:null,_=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function T(q){for(var Z=n(p);Z!==null;){if(Z.callback===null)r(p);else if(Z.startTime<=q)r(p),Z.sortIndex=Z.expirationTime,e(g,Z);else break;Z=n(p)}}function D(q){if(S=!1,T(q),!I)if(n(g)!==null)I=!0,Ee(F);else{var Z=n(p);Z!==null&&ne(D,Z.startTime-q)}}function F(q,Z){I=!1,S&&(S=!1,A(W),W=-1),b=!0;var ue=E;try{for(T(Z),x=n(g);x!==null&&(!(x.expirationTime>Z)||q&&!he());){var De=x.callback;if(typeof De=="function"){x.callback=null,E=x.priorityLevel;var ge=De(x.expirationTime<=Z);Z=t.unstable_now(),typeof ge=="function"?x.callback=ge:x===n(g)&&r(g),T(Z)}else r(g);x=n(g)}if(x!==null)var Pe=!0;else{var Re=n(p);Re!==null&&ne(D,Re.startTime-Z),Pe=!1}return Pe}finally{x=null,E=ue,b=!1}}var j=!1,B=null,W=-1,H=5,te=-1;function he(){return!(t.unstable_now()-te<H)}function Q(){if(B!==null){var q=t.unstable_now();te=q;var Z=!0;try{Z=B(!0,q)}finally{Z?fe():(j=!1,B=null)}}else j=!1}var fe;if(typeof _=="function")fe=function(){_(Q)};else if(typeof MessageChannel<"u"){var ie=new MessageChannel,$=ie.port2;ie.port1.onmessage=Q,fe=function(){$.postMessage(null)}}else fe=function(){R(Q,0)};function Ee(q){B=q,j||(j=!0,fe())}function ne(q,Z){W=R(function(){q(t.unstable_now())},Z)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(q){q.callback=null},t.unstable_continueExecution=function(){I||b||(I=!0,Ee(F))},t.unstable_forceFrameRate=function(q){0>q||125<q?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):H=0<q?Math.floor(1e3/q):5},t.unstable_getCurrentPriorityLevel=function(){return E},t.unstable_getFirstCallbackNode=function(){return n(g)},t.unstable_next=function(q){switch(E){case 1:case 2:case 3:var Z=3;break;default:Z=E}var ue=E;E=Z;try{return q()}finally{E=ue}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(q,Z){switch(q){case 1:case 2:case 3:case 4:case 5:break;default:q=3}var ue=E;E=q;try{return Z()}finally{E=ue}},t.unstable_scheduleCallback=function(q,Z,ue){var De=t.unstable_now();switch(typeof ue=="object"&&ue!==null?(ue=ue.delay,ue=typeof ue=="number"&&0<ue?De+ue:De):ue=De,q){case 1:var ge=-1;break;case 2:ge=250;break;case 5:ge=1073741823;break;case 4:ge=1e4;break;default:ge=5e3}return ge=ue+ge,q={id:y++,callback:Z,priorityLevel:q,startTime:ue,expirationTime:ge,sortIndex:-1},ue>De?(q.sortIndex=ue,e(p,q),n(g)===null&&q===n(p)&&(S?(A(W),W=-1):S=!0,ne(D,ue-De))):(q.sortIndex=ge,e(g,q),I||b||(I=!0,Ee(F))),q},t.unstable_shouldYield=he,t.unstable_wrapCallback=function(q){var Z=E;return function(){var ue=E;E=Z;try{return q.apply(this,arguments)}finally{E=ue}}}})(E2);v2.exports=E2;var dT=v2.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var hT=M,pr=dT;function se(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var b2=new Set,xc={};function Go(t,e){Ja(t,e),Ja(t+"Capture",e)}function Ja(t,e){for(xc[t]=e,t=0;t<e.length;t++)b2.add(e[t])}var $i=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),D0=Object.prototype.hasOwnProperty,fT=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,Hm={},Wm={};function pT(t){return D0.call(Wm,t)?!0:D0.call(Hm,t)?!1:fT.test(t)?Wm[t]=!0:(Hm[t]=!0,!1)}function gT(t,e,n,r){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function mT(t,e,n,r){if(e===null||typeof e>"u"||gT(t,e,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function Un(t,e,n,r,s,o,c){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=s,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=o,this.removeEmptyString=c}var En={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){En[t]=new Un(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];En[e]=new Un(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){En[t]=new Un(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){En[t]=new Un(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){En[t]=new Un(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){En[t]=new Un(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){En[t]=new Un(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){En[t]=new Un(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){En[t]=new Un(t,5,!1,t.toLowerCase(),null,!1,!1)});var Op=/[\-:]([a-z])/g;function kp(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(Op,kp);En[e]=new Un(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(Op,kp);En[e]=new Un(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(Op,kp);En[e]=new Un(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){En[t]=new Un(t,1,!1,t.toLowerCase(),null,!1,!1)});En.xlinkHref=new Un("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){En[t]=new Un(t,1,!1,t.toLowerCase(),null,!0,!0)});function Mp(t,e,n,r){var s=En.hasOwnProperty(e)?En[e]:null;(s!==null?s.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(mT(e,n,s,r)&&(n=null),r||s===null?pT(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):s.mustUseProperty?t[s.propertyName]=n===null?s.type===3?!1:"":n:(e=s.attributeName,r=s.attributeNamespace,n===null?t.removeAttribute(e):(s=s.type,n=s===3||s===4&&n===!0?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}var es=hT.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Nu=Symbol.for("react.element"),ma=Symbol.for("react.portal"),ya=Symbol.for("react.fragment"),Dp=Symbol.for("react.strict_mode"),P0=Symbol.for("react.profiler"),C2=Symbol.for("react.provider"),S2=Symbol.for("react.context"),Pp=Symbol.for("react.forward_ref"),L0=Symbol.for("react.suspense"),B0=Symbol.for("react.suspense_list"),Lp=Symbol.for("react.memo"),gs=Symbol.for("react.lazy"),A2=Symbol.for("react.offscreen"),$m=Symbol.iterator;function Bl(t){return t===null||typeof t!="object"?null:(t=$m&&t[$m]||t["@@iterator"],typeof t=="function"?t:null)}var Pt=Object.assign,Nf;function Kl(t){if(Nf===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);Nf=e&&e[1]||""}return`
`+Nf+t}var Of=!1;function kf(t,e){if(!t||Of)return"";Of=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(p){var r=p}Reflect.construct(t,[],e)}else{try{e.call()}catch(p){r=p}t.call(e.prototype)}else{try{throw Error()}catch(p){r=p}t()}}catch(p){if(p&&r&&typeof p.stack=="string"){for(var s=p.stack.split(`
`),o=r.stack.split(`
`),c=s.length-1,h=o.length-1;1<=c&&0<=h&&s[c]!==o[h];)h--;for(;1<=c&&0<=h;c--,h--)if(s[c]!==o[h]){if(c!==1||h!==1)do if(c--,h--,0>h||s[c]!==o[h]){var g=`
`+s[c].replace(" at new "," at ");return t.displayName&&g.includes("<anonymous>")&&(g=g.replace("<anonymous>",t.displayName)),g}while(1<=c&&0<=h);break}}}finally{Of=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?Kl(t):""}function yT(t){switch(t.tag){case 5:return Kl(t.type);case 16:return Kl("Lazy");case 13:return Kl("Suspense");case 19:return Kl("SuspenseList");case 0:case 2:case 15:return t=kf(t.type,!1),t;case 11:return t=kf(t.type.render,!1),t;case 1:return t=kf(t.type,!0),t;default:return""}}function F0(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case ya:return"Fragment";case ma:return"Portal";case P0:return"Profiler";case Dp:return"StrictMode";case L0:return"Suspense";case B0:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case S2:return(t.displayName||"Context")+".Consumer";case C2:return(t._context.displayName||"Context")+".Provider";case Pp:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case Lp:return e=t.displayName||null,e!==null?e:F0(t.type)||"Memo";case gs:e=t._payload,t=t._init;try{return F0(t(e))}catch{}}return null}function wT(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return F0(e);case 8:return e===Dp?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function Hs(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function _2(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function xT(t){var e=_2(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var s=n.get,o=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return s.call(this)},set:function(c){r=""+c,o.call(this,c)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(c){r=""+c},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function Ou(t){t._valueTracker||(t._valueTracker=xT(t))}function T2(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=_2(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function Od(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function j0(t,e){var n=e.checked;return Pt({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function Gm(t,e){var n=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;n=Hs(e.value!=null?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function I2(t,e){e=e.checked,e!=null&&Mp(t,"checked",e,!1)}function U0(t,e){I2(t,e);var n=Hs(e.value),r=e.type;if(n!=null)r==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?V0(t,e.type,n):e.hasOwnProperty("defaultValue")&&V0(t,e.type,Hs(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function Ym(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function V0(t,e,n){(e!=="number"||Od(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var ql=Array.isArray;function Pa(t,e,n,r){if(t=t.options,e){e={};for(var s=0;s<n.length;s++)e["$"+n[s]]=!0;for(n=0;n<t.length;n++)s=e.hasOwnProperty("$"+t[n].value),t[n].selected!==s&&(t[n].selected=s),s&&r&&(t[n].defaultSelected=!0)}else{for(n=""+Hs(n),e=null,s=0;s<t.length;s++){if(t[s].value===n){t[s].selected=!0,r&&(t[s].defaultSelected=!0);return}e!==null||t[s].disabled||(e=t[s])}e!==null&&(e.selected=!0)}}function z0(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(se(91));return Pt({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function Xm(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(se(92));if(ql(n)){if(1<n.length)throw Error(se(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:Hs(n)}}function R2(t,e){var n=Hs(e.value),r=Hs(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),r!=null&&(t.defaultValue=""+r)}function Km(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function N2(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function H0(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?N2(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var ku,O2=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,r,s){MSApp.execUnsafeLocalFunction(function(){return t(e,n,r,s)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(ku=ku||document.createElement("div"),ku.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=ku.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function vc(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var nc={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},vT=["Webkit","ms","Moz","O"];Object.keys(nc).forEach(function(t){vT.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),nc[e]=nc[t]})});function k2(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||nc.hasOwnProperty(t)&&nc[t]?(""+e).trim():e+"px"}function M2(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var r=n.indexOf("--")===0,s=k2(n,e[n],r);n==="float"&&(n="cssFloat"),r?t.setProperty(n,s):t[n]=s}}var ET=Pt({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function W0(t,e){if(e){if(ET[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(se(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(se(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(se(61))}if(e.style!=null&&typeof e.style!="object")throw Error(se(62))}}function $0(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var G0=null;function Bp(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var Y0=null,La=null,Ba=null;function qm(t){if(t=lu(t)){if(typeof Y0!="function")throw Error(se(280));var e=t.stateNode;e&&(e=Oh(e),Y0(t.stateNode,t.type,e))}}function D2(t){La?Ba?Ba.push(t):Ba=[t]:La=t}function P2(){if(La){var t=La,e=Ba;if(Ba=La=null,qm(t),e)for(t=0;t<e.length;t++)qm(e[t])}}function L2(t,e){return t(e)}function B2(){}var Mf=!1;function F2(t,e,n){if(Mf)return t(e,n);Mf=!0;try{return L2(t,e,n)}finally{Mf=!1,(La!==null||Ba!==null)&&(B2(),P2())}}function Ec(t,e){var n=t.stateNode;if(n===null)return null;var r=Oh(n);if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(se(231,e,typeof n));return n}var X0=!1;if($i)try{var Fl={};Object.defineProperty(Fl,"passive",{get:function(){X0=!0}}),window.addEventListener("test",Fl,Fl),window.removeEventListener("test",Fl,Fl)}catch{X0=!1}function bT(t,e,n,r,s,o,c,h,g){var p=Array.prototype.slice.call(arguments,3);try{e.apply(n,p)}catch(y){this.onError(y)}}var rc=!1,kd=null,Md=!1,K0=null,CT={onError:function(t){rc=!0,kd=t}};function ST(t,e,n,r,s,o,c,h,g){rc=!1,kd=null,bT.apply(CT,arguments)}function AT(t,e,n,r,s,o,c,h,g){if(ST.apply(this,arguments),rc){if(rc){var p=kd;rc=!1,kd=null}else throw Error(se(198));Md||(Md=!0,K0=p)}}function Yo(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function j2(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function Zm(t){if(Yo(t)!==t)throw Error(se(188))}function _T(t){var e=t.alternate;if(!e){if(e=Yo(t),e===null)throw Error(se(188));return e!==t?null:t}for(var n=t,r=e;;){var s=n.return;if(s===null)break;var o=s.alternate;if(o===null){if(r=s.return,r!==null){n=r;continue}break}if(s.child===o.child){for(o=s.child;o;){if(o===n)return Zm(s),t;if(o===r)return Zm(s),e;o=o.sibling}throw Error(se(188))}if(n.return!==r.return)n=s,r=o;else{for(var c=!1,h=s.child;h;){if(h===n){c=!0,n=s,r=o;break}if(h===r){c=!0,r=s,n=o;break}h=h.sibling}if(!c){for(h=o.child;h;){if(h===n){c=!0,n=o,r=s;break}if(h===r){c=!0,r=o,n=s;break}h=h.sibling}if(!c)throw Error(se(189))}}if(n.alternate!==r)throw Error(se(190))}if(n.tag!==3)throw Error(se(188));return n.stateNode.current===n?t:e}function U2(t){return t=_T(t),t!==null?V2(t):null}function V2(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=V2(t);if(e!==null)return e;t=t.sibling}return null}var z2=pr.unstable_scheduleCallback,Qm=pr.unstable_cancelCallback,TT=pr.unstable_shouldYield,IT=pr.unstable_requestPaint,Gt=pr.unstable_now,RT=pr.unstable_getCurrentPriorityLevel,Fp=pr.unstable_ImmediatePriority,H2=pr.unstable_UserBlockingPriority,Dd=pr.unstable_NormalPriority,NT=pr.unstable_LowPriority,W2=pr.unstable_IdlePriority,Th=null,Ai=null;function OT(t){if(Ai&&typeof Ai.onCommitFiberRoot=="function")try{Ai.onCommitFiberRoot(Th,t,void 0,(t.current.flags&128)===128)}catch{}}var ei=Math.clz32?Math.clz32:DT,kT=Math.log,MT=Math.LN2;function DT(t){return t>>>=0,t===0?32:31-(kT(t)/MT|0)|0}var Mu=64,Du=4194304;function Zl(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function Pd(t,e){var n=t.pendingLanes;if(n===0)return 0;var r=0,s=t.suspendedLanes,o=t.pingedLanes,c=n&268435455;if(c!==0){var h=c&~s;h!==0?r=Zl(h):(o&=c,o!==0&&(r=Zl(o)))}else c=n&~s,c!==0?r=Zl(c):o!==0&&(r=Zl(o));if(r===0)return 0;if(e!==0&&e!==r&&!(e&s)&&(s=r&-r,o=e&-e,s>=o||s===16&&(o&4194240)!==0))return e;if(r&4&&(r|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)n=31-ei(e),s=1<<n,r|=t[n],e&=~s;return r}function PT(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function LT(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,s=t.expirationTimes,o=t.pendingLanes;0<o;){var c=31-ei(o),h=1<<c,g=s[c];g===-1?(!(h&n)||h&r)&&(s[c]=PT(h,e)):g<=e&&(t.expiredLanes|=h),o&=~h}}function q0(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function $2(){var t=Mu;return Mu<<=1,!(Mu&4194240)&&(Mu=64),t}function Df(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function ou(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-ei(e),t[e]=n}function BT(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var s=31-ei(n),o=1<<s;e[s]=0,r[s]=-1,t[s]=-1,n&=~o}}function jp(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-ei(n),s=1<<r;s&e|t[r]&e&&(t[r]|=e),n&=~s}}var ct=0;function G2(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var Y2,Up,X2,K2,q2,Z0=!1,Pu=[],ks=null,Ms=null,Ds=null,bc=new Map,Cc=new Map,xs=[],FT="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Jm(t,e){switch(t){case"focusin":case"focusout":ks=null;break;case"dragenter":case"dragleave":Ms=null;break;case"mouseover":case"mouseout":Ds=null;break;case"pointerover":case"pointerout":bc.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":Cc.delete(e.pointerId)}}function jl(t,e,n,r,s,o){return t===null||t.nativeEvent!==o?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:o,targetContainers:[s]},e!==null&&(e=lu(e),e!==null&&Up(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,s!==null&&e.indexOf(s)===-1&&e.push(s),t)}function jT(t,e,n,r,s){switch(e){case"focusin":return ks=jl(ks,t,e,n,r,s),!0;case"dragenter":return Ms=jl(Ms,t,e,n,r,s),!0;case"mouseover":return Ds=jl(Ds,t,e,n,r,s),!0;case"pointerover":var o=s.pointerId;return bc.set(o,jl(bc.get(o)||null,t,e,n,r,s)),!0;case"gotpointercapture":return o=s.pointerId,Cc.set(o,jl(Cc.get(o)||null,t,e,n,r,s)),!0}return!1}function Z2(t){var e=Eo(t.target);if(e!==null){var n=Yo(e);if(n!==null){if(e=n.tag,e===13){if(e=j2(n),e!==null){t.blockedOn=e,q2(t.priority,function(){X2(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function ud(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=Q0(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);G0=r,n.target.dispatchEvent(r),G0=null}else return e=lu(n),e!==null&&Up(e),t.blockedOn=n,!1;e.shift()}return!0}function ey(t,e,n){ud(t)&&n.delete(e)}function UT(){Z0=!1,ks!==null&&ud(ks)&&(ks=null),Ms!==null&&ud(Ms)&&(Ms=null),Ds!==null&&ud(Ds)&&(Ds=null),bc.forEach(ey),Cc.forEach(ey)}function Ul(t,e){t.blockedOn===e&&(t.blockedOn=null,Z0||(Z0=!0,pr.unstable_scheduleCallback(pr.unstable_NormalPriority,UT)))}function Sc(t){function e(s){return Ul(s,t)}if(0<Pu.length){Ul(Pu[0],t);for(var n=1;n<Pu.length;n++){var r=Pu[n];r.blockedOn===t&&(r.blockedOn=null)}}for(ks!==null&&Ul(ks,t),Ms!==null&&Ul(Ms,t),Ds!==null&&Ul(Ds,t),bc.forEach(e),Cc.forEach(e),n=0;n<xs.length;n++)r=xs[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<xs.length&&(n=xs[0],n.blockedOn===null);)Z2(n),n.blockedOn===null&&xs.shift()}var Fa=es.ReactCurrentBatchConfig,Ld=!0;function VT(t,e,n,r){var s=ct,o=Fa.transition;Fa.transition=null;try{ct=1,Vp(t,e,n,r)}finally{ct=s,Fa.transition=o}}function zT(t,e,n,r){var s=ct,o=Fa.transition;Fa.transition=null;try{ct=4,Vp(t,e,n,r)}finally{ct=s,Fa.transition=o}}function Vp(t,e,n,r){if(Ld){var s=Q0(t,e,n,r);if(s===null)Wf(t,e,r,Bd,n),Jm(t,r);else if(jT(s,t,e,n,r))r.stopPropagation();else if(Jm(t,r),e&4&&-1<FT.indexOf(t)){for(;s!==null;){var o=lu(s);if(o!==null&&Y2(o),o=Q0(t,e,n,r),o===null&&Wf(t,e,r,Bd,n),o===s)break;s=o}s!==null&&r.stopPropagation()}else Wf(t,e,r,null,n)}}var Bd=null;function Q0(t,e,n,r){if(Bd=null,t=Bp(r),t=Eo(t),t!==null)if(e=Yo(t),e===null)t=null;else if(n=e.tag,n===13){if(t=j2(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return Bd=t,null}function Q2(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(RT()){case Fp:return 1;case H2:return 4;case Dd:case NT:return 16;case W2:return 536870912;default:return 16}default:return 16}}var Ts=null,zp=null,dd=null;function J2(){if(dd)return dd;var t,e=zp,n=e.length,r,s="value"in Ts?Ts.value:Ts.textContent,o=s.length;for(t=0;t<n&&e[t]===s[t];t++);var c=n-t;for(r=1;r<=c&&e[n-r]===s[o-r];r++);return dd=s.slice(t,1<r?1-r:void 0)}function hd(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function Lu(){return!0}function ty(){return!1}function yr(t){function e(n,r,s,o,c){this._reactName=n,this._targetInst=s,this.type=r,this.nativeEvent=o,this.target=c,this.currentTarget=null;for(var h in t)t.hasOwnProperty(h)&&(n=t[h],this[h]=n?n(o):o[h]);return this.isDefaultPrevented=(o.defaultPrevented!=null?o.defaultPrevented:o.returnValue===!1)?Lu:ty,this.isPropagationStopped=ty,this}return Pt(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=Lu)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=Lu)},persist:function(){},isPersistent:Lu}),e}var gl={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Hp=yr(gl),au=Pt({},gl,{view:0,detail:0}),HT=yr(au),Pf,Lf,Vl,Ih=Pt({},au,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Wp,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==Vl&&(Vl&&t.type==="mousemove"?(Pf=t.screenX-Vl.screenX,Lf=t.screenY-Vl.screenY):Lf=Pf=0,Vl=t),Pf)},movementY:function(t){return"movementY"in t?t.movementY:Lf}}),ny=yr(Ih),WT=Pt({},Ih,{dataTransfer:0}),$T=yr(WT),GT=Pt({},au,{relatedTarget:0}),Bf=yr(GT),YT=Pt({},gl,{animationName:0,elapsedTime:0,pseudoElement:0}),XT=yr(YT),KT=Pt({},gl,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),qT=yr(KT),ZT=Pt({},gl,{data:0}),ry=yr(ZT),QT={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},JT={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},e3={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function t3(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=e3[t])?!!e[t]:!1}function Wp(){return t3}var n3=Pt({},au,{key:function(t){if(t.key){var e=QT[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=hd(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?JT[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Wp,charCode:function(t){return t.type==="keypress"?hd(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?hd(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),r3=yr(n3),i3=Pt({},Ih,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),iy=yr(i3),s3=Pt({},au,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Wp}),o3=yr(s3),a3=Pt({},gl,{propertyName:0,elapsedTime:0,pseudoElement:0}),l3=yr(a3),c3=Pt({},Ih,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),u3=yr(c3),d3=[9,13,27,32],$p=$i&&"CompositionEvent"in window,ic=null;$i&&"documentMode"in document&&(ic=document.documentMode);var h3=$i&&"TextEvent"in window&&!ic,eE=$i&&(!$p||ic&&8<ic&&11>=ic),sy=" ",oy=!1;function tE(t,e){switch(t){case"keyup":return d3.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function nE(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var wa=!1;function f3(t,e){switch(t){case"compositionend":return nE(e);case"keypress":return e.which!==32?null:(oy=!0,sy);case"textInput":return t=e.data,t===sy&&oy?null:t;default:return null}}function p3(t,e){if(wa)return t==="compositionend"||!$p&&tE(t,e)?(t=J2(),dd=zp=Ts=null,wa=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return eE&&e.locale!=="ko"?null:e.data;default:return null}}var g3={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function ay(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!g3[t.type]:e==="textarea"}function rE(t,e,n,r){D2(r),e=Fd(e,"onChange"),0<e.length&&(n=new Hp("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var sc=null,Ac=null;function m3(t){pE(t,0)}function Rh(t){var e=Ea(t);if(T2(e))return t}function y3(t,e){if(t==="change")return e}var iE=!1;if($i){var Ff;if($i){var jf="oninput"in document;if(!jf){var ly=document.createElement("div");ly.setAttribute("oninput","return;"),jf=typeof ly.oninput=="function"}Ff=jf}else Ff=!1;iE=Ff&&(!document.documentMode||9<document.documentMode)}function cy(){sc&&(sc.detachEvent("onpropertychange",sE),Ac=sc=null)}function sE(t){if(t.propertyName==="value"&&Rh(Ac)){var e=[];rE(e,Ac,t,Bp(t)),F2(m3,e)}}function w3(t,e,n){t==="focusin"?(cy(),sc=e,Ac=n,sc.attachEvent("onpropertychange",sE)):t==="focusout"&&cy()}function x3(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return Rh(Ac)}function v3(t,e){if(t==="click")return Rh(e)}function E3(t,e){if(t==="input"||t==="change")return Rh(e)}function b3(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var ri=typeof Object.is=="function"?Object.is:b3;function _c(t,e){if(ri(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var s=n[r];if(!D0.call(e,s)||!ri(t[s],e[s]))return!1}return!0}function uy(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function dy(t,e){var n=uy(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=uy(n)}}function oE(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?oE(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function aE(){for(var t=window,e=Od();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=Od(t.document)}return e}function Gp(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function C3(t){var e=aE(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&oE(n.ownerDocument.documentElement,n)){if(r!==null&&Gp(n)){if(e=r.start,t=r.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var s=n.textContent.length,o=Math.min(r.start,s);r=r.end===void 0?o:Math.min(r.end,s),!t.extend&&o>r&&(s=r,r=o,o=s),s=dy(n,o);var c=dy(n,r);s&&c&&(t.rangeCount!==1||t.anchorNode!==s.node||t.anchorOffset!==s.offset||t.focusNode!==c.node||t.focusOffset!==c.offset)&&(e=e.createRange(),e.setStart(s.node,s.offset),t.removeAllRanges(),o>r?(t.addRange(e),t.extend(c.node,c.offset)):(e.setEnd(c.node,c.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var S3=$i&&"documentMode"in document&&11>=document.documentMode,xa=null,J0=null,oc=null,e1=!1;function hy(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;e1||xa==null||xa!==Od(r)||(r=xa,"selectionStart"in r&&Gp(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),oc&&_c(oc,r)||(oc=r,r=Fd(J0,"onSelect"),0<r.length&&(e=new Hp("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=xa)))}function Bu(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var va={animationend:Bu("Animation","AnimationEnd"),animationiteration:Bu("Animation","AnimationIteration"),animationstart:Bu("Animation","AnimationStart"),transitionend:Bu("Transition","TransitionEnd")},Uf={},lE={};$i&&(lE=document.createElement("div").style,"AnimationEvent"in window||(delete va.animationend.animation,delete va.animationiteration.animation,delete va.animationstart.animation),"TransitionEvent"in window||delete va.transitionend.transition);function Nh(t){if(Uf[t])return Uf[t];if(!va[t])return t;var e=va[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in lE)return Uf[t]=e[n];return t}var cE=Nh("animationend"),uE=Nh("animationiteration"),dE=Nh("animationstart"),hE=Nh("transitionend"),fE=new Map,fy="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Js(t,e){fE.set(t,e),Go(e,[t])}for(var Vf=0;Vf<fy.length;Vf++){var zf=fy[Vf],A3=zf.toLowerCase(),_3=zf[0].toUpperCase()+zf.slice(1);Js(A3,"on"+_3)}Js(cE,"onAnimationEnd");Js(uE,"onAnimationIteration");Js(dE,"onAnimationStart");Js("dblclick","onDoubleClick");Js("focusin","onFocus");Js("focusout","onBlur");Js(hE,"onTransitionEnd");Ja("onMouseEnter",["mouseout","mouseover"]);Ja("onMouseLeave",["mouseout","mouseover"]);Ja("onPointerEnter",["pointerout","pointerover"]);Ja("onPointerLeave",["pointerout","pointerover"]);Go("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Go("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Go("onBeforeInput",["compositionend","keypress","textInput","paste"]);Go("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Go("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Go("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Ql="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),T3=new Set("cancel close invalid load scroll toggle".split(" ").concat(Ql));function py(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,AT(r,e,void 0,t),t.currentTarget=null}function pE(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],s=r.event;r=r.listeners;e:{var o=void 0;if(e)for(var c=r.length-1;0<=c;c--){var h=r[c],g=h.instance,p=h.currentTarget;if(h=h.listener,g!==o&&s.isPropagationStopped())break e;py(s,h,p),o=g}else for(c=0;c<r.length;c++){if(h=r[c],g=h.instance,p=h.currentTarget,h=h.listener,g!==o&&s.isPropagationStopped())break e;py(s,h,p),o=g}}}if(Md)throw t=K0,Md=!1,K0=null,t}function vt(t,e){var n=e[s1];n===void 0&&(n=e[s1]=new Set);var r=t+"__bubble";n.has(r)||(gE(e,t,2,!1),n.add(r))}function Hf(t,e,n){var r=0;e&&(r|=4),gE(n,t,r,e)}var Fu="_reactListening"+Math.random().toString(36).slice(2);function Tc(t){if(!t[Fu]){t[Fu]=!0,b2.forEach(function(n){n!=="selectionchange"&&(T3.has(n)||Hf(n,!1,t),Hf(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[Fu]||(e[Fu]=!0,Hf("selectionchange",!1,e))}}function gE(t,e,n,r){switch(Q2(e)){case 1:var s=VT;break;case 4:s=zT;break;default:s=Vp}n=s.bind(null,e,n,t),s=void 0,!X0||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(s=!0),r?s!==void 0?t.addEventListener(e,n,{capture:!0,passive:s}):t.addEventListener(e,n,!0):s!==void 0?t.addEventListener(e,n,{passive:s}):t.addEventListener(e,n,!1)}function Wf(t,e,n,r,s){var o=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var c=r.tag;if(c===3||c===4){var h=r.stateNode.containerInfo;if(h===s||h.nodeType===8&&h.parentNode===s)break;if(c===4)for(c=r.return;c!==null;){var g=c.tag;if((g===3||g===4)&&(g=c.stateNode.containerInfo,g===s||g.nodeType===8&&g.parentNode===s))return;c=c.return}for(;h!==null;){if(c=Eo(h),c===null)return;if(g=c.tag,g===5||g===6){r=o=c;continue e}h=h.parentNode}}r=r.return}F2(function(){var p=o,y=Bp(n),x=[];e:{var E=fE.get(t);if(E!==void 0){var b=Hp,I=t;switch(t){case"keypress":if(hd(n)===0)break e;case"keydown":case"keyup":b=r3;break;case"focusin":I="focus",b=Bf;break;case"focusout":I="blur",b=Bf;break;case"beforeblur":case"afterblur":b=Bf;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":b=ny;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":b=$T;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":b=o3;break;case cE:case uE:case dE:b=XT;break;case hE:b=l3;break;case"scroll":b=HT;break;case"wheel":b=u3;break;case"copy":case"cut":case"paste":b=qT;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":b=iy}var S=(e&4)!==0,R=!S&&t==="scroll",A=S?E!==null?E+"Capture":null:E;S=[];for(var _=p,T;_!==null;){T=_;var D=T.stateNode;if(T.tag===5&&D!==null&&(T=D,A!==null&&(D=Ec(_,A),D!=null&&S.push(Ic(_,D,T)))),R)break;_=_.return}0<S.length&&(E=new b(E,I,null,n,y),x.push({event:E,listeners:S}))}}if(!(e&7)){e:{if(E=t==="mouseover"||t==="pointerover",b=t==="mouseout"||t==="pointerout",E&&n!==G0&&(I=n.relatedTarget||n.fromElement)&&(Eo(I)||I[Gi]))break e;if((b||E)&&(E=y.window===y?y:(E=y.ownerDocument)?E.defaultView||E.parentWindow:window,b?(I=n.relatedTarget||n.toElement,b=p,I=I?Eo(I):null,I!==null&&(R=Yo(I),I!==R||I.tag!==5&&I.tag!==6)&&(I=null)):(b=null,I=p),b!==I)){if(S=ny,D="onMouseLeave",A="onMouseEnter",_="mouse",(t==="pointerout"||t==="pointerover")&&(S=iy,D="onPointerLeave",A="onPointerEnter",_="pointer"),R=b==null?E:Ea(b),T=I==null?E:Ea(I),E=new S(D,_+"leave",b,n,y),E.target=R,E.relatedTarget=T,D=null,Eo(y)===p&&(S=new S(A,_+"enter",I,n,y),S.target=T,S.relatedTarget=R,D=S),R=D,b&&I)t:{for(S=b,A=I,_=0,T=S;T;T=ia(T))_++;for(T=0,D=A;D;D=ia(D))T++;for(;0<_-T;)S=ia(S),_--;for(;0<T-_;)A=ia(A),T--;for(;_--;){if(S===A||A!==null&&S===A.alternate)break t;S=ia(S),A=ia(A)}S=null}else S=null;b!==null&&gy(x,E,b,S,!1),I!==null&&R!==null&&gy(x,R,I,S,!0)}}e:{if(E=p?Ea(p):window,b=E.nodeName&&E.nodeName.toLowerCase(),b==="select"||b==="input"&&E.type==="file")var F=y3;else if(ay(E))if(iE)F=E3;else{F=x3;var j=w3}else(b=E.nodeName)&&b.toLowerCase()==="input"&&(E.type==="checkbox"||E.type==="radio")&&(F=v3);if(F&&(F=F(t,p))){rE(x,F,n,y);break e}j&&j(t,E,p),t==="focusout"&&(j=E._wrapperState)&&j.controlled&&E.type==="number"&&V0(E,"number",E.value)}switch(j=p?Ea(p):window,t){case"focusin":(ay(j)||j.contentEditable==="true")&&(xa=j,J0=p,oc=null);break;case"focusout":oc=J0=xa=null;break;case"mousedown":e1=!0;break;case"contextmenu":case"mouseup":case"dragend":e1=!1,hy(x,n,y);break;case"selectionchange":if(S3)break;case"keydown":case"keyup":hy(x,n,y)}var B;if($p)e:{switch(t){case"compositionstart":var W="onCompositionStart";break e;case"compositionend":W="onCompositionEnd";break e;case"compositionupdate":W="onCompositionUpdate";break e}W=void 0}else wa?tE(t,n)&&(W="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(W="onCompositionStart");W&&(eE&&n.locale!=="ko"&&(wa||W!=="onCompositionStart"?W==="onCompositionEnd"&&wa&&(B=J2()):(Ts=y,zp="value"in Ts?Ts.value:Ts.textContent,wa=!0)),j=Fd(p,W),0<j.length&&(W=new ry(W,t,null,n,y),x.push({event:W,listeners:j}),B?W.data=B:(B=nE(n),B!==null&&(W.data=B)))),(B=h3?f3(t,n):p3(t,n))&&(p=Fd(p,"onBeforeInput"),0<p.length&&(y=new ry("onBeforeInput","beforeinput",null,n,y),x.push({event:y,listeners:p}),y.data=B))}pE(x,e)})}function Ic(t,e,n){return{instance:t,listener:e,currentTarget:n}}function Fd(t,e){for(var n=e+"Capture",r=[];t!==null;){var s=t,o=s.stateNode;s.tag===5&&o!==null&&(s=o,o=Ec(t,n),o!=null&&r.unshift(Ic(t,o,s)),o=Ec(t,e),o!=null&&r.push(Ic(t,o,s))),t=t.return}return r}function ia(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function gy(t,e,n,r,s){for(var o=e._reactName,c=[];n!==null&&n!==r;){var h=n,g=h.alternate,p=h.stateNode;if(g!==null&&g===r)break;h.tag===5&&p!==null&&(h=p,s?(g=Ec(n,o),g!=null&&c.unshift(Ic(n,g,h))):s||(g=Ec(n,o),g!=null&&c.push(Ic(n,g,h)))),n=n.return}c.length!==0&&t.push({event:e,listeners:c})}var I3=/\r\n?/g,R3=/\u0000|\uFFFD/g;function my(t){return(typeof t=="string"?t:""+t).replace(I3,`
`).replace(R3,"")}function ju(t,e,n){if(e=my(e),my(t)!==e&&n)throw Error(se(425))}function jd(){}var t1=null,n1=null;function r1(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var i1=typeof setTimeout=="function"?setTimeout:void 0,N3=typeof clearTimeout=="function"?clearTimeout:void 0,yy=typeof Promise=="function"?Promise:void 0,O3=typeof queueMicrotask=="function"?queueMicrotask:typeof yy<"u"?function(t){return yy.resolve(null).then(t).catch(k3)}:i1;function k3(t){setTimeout(function(){throw t})}function $f(t,e){var n=e,r=0;do{var s=n.nextSibling;if(t.removeChild(n),s&&s.nodeType===8)if(n=s.data,n==="/$"){if(r===0){t.removeChild(s),Sc(e);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=s}while(n);Sc(e)}function Ps(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function wy(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var ml=Math.random().toString(36).slice(2),Ci="__reactFiber$"+ml,Rc="__reactProps$"+ml,Gi="__reactContainer$"+ml,s1="__reactEvents$"+ml,M3="__reactListeners$"+ml,D3="__reactHandles$"+ml;function Eo(t){var e=t[Ci];if(e)return e;for(var n=t.parentNode;n;){if(e=n[Gi]||n[Ci]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=wy(t);t!==null;){if(n=t[Ci])return n;t=wy(t)}return e}t=n,n=t.parentNode}return null}function lu(t){return t=t[Ci]||t[Gi],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function Ea(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(se(33))}function Oh(t){return t[Rc]||null}var o1=[],ba=-1;function eo(t){return{current:t}}function bt(t){0>ba||(t.current=o1[ba],o1[ba]=null,ba--)}function mt(t,e){ba++,o1[ba]=t.current,t.current=e}var Ws={},Nn=eo(Ws),Qn=eo(!1),Bo=Ws;function el(t,e){var n=t.type.contextTypes;if(!n)return Ws;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var s={},o;for(o in n)s[o]=e[o];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=s),s}function Jn(t){return t=t.childContextTypes,t!=null}function Ud(){bt(Qn),bt(Nn)}function xy(t,e,n){if(Nn.current!==Ws)throw Error(se(168));mt(Nn,e),mt(Qn,n)}function mE(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var s in r)if(!(s in e))throw Error(se(108,wT(t)||"Unknown",s));return Pt({},n,r)}function Vd(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||Ws,Bo=Nn.current,mt(Nn,t),mt(Qn,Qn.current),!0}function vy(t,e,n){var r=t.stateNode;if(!r)throw Error(se(169));n?(t=mE(t,e,Bo),r.__reactInternalMemoizedMergedChildContext=t,bt(Qn),bt(Nn),mt(Nn,t)):bt(Qn),mt(Qn,n)}var ji=null,kh=!1,Gf=!1;function yE(t){ji===null?ji=[t]:ji.push(t)}function P3(t){kh=!0,yE(t)}function to(){if(!Gf&&ji!==null){Gf=!0;var t=0,e=ct;try{var n=ji;for(ct=1;t<n.length;t++){var r=n[t];do r=r(!0);while(r!==null)}ji=null,kh=!1}catch(s){throw ji!==null&&(ji=ji.slice(t+1)),z2(Fp,to),s}finally{ct=e,Gf=!1}}return null}var Ca=[],Sa=0,zd=null,Hd=0,Sr=[],Ar=0,Fo=null,Vi=1,zi="";function go(t,e){Ca[Sa++]=Hd,Ca[Sa++]=zd,zd=t,Hd=e}function wE(t,e,n){Sr[Ar++]=Vi,Sr[Ar++]=zi,Sr[Ar++]=Fo,Fo=t;var r=Vi;t=zi;var s=32-ei(r)-1;r&=~(1<<s),n+=1;var o=32-ei(e)+s;if(30<o){var c=s-s%5;o=(r&(1<<c)-1).toString(32),r>>=c,s-=c,Vi=1<<32-ei(e)+s|n<<s|r,zi=o+t}else Vi=1<<o|n<<s|r,zi=t}function Yp(t){t.return!==null&&(go(t,1),wE(t,1,0))}function Xp(t){for(;t===zd;)zd=Ca[--Sa],Ca[Sa]=null,Hd=Ca[--Sa],Ca[Sa]=null;for(;t===Fo;)Fo=Sr[--Ar],Sr[Ar]=null,zi=Sr[--Ar],Sr[Ar]=null,Vi=Sr[--Ar],Sr[Ar]=null}var hr=null,dr=null,It=!1,Jr=null;function xE(t,e){var n=_r(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function Ey(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,hr=t,dr=Ps(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,hr=t,dr=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=Fo!==null?{id:Vi,overflow:zi}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=_r(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,hr=t,dr=null,!0):!1;default:return!1}}function a1(t){return(t.mode&1)!==0&&(t.flags&128)===0}function l1(t){if(It){var e=dr;if(e){var n=e;if(!Ey(t,e)){if(a1(t))throw Error(se(418));e=Ps(n.nextSibling);var r=hr;e&&Ey(t,e)?xE(r,n):(t.flags=t.flags&-4097|2,It=!1,hr=t)}}else{if(a1(t))throw Error(se(418));t.flags=t.flags&-4097|2,It=!1,hr=t}}}function by(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;hr=t}function Uu(t){if(t!==hr)return!1;if(!It)return by(t),It=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!r1(t.type,t.memoizedProps)),e&&(e=dr)){if(a1(t))throw vE(),Error(se(418));for(;e;)xE(t,e),e=Ps(e.nextSibling)}if(by(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(se(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){dr=Ps(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}dr=null}}else dr=hr?Ps(t.stateNode.nextSibling):null;return!0}function vE(){for(var t=dr;t;)t=Ps(t.nextSibling)}function tl(){dr=hr=null,It=!1}function Kp(t){Jr===null?Jr=[t]:Jr.push(t)}var L3=es.ReactCurrentBatchConfig;function zl(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(se(309));var r=n.stateNode}if(!r)throw Error(se(147,t));var s=r,o=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===o?e.ref:(e=function(c){var h=s.refs;c===null?delete h[o]:h[o]=c},e._stringRef=o,e)}if(typeof t!="string")throw Error(se(284));if(!n._owner)throw Error(se(290,t))}return t}function Vu(t,e){throw t=Object.prototype.toString.call(e),Error(se(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function Cy(t){var e=t._init;return e(t._payload)}function EE(t){function e(A,_){if(t){var T=A.deletions;T===null?(A.deletions=[_],A.flags|=16):T.push(_)}}function n(A,_){if(!t)return null;for(;_!==null;)e(A,_),_=_.sibling;return null}function r(A,_){for(A=new Map;_!==null;)_.key!==null?A.set(_.key,_):A.set(_.index,_),_=_.sibling;return A}function s(A,_){return A=js(A,_),A.index=0,A.sibling=null,A}function o(A,_,T){return A.index=T,t?(T=A.alternate,T!==null?(T=T.index,T<_?(A.flags|=2,_):T):(A.flags|=2,_)):(A.flags|=1048576,_)}function c(A){return t&&A.alternate===null&&(A.flags|=2),A}function h(A,_,T,D){return _===null||_.tag!==6?(_=Jf(T,A.mode,D),_.return=A,_):(_=s(_,T),_.return=A,_)}function g(A,_,T,D){var F=T.type;return F===ya?y(A,_,T.props.children,D,T.key):_!==null&&(_.elementType===F||typeof F=="object"&&F!==null&&F.$$typeof===gs&&Cy(F)===_.type)?(D=s(_,T.props),D.ref=zl(A,_,T),D.return=A,D):(D=xd(T.type,T.key,T.props,null,A.mode,D),D.ref=zl(A,_,T),D.return=A,D)}function p(A,_,T,D){return _===null||_.tag!==4||_.stateNode.containerInfo!==T.containerInfo||_.stateNode.implementation!==T.implementation?(_=e0(T,A.mode,D),_.return=A,_):(_=s(_,T.children||[]),_.return=A,_)}function y(A,_,T,D,F){return _===null||_.tag!==7?(_=Do(T,A.mode,D,F),_.return=A,_):(_=s(_,T),_.return=A,_)}function x(A,_,T){if(typeof _=="string"&&_!==""||typeof _=="number")return _=Jf(""+_,A.mode,T),_.return=A,_;if(typeof _=="object"&&_!==null){switch(_.$$typeof){case Nu:return T=xd(_.type,_.key,_.props,null,A.mode,T),T.ref=zl(A,null,_),T.return=A,T;case ma:return _=e0(_,A.mode,T),_.return=A,_;case gs:var D=_._init;return x(A,D(_._payload),T)}if(ql(_)||Bl(_))return _=Do(_,A.mode,T,null),_.return=A,_;Vu(A,_)}return null}function E(A,_,T,D){var F=_!==null?_.key:null;if(typeof T=="string"&&T!==""||typeof T=="number")return F!==null?null:h(A,_,""+T,D);if(typeof T=="object"&&T!==null){switch(T.$$typeof){case Nu:return T.key===F?g(A,_,T,D):null;case ma:return T.key===F?p(A,_,T,D):null;case gs:return F=T._init,E(A,_,F(T._payload),D)}if(ql(T)||Bl(T))return F!==null?null:y(A,_,T,D,null);Vu(A,T)}return null}function b(A,_,T,D,F){if(typeof D=="string"&&D!==""||typeof D=="number")return A=A.get(T)||null,h(_,A,""+D,F);if(typeof D=="object"&&D!==null){switch(D.$$typeof){case Nu:return A=A.get(D.key===null?T:D.key)||null,g(_,A,D,F);case ma:return A=A.get(D.key===null?T:D.key)||null,p(_,A,D,F);case gs:var j=D._init;return b(A,_,T,j(D._payload),F)}if(ql(D)||Bl(D))return A=A.get(T)||null,y(_,A,D,F,null);Vu(_,D)}return null}function I(A,_,T,D){for(var F=null,j=null,B=_,W=_=0,H=null;B!==null&&W<T.length;W++){B.index>W?(H=B,B=null):H=B.sibling;var te=E(A,B,T[W],D);if(te===null){B===null&&(B=H);break}t&&B&&te.alternate===null&&e(A,B),_=o(te,_,W),j===null?F=te:j.sibling=te,j=te,B=H}if(W===T.length)return n(A,B),It&&go(A,W),F;if(B===null){for(;W<T.length;W++)B=x(A,T[W],D),B!==null&&(_=o(B,_,W),j===null?F=B:j.sibling=B,j=B);return It&&go(A,W),F}for(B=r(A,B);W<T.length;W++)H=b(B,A,W,T[W],D),H!==null&&(t&&H.alternate!==null&&B.delete(H.key===null?W:H.key),_=o(H,_,W),j===null?F=H:j.sibling=H,j=H);return t&&B.forEach(function(he){return e(A,he)}),It&&go(A,W),F}function S(A,_,T,D){var F=Bl(T);if(typeof F!="function")throw Error(se(150));if(T=F.call(T),T==null)throw Error(se(151));for(var j=F=null,B=_,W=_=0,H=null,te=T.next();B!==null&&!te.done;W++,te=T.next()){B.index>W?(H=B,B=null):H=B.sibling;var he=E(A,B,te.value,D);if(he===null){B===null&&(B=H);break}t&&B&&he.alternate===null&&e(A,B),_=o(he,_,W),j===null?F=he:j.sibling=he,j=he,B=H}if(te.done)return n(A,B),It&&go(A,W),F;if(B===null){for(;!te.done;W++,te=T.next())te=x(A,te.value,D),te!==null&&(_=o(te,_,W),j===null?F=te:j.sibling=te,j=te);return It&&go(A,W),F}for(B=r(A,B);!te.done;W++,te=T.next())te=b(B,A,W,te.value,D),te!==null&&(t&&te.alternate!==null&&B.delete(te.key===null?W:te.key),_=o(te,_,W),j===null?F=te:j.sibling=te,j=te);return t&&B.forEach(function(Q){return e(A,Q)}),It&&go(A,W),F}function R(A,_,T,D){if(typeof T=="object"&&T!==null&&T.type===ya&&T.key===null&&(T=T.props.children),typeof T=="object"&&T!==null){switch(T.$$typeof){case Nu:e:{for(var F=T.key,j=_;j!==null;){if(j.key===F){if(F=T.type,F===ya){if(j.tag===7){n(A,j.sibling),_=s(j,T.props.children),_.return=A,A=_;break e}}else if(j.elementType===F||typeof F=="object"&&F!==null&&F.$$typeof===gs&&Cy(F)===j.type){n(A,j.sibling),_=s(j,T.props),_.ref=zl(A,j,T),_.return=A,A=_;break e}n(A,j);break}else e(A,j);j=j.sibling}T.type===ya?(_=Do(T.props.children,A.mode,D,T.key),_.return=A,A=_):(D=xd(T.type,T.key,T.props,null,A.mode,D),D.ref=zl(A,_,T),D.return=A,A=D)}return c(A);case ma:e:{for(j=T.key;_!==null;){if(_.key===j)if(_.tag===4&&_.stateNode.containerInfo===T.containerInfo&&_.stateNode.implementation===T.implementation){n(A,_.sibling),_=s(_,T.children||[]),_.return=A,A=_;break e}else{n(A,_);break}else e(A,_);_=_.sibling}_=e0(T,A.mode,D),_.return=A,A=_}return c(A);case gs:return j=T._init,R(A,_,j(T._payload),D)}if(ql(T))return I(A,_,T,D);if(Bl(T))return S(A,_,T,D);Vu(A,T)}return typeof T=="string"&&T!==""||typeof T=="number"?(T=""+T,_!==null&&_.tag===6?(n(A,_.sibling),_=s(_,T),_.return=A,A=_):(n(A,_),_=Jf(T,A.mode,D),_.return=A,A=_),c(A)):n(A,_)}return R}var nl=EE(!0),bE=EE(!1),Wd=eo(null),$d=null,Aa=null,qp=null;function Zp(){qp=Aa=$d=null}function Qp(t){var e=Wd.current;bt(Wd),t._currentValue=e}function c1(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function ja(t,e){$d=t,qp=Aa=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(qn=!0),t.firstContext=null)}function Nr(t){var e=t._currentValue;if(qp!==t)if(t={context:t,memoizedValue:e,next:null},Aa===null){if($d===null)throw Error(se(308));Aa=t,$d.dependencies={lanes:0,firstContext:t}}else Aa=Aa.next=t;return e}var bo=null;function Jp(t){bo===null?bo=[t]:bo.push(t)}function CE(t,e,n,r){var s=e.interleaved;return s===null?(n.next=n,Jp(e)):(n.next=s.next,s.next=n),e.interleaved=n,Yi(t,r)}function Yi(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var ms=!1;function eg(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function SE(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function Wi(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function Ls(t,e,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,et&2){var s=r.pending;return s===null?e.next=e:(e.next=s.next,s.next=e),r.pending=e,Yi(t,n)}return s=r.interleaved,s===null?(e.next=e,Jp(r)):(e.next=s.next,s.next=e),r.interleaved=e,Yi(t,n)}function fd(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,jp(t,n)}}function Sy(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var s=null,o=null;if(n=n.firstBaseUpdate,n!==null){do{var c={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};o===null?s=o=c:o=o.next=c,n=n.next}while(n!==null);o===null?s=o=e:o=o.next=e}else s=o=e;n={baseState:r.baseState,firstBaseUpdate:s,lastBaseUpdate:o,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function Gd(t,e,n,r){var s=t.updateQueue;ms=!1;var o=s.firstBaseUpdate,c=s.lastBaseUpdate,h=s.shared.pending;if(h!==null){s.shared.pending=null;var g=h,p=g.next;g.next=null,c===null?o=p:c.next=p,c=g;var y=t.alternate;y!==null&&(y=y.updateQueue,h=y.lastBaseUpdate,h!==c&&(h===null?y.firstBaseUpdate=p:h.next=p,y.lastBaseUpdate=g))}if(o!==null){var x=s.baseState;c=0,y=p=g=null,h=o;do{var E=h.lane,b=h.eventTime;if((r&E)===E){y!==null&&(y=y.next={eventTime:b,lane:0,tag:h.tag,payload:h.payload,callback:h.callback,next:null});e:{var I=t,S=h;switch(E=e,b=n,S.tag){case 1:if(I=S.payload,typeof I=="function"){x=I.call(b,x,E);break e}x=I;break e;case 3:I.flags=I.flags&-65537|128;case 0:if(I=S.payload,E=typeof I=="function"?I.call(b,x,E):I,E==null)break e;x=Pt({},x,E);break e;case 2:ms=!0}}h.callback!==null&&h.lane!==0&&(t.flags|=64,E=s.effects,E===null?s.effects=[h]:E.push(h))}else b={eventTime:b,lane:E,tag:h.tag,payload:h.payload,callback:h.callback,next:null},y===null?(p=y=b,g=x):y=y.next=b,c|=E;if(h=h.next,h===null){if(h=s.shared.pending,h===null)break;E=h,h=E.next,E.next=null,s.lastBaseUpdate=E,s.shared.pending=null}}while(!0);if(y===null&&(g=x),s.baseState=g,s.firstBaseUpdate=p,s.lastBaseUpdate=y,e=s.shared.interleaved,e!==null){s=e;do c|=s.lane,s=s.next;while(s!==e)}else o===null&&(s.shared.lanes=0);Uo|=c,t.lanes=c,t.memoizedState=x}}function Ay(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],s=r.callback;if(s!==null){if(r.callback=null,r=n,typeof s!="function")throw Error(se(191,s));s.call(r)}}}var cu={},_i=eo(cu),Nc=eo(cu),Oc=eo(cu);function Co(t){if(t===cu)throw Error(se(174));return t}function tg(t,e){switch(mt(Oc,e),mt(Nc,t),mt(_i,cu),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:H0(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=H0(e,t)}bt(_i),mt(_i,e)}function rl(){bt(_i),bt(Nc),bt(Oc)}function AE(t){Co(Oc.current);var e=Co(_i.current),n=H0(e,t.type);e!==n&&(mt(Nc,t),mt(_i,n))}function ng(t){Nc.current===t&&(bt(_i),bt(Nc))}var kt=eo(0);function Yd(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var Yf=[];function rg(){for(var t=0;t<Yf.length;t++)Yf[t]._workInProgressVersionPrimary=null;Yf.length=0}var pd=es.ReactCurrentDispatcher,Xf=es.ReactCurrentBatchConfig,jo=0,Dt=null,nn=null,un=null,Xd=!1,ac=!1,kc=0,B3=0;function An(){throw Error(se(321))}function ig(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!ri(t[n],e[n]))return!1;return!0}function sg(t,e,n,r,s,o){if(jo=o,Dt=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,pd.current=t===null||t.memoizedState===null?V3:z3,t=n(r,s),ac){o=0;do{if(ac=!1,kc=0,25<=o)throw Error(se(301));o+=1,un=nn=null,e.updateQueue=null,pd.current=H3,t=n(r,s)}while(ac)}if(pd.current=Kd,e=nn!==null&&nn.next!==null,jo=0,un=nn=Dt=null,Xd=!1,e)throw Error(se(300));return t}function og(){var t=kc!==0;return kc=0,t}function yi(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return un===null?Dt.memoizedState=un=t:un=un.next=t,un}function Or(){if(nn===null){var t=Dt.alternate;t=t!==null?t.memoizedState:null}else t=nn.next;var e=un===null?Dt.memoizedState:un.next;if(e!==null)un=e,nn=t;else{if(t===null)throw Error(se(310));nn=t,t={memoizedState:nn.memoizedState,baseState:nn.baseState,baseQueue:nn.baseQueue,queue:nn.queue,next:null},un===null?Dt.memoizedState=un=t:un=un.next=t}return un}function Mc(t,e){return typeof e=="function"?e(t):e}function Kf(t){var e=Or(),n=e.queue;if(n===null)throw Error(se(311));n.lastRenderedReducer=t;var r=nn,s=r.baseQueue,o=n.pending;if(o!==null){if(s!==null){var c=s.next;s.next=o.next,o.next=c}r.baseQueue=s=o,n.pending=null}if(s!==null){o=s.next,r=r.baseState;var h=c=null,g=null,p=o;do{var y=p.lane;if((jo&y)===y)g!==null&&(g=g.next={lane:0,action:p.action,hasEagerState:p.hasEagerState,eagerState:p.eagerState,next:null}),r=p.hasEagerState?p.eagerState:t(r,p.action);else{var x={lane:y,action:p.action,hasEagerState:p.hasEagerState,eagerState:p.eagerState,next:null};g===null?(h=g=x,c=r):g=g.next=x,Dt.lanes|=y,Uo|=y}p=p.next}while(p!==null&&p!==o);g===null?c=r:g.next=h,ri(r,e.memoizedState)||(qn=!0),e.memoizedState=r,e.baseState=c,e.baseQueue=g,n.lastRenderedState=r}if(t=n.interleaved,t!==null){s=t;do o=s.lane,Dt.lanes|=o,Uo|=o,s=s.next;while(s!==t)}else s===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function qf(t){var e=Or(),n=e.queue;if(n===null)throw Error(se(311));n.lastRenderedReducer=t;var r=n.dispatch,s=n.pending,o=e.memoizedState;if(s!==null){n.pending=null;var c=s=s.next;do o=t(o,c.action),c=c.next;while(c!==s);ri(o,e.memoizedState)||(qn=!0),e.memoizedState=o,e.baseQueue===null&&(e.baseState=o),n.lastRenderedState=o}return[o,r]}function _E(){}function TE(t,e){var n=Dt,r=Or(),s=e(),o=!ri(r.memoizedState,s);if(o&&(r.memoizedState=s,qn=!0),r=r.queue,ag(NE.bind(null,n,r,t),[t]),r.getSnapshot!==e||o||un!==null&&un.memoizedState.tag&1){if(n.flags|=2048,Dc(9,RE.bind(null,n,r,s,e),void 0,null),dn===null)throw Error(se(349));jo&30||IE(n,e,s)}return s}function IE(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=Dt.updateQueue,e===null?(e={lastEffect:null,stores:null},Dt.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function RE(t,e,n,r){e.value=n,e.getSnapshot=r,OE(e)&&kE(t)}function NE(t,e,n){return n(function(){OE(e)&&kE(t)})}function OE(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!ri(t,n)}catch{return!0}}function kE(t){var e=Yi(t,1);e!==null&&ti(e,t,1,-1)}function _y(t){var e=yi();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Mc,lastRenderedState:t},e.queue=t,t=t.dispatch=U3.bind(null,Dt,t),[e.memoizedState,t]}function Dc(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},e=Dt.updateQueue,e===null?(e={lastEffect:null,stores:null},Dt.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t)),t}function ME(){return Or().memoizedState}function gd(t,e,n,r){var s=yi();Dt.flags|=t,s.memoizedState=Dc(1|e,n,void 0,r===void 0?null:r)}function Mh(t,e,n,r){var s=Or();r=r===void 0?null:r;var o=void 0;if(nn!==null){var c=nn.memoizedState;if(o=c.destroy,r!==null&&ig(r,c.deps)){s.memoizedState=Dc(e,n,o,r);return}}Dt.flags|=t,s.memoizedState=Dc(1|e,n,o,r)}function Ty(t,e){return gd(8390656,8,t,e)}function ag(t,e){return Mh(2048,8,t,e)}function DE(t,e){return Mh(4,2,t,e)}function PE(t,e){return Mh(4,4,t,e)}function LE(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function BE(t,e,n){return n=n!=null?n.concat([t]):null,Mh(4,4,LE.bind(null,e,t),n)}function lg(){}function FE(t,e){var n=Or();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&ig(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function jE(t,e){var n=Or();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&ig(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function UE(t,e,n){return jo&21?(ri(n,e)||(n=$2(),Dt.lanes|=n,Uo|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,qn=!0),t.memoizedState=n)}function F3(t,e){var n=ct;ct=n!==0&&4>n?n:4,t(!0);var r=Xf.transition;Xf.transition={};try{t(!1),e()}finally{ct=n,Xf.transition=r}}function VE(){return Or().memoizedState}function j3(t,e,n){var r=Fs(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},zE(t))HE(e,n);else if(n=CE(t,e,n,r),n!==null){var s=Fn();ti(n,t,r,s),WE(n,e,r)}}function U3(t,e,n){var r=Fs(t),s={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(zE(t))HE(e,s);else{var o=t.alternate;if(t.lanes===0&&(o===null||o.lanes===0)&&(o=e.lastRenderedReducer,o!==null))try{var c=e.lastRenderedState,h=o(c,n);if(s.hasEagerState=!0,s.eagerState=h,ri(h,c)){var g=e.interleaved;g===null?(s.next=s,Jp(e)):(s.next=g.next,g.next=s),e.interleaved=s;return}}catch{}finally{}n=CE(t,e,s,r),n!==null&&(s=Fn(),ti(n,t,r,s),WE(n,e,r))}}function zE(t){var e=t.alternate;return t===Dt||e!==null&&e===Dt}function HE(t,e){ac=Xd=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function WE(t,e,n){if(n&4194240){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,jp(t,n)}}var Kd={readContext:Nr,useCallback:An,useContext:An,useEffect:An,useImperativeHandle:An,useInsertionEffect:An,useLayoutEffect:An,useMemo:An,useReducer:An,useRef:An,useState:An,useDebugValue:An,useDeferredValue:An,useTransition:An,useMutableSource:An,useSyncExternalStore:An,useId:An,unstable_isNewReconciler:!1},V3={readContext:Nr,useCallback:function(t,e){return yi().memoizedState=[t,e===void 0?null:e],t},useContext:Nr,useEffect:Ty,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,gd(4194308,4,LE.bind(null,e,t),n)},useLayoutEffect:function(t,e){return gd(4194308,4,t,e)},useInsertionEffect:function(t,e){return gd(4,2,t,e)},useMemo:function(t,e){var n=yi();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=yi();return e=n!==void 0?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=j3.bind(null,Dt,t),[r.memoizedState,t]},useRef:function(t){var e=yi();return t={current:t},e.memoizedState=t},useState:_y,useDebugValue:lg,useDeferredValue:function(t){return yi().memoizedState=t},useTransition:function(){var t=_y(!1),e=t[0];return t=F3.bind(null,t[1]),yi().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=Dt,s=yi();if(It){if(n===void 0)throw Error(se(407));n=n()}else{if(n=e(),dn===null)throw Error(se(349));jo&30||IE(r,e,n)}s.memoizedState=n;var o={value:n,getSnapshot:e};return s.queue=o,Ty(NE.bind(null,r,o,t),[t]),r.flags|=2048,Dc(9,RE.bind(null,r,o,n,e),void 0,null),n},useId:function(){var t=yi(),e=dn.identifierPrefix;if(It){var n=zi,r=Vi;n=(r&~(1<<32-ei(r)-1)).toString(32)+n,e=":"+e+"R"+n,n=kc++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=B3++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},z3={readContext:Nr,useCallback:FE,useContext:Nr,useEffect:ag,useImperativeHandle:BE,useInsertionEffect:DE,useLayoutEffect:PE,useMemo:jE,useReducer:Kf,useRef:ME,useState:function(){return Kf(Mc)},useDebugValue:lg,useDeferredValue:function(t){var e=Or();return UE(e,nn.memoizedState,t)},useTransition:function(){var t=Kf(Mc)[0],e=Or().memoizedState;return[t,e]},useMutableSource:_E,useSyncExternalStore:TE,useId:VE,unstable_isNewReconciler:!1},H3={readContext:Nr,useCallback:FE,useContext:Nr,useEffect:ag,useImperativeHandle:BE,useInsertionEffect:DE,useLayoutEffect:PE,useMemo:jE,useReducer:qf,useRef:ME,useState:function(){return qf(Mc)},useDebugValue:lg,useDeferredValue:function(t){var e=Or();return nn===null?e.memoizedState=t:UE(e,nn.memoizedState,t)},useTransition:function(){var t=qf(Mc)[0],e=Or().memoizedState;return[t,e]},useMutableSource:_E,useSyncExternalStore:TE,useId:VE,unstable_isNewReconciler:!1};function $r(t,e){if(t&&t.defaultProps){e=Pt({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function u1(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:Pt({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var Dh={isMounted:function(t){return(t=t._reactInternals)?Yo(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=Fn(),s=Fs(t),o=Wi(r,s);o.payload=e,n!=null&&(o.callback=n),e=Ls(t,o,s),e!==null&&(ti(e,t,s,r),fd(e,t,s))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=Fn(),s=Fs(t),o=Wi(r,s);o.tag=1,o.payload=e,n!=null&&(o.callback=n),e=Ls(t,o,s),e!==null&&(ti(e,t,s,r),fd(e,t,s))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=Fn(),r=Fs(t),s=Wi(n,r);s.tag=2,e!=null&&(s.callback=e),e=Ls(t,s,r),e!==null&&(ti(e,t,r,n),fd(e,t,r))}};function Iy(t,e,n,r,s,o,c){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,o,c):e.prototype&&e.prototype.isPureReactComponent?!_c(n,r)||!_c(s,o):!0}function $E(t,e,n){var r=!1,s=Ws,o=e.contextType;return typeof o=="object"&&o!==null?o=Nr(o):(s=Jn(e)?Bo:Nn.current,r=e.contextTypes,o=(r=r!=null)?el(t,s):Ws),e=new e(n,o),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=Dh,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=s,t.__reactInternalMemoizedMaskedChildContext=o),e}function Ry(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&Dh.enqueueReplaceState(e,e.state,null)}function d1(t,e,n,r){var s=t.stateNode;s.props=n,s.state=t.memoizedState,s.refs={},eg(t);var o=e.contextType;typeof o=="object"&&o!==null?s.context=Nr(o):(o=Jn(e)?Bo:Nn.current,s.context=el(t,o)),s.state=t.memoizedState,o=e.getDerivedStateFromProps,typeof o=="function"&&(u1(t,e,o,n),s.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof s.getSnapshotBeforeUpdate=="function"||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(e=s.state,typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount(),e!==s.state&&Dh.enqueueReplaceState(s,s.state,null),Gd(t,n,s,r),s.state=t.memoizedState),typeof s.componentDidMount=="function"&&(t.flags|=4194308)}function il(t,e){try{var n="",r=e;do n+=yT(r),r=r.return;while(r);var s=n}catch(o){s=`
Error generating stack: `+o.message+`
`+o.stack}return{value:t,source:e,stack:s,digest:null}}function Zf(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function h1(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var W3=typeof WeakMap=="function"?WeakMap:Map;function GE(t,e,n){n=Wi(-1,n),n.tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){Zd||(Zd=!0,b1=r),h1(t,e)},n}function YE(t,e,n){n=Wi(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var s=e.value;n.payload=function(){return r(s)},n.callback=function(){h1(t,e)}}var o=t.stateNode;return o!==null&&typeof o.componentDidCatch=="function"&&(n.callback=function(){h1(t,e),typeof r!="function"&&(Bs===null?Bs=new Set([this]):Bs.add(this));var c=e.stack;this.componentDidCatch(e.value,{componentStack:c!==null?c:""})}),n}function Ny(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new W3;var s=new Set;r.set(e,s)}else s=r.get(e),s===void 0&&(s=new Set,r.set(e,s));s.has(n)||(s.add(n),t=iI.bind(null,t,e,n),e.then(t,t))}function Oy(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function ky(t,e,n,r,s){return t.mode&1?(t.flags|=65536,t.lanes=s,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=Wi(-1,1),e.tag=2,Ls(n,e,1))),n.lanes|=1),t)}var $3=es.ReactCurrentOwner,qn=!1;function Mn(t,e,n,r){e.child=t===null?bE(e,null,n,r):nl(e,t.child,n,r)}function My(t,e,n,r,s){n=n.render;var o=e.ref;return ja(e,s),r=sg(t,e,n,r,o,s),n=og(),t!==null&&!qn?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,Xi(t,e,s)):(It&&n&&Yp(e),e.flags|=1,Mn(t,e,r,s),e.child)}function Dy(t,e,n,r,s){if(t===null){var o=n.type;return typeof o=="function"&&!mg(o)&&o.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=o,XE(t,e,o,r,s)):(t=xd(n.type,null,r,e,e.mode,s),t.ref=e.ref,t.return=e,e.child=t)}if(o=t.child,!(t.lanes&s)){var c=o.memoizedProps;if(n=n.compare,n=n!==null?n:_c,n(c,r)&&t.ref===e.ref)return Xi(t,e,s)}return e.flags|=1,t=js(o,r),t.ref=e.ref,t.return=e,e.child=t}function XE(t,e,n,r,s){if(t!==null){var o=t.memoizedProps;if(_c(o,r)&&t.ref===e.ref)if(qn=!1,e.pendingProps=r=o,(t.lanes&s)!==0)t.flags&131072&&(qn=!0);else return e.lanes=t.lanes,Xi(t,e,s)}return f1(t,e,n,r,s)}function KE(t,e,n){var r=e.pendingProps,s=r.children,o=t!==null?t.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},mt(Ta,ar),ar|=n;else{if(!(n&1073741824))return t=o!==null?o.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,mt(Ta,ar),ar|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=o!==null?o.baseLanes:n,mt(Ta,ar),ar|=r}else o!==null?(r=o.baseLanes|n,e.memoizedState=null):r=n,mt(Ta,ar),ar|=r;return Mn(t,e,s,n),e.child}function qE(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function f1(t,e,n,r,s){var o=Jn(n)?Bo:Nn.current;return o=el(e,o),ja(e,s),n=sg(t,e,n,r,o,s),r=og(),t!==null&&!qn?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,Xi(t,e,s)):(It&&r&&Yp(e),e.flags|=1,Mn(t,e,n,s),e.child)}function Py(t,e,n,r,s){if(Jn(n)){var o=!0;Vd(e)}else o=!1;if(ja(e,s),e.stateNode===null)md(t,e),$E(e,n,r),d1(e,n,r,s),r=!0;else if(t===null){var c=e.stateNode,h=e.memoizedProps;c.props=h;var g=c.context,p=n.contextType;typeof p=="object"&&p!==null?p=Nr(p):(p=Jn(n)?Bo:Nn.current,p=el(e,p));var y=n.getDerivedStateFromProps,x=typeof y=="function"||typeof c.getSnapshotBeforeUpdate=="function";x||typeof c.UNSAFE_componentWillReceiveProps!="function"&&typeof c.componentWillReceiveProps!="function"||(h!==r||g!==p)&&Ry(e,c,r,p),ms=!1;var E=e.memoizedState;c.state=E,Gd(e,r,c,s),g=e.memoizedState,h!==r||E!==g||Qn.current||ms?(typeof y=="function"&&(u1(e,n,y,r),g=e.memoizedState),(h=ms||Iy(e,n,h,r,E,g,p))?(x||typeof c.UNSAFE_componentWillMount!="function"&&typeof c.componentWillMount!="function"||(typeof c.componentWillMount=="function"&&c.componentWillMount(),typeof c.UNSAFE_componentWillMount=="function"&&c.UNSAFE_componentWillMount()),typeof c.componentDidMount=="function"&&(e.flags|=4194308)):(typeof c.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=g),c.props=r,c.state=g,c.context=p,r=h):(typeof c.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{c=e.stateNode,SE(t,e),h=e.memoizedProps,p=e.type===e.elementType?h:$r(e.type,h),c.props=p,x=e.pendingProps,E=c.context,g=n.contextType,typeof g=="object"&&g!==null?g=Nr(g):(g=Jn(n)?Bo:Nn.current,g=el(e,g));var b=n.getDerivedStateFromProps;(y=typeof b=="function"||typeof c.getSnapshotBeforeUpdate=="function")||typeof c.UNSAFE_componentWillReceiveProps!="function"&&typeof c.componentWillReceiveProps!="function"||(h!==x||E!==g)&&Ry(e,c,r,g),ms=!1,E=e.memoizedState,c.state=E,Gd(e,r,c,s);var I=e.memoizedState;h!==x||E!==I||Qn.current||ms?(typeof b=="function"&&(u1(e,n,b,r),I=e.memoizedState),(p=ms||Iy(e,n,p,r,E,I,g)||!1)?(y||typeof c.UNSAFE_componentWillUpdate!="function"&&typeof c.componentWillUpdate!="function"||(typeof c.componentWillUpdate=="function"&&c.componentWillUpdate(r,I,g),typeof c.UNSAFE_componentWillUpdate=="function"&&c.UNSAFE_componentWillUpdate(r,I,g)),typeof c.componentDidUpdate=="function"&&(e.flags|=4),typeof c.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof c.componentDidUpdate!="function"||h===t.memoizedProps&&E===t.memoizedState||(e.flags|=4),typeof c.getSnapshotBeforeUpdate!="function"||h===t.memoizedProps&&E===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=I),c.props=r,c.state=I,c.context=g,r=p):(typeof c.componentDidUpdate!="function"||h===t.memoizedProps&&E===t.memoizedState||(e.flags|=4),typeof c.getSnapshotBeforeUpdate!="function"||h===t.memoizedProps&&E===t.memoizedState||(e.flags|=1024),r=!1)}return p1(t,e,n,r,o,s)}function p1(t,e,n,r,s,o){qE(t,e);var c=(e.flags&128)!==0;if(!r&&!c)return s&&vy(e,n,!1),Xi(t,e,o);r=e.stateNode,$3.current=e;var h=c&&typeof n.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&c?(e.child=nl(e,t.child,null,o),e.child=nl(e,null,h,o)):Mn(t,e,h,o),e.memoizedState=r.state,s&&vy(e,n,!0),e.child}function ZE(t){var e=t.stateNode;e.pendingContext?xy(t,e.pendingContext,e.pendingContext!==e.context):e.context&&xy(t,e.context,!1),tg(t,e.containerInfo)}function Ly(t,e,n,r,s){return tl(),Kp(s),e.flags|=256,Mn(t,e,n,r),e.child}var g1={dehydrated:null,treeContext:null,retryLane:0};function m1(t){return{baseLanes:t,cachePool:null,transitions:null}}function QE(t,e,n){var r=e.pendingProps,s=kt.current,o=!1,c=(e.flags&128)!==0,h;if((h=c)||(h=t!==null&&t.memoizedState===null?!1:(s&2)!==0),h?(o=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(s|=1),mt(kt,s&1),t===null)return l1(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(c=r.children,t=r.fallback,o?(r=e.mode,o=e.child,c={mode:"hidden",children:c},!(r&1)&&o!==null?(o.childLanes=0,o.pendingProps=c):o=Bh(c,r,0,null),t=Do(t,r,n,null),o.return=e,t.return=e,o.sibling=t,e.child=o,e.child.memoizedState=m1(n),e.memoizedState=g1,t):cg(e,c));if(s=t.memoizedState,s!==null&&(h=s.dehydrated,h!==null))return G3(t,e,c,r,h,s,n);if(o){o=r.fallback,c=e.mode,s=t.child,h=s.sibling;var g={mode:"hidden",children:r.children};return!(c&1)&&e.child!==s?(r=e.child,r.childLanes=0,r.pendingProps=g,e.deletions=null):(r=js(s,g),r.subtreeFlags=s.subtreeFlags&14680064),h!==null?o=js(h,o):(o=Do(o,c,n,null),o.flags|=2),o.return=e,r.return=e,r.sibling=o,e.child=r,r=o,o=e.child,c=t.child.memoizedState,c=c===null?m1(n):{baseLanes:c.baseLanes|n,cachePool:null,transitions:c.transitions},o.memoizedState=c,o.childLanes=t.childLanes&~n,e.memoizedState=g1,r}return o=t.child,t=o.sibling,r=js(o,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=n),r.return=e,r.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r,e.memoizedState=null,r}function cg(t,e){return e=Bh({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function zu(t,e,n,r){return r!==null&&Kp(r),nl(e,t.child,null,n),t=cg(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function G3(t,e,n,r,s,o,c){if(n)return e.flags&256?(e.flags&=-257,r=Zf(Error(se(422))),zu(t,e,c,r)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(o=r.fallback,s=e.mode,r=Bh({mode:"visible",children:r.children},s,0,null),o=Do(o,s,c,null),o.flags|=2,r.return=e,o.return=e,r.sibling=o,e.child=r,e.mode&1&&nl(e,t.child,null,c),e.child.memoizedState=m1(c),e.memoizedState=g1,o);if(!(e.mode&1))return zu(t,e,c,null);if(s.data==="$!"){if(r=s.nextSibling&&s.nextSibling.dataset,r)var h=r.dgst;return r=h,o=Error(se(419)),r=Zf(o,r,void 0),zu(t,e,c,r)}if(h=(c&t.childLanes)!==0,qn||h){if(r=dn,r!==null){switch(c&-c){case 4:s=2;break;case 16:s=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:s=32;break;case 536870912:s=268435456;break;default:s=0}s=s&(r.suspendedLanes|c)?0:s,s!==0&&s!==o.retryLane&&(o.retryLane=s,Yi(t,s),ti(r,t,s,-1))}return gg(),r=Zf(Error(se(421))),zu(t,e,c,r)}return s.data==="$?"?(e.flags|=128,e.child=t.child,e=sI.bind(null,t),s._reactRetry=e,null):(t=o.treeContext,dr=Ps(s.nextSibling),hr=e,It=!0,Jr=null,t!==null&&(Sr[Ar++]=Vi,Sr[Ar++]=zi,Sr[Ar++]=Fo,Vi=t.id,zi=t.overflow,Fo=e),e=cg(e,r.children),e.flags|=4096,e)}function By(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),c1(t.return,e,n)}function Qf(t,e,n,r,s){var o=t.memoizedState;o===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:s}:(o.isBackwards=e,o.rendering=null,o.renderingStartTime=0,o.last=r,o.tail=n,o.tailMode=s)}function JE(t,e,n){var r=e.pendingProps,s=r.revealOrder,o=r.tail;if(Mn(t,e,r.children,n),r=kt.current,r&2)r=r&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&By(t,n,e);else if(t.tag===19)By(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(mt(kt,r),!(e.mode&1))e.memoizedState=null;else switch(s){case"forwards":for(n=e.child,s=null;n!==null;)t=n.alternate,t!==null&&Yd(t)===null&&(s=n),n=n.sibling;n=s,n===null?(s=e.child,e.child=null):(s=n.sibling,n.sibling=null),Qf(e,!1,s,n,o);break;case"backwards":for(n=null,s=e.child,e.child=null;s!==null;){if(t=s.alternate,t!==null&&Yd(t)===null){e.child=s;break}t=s.sibling,s.sibling=n,n=s,s=t}Qf(e,!0,n,null,o);break;case"together":Qf(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function md(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function Xi(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),Uo|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(se(153));if(e.child!==null){for(t=e.child,n=js(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=js(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function Y3(t,e,n){switch(e.tag){case 3:ZE(e),tl();break;case 5:AE(e);break;case 1:Jn(e.type)&&Vd(e);break;case 4:tg(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,s=e.memoizedProps.value;mt(Wd,r._currentValue),r._currentValue=s;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(mt(kt,kt.current&1),e.flags|=128,null):n&e.child.childLanes?QE(t,e,n):(mt(kt,kt.current&1),t=Xi(t,e,n),t!==null?t.sibling:null);mt(kt,kt.current&1);break;case 19:if(r=(n&e.childLanes)!==0,t.flags&128){if(r)return JE(t,e,n);e.flags|=128}if(s=e.memoizedState,s!==null&&(s.rendering=null,s.tail=null,s.lastEffect=null),mt(kt,kt.current),r)break;return null;case 22:case 23:return e.lanes=0,KE(t,e,n)}return Xi(t,e,n)}var eb,y1,tb,nb;eb=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};y1=function(){};tb=function(t,e,n,r){var s=t.memoizedProps;if(s!==r){t=e.stateNode,Co(_i.current);var o=null;switch(n){case"input":s=j0(t,s),r=j0(t,r),o=[];break;case"select":s=Pt({},s,{value:void 0}),r=Pt({},r,{value:void 0}),o=[];break;case"textarea":s=z0(t,s),r=z0(t,r),o=[];break;default:typeof s.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=jd)}W0(n,r);var c;n=null;for(p in s)if(!r.hasOwnProperty(p)&&s.hasOwnProperty(p)&&s[p]!=null)if(p==="style"){var h=s[p];for(c in h)h.hasOwnProperty(c)&&(n||(n={}),n[c]="")}else p!=="dangerouslySetInnerHTML"&&p!=="children"&&p!=="suppressContentEditableWarning"&&p!=="suppressHydrationWarning"&&p!=="autoFocus"&&(xc.hasOwnProperty(p)?o||(o=[]):(o=o||[]).push(p,null));for(p in r){var g=r[p];if(h=s!=null?s[p]:void 0,r.hasOwnProperty(p)&&g!==h&&(g!=null||h!=null))if(p==="style")if(h){for(c in h)!h.hasOwnProperty(c)||g&&g.hasOwnProperty(c)||(n||(n={}),n[c]="");for(c in g)g.hasOwnProperty(c)&&h[c]!==g[c]&&(n||(n={}),n[c]=g[c])}else n||(o||(o=[]),o.push(p,n)),n=g;else p==="dangerouslySetInnerHTML"?(g=g?g.__html:void 0,h=h?h.__html:void 0,g!=null&&h!==g&&(o=o||[]).push(p,g)):p==="children"?typeof g!="string"&&typeof g!="number"||(o=o||[]).push(p,""+g):p!=="suppressContentEditableWarning"&&p!=="suppressHydrationWarning"&&(xc.hasOwnProperty(p)?(g!=null&&p==="onScroll"&&vt("scroll",t),o||h===g||(o=[])):(o=o||[]).push(p,g))}n&&(o=o||[]).push("style",n);var p=o;(e.updateQueue=p)&&(e.flags|=4)}};nb=function(t,e,n,r){n!==r&&(e.flags|=4)};function Hl(t,e){if(!It)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function _n(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var s=t.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags&14680064,r|=s.flags&14680064,s.return=t,s=s.sibling;else for(s=t.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags,r|=s.flags,s.return=t,s=s.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function X3(t,e,n){var r=e.pendingProps;switch(Xp(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return _n(e),null;case 1:return Jn(e.type)&&Ud(),_n(e),null;case 3:return r=e.stateNode,rl(),bt(Qn),bt(Nn),rg(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(Uu(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,Jr!==null&&(A1(Jr),Jr=null))),y1(t,e),_n(e),null;case 5:ng(e);var s=Co(Oc.current);if(n=e.type,t!==null&&e.stateNode!=null)tb(t,e,n,r,s),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(se(166));return _n(e),null}if(t=Co(_i.current),Uu(e)){r=e.stateNode,n=e.type;var o=e.memoizedProps;switch(r[Ci]=e,r[Rc]=o,t=(e.mode&1)!==0,n){case"dialog":vt("cancel",r),vt("close",r);break;case"iframe":case"object":case"embed":vt("load",r);break;case"video":case"audio":for(s=0;s<Ql.length;s++)vt(Ql[s],r);break;case"source":vt("error",r);break;case"img":case"image":case"link":vt("error",r),vt("load",r);break;case"details":vt("toggle",r);break;case"input":Gm(r,o),vt("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!o.multiple},vt("invalid",r);break;case"textarea":Xm(r,o),vt("invalid",r)}W0(n,o),s=null;for(var c in o)if(o.hasOwnProperty(c)){var h=o[c];c==="children"?typeof h=="string"?r.textContent!==h&&(o.suppressHydrationWarning!==!0&&ju(r.textContent,h,t),s=["children",h]):typeof h=="number"&&r.textContent!==""+h&&(o.suppressHydrationWarning!==!0&&ju(r.textContent,h,t),s=["children",""+h]):xc.hasOwnProperty(c)&&h!=null&&c==="onScroll"&&vt("scroll",r)}switch(n){case"input":Ou(r),Ym(r,o,!0);break;case"textarea":Ou(r),Km(r);break;case"select":case"option":break;default:typeof o.onClick=="function"&&(r.onclick=jd)}r=s,e.updateQueue=r,r!==null&&(e.flags|=4)}else{c=s.nodeType===9?s:s.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=N2(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=c.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=c.createElement(n,{is:r.is}):(t=c.createElement(n),n==="select"&&(c=t,r.multiple?c.multiple=!0:r.size&&(c.size=r.size))):t=c.createElementNS(t,n),t[Ci]=e,t[Rc]=r,eb(t,e,!1,!1),e.stateNode=t;e:{switch(c=$0(n,r),n){case"dialog":vt("cancel",t),vt("close",t),s=r;break;case"iframe":case"object":case"embed":vt("load",t),s=r;break;case"video":case"audio":for(s=0;s<Ql.length;s++)vt(Ql[s],t);s=r;break;case"source":vt("error",t),s=r;break;case"img":case"image":case"link":vt("error",t),vt("load",t),s=r;break;case"details":vt("toggle",t),s=r;break;case"input":Gm(t,r),s=j0(t,r),vt("invalid",t);break;case"option":s=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},s=Pt({},r,{value:void 0}),vt("invalid",t);break;case"textarea":Xm(t,r),s=z0(t,r),vt("invalid",t);break;default:s=r}W0(n,s),h=s;for(o in h)if(h.hasOwnProperty(o)){var g=h[o];o==="style"?M2(t,g):o==="dangerouslySetInnerHTML"?(g=g?g.__html:void 0,g!=null&&O2(t,g)):o==="children"?typeof g=="string"?(n!=="textarea"||g!=="")&&vc(t,g):typeof g=="number"&&vc(t,""+g):o!=="suppressContentEditableWarning"&&o!=="suppressHydrationWarning"&&o!=="autoFocus"&&(xc.hasOwnProperty(o)?g!=null&&o==="onScroll"&&vt("scroll",t):g!=null&&Mp(t,o,g,c))}switch(n){case"input":Ou(t),Ym(t,r,!1);break;case"textarea":Ou(t),Km(t);break;case"option":r.value!=null&&t.setAttribute("value",""+Hs(r.value));break;case"select":t.multiple=!!r.multiple,o=r.value,o!=null?Pa(t,!!r.multiple,o,!1):r.defaultValue!=null&&Pa(t,!!r.multiple,r.defaultValue,!0);break;default:typeof s.onClick=="function"&&(t.onclick=jd)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return _n(e),null;case 6:if(t&&e.stateNode!=null)nb(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(se(166));if(n=Co(Oc.current),Co(_i.current),Uu(e)){if(r=e.stateNode,n=e.memoizedProps,r[Ci]=e,(o=r.nodeValue!==n)&&(t=hr,t!==null))switch(t.tag){case 3:ju(r.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&ju(r.nodeValue,n,(t.mode&1)!==0)}o&&(e.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[Ci]=e,e.stateNode=r}return _n(e),null;case 13:if(bt(kt),r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(It&&dr!==null&&e.mode&1&&!(e.flags&128))vE(),tl(),e.flags|=98560,o=!1;else if(o=Uu(e),r!==null&&r.dehydrated!==null){if(t===null){if(!o)throw Error(se(318));if(o=e.memoizedState,o=o!==null?o.dehydrated:null,!o)throw Error(se(317));o[Ci]=e}else tl(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;_n(e),o=!1}else Jr!==null&&(A1(Jr),Jr=null),o=!0;if(!o)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(t===null||kt.current&1?sn===0&&(sn=3):gg())),e.updateQueue!==null&&(e.flags|=4),_n(e),null);case 4:return rl(),y1(t,e),t===null&&Tc(e.stateNode.containerInfo),_n(e),null;case 10:return Qp(e.type._context),_n(e),null;case 17:return Jn(e.type)&&Ud(),_n(e),null;case 19:if(bt(kt),o=e.memoizedState,o===null)return _n(e),null;if(r=(e.flags&128)!==0,c=o.rendering,c===null)if(r)Hl(o,!1);else{if(sn!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(c=Yd(t),c!==null){for(e.flags|=128,Hl(o,!1),r=c.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;n!==null;)o=n,t=r,o.flags&=14680066,c=o.alternate,c===null?(o.childLanes=0,o.lanes=t,o.child=null,o.subtreeFlags=0,o.memoizedProps=null,o.memoizedState=null,o.updateQueue=null,o.dependencies=null,o.stateNode=null):(o.childLanes=c.childLanes,o.lanes=c.lanes,o.child=c.child,o.subtreeFlags=0,o.deletions=null,o.memoizedProps=c.memoizedProps,o.memoizedState=c.memoizedState,o.updateQueue=c.updateQueue,o.type=c.type,t=c.dependencies,o.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return mt(kt,kt.current&1|2),e.child}t=t.sibling}o.tail!==null&&Gt()>sl&&(e.flags|=128,r=!0,Hl(o,!1),e.lanes=4194304)}else{if(!r)if(t=Yd(c),t!==null){if(e.flags|=128,r=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),Hl(o,!0),o.tail===null&&o.tailMode==="hidden"&&!c.alternate&&!It)return _n(e),null}else 2*Gt()-o.renderingStartTime>sl&&n!==1073741824&&(e.flags|=128,r=!0,Hl(o,!1),e.lanes=4194304);o.isBackwards?(c.sibling=e.child,e.child=c):(n=o.last,n!==null?n.sibling=c:e.child=c,o.last=c)}return o.tail!==null?(e=o.tail,o.rendering=e,o.tail=e.sibling,o.renderingStartTime=Gt(),e.sibling=null,n=kt.current,mt(kt,r?n&1|2:n&1),e):(_n(e),null);case 22:case 23:return pg(),r=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?ar&1073741824&&(_n(e),e.subtreeFlags&6&&(e.flags|=8192)):_n(e),null;case 24:return null;case 25:return null}throw Error(se(156,e.tag))}function K3(t,e){switch(Xp(e),e.tag){case 1:return Jn(e.type)&&Ud(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return rl(),bt(Qn),bt(Nn),rg(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return ng(e),null;case 13:if(bt(kt),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(se(340));tl()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return bt(kt),null;case 4:return rl(),null;case 10:return Qp(e.type._context),null;case 22:case 23:return pg(),null;case 24:return null;default:return null}}var Hu=!1,In=!1,q3=typeof WeakSet=="function"?WeakSet:Set,ve=null;function _a(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){Ht(t,e,r)}else n.current=null}function w1(t,e,n){try{n()}catch(r){Ht(t,e,r)}}var Fy=!1;function Z3(t,e){if(t1=Ld,t=aE(),Gp(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var s=r.anchorOffset,o=r.focusNode;r=r.focusOffset;try{n.nodeType,o.nodeType}catch{n=null;break e}var c=0,h=-1,g=-1,p=0,y=0,x=t,E=null;t:for(;;){for(var b;x!==n||s!==0&&x.nodeType!==3||(h=c+s),x!==o||r!==0&&x.nodeType!==3||(g=c+r),x.nodeType===3&&(c+=x.nodeValue.length),(b=x.firstChild)!==null;)E=x,x=b;for(;;){if(x===t)break t;if(E===n&&++p===s&&(h=c),E===o&&++y===r&&(g=c),(b=x.nextSibling)!==null)break;x=E,E=x.parentNode}x=b}n=h===-1||g===-1?null:{start:h,end:g}}else n=null}n=n||{start:0,end:0}}else n=null;for(n1={focusedElem:t,selectionRange:n},Ld=!1,ve=e;ve!==null;)if(e=ve,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,ve=t;else for(;ve!==null;){e=ve;try{var I=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(I!==null){var S=I.memoizedProps,R=I.memoizedState,A=e.stateNode,_=A.getSnapshotBeforeUpdate(e.elementType===e.type?S:$r(e.type,S),R);A.__reactInternalSnapshotBeforeUpdate=_}break;case 3:var T=e.stateNode.containerInfo;T.nodeType===1?T.textContent="":T.nodeType===9&&T.documentElement&&T.removeChild(T.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(se(163))}}catch(D){Ht(e,e.return,D)}if(t=e.sibling,t!==null){t.return=e.return,ve=t;break}ve=e.return}return I=Fy,Fy=!1,I}function lc(t,e,n){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var s=r=r.next;do{if((s.tag&t)===t){var o=s.destroy;s.destroy=void 0,o!==void 0&&w1(e,n,o)}s=s.next}while(s!==r)}}function Ph(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function x1(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function rb(t){var e=t.alternate;e!==null&&(t.alternate=null,rb(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[Ci],delete e[Rc],delete e[s1],delete e[M3],delete e[D3])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function ib(t){return t.tag===5||t.tag===3||t.tag===4}function jy(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||ib(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function v1(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=jd));else if(r!==4&&(t=t.child,t!==null))for(v1(t,e,n),t=t.sibling;t!==null;)v1(t,e,n),t=t.sibling}function E1(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for(E1(t,e,n),t=t.sibling;t!==null;)E1(t,e,n),t=t.sibling}var wn=null,qr=!1;function ls(t,e,n){for(n=n.child;n!==null;)sb(t,e,n),n=n.sibling}function sb(t,e,n){if(Ai&&typeof Ai.onCommitFiberUnmount=="function")try{Ai.onCommitFiberUnmount(Th,n)}catch{}switch(n.tag){case 5:In||_a(n,e);case 6:var r=wn,s=qr;wn=null,ls(t,e,n),wn=r,qr=s,wn!==null&&(qr?(t=wn,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):wn.removeChild(n.stateNode));break;case 18:wn!==null&&(qr?(t=wn,n=n.stateNode,t.nodeType===8?$f(t.parentNode,n):t.nodeType===1&&$f(t,n),Sc(t)):$f(wn,n.stateNode));break;case 4:r=wn,s=qr,wn=n.stateNode.containerInfo,qr=!0,ls(t,e,n),wn=r,qr=s;break;case 0:case 11:case 14:case 15:if(!In&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){s=r=r.next;do{var o=s,c=o.destroy;o=o.tag,c!==void 0&&(o&2||o&4)&&w1(n,e,c),s=s.next}while(s!==r)}ls(t,e,n);break;case 1:if(!In&&(_a(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(h){Ht(n,e,h)}ls(t,e,n);break;case 21:ls(t,e,n);break;case 22:n.mode&1?(In=(r=In)||n.memoizedState!==null,ls(t,e,n),In=r):ls(t,e,n);break;default:ls(t,e,n)}}function Uy(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new q3),e.forEach(function(r){var s=oI.bind(null,t,r);n.has(r)||(n.add(r),r.then(s,s))})}}function Ur(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var s=n[r];try{var o=t,c=e,h=c;e:for(;h!==null;){switch(h.tag){case 5:wn=h.stateNode,qr=!1;break e;case 3:wn=h.stateNode.containerInfo,qr=!0;break e;case 4:wn=h.stateNode.containerInfo,qr=!0;break e}h=h.return}if(wn===null)throw Error(se(160));sb(o,c,s),wn=null,qr=!1;var g=s.alternate;g!==null&&(g.return=null),s.return=null}catch(p){Ht(s,e,p)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)ob(e,t),e=e.sibling}function ob(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(Ur(e,t),mi(t),r&4){try{lc(3,t,t.return),Ph(3,t)}catch(S){Ht(t,t.return,S)}try{lc(5,t,t.return)}catch(S){Ht(t,t.return,S)}}break;case 1:Ur(e,t),mi(t),r&512&&n!==null&&_a(n,n.return);break;case 5:if(Ur(e,t),mi(t),r&512&&n!==null&&_a(n,n.return),t.flags&32){var s=t.stateNode;try{vc(s,"")}catch(S){Ht(t,t.return,S)}}if(r&4&&(s=t.stateNode,s!=null)){var o=t.memoizedProps,c=n!==null?n.memoizedProps:o,h=t.type,g=t.updateQueue;if(t.updateQueue=null,g!==null)try{h==="input"&&o.type==="radio"&&o.name!=null&&I2(s,o),$0(h,c);var p=$0(h,o);for(c=0;c<g.length;c+=2){var y=g[c],x=g[c+1];y==="style"?M2(s,x):y==="dangerouslySetInnerHTML"?O2(s,x):y==="children"?vc(s,x):Mp(s,y,x,p)}switch(h){case"input":U0(s,o);break;case"textarea":R2(s,o);break;case"select":var E=s._wrapperState.wasMultiple;s._wrapperState.wasMultiple=!!o.multiple;var b=o.value;b!=null?Pa(s,!!o.multiple,b,!1):E!==!!o.multiple&&(o.defaultValue!=null?Pa(s,!!o.multiple,o.defaultValue,!0):Pa(s,!!o.multiple,o.multiple?[]:"",!1))}s[Rc]=o}catch(S){Ht(t,t.return,S)}}break;case 6:if(Ur(e,t),mi(t),r&4){if(t.stateNode===null)throw Error(se(162));s=t.stateNode,o=t.memoizedProps;try{s.nodeValue=o}catch(S){Ht(t,t.return,S)}}break;case 3:if(Ur(e,t),mi(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{Sc(e.containerInfo)}catch(S){Ht(t,t.return,S)}break;case 4:Ur(e,t),mi(t);break;case 13:Ur(e,t),mi(t),s=t.child,s.flags&8192&&(o=s.memoizedState!==null,s.stateNode.isHidden=o,!o||s.alternate!==null&&s.alternate.memoizedState!==null||(hg=Gt())),r&4&&Uy(t);break;case 22:if(y=n!==null&&n.memoizedState!==null,t.mode&1?(In=(p=In)||y,Ur(e,t),In=p):Ur(e,t),mi(t),r&8192){if(p=t.memoizedState!==null,(t.stateNode.isHidden=p)&&!y&&t.mode&1)for(ve=t,y=t.child;y!==null;){for(x=ve=y;ve!==null;){switch(E=ve,b=E.child,E.tag){case 0:case 11:case 14:case 15:lc(4,E,E.return);break;case 1:_a(E,E.return);var I=E.stateNode;if(typeof I.componentWillUnmount=="function"){r=E,n=E.return;try{e=r,I.props=e.memoizedProps,I.state=e.memoizedState,I.componentWillUnmount()}catch(S){Ht(r,n,S)}}break;case 5:_a(E,E.return);break;case 22:if(E.memoizedState!==null){zy(x);continue}}b!==null?(b.return=E,ve=b):zy(x)}y=y.sibling}e:for(y=null,x=t;;){if(x.tag===5){if(y===null){y=x;try{s=x.stateNode,p?(o=s.style,typeof o.setProperty=="function"?o.setProperty("display","none","important"):o.display="none"):(h=x.stateNode,g=x.memoizedProps.style,c=g!=null&&g.hasOwnProperty("display")?g.display:null,h.style.display=k2("display",c))}catch(S){Ht(t,t.return,S)}}}else if(x.tag===6){if(y===null)try{x.stateNode.nodeValue=p?"":x.memoizedProps}catch(S){Ht(t,t.return,S)}}else if((x.tag!==22&&x.tag!==23||x.memoizedState===null||x===t)&&x.child!==null){x.child.return=x,x=x.child;continue}if(x===t)break e;for(;x.sibling===null;){if(x.return===null||x.return===t)break e;y===x&&(y=null),x=x.return}y===x&&(y=null),x.sibling.return=x.return,x=x.sibling}}break;case 19:Ur(e,t),mi(t),r&4&&Uy(t);break;case 21:break;default:Ur(e,t),mi(t)}}function mi(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(ib(n)){var r=n;break e}n=n.return}throw Error(se(160))}switch(r.tag){case 5:var s=r.stateNode;r.flags&32&&(vc(s,""),r.flags&=-33);var o=jy(t);E1(t,o,s);break;case 3:case 4:var c=r.stateNode.containerInfo,h=jy(t);v1(t,h,c);break;default:throw Error(se(161))}}catch(g){Ht(t,t.return,g)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function Q3(t,e,n){ve=t,ab(t)}function ab(t,e,n){for(var r=(t.mode&1)!==0;ve!==null;){var s=ve,o=s.child;if(s.tag===22&&r){var c=s.memoizedState!==null||Hu;if(!c){var h=s.alternate,g=h!==null&&h.memoizedState!==null||In;h=Hu;var p=In;if(Hu=c,(In=g)&&!p)for(ve=s;ve!==null;)c=ve,g=c.child,c.tag===22&&c.memoizedState!==null?Hy(s):g!==null?(g.return=c,ve=g):Hy(s);for(;o!==null;)ve=o,ab(o),o=o.sibling;ve=s,Hu=h,In=p}Vy(t)}else s.subtreeFlags&8772&&o!==null?(o.return=s,ve=o):Vy(t)}}function Vy(t){for(;ve!==null;){var e=ve;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:In||Ph(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!In)if(n===null)r.componentDidMount();else{var s=e.elementType===e.type?n.memoizedProps:$r(e.type,n.memoizedProps);r.componentDidUpdate(s,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var o=e.updateQueue;o!==null&&Ay(e,o,r);break;case 3:var c=e.updateQueue;if(c!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}Ay(e,c,n)}break;case 5:var h=e.stateNode;if(n===null&&e.flags&4){n=h;var g=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":g.autoFocus&&n.focus();break;case"img":g.src&&(n.src=g.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var p=e.alternate;if(p!==null){var y=p.memoizedState;if(y!==null){var x=y.dehydrated;x!==null&&Sc(x)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(se(163))}In||e.flags&512&&x1(e)}catch(E){Ht(e,e.return,E)}}if(e===t){ve=null;break}if(n=e.sibling,n!==null){n.return=e.return,ve=n;break}ve=e.return}}function zy(t){for(;ve!==null;){var e=ve;if(e===t){ve=null;break}var n=e.sibling;if(n!==null){n.return=e.return,ve=n;break}ve=e.return}}function Hy(t){for(;ve!==null;){var e=ve;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{Ph(4,e)}catch(g){Ht(e,n,g)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var s=e.return;try{r.componentDidMount()}catch(g){Ht(e,s,g)}}var o=e.return;try{x1(e)}catch(g){Ht(e,o,g)}break;case 5:var c=e.return;try{x1(e)}catch(g){Ht(e,c,g)}}}catch(g){Ht(e,e.return,g)}if(e===t){ve=null;break}var h=e.sibling;if(h!==null){h.return=e.return,ve=h;break}ve=e.return}}var J3=Math.ceil,qd=es.ReactCurrentDispatcher,ug=es.ReactCurrentOwner,Ir=es.ReactCurrentBatchConfig,et=0,dn=null,Kt=null,vn=0,ar=0,Ta=eo(0),sn=0,Pc=null,Uo=0,Lh=0,dg=0,cc=null,Kn=null,hg=0,sl=1/0,Bi=null,Zd=!1,b1=null,Bs=null,Wu=!1,Is=null,Qd=0,uc=0,C1=null,yd=-1,wd=0;function Fn(){return et&6?Gt():yd!==-1?yd:yd=Gt()}function Fs(t){return t.mode&1?et&2&&vn!==0?vn&-vn:L3.transition!==null?(wd===0&&(wd=$2()),wd):(t=ct,t!==0||(t=window.event,t=t===void 0?16:Q2(t.type)),t):1}function ti(t,e,n,r){if(50<uc)throw uc=0,C1=null,Error(se(185));ou(t,n,r),(!(et&2)||t!==dn)&&(t===dn&&(!(et&2)&&(Lh|=n),sn===4&&vs(t,vn)),er(t,r),n===1&&et===0&&!(e.mode&1)&&(sl=Gt()+500,kh&&to()))}function er(t,e){var n=t.callbackNode;LT(t,e);var r=Pd(t,t===dn?vn:0);if(r===0)n!==null&&Qm(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(n!=null&&Qm(n),e===1)t.tag===0?P3(Wy.bind(null,t)):yE(Wy.bind(null,t)),O3(function(){!(et&6)&&to()}),n=null;else{switch(G2(r)){case 1:n=Fp;break;case 4:n=H2;break;case 16:n=Dd;break;case 536870912:n=W2;break;default:n=Dd}n=gb(n,lb.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function lb(t,e){if(yd=-1,wd=0,et&6)throw Error(se(327));var n=t.callbackNode;if(Ua()&&t.callbackNode!==n)return null;var r=Pd(t,t===dn?vn:0);if(r===0)return null;if(r&30||r&t.expiredLanes||e)e=Jd(t,r);else{e=r;var s=et;et|=2;var o=ub();(dn!==t||vn!==e)&&(Bi=null,sl=Gt()+500,Mo(t,e));do try{nI();break}catch(h){cb(t,h)}while(!0);Zp(),qd.current=o,et=s,Kt!==null?e=0:(dn=null,vn=0,e=sn)}if(e!==0){if(e===2&&(s=q0(t),s!==0&&(r=s,e=S1(t,s))),e===1)throw n=Pc,Mo(t,0),vs(t,r),er(t,Gt()),n;if(e===6)vs(t,r);else{if(s=t.current.alternate,!(r&30)&&!eI(s)&&(e=Jd(t,r),e===2&&(o=q0(t),o!==0&&(r=o,e=S1(t,o))),e===1))throw n=Pc,Mo(t,0),vs(t,r),er(t,Gt()),n;switch(t.finishedWork=s,t.finishedLanes=r,e){case 0:case 1:throw Error(se(345));case 2:mo(t,Kn,Bi);break;case 3:if(vs(t,r),(r&130023424)===r&&(e=hg+500-Gt(),10<e)){if(Pd(t,0)!==0)break;if(s=t.suspendedLanes,(s&r)!==r){Fn(),t.pingedLanes|=t.suspendedLanes&s;break}t.timeoutHandle=i1(mo.bind(null,t,Kn,Bi),e);break}mo(t,Kn,Bi);break;case 4:if(vs(t,r),(r&4194240)===r)break;for(e=t.eventTimes,s=-1;0<r;){var c=31-ei(r);o=1<<c,c=e[c],c>s&&(s=c),r&=~o}if(r=s,r=Gt()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*J3(r/1960))-r,10<r){t.timeoutHandle=i1(mo.bind(null,t,Kn,Bi),r);break}mo(t,Kn,Bi);break;case 5:mo(t,Kn,Bi);break;default:throw Error(se(329))}}}return er(t,Gt()),t.callbackNode===n?lb.bind(null,t):null}function S1(t,e){var n=cc;return t.current.memoizedState.isDehydrated&&(Mo(t,e).flags|=256),t=Jd(t,e),t!==2&&(e=Kn,Kn=n,e!==null&&A1(e)),t}function A1(t){Kn===null?Kn=t:Kn.push.apply(Kn,t)}function eI(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var s=n[r],o=s.getSnapshot;s=s.value;try{if(!ri(o(),s))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function vs(t,e){for(e&=~dg,e&=~Lh,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-ei(e),r=1<<n;t[n]=-1,e&=~r}}function Wy(t){if(et&6)throw Error(se(327));Ua();var e=Pd(t,0);if(!(e&1))return er(t,Gt()),null;var n=Jd(t,e);if(t.tag!==0&&n===2){var r=q0(t);r!==0&&(e=r,n=S1(t,r))}if(n===1)throw n=Pc,Mo(t,0),vs(t,e),er(t,Gt()),n;if(n===6)throw Error(se(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,mo(t,Kn,Bi),er(t,Gt()),null}function fg(t,e){var n=et;et|=1;try{return t(e)}finally{et=n,et===0&&(sl=Gt()+500,kh&&to())}}function Vo(t){Is!==null&&Is.tag===0&&!(et&6)&&Ua();var e=et;et|=1;var n=Ir.transition,r=ct;try{if(Ir.transition=null,ct=1,t)return t()}finally{ct=r,Ir.transition=n,et=e,!(et&6)&&to()}}function pg(){ar=Ta.current,bt(Ta)}function Mo(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,N3(n)),Kt!==null)for(n=Kt.return;n!==null;){var r=n;switch(Xp(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&Ud();break;case 3:rl(),bt(Qn),bt(Nn),rg();break;case 5:ng(r);break;case 4:rl();break;case 13:bt(kt);break;case 19:bt(kt);break;case 10:Qp(r.type._context);break;case 22:case 23:pg()}n=n.return}if(dn=t,Kt=t=js(t.current,null),vn=ar=e,sn=0,Pc=null,dg=Lh=Uo=0,Kn=cc=null,bo!==null){for(e=0;e<bo.length;e++)if(n=bo[e],r=n.interleaved,r!==null){n.interleaved=null;var s=r.next,o=n.pending;if(o!==null){var c=o.next;o.next=s,r.next=c}n.pending=r}bo=null}return t}function cb(t,e){do{var n=Kt;try{if(Zp(),pd.current=Kd,Xd){for(var r=Dt.memoizedState;r!==null;){var s=r.queue;s!==null&&(s.pending=null),r=r.next}Xd=!1}if(jo=0,un=nn=Dt=null,ac=!1,kc=0,ug.current=null,n===null||n.return===null){sn=1,Pc=e,Kt=null;break}e:{var o=t,c=n.return,h=n,g=e;if(e=vn,h.flags|=32768,g!==null&&typeof g=="object"&&typeof g.then=="function"){var p=g,y=h,x=y.tag;if(!(y.mode&1)&&(x===0||x===11||x===15)){var E=y.alternate;E?(y.updateQueue=E.updateQueue,y.memoizedState=E.memoizedState,y.lanes=E.lanes):(y.updateQueue=null,y.memoizedState=null)}var b=Oy(c);if(b!==null){b.flags&=-257,ky(b,c,h,o,e),b.mode&1&&Ny(o,p,e),e=b,g=p;var I=e.updateQueue;if(I===null){var S=new Set;S.add(g),e.updateQueue=S}else I.add(g);break e}else{if(!(e&1)){Ny(o,p,e),gg();break e}g=Error(se(426))}}else if(It&&h.mode&1){var R=Oy(c);if(R!==null){!(R.flags&65536)&&(R.flags|=256),ky(R,c,h,o,e),Kp(il(g,h));break e}}o=g=il(g,h),sn!==4&&(sn=2),cc===null?cc=[o]:cc.push(o),o=c;do{switch(o.tag){case 3:o.flags|=65536,e&=-e,o.lanes|=e;var A=GE(o,g,e);Sy(o,A);break e;case 1:h=g;var _=o.type,T=o.stateNode;if(!(o.flags&128)&&(typeof _.getDerivedStateFromError=="function"||T!==null&&typeof T.componentDidCatch=="function"&&(Bs===null||!Bs.has(T)))){o.flags|=65536,e&=-e,o.lanes|=e;var D=YE(o,h,e);Sy(o,D);break e}}o=o.return}while(o!==null)}hb(n)}catch(F){e=F,Kt===n&&n!==null&&(Kt=n=n.return);continue}break}while(!0)}function ub(){var t=qd.current;return qd.current=Kd,t===null?Kd:t}function gg(){(sn===0||sn===3||sn===2)&&(sn=4),dn===null||!(Uo&268435455)&&!(Lh&268435455)||vs(dn,vn)}function Jd(t,e){var n=et;et|=2;var r=ub();(dn!==t||vn!==e)&&(Bi=null,Mo(t,e));do try{tI();break}catch(s){cb(t,s)}while(!0);if(Zp(),et=n,qd.current=r,Kt!==null)throw Error(se(261));return dn=null,vn=0,sn}function tI(){for(;Kt!==null;)db(Kt)}function nI(){for(;Kt!==null&&!TT();)db(Kt)}function db(t){var e=pb(t.alternate,t,ar);t.memoizedProps=t.pendingProps,e===null?hb(t):Kt=e,ug.current=null}function hb(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=K3(n,e),n!==null){n.flags&=32767,Kt=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{sn=6,Kt=null;return}}else if(n=X3(n,e,ar),n!==null){Kt=n;return}if(e=e.sibling,e!==null){Kt=e;return}Kt=e=t}while(e!==null);sn===0&&(sn=5)}function mo(t,e,n){var r=ct,s=Ir.transition;try{Ir.transition=null,ct=1,rI(t,e,n,r)}finally{Ir.transition=s,ct=r}return null}function rI(t,e,n,r){do Ua();while(Is!==null);if(et&6)throw Error(se(327));n=t.finishedWork;var s=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(se(177));t.callbackNode=null,t.callbackPriority=0;var o=n.lanes|n.childLanes;if(BT(t,o),t===dn&&(Kt=dn=null,vn=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||Wu||(Wu=!0,gb(Dd,function(){return Ua(),null})),o=(n.flags&15990)!==0,n.subtreeFlags&15990||o){o=Ir.transition,Ir.transition=null;var c=ct;ct=1;var h=et;et|=4,ug.current=null,Z3(t,n),ob(n,t),C3(n1),Ld=!!t1,n1=t1=null,t.current=n,Q3(n),IT(),et=h,ct=c,Ir.transition=o}else t.current=n;if(Wu&&(Wu=!1,Is=t,Qd=s),o=t.pendingLanes,o===0&&(Bs=null),OT(n.stateNode),er(t,Gt()),e!==null)for(r=t.onRecoverableError,n=0;n<e.length;n++)s=e[n],r(s.value,{componentStack:s.stack,digest:s.digest});if(Zd)throw Zd=!1,t=b1,b1=null,t;return Qd&1&&t.tag!==0&&Ua(),o=t.pendingLanes,o&1?t===C1?uc++:(uc=0,C1=t):uc=0,to(),null}function Ua(){if(Is!==null){var t=G2(Qd),e=Ir.transition,n=ct;try{if(Ir.transition=null,ct=16>t?16:t,Is===null)var r=!1;else{if(t=Is,Is=null,Qd=0,et&6)throw Error(se(331));var s=et;for(et|=4,ve=t.current;ve!==null;){var o=ve,c=o.child;if(ve.flags&16){var h=o.deletions;if(h!==null){for(var g=0;g<h.length;g++){var p=h[g];for(ve=p;ve!==null;){var y=ve;switch(y.tag){case 0:case 11:case 15:lc(8,y,o)}var x=y.child;if(x!==null)x.return=y,ve=x;else for(;ve!==null;){y=ve;var E=y.sibling,b=y.return;if(rb(y),y===p){ve=null;break}if(E!==null){E.return=b,ve=E;break}ve=b}}}var I=o.alternate;if(I!==null){var S=I.child;if(S!==null){I.child=null;do{var R=S.sibling;S.sibling=null,S=R}while(S!==null)}}ve=o}}if(o.subtreeFlags&2064&&c!==null)c.return=o,ve=c;else e:for(;ve!==null;){if(o=ve,o.flags&2048)switch(o.tag){case 0:case 11:case 15:lc(9,o,o.return)}var A=o.sibling;if(A!==null){A.return=o.return,ve=A;break e}ve=o.return}}var _=t.current;for(ve=_;ve!==null;){c=ve;var T=c.child;if(c.subtreeFlags&2064&&T!==null)T.return=c,ve=T;else e:for(c=_;ve!==null;){if(h=ve,h.flags&2048)try{switch(h.tag){case 0:case 11:case 15:Ph(9,h)}}catch(F){Ht(h,h.return,F)}if(h===c){ve=null;break e}var D=h.sibling;if(D!==null){D.return=h.return,ve=D;break e}ve=h.return}}if(et=s,to(),Ai&&typeof Ai.onPostCommitFiberRoot=="function")try{Ai.onPostCommitFiberRoot(Th,t)}catch{}r=!0}return r}finally{ct=n,Ir.transition=e}}return!1}function $y(t,e,n){e=il(n,e),e=GE(t,e,1),t=Ls(t,e,1),e=Fn(),t!==null&&(ou(t,1,e),er(t,e))}function Ht(t,e,n){if(t.tag===3)$y(t,t,n);else for(;e!==null;){if(e.tag===3){$y(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(Bs===null||!Bs.has(r))){t=il(n,t),t=YE(e,t,1),e=Ls(e,t,1),t=Fn(),e!==null&&(ou(e,1,t),er(e,t));break}}e=e.return}}function iI(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),e=Fn(),t.pingedLanes|=t.suspendedLanes&n,dn===t&&(vn&n)===n&&(sn===4||sn===3&&(vn&130023424)===vn&&500>Gt()-hg?Mo(t,0):dg|=n),er(t,e)}function fb(t,e){e===0&&(t.mode&1?(e=Du,Du<<=1,!(Du&130023424)&&(Du=4194304)):e=1);var n=Fn();t=Yi(t,e),t!==null&&(ou(t,e,n),er(t,n))}function sI(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),fb(t,n)}function oI(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,s=t.memoizedState;s!==null&&(n=s.retryLane);break;case 19:r=t.stateNode;break;default:throw Error(se(314))}r!==null&&r.delete(e),fb(t,n)}var pb;pb=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||Qn.current)qn=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return qn=!1,Y3(t,e,n);qn=!!(t.flags&131072)}else qn=!1,It&&e.flags&1048576&&wE(e,Hd,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;md(t,e),t=e.pendingProps;var s=el(e,Nn.current);ja(e,n),s=sg(null,e,r,t,s,n);var o=og();return e.flags|=1,typeof s=="object"&&s!==null&&typeof s.render=="function"&&s.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,Jn(r)?(o=!0,Vd(e)):o=!1,e.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,eg(e),s.updater=Dh,e.stateNode=s,s._reactInternals=e,d1(e,r,t,n),e=p1(null,e,r,!0,o,n)):(e.tag=0,It&&o&&Yp(e),Mn(null,e,s,n),e=e.child),e;case 16:r=e.elementType;e:{switch(md(t,e),t=e.pendingProps,s=r._init,r=s(r._payload),e.type=r,s=e.tag=lI(r),t=$r(r,t),s){case 0:e=f1(null,e,r,t,n);break e;case 1:e=Py(null,e,r,t,n);break e;case 11:e=My(null,e,r,t,n);break e;case 14:e=Dy(null,e,r,$r(r.type,t),n);break e}throw Error(se(306,r,""))}return e;case 0:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:$r(r,s),f1(t,e,r,s,n);case 1:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:$r(r,s),Py(t,e,r,s,n);case 3:e:{if(ZE(e),t===null)throw Error(se(387));r=e.pendingProps,o=e.memoizedState,s=o.element,SE(t,e),Gd(e,r,null,n);var c=e.memoizedState;if(r=c.element,o.isDehydrated)if(o={element:r,isDehydrated:!1,cache:c.cache,pendingSuspenseBoundaries:c.pendingSuspenseBoundaries,transitions:c.transitions},e.updateQueue.baseState=o,e.memoizedState=o,e.flags&256){s=il(Error(se(423)),e),e=Ly(t,e,r,n,s);break e}else if(r!==s){s=il(Error(se(424)),e),e=Ly(t,e,r,n,s);break e}else for(dr=Ps(e.stateNode.containerInfo.firstChild),hr=e,It=!0,Jr=null,n=bE(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(tl(),r===s){e=Xi(t,e,n);break e}Mn(t,e,r,n)}e=e.child}return e;case 5:return AE(e),t===null&&l1(e),r=e.type,s=e.pendingProps,o=t!==null?t.memoizedProps:null,c=s.children,r1(r,s)?c=null:o!==null&&r1(r,o)&&(e.flags|=32),qE(t,e),Mn(t,e,c,n),e.child;case 6:return t===null&&l1(e),null;case 13:return QE(t,e,n);case 4:return tg(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=nl(e,null,r,n):Mn(t,e,r,n),e.child;case 11:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:$r(r,s),My(t,e,r,s,n);case 7:return Mn(t,e,e.pendingProps,n),e.child;case 8:return Mn(t,e,e.pendingProps.children,n),e.child;case 12:return Mn(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(r=e.type._context,s=e.pendingProps,o=e.memoizedProps,c=s.value,mt(Wd,r._currentValue),r._currentValue=c,o!==null)if(ri(o.value,c)){if(o.children===s.children&&!Qn.current){e=Xi(t,e,n);break e}}else for(o=e.child,o!==null&&(o.return=e);o!==null;){var h=o.dependencies;if(h!==null){c=o.child;for(var g=h.firstContext;g!==null;){if(g.context===r){if(o.tag===1){g=Wi(-1,n&-n),g.tag=2;var p=o.updateQueue;if(p!==null){p=p.shared;var y=p.pending;y===null?g.next=g:(g.next=y.next,y.next=g),p.pending=g}}o.lanes|=n,g=o.alternate,g!==null&&(g.lanes|=n),c1(o.return,n,e),h.lanes|=n;break}g=g.next}}else if(o.tag===10)c=o.type===e.type?null:o.child;else if(o.tag===18){if(c=o.return,c===null)throw Error(se(341));c.lanes|=n,h=c.alternate,h!==null&&(h.lanes|=n),c1(c,n,e),c=o.sibling}else c=o.child;if(c!==null)c.return=o;else for(c=o;c!==null;){if(c===e){c=null;break}if(o=c.sibling,o!==null){o.return=c.return,c=o;break}c=c.return}o=c}Mn(t,e,s.children,n),e=e.child}return e;case 9:return s=e.type,r=e.pendingProps.children,ja(e,n),s=Nr(s),r=r(s),e.flags|=1,Mn(t,e,r,n),e.child;case 14:return r=e.type,s=$r(r,e.pendingProps),s=$r(r.type,s),Dy(t,e,r,s,n);case 15:return XE(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:$r(r,s),md(t,e),e.tag=1,Jn(r)?(t=!0,Vd(e)):t=!1,ja(e,n),$E(e,r,s),d1(e,r,s,n),p1(null,e,r,!0,t,n);case 19:return JE(t,e,n);case 22:return KE(t,e,n)}throw Error(se(156,e.tag))};function gb(t,e){return z2(t,e)}function aI(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function _r(t,e,n,r){return new aI(t,e,n,r)}function mg(t){return t=t.prototype,!(!t||!t.isReactComponent)}function lI(t){if(typeof t=="function")return mg(t)?1:0;if(t!=null){if(t=t.$$typeof,t===Pp)return 11;if(t===Lp)return 14}return 2}function js(t,e){var n=t.alternate;return n===null?(n=_r(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function xd(t,e,n,r,s,o){var c=2;if(r=t,typeof t=="function")mg(t)&&(c=1);else if(typeof t=="string")c=5;else e:switch(t){case ya:return Do(n.children,s,o,e);case Dp:c=8,s|=8;break;case P0:return t=_r(12,n,e,s|2),t.elementType=P0,t.lanes=o,t;case L0:return t=_r(13,n,e,s),t.elementType=L0,t.lanes=o,t;case B0:return t=_r(19,n,e,s),t.elementType=B0,t.lanes=o,t;case A2:return Bh(n,s,o,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case C2:c=10;break e;case S2:c=9;break e;case Pp:c=11;break e;case Lp:c=14;break e;case gs:c=16,r=null;break e}throw Error(se(130,t==null?t:typeof t,""))}return e=_r(c,n,e,s),e.elementType=t,e.type=r,e.lanes=o,e}function Do(t,e,n,r){return t=_r(7,t,r,e),t.lanes=n,t}function Bh(t,e,n,r){return t=_r(22,t,r,e),t.elementType=A2,t.lanes=n,t.stateNode={isHidden:!1},t}function Jf(t,e,n){return t=_r(6,t,null,e),t.lanes=n,t}function e0(t,e,n){return e=_r(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function cI(t,e,n,r,s){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Df(0),this.expirationTimes=Df(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Df(0),this.identifierPrefix=r,this.onRecoverableError=s,this.mutableSourceEagerHydrationData=null}function yg(t,e,n,r,s,o,c,h,g){return t=new cI(t,e,n,h,g),e===1?(e=1,o===!0&&(e|=8)):e=0,o=_r(3,null,null,e),t.current=o,o.stateNode=t,o.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},eg(o),t}function uI(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:ma,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}function mb(t){if(!t)return Ws;t=t._reactInternals;e:{if(Yo(t)!==t||t.tag!==1)throw Error(se(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(Jn(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(se(171))}if(t.tag===1){var n=t.type;if(Jn(n))return mE(t,n,e)}return e}function yb(t,e,n,r,s,o,c,h,g){return t=yg(n,r,!0,t,s,o,c,h,g),t.context=mb(null),n=t.current,r=Fn(),s=Fs(n),o=Wi(r,s),o.callback=e??null,Ls(n,o,s),t.current.lanes=s,ou(t,s,r),er(t,r),t}function Fh(t,e,n,r){var s=e.current,o=Fn(),c=Fs(s);return n=mb(n),e.context===null?e.context=n:e.pendingContext=n,e=Wi(o,c),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),t=Ls(s,e,c),t!==null&&(ti(t,s,c,o),fd(t,s,c)),c}function eh(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function Gy(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function wg(t,e){Gy(t,e),(t=t.alternate)&&Gy(t,e)}function dI(){return null}var wb=typeof reportError=="function"?reportError:function(t){console.error(t)};function xg(t){this._internalRoot=t}jh.prototype.render=xg.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(se(409));Fh(t,e,null,null)};jh.prototype.unmount=xg.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;Vo(function(){Fh(null,t,null,null)}),e[Gi]=null}};function jh(t){this._internalRoot=t}jh.prototype.unstable_scheduleHydration=function(t){if(t){var e=K2();t={blockedOn:null,target:t,priority:e};for(var n=0;n<xs.length&&e!==0&&e<xs[n].priority;n++);xs.splice(n,0,t),n===0&&Z2(t)}};function vg(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function Uh(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function Yy(){}function hI(t,e,n,r,s){if(s){if(typeof r=="function"){var o=r;r=function(){var p=eh(c);o.call(p)}}var c=yb(e,r,t,0,null,!1,!1,"",Yy);return t._reactRootContainer=c,t[Gi]=c.current,Tc(t.nodeType===8?t.parentNode:t),Vo(),c}for(;s=t.lastChild;)t.removeChild(s);if(typeof r=="function"){var h=r;r=function(){var p=eh(g);h.call(p)}}var g=yg(t,0,!1,null,null,!1,!1,"",Yy);return t._reactRootContainer=g,t[Gi]=g.current,Tc(t.nodeType===8?t.parentNode:t),Vo(function(){Fh(e,g,n,r)}),g}function Vh(t,e,n,r,s){var o=n._reactRootContainer;if(o){var c=o;if(typeof s=="function"){var h=s;s=function(){var g=eh(c);h.call(g)}}Fh(e,c,t,s)}else c=hI(n,e,t,s,r);return eh(c)}Y2=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=Zl(e.pendingLanes);n!==0&&(jp(e,n|1),er(e,Gt()),!(et&6)&&(sl=Gt()+500,to()))}break;case 13:Vo(function(){var r=Yi(t,1);if(r!==null){var s=Fn();ti(r,t,1,s)}}),wg(t,1)}};Up=function(t){if(t.tag===13){var e=Yi(t,134217728);if(e!==null){var n=Fn();ti(e,t,134217728,n)}wg(t,134217728)}};X2=function(t){if(t.tag===13){var e=Fs(t),n=Yi(t,e);if(n!==null){var r=Fn();ti(n,t,e,r)}wg(t,e)}};K2=function(){return ct};q2=function(t,e){var n=ct;try{return ct=t,e()}finally{ct=n}};Y0=function(t,e,n){switch(e){case"input":if(U0(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var s=Oh(r);if(!s)throw Error(se(90));T2(r),U0(r,s)}}}break;case"textarea":R2(t,n);break;case"select":e=n.value,e!=null&&Pa(t,!!n.multiple,e,!1)}};L2=fg;B2=Vo;var fI={usingClientEntryPoint:!1,Events:[lu,Ea,Oh,D2,P2,fg]},Wl={findFiberByHostInstance:Eo,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},pI={bundleType:Wl.bundleType,version:Wl.version,rendererPackageName:Wl.rendererPackageName,rendererConfig:Wl.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:es.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=U2(t),t===null?null:t.stateNode},findFiberByHostInstance:Wl.findFiberByHostInstance||dI,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var $u=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!$u.isDisabled&&$u.supportsFiber)try{Th=$u.inject(pI),Ai=$u}catch{}}mr.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=fI;mr.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!vg(e))throw Error(se(200));return uI(t,e,null,n)};mr.createRoot=function(t,e){if(!vg(t))throw Error(se(299));var n=!1,r="",s=wb;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(s=e.onRecoverableError)),e=yg(t,1,!1,null,null,n,!1,r,s),t[Gi]=e.current,Tc(t.nodeType===8?t.parentNode:t),new xg(e)};mr.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(se(188)):(t=Object.keys(t).join(","),Error(se(268,t)));return t=U2(e),t=t===null?null:t.stateNode,t};mr.flushSync=function(t){return Vo(t)};mr.hydrate=function(t,e,n){if(!Uh(e))throw Error(se(200));return Vh(null,t,e,!0,n)};mr.hydrateRoot=function(t,e,n){if(!vg(t))throw Error(se(405));var r=n!=null&&n.hydratedSources||null,s=!1,o="",c=wb;if(n!=null&&(n.unstable_strictMode===!0&&(s=!0),n.identifierPrefix!==void 0&&(o=n.identifierPrefix),n.onRecoverableError!==void 0&&(c=n.onRecoverableError)),e=yb(e,null,t,1,n??null,s,!1,o,c),t[Gi]=e.current,Tc(t),r)for(t=0;t<r.length;t++)n=r[t],s=n._getVersion,s=s(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,s]:e.mutableSourceEagerHydrationData.push(n,s);return new jh(e)};mr.render=function(t,e,n){if(!Uh(e))throw Error(se(200));return Vh(null,t,e,!1,n)};mr.unmountComponentAtNode=function(t){if(!Uh(t))throw Error(se(40));return t._reactRootContainer?(Vo(function(){Vh(null,null,t,!1,function(){t._reactRootContainer=null,t[Gi]=null})}),!0):!1};mr.unstable_batchedUpdates=fg;mr.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!Uh(n))throw Error(se(200));if(t==null||t._reactInternals===void 0)throw Error(se(38));return Vh(t,e,n,!1,r)};mr.version="18.3.1-next-f1338f8080-20240426";function xb(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(xb)}catch(t){console.error(t)}}xb(),x2.exports=mr;var uu=x2.exports;const vb=_p(uu);var Eb,Xy=uu;Eb=Xy.createRoot,Xy.hydrateRoot;const gI=1,mI=1e6;let t0=0;function yI(){return t0=(t0+1)%Number.MAX_SAFE_INTEGER,t0.toString()}const n0=new Map,Ky=t=>{if(n0.has(t))return;const e=setTimeout(()=>{n0.delete(t),dc({type:"REMOVE_TOAST",toastId:t})},mI);n0.set(t,e)},wI=(t,e)=>{switch(e.type){case"ADD_TOAST":return{...t,toasts:[e.toast,...t.toasts].slice(0,gI)};case"UPDATE_TOAST":return{...t,toasts:t.toasts.map(n=>n.id===e.toast.id?{...n,...e.toast}:n)};case"DISMISS_TOAST":{const{toastId:n}=e;return n?Ky(n):t.toasts.forEach(r=>{Ky(r.id)}),{...t,toasts:t.toasts.map(r=>r.id===n||n===void 0?{...r,open:!1}:r)}}case"REMOVE_TOAST":return e.toastId===void 0?{...t,toasts:[]}:{...t,toasts:t.toasts.filter(n=>n.id!==e.toastId)}}},vd=[];let Ed={toasts:[]};function dc(t){Ed=wI(Ed,t),vd.forEach(e=>{e(Ed)})}function xI({...t}){const e=yI(),n=s=>dc({type:"UPDATE_TOAST",toast:{...s,id:e}}),r=()=>dc({type:"DISMISS_TOAST",toastId:e});return dc({type:"ADD_TOAST",toast:{...t,id:e,open:!0,onOpenChange:s=>{s||r()}}}),{id:e,dismiss:r,update:n}}function vI(){const[t,e]=M.useState(Ed);return M.useEffect(()=>(vd.push(e),()=>{const n=vd.indexOf(e);n>-1&&vd.splice(n,1)}),[t]),{...t,toast:xI,dismiss:n=>dc({type:"DISMISS_TOAST",toastId:n})}}function rn(t,e,{checkForDefaultPrevented:n=!0}={}){return function(s){if(t==null||t(s),n===!1||!s.defaultPrevented)return e==null?void 0:e(s)}}function qy(t,e){if(typeof t=="function")return t(e);t!=null&&(t.current=e)}function bb(...t){return e=>{let n=!1;const r=t.map(s=>{const o=qy(s,e);return!n&&typeof o=="function"&&(n=!0),o});if(n)return()=>{for(let s=0;s<r.length;s++){const o=r[s];typeof o=="function"?o():qy(t[s],null)}}}}function ii(...t){return M.useCallback(bb(...t),t)}function zh(t,e=[]){let n=[];function r(o,c){const h=M.createContext(c),g=n.length;n=[...n,c];const p=x=>{var A;const{scope:E,children:b,...I}=x,S=((A=E==null?void 0:E[t])==null?void 0:A[g])||h,R=M.useMemo(()=>I,Object.values(I));return U.jsx(S.Provider,{value:R,children:b})};p.displayName=o+"Provider";function y(x,E){var S;const b=((S=E==null?void 0:E[t])==null?void 0:S[g])||h,I=M.useContext(b);if(I)return I;if(c!==void 0)return c;throw new Error(`\`${x}\` must be used within \`${o}\``)}return[p,y]}const s=()=>{const o=n.map(c=>M.createContext(c));return function(h){const g=(h==null?void 0:h[t])||o;return M.useMemo(()=>({[`__scope${t}`]:{...h,[t]:g}}),[h,g])}};return s.scopeName=t,[r,EI(s,...e)]}function EI(...t){const e=t[0];if(t.length===1)return e;const n=()=>{const r=t.map(s=>({useScope:s(),scopeName:s.scopeName}));return function(o){const c=r.reduce((h,{useScope:g,scopeName:p})=>{const x=g(o)[`__scope${p}`];return{...h,...x}},{});return M.useMemo(()=>({[`__scope${e.scopeName}`]:c}),[c])}};return n.scopeName=e.scopeName,n}function th(t){const e=CI(t),n=M.forwardRef((r,s)=>{const{children:o,...c}=r,h=M.Children.toArray(o),g=h.find(AI);if(g){const p=g.props.children,y=h.map(x=>x===g?M.Children.count(p)>1?M.Children.only(null):M.isValidElement(p)?p.props.children:null:x);return U.jsx(e,{...c,ref:s,children:M.isValidElement(p)?M.cloneElement(p,void 0,y):null})}return U.jsx(e,{...c,ref:s,children:o})});return n.displayName=`${t}.Slot`,n}var bI=th("Slot");function CI(t){const e=M.forwardRef((n,r)=>{const{children:s,...o}=n;if(M.isValidElement(s)){const c=TI(s),h=_I(o,s.props);return s.type!==M.Fragment&&(h.ref=r?bb(r,c):c),M.cloneElement(s,h)}return M.Children.count(s)>1?M.Children.only(null):null});return e.displayName=`${t}.SlotClone`,e}var Cb=Symbol("radix.slottable");function SI(t){const e=({children:n})=>U.jsx(U.Fragment,{children:n});return e.displayName=`${t}.Slottable`,e.__radixId=Cb,e}function AI(t){return M.isValidElement(t)&&typeof t.type=="function"&&"__radixId"in t.type&&t.type.__radixId===Cb}function _I(t,e){const n={...e};for(const r in e){const s=t[r],o=e[r];/^on[A-Z]/.test(r)?s&&o?n[r]=(...h)=>{const g=o(...h);return s(...h),g}:s&&(n[r]=s):r==="style"?n[r]={...s,...o}:r==="className"&&(n[r]=[s,o].filter(Boolean).join(" "))}return{...t,...n}}function TI(t){var r,s;let e=(r=Object.getOwnPropertyDescriptor(t.props,"ref"))==null?void 0:r.get,n=e&&"isReactWarning"in e&&e.isReactWarning;return n?t.ref:(e=(s=Object.getOwnPropertyDescriptor(t,"ref"))==null?void 0:s.get,n=e&&"isReactWarning"in e&&e.isReactWarning,n?t.props.ref:t.props.ref||t.ref)}function II(t){const e=t+"CollectionProvider",[n,r]=zh(e),[s,o]=n(e,{collectionRef:{current:null},itemMap:new Map}),c=S=>{const{scope:R,children:A}=S,_=de.useRef(null),T=de.useRef(new Map).current;return U.jsx(s,{scope:R,itemMap:T,collectionRef:_,children:A})};c.displayName=e;const h=t+"CollectionSlot",g=th(h),p=de.forwardRef((S,R)=>{const{scope:A,children:_}=S,T=o(h,A),D=ii(R,T.collectionRef);return U.jsx(g,{ref:D,children:_})});p.displayName=h;const y=t+"CollectionItemSlot",x="data-radix-collection-item",E=th(y),b=de.forwardRef((S,R)=>{const{scope:A,children:_,...T}=S,D=de.useRef(null),F=ii(R,D),j=o(y,A);return de.useEffect(()=>(j.itemMap.set(D,{ref:D,...T}),()=>void j.itemMap.delete(D))),U.jsx(E,{[x]:"",ref:F,children:_})});b.displayName=y;function I(S){const R=o(t+"CollectionConsumer",S);return de.useCallback(()=>{const _=R.collectionRef.current;if(!_)return[];const T=Array.from(_.querySelectorAll(`[${x}]`));return Array.from(R.itemMap.values()).sort((j,B)=>T.indexOf(j.ref.current)-T.indexOf(B.ref.current))},[R.collectionRef,R.itemMap])}return[{Provider:c,Slot:p,ItemSlot:b},I,r]}var RI=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],tr=RI.reduce((t,e)=>{const n=th(`Primitive.${e}`),r=M.forwardRef((s,o)=>{const{asChild:c,...h}=s,g=c?n:e;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),U.jsx(g,{...h,ref:o})});return r.displayName=`Primitive.${e}`,{...t,[e]:r}},{});function Sb(t,e){t&&uu.flushSync(()=>t.dispatchEvent(e))}function $s(t){const e=M.useRef(t);return M.useEffect(()=>{e.current=t}),M.useMemo(()=>(...n)=>{var r;return(r=e.current)==null?void 0:r.call(e,...n)},[])}function NI(t,e=globalThis==null?void 0:globalThis.document){const n=$s(t);M.useEffect(()=>{const r=s=>{s.key==="Escape"&&n(s)};return e.addEventListener("keydown",r,{capture:!0}),()=>e.removeEventListener("keydown",r,{capture:!0})},[n,e])}var OI="DismissableLayer",_1="dismissableLayer.update",kI="dismissableLayer.pointerDownOutside",MI="dismissableLayer.focusOutside",Zy,Ab=M.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),Eg=M.forwardRef((t,e)=>{const{disableOutsidePointerEvents:n=!1,onEscapeKeyDown:r,onPointerDownOutside:s,onFocusOutside:o,onInteractOutside:c,onDismiss:h,...g}=t,p=M.useContext(Ab),[y,x]=M.useState(null),E=(y==null?void 0:y.ownerDocument)??(globalThis==null?void 0:globalThis.document),[,b]=M.useState({}),I=ii(e,B=>x(B)),S=Array.from(p.layers),[R]=[...p.layersWithOutsidePointerEventsDisabled].slice(-1),A=S.indexOf(R),_=y?S.indexOf(y):-1,T=p.layersWithOutsidePointerEventsDisabled.size>0,D=_>=A,F=PI(B=>{const W=B.target,H=[...p.branches].some(te=>te.contains(W));!D||H||(s==null||s(B),c==null||c(B),B.defaultPrevented||h==null||h())},E),j=LI(B=>{const W=B.target;[...p.branches].some(te=>te.contains(W))||(o==null||o(B),c==null||c(B),B.defaultPrevented||h==null||h())},E);return NI(B=>{_===p.layers.size-1&&(r==null||r(B),!B.defaultPrevented&&h&&(B.preventDefault(),h()))},E),M.useEffect(()=>{if(y)return n&&(p.layersWithOutsidePointerEventsDisabled.size===0&&(Zy=E.body.style.pointerEvents,E.body.style.pointerEvents="none"),p.layersWithOutsidePointerEventsDisabled.add(y)),p.layers.add(y),Qy(),()=>{n&&p.layersWithOutsidePointerEventsDisabled.size===1&&(E.body.style.pointerEvents=Zy)}},[y,E,n,p]),M.useEffect(()=>()=>{y&&(p.layers.delete(y),p.layersWithOutsidePointerEventsDisabled.delete(y),Qy())},[y,p]),M.useEffect(()=>{const B=()=>b({});return document.addEventListener(_1,B),()=>document.removeEventListener(_1,B)},[]),U.jsx(tr.div,{...g,ref:I,style:{pointerEvents:T?D?"auto":"none":void 0,...t.style},onFocusCapture:rn(t.onFocusCapture,j.onFocusCapture),onBlurCapture:rn(t.onBlurCapture,j.onBlurCapture),onPointerDownCapture:rn(t.onPointerDownCapture,F.onPointerDownCapture)})});Eg.displayName=OI;var DI="DismissableLayerBranch",_b=M.forwardRef((t,e)=>{const n=M.useContext(Ab),r=M.useRef(null),s=ii(e,r);return M.useEffect(()=>{const o=r.current;if(o)return n.branches.add(o),()=>{n.branches.delete(o)}},[n.branches]),U.jsx(tr.div,{...t,ref:s})});_b.displayName=DI;function PI(t,e=globalThis==null?void 0:globalThis.document){const n=$s(t),r=M.useRef(!1),s=M.useRef(()=>{});return M.useEffect(()=>{const o=h=>{if(h.target&&!r.current){let g=function(){Tb(kI,n,p,{discrete:!0})};const p={originalEvent:h};h.pointerType==="touch"?(e.removeEventListener("click",s.current),s.current=g,e.addEventListener("click",s.current,{once:!0})):g()}else e.removeEventListener("click",s.current);r.current=!1},c=window.setTimeout(()=>{e.addEventListener("pointerdown",o)},0);return()=>{window.clearTimeout(c),e.removeEventListener("pointerdown",o),e.removeEventListener("click",s.current)}},[e,n]),{onPointerDownCapture:()=>r.current=!0}}function LI(t,e=globalThis==null?void 0:globalThis.document){const n=$s(t),r=M.useRef(!1);return M.useEffect(()=>{const s=o=>{o.target&&!r.current&&Tb(MI,n,{originalEvent:o},{discrete:!1})};return e.addEventListener("focusin",s),()=>e.removeEventListener("focusin",s)},[e,n]),{onFocusCapture:()=>r.current=!0,onBlurCapture:()=>r.current=!1}}function Qy(){const t=new CustomEvent(_1);document.dispatchEvent(t)}function Tb(t,e,n,{discrete:r}){const s=n.originalEvent.target,o=new CustomEvent(t,{bubbles:!1,cancelable:!0,detail:n});e&&s.addEventListener(t,e,{once:!0}),r?Sb(s,o):s.dispatchEvent(o)}var BI=Eg,FI=_b,Gs=globalThis!=null&&globalThis.document?M.useLayoutEffect:()=>{},jI="Portal",Ib=M.forwardRef((t,e)=>{var h;const{container:n,...r}=t,[s,o]=M.useState(!1);Gs(()=>o(!0),[]);const c=n||s&&((h=globalThis==null?void 0:globalThis.document)==null?void 0:h.body);return c?vb.createPortal(U.jsx(tr.div,{...r,ref:e}),c):null});Ib.displayName=jI;function UI(t,e){return M.useReducer((n,r)=>e[n][r]??n,t)}var bg=t=>{const{present:e,children:n}=t,r=VI(e),s=typeof n=="function"?n({present:r.isPresent}):M.Children.only(n),o=ii(r.ref,zI(s));return typeof n=="function"||r.isPresent?M.cloneElement(s,{ref:o}):null};bg.displayName="Presence";function VI(t){const[e,n]=M.useState(),r=M.useRef(null),s=M.useRef(t),o=M.useRef("none"),c=t?"mounted":"unmounted",[h,g]=UI(c,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return M.useEffect(()=>{const p=Gu(r.current);o.current=h==="mounted"?p:"none"},[h]),Gs(()=>{const p=r.current,y=s.current;if(y!==t){const E=o.current,b=Gu(p);t?g("MOUNT"):b==="none"||(p==null?void 0:p.display)==="none"?g("UNMOUNT"):g(y&&E!==b?"ANIMATION_OUT":"UNMOUNT"),s.current=t}},[t,g]),Gs(()=>{if(e){let p;const y=e.ownerDocument.defaultView??window,x=b=>{const S=Gu(r.current).includes(b.animationName);if(b.target===e&&S&&(g("ANIMATION_END"),!s.current)){const R=e.style.animationFillMode;e.style.animationFillMode="forwards",p=y.setTimeout(()=>{e.style.animationFillMode==="forwards"&&(e.style.animationFillMode=R)})}},E=b=>{b.target===e&&(o.current=Gu(r.current))};return e.addEventListener("animationstart",E),e.addEventListener("animationcancel",x),e.addEventListener("animationend",x),()=>{y.clearTimeout(p),e.removeEventListener("animationstart",E),e.removeEventListener("animationcancel",x),e.removeEventListener("animationend",x)}}else g("ANIMATION_END")},[e,g]),{isPresent:["mounted","unmountSuspended"].includes(h),ref:M.useCallback(p=>{r.current=p?getComputedStyle(p):null,n(p)},[])}}function Gu(t){return(t==null?void 0:t.animationName)||"none"}function zI(t){var r,s;let e=(r=Object.getOwnPropertyDescriptor(t.props,"ref"))==null?void 0:r.get,n=e&&"isReactWarning"in e&&e.isReactWarning;return n?t.ref:(e=(s=Object.getOwnPropertyDescriptor(t,"ref"))==null?void 0:s.get,n=e&&"isReactWarning"in e&&e.isReactWarning,n?t.props.ref:t.props.ref||t.ref)}var HI=y2[" useInsertionEffect ".trim().toString()]||Gs;function WI({prop:t,defaultProp:e,onChange:n=()=>{},caller:r}){const[s,o,c]=$I({defaultProp:e,onChange:n}),h=t!==void 0,g=h?t:s;{const y=M.useRef(t!==void 0);M.useEffect(()=>{const x=y.current;x!==h&&console.warn(`${r} is changing from ${x?"controlled":"uncontrolled"} to ${h?"controlled":"uncontrolled"}. Components should not switch from controlled to uncontrolled (or vice versa). Decide between using a controlled or uncontrolled value for the lifetime of the component.`),y.current=h},[h,r])}const p=M.useCallback(y=>{var x;if(h){const E=GI(y)?y(t):y;E!==t&&((x=c.current)==null||x.call(c,E))}else o(y)},[h,t,o,c]);return[g,p]}function $I({defaultProp:t,onChange:e}){const[n,r]=M.useState(t),s=M.useRef(n),o=M.useRef(e);return HI(()=>{o.current=e},[e]),M.useEffect(()=>{var c;s.current!==n&&((c=o.current)==null||c.call(o,n),s.current=n)},[n,s]),[n,r,o]}function GI(t){return typeof t=="function"}var YI=Object.freeze({position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal"}),XI="VisuallyHidden",Hh=M.forwardRef((t,e)=>U.jsx(tr.span,{...t,ref:e,style:{...YI,...t.style}}));Hh.displayName=XI;var KI=Hh,Cg="ToastProvider",[Sg,qI,ZI]=II("Toast"),[Rb,G9]=zh("Toast",[ZI]),[QI,Wh]=Rb(Cg),Nb=t=>{const{__scopeToast:e,label:n="Notification",duration:r=5e3,swipeDirection:s="right",swipeThreshold:o=50,children:c}=t,[h,g]=M.useState(null),[p,y]=M.useState(0),x=M.useRef(!1),E=M.useRef(!1);return n.trim()||console.error(`Invalid prop \`label\` supplied to \`${Cg}\`. Expected non-empty \`string\`.`),U.jsx(Sg.Provider,{scope:e,children:U.jsx(QI,{scope:e,label:n,duration:r,swipeDirection:s,swipeThreshold:o,toastCount:p,viewport:h,onViewportChange:g,onToastAdd:M.useCallback(()=>y(b=>b+1),[]),onToastRemove:M.useCallback(()=>y(b=>b-1),[]),isFocusedToastEscapeKeyDownRef:x,isClosePausedRef:E,children:c})})};Nb.displayName=Cg;var Ob="ToastViewport",JI=["F8"],T1="toast.viewportPause",I1="toast.viewportResume",kb=M.forwardRef((t,e)=>{const{__scopeToast:n,hotkey:r=JI,label:s="Notifications ({hotkey})",...o}=t,c=Wh(Ob,n),h=qI(n),g=M.useRef(null),p=M.useRef(null),y=M.useRef(null),x=M.useRef(null),E=ii(e,x,c.onViewportChange),b=r.join("+").replace(/Key/g,"").replace(/Digit/g,""),I=c.toastCount>0;M.useEffect(()=>{const R=A=>{var T;r.length!==0&&r.every(D=>A[D]||A.code===D)&&((T=x.current)==null||T.focus())};return document.addEventListener("keydown",R),()=>document.removeEventListener("keydown",R)},[r]),M.useEffect(()=>{const R=g.current,A=x.current;if(I&&R&&A){const _=()=>{if(!c.isClosePausedRef.current){const j=new CustomEvent(T1);A.dispatchEvent(j),c.isClosePausedRef.current=!0}},T=()=>{if(c.isClosePausedRef.current){const j=new CustomEvent(I1);A.dispatchEvent(j),c.isClosePausedRef.current=!1}},D=j=>{!R.contains(j.relatedTarget)&&T()},F=()=>{R.contains(document.activeElement)||T()};return R.addEventListener("focusin",_),R.addEventListener("focusout",D),R.addEventListener("pointermove",_),R.addEventListener("pointerleave",F),window.addEventListener("blur",_),window.addEventListener("focus",T),()=>{R.removeEventListener("focusin",_),R.removeEventListener("focusout",D),R.removeEventListener("pointermove",_),R.removeEventListener("pointerleave",F),window.removeEventListener("blur",_),window.removeEventListener("focus",T)}}},[I,c.isClosePausedRef]);const S=M.useCallback(({tabbingDirection:R})=>{const _=h().map(T=>{const D=T.ref.current,F=[D,...h4(D)];return R==="forwards"?F:F.reverse()});return(R==="forwards"?_.reverse():_).flat()},[h]);return M.useEffect(()=>{const R=x.current;if(R){const A=_=>{var F,j,B;const T=_.altKey||_.ctrlKey||_.metaKey;if(_.key==="Tab"&&!T){const W=document.activeElement,H=_.shiftKey;if(_.target===R&&H){(F=p.current)==null||F.focus();return}const Q=S({tabbingDirection:H?"backwards":"forwards"}),fe=Q.findIndex(ie=>ie===W);r0(Q.slice(fe+1))?_.preventDefault():H?(j=p.current)==null||j.focus():(B=y.current)==null||B.focus()}};return R.addEventListener("keydown",A),()=>R.removeEventListener("keydown",A)}},[h,S]),U.jsxs(FI,{ref:g,role:"region","aria-label":s.replace("{hotkey}",b),tabIndex:-1,style:{pointerEvents:I?void 0:"none"},children:[I&&U.jsx(R1,{ref:p,onFocusFromOutsideViewport:()=>{const R=S({tabbingDirection:"forwards"});r0(R)}}),U.jsx(Sg.Slot,{scope:n,children:U.jsx(tr.ol,{tabIndex:-1,...o,ref:E})}),I&&U.jsx(R1,{ref:y,onFocusFromOutsideViewport:()=>{const R=S({tabbingDirection:"backwards"});r0(R)}})]})});kb.displayName=Ob;var Mb="ToastFocusProxy",R1=M.forwardRef((t,e)=>{const{__scopeToast:n,onFocusFromOutsideViewport:r,...s}=t,o=Wh(Mb,n);return U.jsx(Hh,{"aria-hidden":!0,tabIndex:0,...s,ref:e,style:{position:"fixed"},onFocus:c=>{var p;const h=c.relatedTarget;!((p=o.viewport)!=null&&p.contains(h))&&r()}})});R1.displayName=Mb;var du="Toast",e4="toast.swipeStart",t4="toast.swipeMove",n4="toast.swipeCancel",r4="toast.swipeEnd",Db=M.forwardRef((t,e)=>{const{forceMount:n,open:r,defaultOpen:s,onOpenChange:o,...c}=t,[h,g]=WI({prop:r,defaultProp:s??!0,onChange:o,caller:du});return U.jsx(bg,{present:n||h,children:U.jsx(o4,{open:h,...c,ref:e,onClose:()=>g(!1),onPause:$s(t.onPause),onResume:$s(t.onResume),onSwipeStart:rn(t.onSwipeStart,p=>{p.currentTarget.setAttribute("data-swipe","start")}),onSwipeMove:rn(t.onSwipeMove,p=>{const{x:y,y:x}=p.detail.delta;p.currentTarget.setAttribute("data-swipe","move"),p.currentTarget.style.setProperty("--radix-toast-swipe-move-x",`${y}px`),p.currentTarget.style.setProperty("--radix-toast-swipe-move-y",`${x}px`)}),onSwipeCancel:rn(t.onSwipeCancel,p=>{p.currentTarget.setAttribute("data-swipe","cancel"),p.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),p.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),p.currentTarget.style.removeProperty("--radix-toast-swipe-end-x"),p.currentTarget.style.removeProperty("--radix-toast-swipe-end-y")}),onSwipeEnd:rn(t.onSwipeEnd,p=>{const{x:y,y:x}=p.detail.delta;p.currentTarget.setAttribute("data-swipe","end"),p.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),p.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),p.currentTarget.style.setProperty("--radix-toast-swipe-end-x",`${y}px`),p.currentTarget.style.setProperty("--radix-toast-swipe-end-y",`${x}px`),g(!1)})})})});Db.displayName=du;var[i4,s4]=Rb(du,{onClose(){}}),o4=M.forwardRef((t,e)=>{const{__scopeToast:n,type:r="foreground",duration:s,open:o,onClose:c,onEscapeKeyDown:h,onPause:g,onResume:p,onSwipeStart:y,onSwipeMove:x,onSwipeCancel:E,onSwipeEnd:b,...I}=t,S=Wh(du,n),[R,A]=M.useState(null),_=ii(e,ie=>A(ie)),T=M.useRef(null),D=M.useRef(null),F=s||S.duration,j=M.useRef(0),B=M.useRef(F),W=M.useRef(0),{onToastAdd:H,onToastRemove:te}=S,he=$s(()=>{var $;(R==null?void 0:R.contains(document.activeElement))&&(($=S.viewport)==null||$.focus()),c()}),Q=M.useCallback(ie=>{!ie||ie===1/0||(window.clearTimeout(W.current),j.current=new Date().getTime(),W.current=window.setTimeout(he,ie))},[he]);M.useEffect(()=>{const ie=S.viewport;if(ie){const $=()=>{Q(B.current),p==null||p()},Ee=()=>{const ne=new Date().getTime()-j.current;B.current=B.current-ne,window.clearTimeout(W.current),g==null||g()};return ie.addEventListener(T1,Ee),ie.addEventListener(I1,$),()=>{ie.removeEventListener(T1,Ee),ie.removeEventListener(I1,$)}}},[S.viewport,F,g,p,Q]),M.useEffect(()=>{o&&!S.isClosePausedRef.current&&Q(F)},[o,F,S.isClosePausedRef,Q]),M.useEffect(()=>(H(),()=>te()),[H,te]);const fe=M.useMemo(()=>R?Vb(R):null,[R]);return S.viewport?U.jsxs(U.Fragment,{children:[fe&&U.jsx(a4,{__scopeToast:n,role:"status","aria-live":r==="foreground"?"assertive":"polite","aria-atomic":!0,children:fe}),U.jsx(i4,{scope:n,onClose:he,children:uu.createPortal(U.jsx(Sg.ItemSlot,{scope:n,children:U.jsx(BI,{asChild:!0,onEscapeKeyDown:rn(h,()=>{S.isFocusedToastEscapeKeyDownRef.current||he(),S.isFocusedToastEscapeKeyDownRef.current=!1}),children:U.jsx(tr.li,{role:"status","aria-live":"off","aria-atomic":!0,tabIndex:0,"data-state":o?"open":"closed","data-swipe-direction":S.swipeDirection,...I,ref:_,style:{userSelect:"none",touchAction:"none",...t.style},onKeyDown:rn(t.onKeyDown,ie=>{ie.key==="Escape"&&(h==null||h(ie.nativeEvent),ie.nativeEvent.defaultPrevented||(S.isFocusedToastEscapeKeyDownRef.current=!0,he()))}),onPointerDown:rn(t.onPointerDown,ie=>{ie.button===0&&(T.current={x:ie.clientX,y:ie.clientY})}),onPointerMove:rn(t.onPointerMove,ie=>{if(!T.current)return;const $=ie.clientX-T.current.x,Ee=ie.clientY-T.current.y,ne=!!D.current,q=["left","right"].includes(S.swipeDirection),Z=["left","up"].includes(S.swipeDirection)?Math.min:Math.max,ue=q?Z(0,$):0,De=q?0:Z(0,Ee),ge=ie.pointerType==="touch"?10:2,Pe={x:ue,y:De},Re={originalEvent:ie,delta:Pe};ne?(D.current=Pe,Yu(t4,x,Re,{discrete:!1})):Jy(Pe,S.swipeDirection,ge)?(D.current=Pe,Yu(e4,y,Re,{discrete:!1}),ie.target.setPointerCapture(ie.pointerId)):(Math.abs($)>ge||Math.abs(Ee)>ge)&&(T.current=null)}),onPointerUp:rn(t.onPointerUp,ie=>{const $=D.current,Ee=ie.target;if(Ee.hasPointerCapture(ie.pointerId)&&Ee.releasePointerCapture(ie.pointerId),D.current=null,T.current=null,$){const ne=ie.currentTarget,q={originalEvent:ie,delta:$};Jy($,S.swipeDirection,S.swipeThreshold)?Yu(r4,b,q,{discrete:!0}):Yu(n4,E,q,{discrete:!0}),ne.addEventListener("click",Z=>Z.preventDefault(),{once:!0})}})})})}),S.viewport)})]}):null}),a4=t=>{const{__scopeToast:e,children:n,...r}=t,s=Wh(du,e),[o,c]=M.useState(!1),[h,g]=M.useState(!1);return u4(()=>c(!0)),M.useEffect(()=>{const p=window.setTimeout(()=>g(!0),1e3);return()=>window.clearTimeout(p)},[]),h?null:U.jsx(Ib,{asChild:!0,children:U.jsx(Hh,{...r,children:o&&U.jsxs(U.Fragment,{children:[s.label," ",n]})})})},l4="ToastTitle",Pb=M.forwardRef((t,e)=>{const{__scopeToast:n,...r}=t;return U.jsx(tr.div,{...r,ref:e})});Pb.displayName=l4;var c4="ToastDescription",Lb=M.forwardRef((t,e)=>{const{__scopeToast:n,...r}=t;return U.jsx(tr.div,{...r,ref:e})});Lb.displayName=c4;var Bb="ToastAction",Fb=M.forwardRef((t,e)=>{const{altText:n,...r}=t;return n.trim()?U.jsx(Ub,{altText:n,asChild:!0,children:U.jsx(Ag,{...r,ref:e})}):(console.error(`Invalid prop \`altText\` supplied to \`${Bb}\`. Expected non-empty \`string\`.`),null)});Fb.displayName=Bb;var jb="ToastClose",Ag=M.forwardRef((t,e)=>{const{__scopeToast:n,...r}=t,s=s4(jb,n);return U.jsx(Ub,{asChild:!0,children:U.jsx(tr.button,{type:"button",...r,ref:e,onClick:rn(t.onClick,s.onClose)})})});Ag.displayName=jb;var Ub=M.forwardRef((t,e)=>{const{__scopeToast:n,altText:r,...s}=t;return U.jsx(tr.div,{"data-radix-toast-announce-exclude":"","data-radix-toast-announce-alt":r||void 0,...s,ref:e})});function Vb(t){const e=[];return Array.from(t.childNodes).forEach(r=>{if(r.nodeType===r.TEXT_NODE&&r.textContent&&e.push(r.textContent),d4(r)){const s=r.ariaHidden||r.hidden||r.style.display==="none",o=r.dataset.radixToastAnnounceExclude==="";if(!s)if(o){const c=r.dataset.radixToastAnnounceAlt;c&&e.push(c)}else e.push(...Vb(r))}}),e}function Yu(t,e,n,{discrete:r}){const s=n.originalEvent.currentTarget,o=new CustomEvent(t,{bubbles:!0,cancelable:!0,detail:n});e&&s.addEventListener(t,e,{once:!0}),r?Sb(s,o):s.dispatchEvent(o)}var Jy=(t,e,n=0)=>{const r=Math.abs(t.x),s=Math.abs(t.y),o=r>s;return e==="left"||e==="right"?o&&r>n:!o&&s>n};function u4(t=()=>{}){const e=$s(t);Gs(()=>{let n=0,r=0;return n=window.requestAnimationFrame(()=>r=window.requestAnimationFrame(e)),()=>{window.cancelAnimationFrame(n),window.cancelAnimationFrame(r)}},[e])}function d4(t){return t.nodeType===t.ELEMENT_NODE}function h4(t){const e=[],n=document.createTreeWalker(t,NodeFilter.SHOW_ELEMENT,{acceptNode:r=>{const s=r.tagName==="INPUT"&&r.type==="hidden";return r.disabled||r.hidden||s?NodeFilter.FILTER_SKIP:r.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;n.nextNode();)e.push(n.currentNode);return e}function r0(t){const e=document.activeElement;return t.some(n=>n===e?!0:(n.focus(),document.activeElement!==e))}var f4=Nb,zb=kb,Hb=Db,Wb=Pb,$b=Lb,Gb=Fb,Yb=Ag;function Xb(t){var e,n,r="";if(typeof t=="string"||typeof t=="number")r+=t;else if(typeof t=="object")if(Array.isArray(t)){var s=t.length;for(e=0;e<s;e++)t[e]&&(n=Xb(t[e]))&&(r&&(r+=" "),r+=n)}else for(n in t)t[n]&&(r&&(r+=" "),r+=n);return r}function Kb(){for(var t,e,n=0,r="",s=arguments.length;n<s;n++)(t=arguments[n])&&(e=Xb(t))&&(r&&(r+=" "),r+=e);return r}const ew=t=>typeof t=="boolean"?`${t}`:t===0?"0":t,tw=Kb,qb=(t,e)=>n=>{var r;if((e==null?void 0:e.variants)==null)return tw(t,n==null?void 0:n.class,n==null?void 0:n.className);const{variants:s,defaultVariants:o}=e,c=Object.keys(s).map(p=>{const y=n==null?void 0:n[p],x=o==null?void 0:o[p];if(y===null)return null;const E=ew(y)||ew(x);return s[p][E]}),h=n&&Object.entries(n).reduce((p,y)=>{let[x,E]=y;return E===void 0||(p[x]=E),p},{}),g=e==null||(r=e.compoundVariants)===null||r===void 0?void 0:r.reduce((p,y)=>{let{class:x,className:E,...b}=y;return Object.entries(b).every(I=>{let[S,R]=I;return Array.isArray(R)?R.includes({...o,...h}[S]):{...o,...h}[S]===R})?[...p,x,E]:p},[]);return tw(t,c,g,n==null?void 0:n.class,n==null?void 0:n.className)};/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const p4=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),Zb=(...t)=>t.filter((e,n,r)=>!!e&&e.trim()!==""&&r.indexOf(e)===n).join(" ").trim();/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var g4={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const m4=M.forwardRef(({color:t="currentColor",size:e=24,strokeWidth:n=2,absoluteStrokeWidth:r,className:s="",children:o,iconNode:c,...h},g)=>M.createElement("svg",{ref:g,...g4,width:e,height:e,stroke:t,strokeWidth:r?Number(n)*24/Number(e):n,className:Zb("lucide",s),...h},[...c.map(([p,y])=>M.createElement(p,y)),...Array.isArray(o)?o:[o]]));/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kr=(t,e)=>{const n=M.forwardRef(({className:r,...s},o)=>M.createElement(m4,{ref:o,iconNode:e,className:Zb(`lucide-${p4(t)}`,r),...s}));return n.displayName=`${t}`,n};/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qb=kr("BookOpen",[["path",{d:"M12 7v14",key:"1akyts"}],["path",{d:"M3 18a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1h5a4 4 0 0 1 4 4 4 4 0 0 1 4-4h5a1 1 0 0 1 1 1v13a1 1 0 0 1-1 1h-6a3 3 0 0 0-3 3 3 3 0 0 0-3-3z",key:"ruj8y"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const y4=kr("BookPlus",[["path",{d:"M12 7v6",key:"lw1j43"}],["path",{d:"M4 19.5v-15A2.5 2.5 0 0 1 6.5 2H19a1 1 0 0 1 1 1v18a1 1 0 0 1-1 1H6.5a1 1 0 0 1 0-5H20",key:"k3hazp"}],["path",{d:"M9 10h6",key:"9gxzsh"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const w4=kr("Camera",[["path",{d:"M14.5 4h-5L7 7H4a2 2 0 0 0-2 2v9a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-3l-2.5-3z",key:"1tc9qg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const x4=kr("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const v4=kr("Flame",[["path",{d:"M8.5 14.5A2.5 2.5 0 0 0 11 12c0-1.38-.5-2-1-3-1.072-2.143-.224-4.054 2-6 .5 2.5 2 4.9 4 6.5 2 1.6 3 3.5 3 5.5a7 7 0 1 1-14 0c0-1.153.433-2.294 1-3a2.5 2.5 0 0 0 2.5 2.5z",key:"96xj49"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _g=kr("Heart",[["path",{d:"M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z",key:"c3ymky"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ol=kr("LoaderCircle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const E4=kr("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const b4=kr("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const C4=kr("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const S4=kr("Trophy",[["path",{d:"M6 9H4.5a2.5 2.5 0 0 1 0-5H6",key:"17hqa7"}],["path",{d:"M18 9h1.5a2.5 2.5 0 0 0 0-5H18",key:"lmptdp"}],["path",{d:"M4 22h16",key:"57wxv0"}],["path",{d:"M10 14.66V17c0 .55-.47.98-.97 1.21C7.85 18.75 7 20.24 7 22",key:"1nw9bq"}],["path",{d:"M14 14.66V17c0 .55.47.98.97 1.21C16.15 18.75 17 20.24 17 22",key:"1np0yb"}],["path",{d:"M18 2H6v7a6 6 0 0 0 12 0V2Z",key:"u46fv3"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Tg=kr("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]),Ig="-",A4=t=>{const e=T4(t),{conflictingClassGroups:n,conflictingClassGroupModifiers:r}=t;return{getClassGroupId:c=>{const h=c.split(Ig);return h[0]===""&&h.length!==1&&h.shift(),Jb(h,e)||_4(c)},getConflictingClassGroupIds:(c,h)=>{const g=n[c]||[];return h&&r[c]?[...g,...r[c]]:g}}},Jb=(t,e)=>{var c;if(t.length===0)return e.classGroupId;const n=t[0],r=e.nextPart.get(n),s=r?Jb(t.slice(1),r):void 0;if(s)return s;if(e.validators.length===0)return;const o=t.join(Ig);return(c=e.validators.find(({validator:h})=>h(o)))==null?void 0:c.classGroupId},nw=/^\[(.+)\]$/,_4=t=>{if(nw.test(t)){const e=nw.exec(t)[1],n=e==null?void 0:e.substring(0,e.indexOf(":"));if(n)return"arbitrary.."+n}},T4=t=>{const{theme:e,prefix:n}=t,r={nextPart:new Map,validators:[]};return R4(Object.entries(t.classGroups),n).forEach(([o,c])=>{N1(c,r,o,e)}),r},N1=(t,e,n,r)=>{t.forEach(s=>{if(typeof s=="string"){const o=s===""?e:rw(e,s);o.classGroupId=n;return}if(typeof s=="function"){if(I4(s)){N1(s(r),e,n,r);return}e.validators.push({validator:s,classGroupId:n});return}Object.entries(s).forEach(([o,c])=>{N1(c,rw(e,o),n,r)})})},rw=(t,e)=>{let n=t;return e.split(Ig).forEach(r=>{n.nextPart.has(r)||n.nextPart.set(r,{nextPart:new Map,validators:[]}),n=n.nextPart.get(r)}),n},I4=t=>t.isThemeGetter,R4=(t,e)=>e?t.map(([n,r])=>{const s=r.map(o=>typeof o=="string"?e+o:typeof o=="object"?Object.fromEntries(Object.entries(o).map(([c,h])=>[e+c,h])):o);return[n,s]}):t,N4=t=>{if(t<1)return{get:()=>{},set:()=>{}};let e=0,n=new Map,r=new Map;const s=(o,c)=>{n.set(o,c),e++,e>t&&(e=0,r=n,n=new Map)};return{get(o){let c=n.get(o);if(c!==void 0)return c;if((c=r.get(o))!==void 0)return s(o,c),c},set(o,c){n.has(o)?n.set(o,c):s(o,c)}}},eC="!",O4=t=>{const{separator:e,experimentalParseClassName:n}=t,r=e.length===1,s=e[0],o=e.length,c=h=>{const g=[];let p=0,y=0,x;for(let R=0;R<h.length;R++){let A=h[R];if(p===0){if(A===s&&(r||h.slice(R,R+o)===e)){g.push(h.slice(y,R)),y=R+o;continue}if(A==="/"){x=R;continue}}A==="["?p++:A==="]"&&p--}const E=g.length===0?h:h.substring(y),b=E.startsWith(eC),I=b?E.substring(1):E,S=x&&x>y?x-y:void 0;return{modifiers:g,hasImportantModifier:b,baseClassName:I,maybePostfixModifierPosition:S}};return n?h=>n({className:h,parseClassName:c}):c},k4=t=>{if(t.length<=1)return t;const e=[];let n=[];return t.forEach(r=>{r[0]==="["?(e.push(...n.sort(),r),n=[]):n.push(r)}),e.push(...n.sort()),e},M4=t=>({cache:N4(t.cacheSize),parseClassName:O4(t),...A4(t)}),D4=/\s+/,P4=(t,e)=>{const{parseClassName:n,getClassGroupId:r,getConflictingClassGroupIds:s}=e,o=[],c=t.trim().split(D4);let h="";for(let g=c.length-1;g>=0;g-=1){const p=c[g],{modifiers:y,hasImportantModifier:x,baseClassName:E,maybePostfixModifierPosition:b}=n(p);let I=!!b,S=r(I?E.substring(0,b):E);if(!S){if(!I){h=p+(h.length>0?" "+h:h);continue}if(S=r(E),!S){h=p+(h.length>0?" "+h:h);continue}I=!1}const R=k4(y).join(":"),A=x?R+eC:R,_=A+S;if(o.includes(_))continue;o.push(_);const T=s(S,I);for(let D=0;D<T.length;++D){const F=T[D];o.push(A+F)}h=p+(h.length>0?" "+h:h)}return h};function L4(){let t=0,e,n,r="";for(;t<arguments.length;)(e=arguments[t++])&&(n=tC(e))&&(r&&(r+=" "),r+=n);return r}const tC=t=>{if(typeof t=="string")return t;let e,n="";for(let r=0;r<t.length;r++)t[r]&&(e=tC(t[r]))&&(n&&(n+=" "),n+=e);return n};function B4(t,...e){let n,r,s,o=c;function c(g){const p=e.reduce((y,x)=>x(y),t());return n=M4(p),r=n.cache.get,s=n.cache.set,o=h,h(g)}function h(g){const p=r(g);if(p)return p;const y=P4(g,n);return s(g,y),y}return function(){return o(L4.apply(null,arguments))}}const xt=t=>{const e=n=>n[t]||[];return e.isThemeGetter=!0,e},nC=/^\[(?:([a-z-]+):)?(.+)\]$/i,F4=/^\d+\/\d+$/,j4=new Set(["px","full","screen"]),U4=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,V4=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,z4=/^(rgba?|hsla?|hwb|(ok)?(lab|lch))\(.+\)$/,H4=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,W4=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,Pi=t=>Va(t)||j4.has(t)||F4.test(t),cs=t=>yl(t,"length",Q4),Va=t=>!!t&&!Number.isNaN(Number(t)),i0=t=>yl(t,"number",Va),$l=t=>!!t&&Number.isInteger(Number(t)),$4=t=>t.endsWith("%")&&Va(t.slice(0,-1)),Ve=t=>nC.test(t),us=t=>U4.test(t),G4=new Set(["length","size","percentage"]),Y4=t=>yl(t,G4,rC),X4=t=>yl(t,"position",rC),K4=new Set(["image","url"]),q4=t=>yl(t,K4,eR),Z4=t=>yl(t,"",J4),Gl=()=>!0,yl=(t,e,n)=>{const r=nC.exec(t);return r?r[1]?typeof e=="string"?r[1]===e:e.has(r[1]):n(r[2]):!1},Q4=t=>V4.test(t)&&!z4.test(t),rC=()=>!1,J4=t=>H4.test(t),eR=t=>W4.test(t),tR=()=>{const t=xt("colors"),e=xt("spacing"),n=xt("blur"),r=xt("brightness"),s=xt("borderColor"),o=xt("borderRadius"),c=xt("borderSpacing"),h=xt("borderWidth"),g=xt("contrast"),p=xt("grayscale"),y=xt("hueRotate"),x=xt("invert"),E=xt("gap"),b=xt("gradientColorStops"),I=xt("gradientColorStopPositions"),S=xt("inset"),R=xt("margin"),A=xt("opacity"),_=xt("padding"),T=xt("saturate"),D=xt("scale"),F=xt("sepia"),j=xt("skew"),B=xt("space"),W=xt("translate"),H=()=>["auto","contain","none"],te=()=>["auto","hidden","clip","visible","scroll"],he=()=>["auto",Ve,e],Q=()=>[Ve,e],fe=()=>["",Pi,cs],ie=()=>["auto",Va,Ve],$=()=>["bottom","center","left","left-bottom","left-top","right","right-bottom","right-top","top"],Ee=()=>["solid","dashed","dotted","double","none"],ne=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],q=()=>["start","end","center","between","around","evenly","stretch"],Z=()=>["","0",Ve],ue=()=>["auto","avoid","all","avoid-page","page","left","right","column"],De=()=>[Va,Ve];return{cacheSize:500,separator:":",theme:{colors:[Gl],spacing:[Pi,cs],blur:["none","",us,Ve],brightness:De(),borderColor:[t],borderRadius:["none","","full",us,Ve],borderSpacing:Q(),borderWidth:fe(),contrast:De(),grayscale:Z(),hueRotate:De(),invert:Z(),gap:Q(),gradientColorStops:[t],gradientColorStopPositions:[$4,cs],inset:he(),margin:he(),opacity:De(),padding:Q(),saturate:De(),scale:De(),sepia:Z(),skew:De(),space:Q(),translate:Q()},classGroups:{aspect:[{aspect:["auto","square","video",Ve]}],container:["container"],columns:[{columns:[us]}],"break-after":[{"break-after":ue()}],"break-before":[{"break-before":ue()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:[...$(),Ve]}],overflow:[{overflow:te()}],"overflow-x":[{"overflow-x":te()}],"overflow-y":[{"overflow-y":te()}],overscroll:[{overscroll:H()}],"overscroll-x":[{"overscroll-x":H()}],"overscroll-y":[{"overscroll-y":H()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:[S]}],"inset-x":[{"inset-x":[S]}],"inset-y":[{"inset-y":[S]}],start:[{start:[S]}],end:[{end:[S]}],top:[{top:[S]}],right:[{right:[S]}],bottom:[{bottom:[S]}],left:[{left:[S]}],visibility:["visible","invisible","collapse"],z:[{z:["auto",$l,Ve]}],basis:[{basis:he()}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["wrap","wrap-reverse","nowrap"]}],flex:[{flex:["1","auto","initial","none",Ve]}],grow:[{grow:Z()}],shrink:[{shrink:Z()}],order:[{order:["first","last","none",$l,Ve]}],"grid-cols":[{"grid-cols":[Gl]}],"col-start-end":[{col:["auto",{span:["full",$l,Ve]},Ve]}],"col-start":[{"col-start":ie()}],"col-end":[{"col-end":ie()}],"grid-rows":[{"grid-rows":[Gl]}],"row-start-end":[{row:["auto",{span:[$l,Ve]},Ve]}],"row-start":[{"row-start":ie()}],"row-end":[{"row-end":ie()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":["auto","min","max","fr",Ve]}],"auto-rows":[{"auto-rows":["auto","min","max","fr",Ve]}],gap:[{gap:[E]}],"gap-x":[{"gap-x":[E]}],"gap-y":[{"gap-y":[E]}],"justify-content":[{justify:["normal",...q()]}],"justify-items":[{"justify-items":["start","end","center","stretch"]}],"justify-self":[{"justify-self":["auto","start","end","center","stretch"]}],"align-content":[{content:["normal",...q(),"baseline"]}],"align-items":[{items:["start","end","center","baseline","stretch"]}],"align-self":[{self:["auto","start","end","center","stretch","baseline"]}],"place-content":[{"place-content":[...q(),"baseline"]}],"place-items":[{"place-items":["start","end","center","baseline","stretch"]}],"place-self":[{"place-self":["auto","start","end","center","stretch"]}],p:[{p:[_]}],px:[{px:[_]}],py:[{py:[_]}],ps:[{ps:[_]}],pe:[{pe:[_]}],pt:[{pt:[_]}],pr:[{pr:[_]}],pb:[{pb:[_]}],pl:[{pl:[_]}],m:[{m:[R]}],mx:[{mx:[R]}],my:[{my:[R]}],ms:[{ms:[R]}],me:[{me:[R]}],mt:[{mt:[R]}],mr:[{mr:[R]}],mb:[{mb:[R]}],ml:[{ml:[R]}],"space-x":[{"space-x":[B]}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":[B]}],"space-y-reverse":["space-y-reverse"],w:[{w:["auto","min","max","fit","svw","lvw","dvw",Ve,e]}],"min-w":[{"min-w":[Ve,e,"min","max","fit"]}],"max-w":[{"max-w":[Ve,e,"none","full","min","max","fit","prose",{screen:[us]},us]}],h:[{h:[Ve,e,"auto","min","max","fit","svh","lvh","dvh"]}],"min-h":[{"min-h":[Ve,e,"min","max","fit","svh","lvh","dvh"]}],"max-h":[{"max-h":[Ve,e,"min","max","fit","svh","lvh","dvh"]}],size:[{size:[Ve,e,"auto","min","max","fit"]}],"font-size":[{text:["base",us,cs]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:["thin","extralight","light","normal","medium","semibold","bold","extrabold","black",i0]}],"font-family":[{font:[Gl]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractions"],tracking:[{tracking:["tighter","tight","normal","wide","wider","widest",Ve]}],"line-clamp":[{"line-clamp":["none",Va,i0]}],leading:[{leading:["none","tight","snug","normal","relaxed","loose",Pi,Ve]}],"list-image":[{"list-image":["none",Ve]}],"list-style-type":[{list:["none","disc","decimal",Ve]}],"list-style-position":[{list:["inside","outside"]}],"placeholder-color":[{placeholder:[t]}],"placeholder-opacity":[{"placeholder-opacity":[A]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"text-color":[{text:[t]}],"text-opacity":[{"text-opacity":[A]}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...Ee(),"wavy"]}],"text-decoration-thickness":[{decoration:["auto","from-font",Pi,cs]}],"underline-offset":[{"underline-offset":["auto",Pi,Ve]}],"text-decoration-color":[{decoration:[t]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:Q()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",Ve]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",Ve]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-opacity":[{"bg-opacity":[A]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:[...$(),X4]}],"bg-repeat":[{bg:["no-repeat",{repeat:["","x","y","round","space"]}]}],"bg-size":[{bg:["auto","cover","contain",Y4]}],"bg-image":[{bg:["none",{"gradient-to":["t","tr","r","br","b","bl","l","tl"]},q4]}],"bg-color":[{bg:[t]}],"gradient-from-pos":[{from:[I]}],"gradient-via-pos":[{via:[I]}],"gradient-to-pos":[{to:[I]}],"gradient-from":[{from:[b]}],"gradient-via":[{via:[b]}],"gradient-to":[{to:[b]}],rounded:[{rounded:[o]}],"rounded-s":[{"rounded-s":[o]}],"rounded-e":[{"rounded-e":[o]}],"rounded-t":[{"rounded-t":[o]}],"rounded-r":[{"rounded-r":[o]}],"rounded-b":[{"rounded-b":[o]}],"rounded-l":[{"rounded-l":[o]}],"rounded-ss":[{"rounded-ss":[o]}],"rounded-se":[{"rounded-se":[o]}],"rounded-ee":[{"rounded-ee":[o]}],"rounded-es":[{"rounded-es":[o]}],"rounded-tl":[{"rounded-tl":[o]}],"rounded-tr":[{"rounded-tr":[o]}],"rounded-br":[{"rounded-br":[o]}],"rounded-bl":[{"rounded-bl":[o]}],"border-w":[{border:[h]}],"border-w-x":[{"border-x":[h]}],"border-w-y":[{"border-y":[h]}],"border-w-s":[{"border-s":[h]}],"border-w-e":[{"border-e":[h]}],"border-w-t":[{"border-t":[h]}],"border-w-r":[{"border-r":[h]}],"border-w-b":[{"border-b":[h]}],"border-w-l":[{"border-l":[h]}],"border-opacity":[{"border-opacity":[A]}],"border-style":[{border:[...Ee(),"hidden"]}],"divide-x":[{"divide-x":[h]}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":[h]}],"divide-y-reverse":["divide-y-reverse"],"divide-opacity":[{"divide-opacity":[A]}],"divide-style":[{divide:Ee()}],"border-color":[{border:[s]}],"border-color-x":[{"border-x":[s]}],"border-color-y":[{"border-y":[s]}],"border-color-s":[{"border-s":[s]}],"border-color-e":[{"border-e":[s]}],"border-color-t":[{"border-t":[s]}],"border-color-r":[{"border-r":[s]}],"border-color-b":[{"border-b":[s]}],"border-color-l":[{"border-l":[s]}],"divide-color":[{divide:[s]}],"outline-style":[{outline:["",...Ee()]}],"outline-offset":[{"outline-offset":[Pi,Ve]}],"outline-w":[{outline:[Pi,cs]}],"outline-color":[{outline:[t]}],"ring-w":[{ring:fe()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:[t]}],"ring-opacity":[{"ring-opacity":[A]}],"ring-offset-w":[{"ring-offset":[Pi,cs]}],"ring-offset-color":[{"ring-offset":[t]}],shadow:[{shadow:["","inner","none",us,Z4]}],"shadow-color":[{shadow:[Gl]}],opacity:[{opacity:[A]}],"mix-blend":[{"mix-blend":[...ne(),"plus-lighter","plus-darker"]}],"bg-blend":[{"bg-blend":ne()}],filter:[{filter:["","none"]}],blur:[{blur:[n]}],brightness:[{brightness:[r]}],contrast:[{contrast:[g]}],"drop-shadow":[{"drop-shadow":["","none",us,Ve]}],grayscale:[{grayscale:[p]}],"hue-rotate":[{"hue-rotate":[y]}],invert:[{invert:[x]}],saturate:[{saturate:[T]}],sepia:[{sepia:[F]}],"backdrop-filter":[{"backdrop-filter":["","none"]}],"backdrop-blur":[{"backdrop-blur":[n]}],"backdrop-brightness":[{"backdrop-brightness":[r]}],"backdrop-contrast":[{"backdrop-contrast":[g]}],"backdrop-grayscale":[{"backdrop-grayscale":[p]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[y]}],"backdrop-invert":[{"backdrop-invert":[x]}],"backdrop-opacity":[{"backdrop-opacity":[A]}],"backdrop-saturate":[{"backdrop-saturate":[T]}],"backdrop-sepia":[{"backdrop-sepia":[F]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":[c]}],"border-spacing-x":[{"border-spacing-x":[c]}],"border-spacing-y":[{"border-spacing-y":[c]}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["none","all","","colors","opacity","shadow","transform",Ve]}],duration:[{duration:De()}],ease:[{ease:["linear","in","out","in-out",Ve]}],delay:[{delay:De()}],animate:[{animate:["none","spin","ping","pulse","bounce",Ve]}],transform:[{transform:["","gpu","none"]}],scale:[{scale:[D]}],"scale-x":[{"scale-x":[D]}],"scale-y":[{"scale-y":[D]}],rotate:[{rotate:[$l,Ve]}],"translate-x":[{"translate-x":[W]}],"translate-y":[{"translate-y":[W]}],"skew-x":[{"skew-x":[j]}],"skew-y":[{"skew-y":[j]}],"transform-origin":[{origin:["center","top","top-right","right","bottom-right","bottom","bottom-left","left","top-left",Ve]}],accent:[{accent:["auto",t]}],appearance:[{appearance:["none","auto"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",Ve]}],"caret-color":[{caret:[t]}],"pointer-events":[{"pointer-events":["none","auto"]}],resize:[{resize:["none","y","x",""]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":Q()}],"scroll-mx":[{"scroll-mx":Q()}],"scroll-my":[{"scroll-my":Q()}],"scroll-ms":[{"scroll-ms":Q()}],"scroll-me":[{"scroll-me":Q()}],"scroll-mt":[{"scroll-mt":Q()}],"scroll-mr":[{"scroll-mr":Q()}],"scroll-mb":[{"scroll-mb":Q()}],"scroll-ml":[{"scroll-ml":Q()}],"scroll-p":[{"scroll-p":Q()}],"scroll-px":[{"scroll-px":Q()}],"scroll-py":[{"scroll-py":Q()}],"scroll-ps":[{"scroll-ps":Q()}],"scroll-pe":[{"scroll-pe":Q()}],"scroll-pt":[{"scroll-pt":Q()}],"scroll-pr":[{"scroll-pr":Q()}],"scroll-pb":[{"scroll-pb":Q()}],"scroll-pl":[{"scroll-pl":Q()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",Ve]}],fill:[{fill:[t,"none"]}],"stroke-w":[{stroke:[Pi,cs,i0]}],stroke:[{stroke:[t,"none"]}],sr:["sr-only","not-sr-only"],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]}}},nR=B4(tR);function si(...t){return nR(Kb(t))}const rR=f4,iC=M.forwardRef(({className:t,...e},n)=>U.jsx(zb,{ref:n,className:si("fixed top-0 z-[100] flex max-h-screen w-full flex-col-reverse p-4 sm:bottom-0 sm:right-0 sm:top-auto sm:flex-col md:max-w-[420px]",t),...e}));iC.displayName=zb.displayName;const iR=qb("group pointer-events-auto relative flex w-full items-center justify-between space-x-4 overflow-hidden rounded-md border p-6 pr-8 shadow-lg transition-all data-[swipe=cancel]:translate-x-0 data-[swipe=end]:translate-x-[var(--radix-toast-swipe-end-x)] data-[swipe=move]:translate-x-[var(--radix-toast-swipe-move-x)] data-[swipe=move]:transition-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[swipe=end]:animate-out data-[state=closed]:fade-out-80 data-[state=closed]:slide-out-to-right-full data-[state=open]:slide-in-from-top-full data-[state=open]:sm:slide-in-from-bottom-full",{variants:{variant:{default:"border bg-background text-foreground",destructive:"destructive group border-destructive bg-destructive text-destructive-foreground"}},defaultVariants:{variant:"default"}}),sC=M.forwardRef(({className:t,variant:e,...n},r)=>U.jsx(Hb,{ref:r,className:si(iR({variant:e}),t),...n}));sC.displayName=Hb.displayName;const sR=M.forwardRef(({className:t,...e},n)=>U.jsx(Gb,{ref:n,className:si("inline-flex h-8 shrink-0 items-center justify-center rounded-md border bg-transparent px-3 text-sm font-medium ring-offset-background transition-colors group-[.destructive]:border-muted/40 hover:bg-secondary group-[.destructive]:hover:border-destructive/30 group-[.destructive]:hover:bg-destructive group-[.destructive]:hover:text-destructive-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 group-[.destructive]:focus:ring-destructive disabled:pointer-events-none disabled:opacity-50",t),...e}));sR.displayName=Gb.displayName;const oC=M.forwardRef(({className:t,...e},n)=>U.jsx(Yb,{ref:n,className:si("absolute right-2 top-2 rounded-md p-1 text-foreground/50 opacity-0 transition-opacity group-hover:opacity-100 group-[.destructive]:text-red-300 hover:text-foreground group-[.destructive]:hover:text-red-50 focus:opacity-100 focus:outline-none focus:ring-2 group-[.destructive]:focus:ring-red-400 group-[.destructive]:focus:ring-offset-red-600",t),"toast-close":"",...e,children:U.jsx(Tg,{className:"h-4 w-4"})}));oC.displayName=Yb.displayName;const aC=M.forwardRef(({className:t,...e},n)=>U.jsx(Wb,{ref:n,className:si("text-sm font-semibold",t),...e}));aC.displayName=Wb.displayName;const lC=M.forwardRef(({className:t,...e},n)=>U.jsx($b,{ref:n,className:si("text-sm opacity-90",t),...e}));lC.displayName=$b.displayName;function oR(){const{toasts:t}=vI();return U.jsxs(rR,{children:[t.map(function({id:e,title:n,description:r,action:s,...o}){return U.jsxs(sC,{...o,children:[U.jsxs("div",{className:"grid gap-1",children:[n&&U.jsx(aC,{children:n}),r&&U.jsx(lC,{children:r})]}),s,U.jsx(oC,{})]},e)}),U.jsx(iC,{})]})}var iw=["light","dark"],aR="(prefers-color-scheme: dark)",lR=M.createContext(void 0),cR={setTheme:t=>{},themes:[]},uR=()=>{var t;return(t=M.useContext(lR))!=null?t:cR};M.memo(({forcedTheme:t,storageKey:e,attribute:n,enableSystem:r,enableColorScheme:s,defaultTheme:o,value:c,attrs:h,nonce:g})=>{let p=o==="system",y=n==="class"?`var d=document.documentElement,c=d.classList;${`c.remove(${h.map(I=>`'${I}'`).join(",")})`};`:`var d=document.documentElement,n='${n}',s='setAttribute';`,x=s?iw.includes(o)&&o?`if(e==='light'||e==='dark'||!e)d.style.colorScheme=e||'${o}'`:"if(e==='light'||e==='dark')d.style.colorScheme=e":"",E=(I,S=!1,R=!0)=>{let A=c?c[I]:I,_=S?I+"|| ''":`'${A}'`,T="";return s&&R&&!S&&iw.includes(I)&&(T+=`d.style.colorScheme = '${I}';`),n==="class"?S||A?T+=`c.add(${_})`:T+="null":A&&(T+=`d[s](n,${_})`),T},b=t?`!function(){${y}${E(t)}}()`:r?`!function(){try{${y}var e=localStorage.getItem('${e}');if('system'===e||(!e&&${p})){var t='${aR}',m=window.matchMedia(t);if(m.media!==t||m.matches){${E("dark")}}else{${E("light")}}}else if(e){${c?`var x=${JSON.stringify(c)};`:""}${E(c?"x[e]":"e",!0)}}${p?"":"else{"+E(o,!1,!1)+"}"}${x}}catch(e){}}()`:`!function(){try{${y}var e=localStorage.getItem('${e}');if(e){${c?`var x=${JSON.stringify(c)};`:""}${E(c?"x[e]":"e",!0)}}else{${E(o,!1,!1)};}${x}}catch(t){}}();`;return M.createElement("script",{nonce:g,dangerouslySetInnerHTML:{__html:b}})});var dR=t=>{switch(t){case"success":return pR;case"info":return mR;case"warning":return gR;case"error":return yR;default:return null}},hR=Array(12).fill(0),fR=({visible:t,className:e})=>de.createElement("div",{className:["sonner-loading-wrapper",e].filter(Boolean).join(" "),"data-visible":t},de.createElement("div",{className:"sonner-spinner"},hR.map((n,r)=>de.createElement("div",{className:"sonner-loading-bar",key:`spinner-bar-${r}`})))),pR=de.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},de.createElement("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.857-9.809a.75.75 0 00-1.214-.882l-3.483 4.79-1.88-1.88a.75.75 0 10-1.06 1.061l2.5 2.5a.75.75 0 001.137-.089l4-5.5z",clipRule:"evenodd"})),gR=de.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",height:"20",width:"20"},de.createElement("path",{fillRule:"evenodd",d:"M9.401 3.003c1.155-2 4.043-2 5.197 0l7.355 12.748c1.154 2-.29 4.5-2.599 4.5H4.645c-2.309 0-3.752-2.5-2.598-4.5L9.4 3.003zM12 8.25a.75.75 0 01.75.75v3.75a.75.75 0 01-1.5 0V9a.75.75 0 01.75-.75zm0 8.25a.75.75 0 100-1.5.75.75 0 000 1.5z",clipRule:"evenodd"})),mR=de.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},de.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a.75.75 0 000 1.5h.253a.25.25 0 01.244.304l-.459 2.066A1.75 1.75 0 0010.747 15H11a.75.75 0 000-1.5h-.253a.25.25 0 01-.244-.304l.459-2.066A1.75 1.75 0 009.253 9H9z",clipRule:"evenodd"})),yR=de.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},de.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-8-5a.75.75 0 01.75.75v4.5a.75.75 0 01-1.5 0v-4.5A.75.75 0 0110 5zm0 10a1 1 0 100-2 1 1 0 000 2z",clipRule:"evenodd"})),wR=de.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"},de.createElement("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),de.createElement("line",{x1:"6",y1:"6",x2:"18",y2:"18"})),xR=()=>{let[t,e]=de.useState(document.hidden);return de.useEffect(()=>{let n=()=>{e(document.hidden)};return document.addEventListener("visibilitychange",n),()=>window.removeEventListener("visibilitychange",n)},[]),t},O1=1,vR=class{constructor(){this.subscribe=t=>(this.subscribers.push(t),()=>{let e=this.subscribers.indexOf(t);this.subscribers.splice(e,1)}),this.publish=t=>{this.subscribers.forEach(e=>e(t))},this.addToast=t=>{this.publish(t),this.toasts=[...this.toasts,t]},this.create=t=>{var e;let{message:n,...r}=t,s=typeof(t==null?void 0:t.id)=="number"||((e=t.id)==null?void 0:e.length)>0?t.id:O1++,o=this.toasts.find(h=>h.id===s),c=t.dismissible===void 0?!0:t.dismissible;return this.dismissedToasts.has(s)&&this.dismissedToasts.delete(s),o?this.toasts=this.toasts.map(h=>h.id===s?(this.publish({...h,...t,id:s,title:n}),{...h,...t,id:s,dismissible:c,title:n}):h):this.addToast({title:n,...r,dismissible:c,id:s}),s},this.dismiss=t=>(this.dismissedToasts.add(t),t||this.toasts.forEach(e=>{this.subscribers.forEach(n=>n({id:e.id,dismiss:!0}))}),this.subscribers.forEach(e=>e({id:t,dismiss:!0})),t),this.message=(t,e)=>this.create({...e,message:t}),this.error=(t,e)=>this.create({...e,message:t,type:"error"}),this.success=(t,e)=>this.create({...e,type:"success",message:t}),this.info=(t,e)=>this.create({...e,type:"info",message:t}),this.warning=(t,e)=>this.create({...e,type:"warning",message:t}),this.loading=(t,e)=>this.create({...e,type:"loading",message:t}),this.promise=(t,e)=>{if(!e)return;let n;e.loading!==void 0&&(n=this.create({...e,promise:t,type:"loading",message:e.loading,description:typeof e.description!="function"?e.description:void 0}));let r=t instanceof Promise?t:t(),s=n!==void 0,o,c=r.then(async g=>{if(o=["resolve",g],de.isValidElement(g))s=!1,this.create({id:n,type:"default",message:g});else if(bR(g)&&!g.ok){s=!1;let p=typeof e.error=="function"?await e.error(`HTTP error! status: ${g.status}`):e.error,y=typeof e.description=="function"?await e.description(`HTTP error! status: ${g.status}`):e.description;this.create({id:n,type:"error",message:p,description:y})}else if(e.success!==void 0){s=!1;let p=typeof e.success=="function"?await e.success(g):e.success,y=typeof e.description=="function"?await e.description(g):e.description;this.create({id:n,type:"success",message:p,description:y})}}).catch(async g=>{if(o=["reject",g],e.error!==void 0){s=!1;let p=typeof e.error=="function"?await e.error(g):e.error,y=typeof e.description=="function"?await e.description(g):e.description;this.create({id:n,type:"error",message:p,description:y})}}).finally(()=>{var g;s&&(this.dismiss(n),n=void 0),(g=e.finally)==null||g.call(e)}),h=()=>new Promise((g,p)=>c.then(()=>o[0]==="reject"?p(o[1]):g(o[1])).catch(p));return typeof n!="string"&&typeof n!="number"?{unwrap:h}:Object.assign(n,{unwrap:h})},this.custom=(t,e)=>{let n=(e==null?void 0:e.id)||O1++;return this.create({jsx:t(n),id:n,...e}),n},this.getActiveToasts=()=>this.toasts.filter(t=>!this.dismissedToasts.has(t.id)),this.subscribers=[],this.toasts=[],this.dismissedToasts=new Set}},Xn=new vR,ER=(t,e)=>{let n=(e==null?void 0:e.id)||O1++;return Xn.addToast({title:t,...e,id:n}),n},bR=t=>t&&typeof t=="object"&&"ok"in t&&typeof t.ok=="boolean"&&"status"in t&&typeof t.status=="number",CR=ER,SR=()=>Xn.toasts,AR=()=>Xn.getActiveToasts(),Dn=Object.assign(CR,{success:Xn.success,info:Xn.info,warning:Xn.warning,error:Xn.error,custom:Xn.custom,message:Xn.message,promise:Xn.promise,dismiss:Xn.dismiss,loading:Xn.loading},{getHistory:SR,getToasts:AR});function _R(t,{insertAt:e}={}){if(typeof document>"u")return;let n=document.head||document.getElementsByTagName("head")[0],r=document.createElement("style");r.type="text/css",e==="top"&&n.firstChild?n.insertBefore(r,n.firstChild):n.appendChild(r),r.styleSheet?r.styleSheet.cssText=t:r.appendChild(document.createTextNode(t))}_R(`:where(html[dir="ltr"]),:where([data-sonner-toaster][dir="ltr"]){--toast-icon-margin-start: -3px;--toast-icon-margin-end: 4px;--toast-svg-margin-start: -1px;--toast-svg-margin-end: 0px;--toast-button-margin-start: auto;--toast-button-margin-end: 0;--toast-close-button-start: 0;--toast-close-button-end: unset;--toast-close-button-transform: translate(-35%, -35%)}:where(html[dir="rtl"]),:where([data-sonner-toaster][dir="rtl"]){--toast-icon-margin-start: 4px;--toast-icon-margin-end: -3px;--toast-svg-margin-start: 0px;--toast-svg-margin-end: -1px;--toast-button-margin-start: 0;--toast-button-margin-end: auto;--toast-close-button-start: unset;--toast-close-button-end: 0;--toast-close-button-transform: translate(35%, -35%)}:where([data-sonner-toaster]){position:fixed;width:var(--width);font-family:ui-sans-serif,system-ui,-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica Neue,Arial,Noto Sans,sans-serif,Apple Color Emoji,Segoe UI Emoji,Segoe UI Symbol,Noto Color Emoji;--gray1: hsl(0, 0%, 99%);--gray2: hsl(0, 0%, 97.3%);--gray3: hsl(0, 0%, 95.1%);--gray4: hsl(0, 0%, 93%);--gray5: hsl(0, 0%, 90.9%);--gray6: hsl(0, 0%, 88.7%);--gray7: hsl(0, 0%, 85.8%);--gray8: hsl(0, 0%, 78%);--gray9: hsl(0, 0%, 56.1%);--gray10: hsl(0, 0%, 52.3%);--gray11: hsl(0, 0%, 43.5%);--gray12: hsl(0, 0%, 9%);--border-radius: 8px;box-sizing:border-box;padding:0;margin:0;list-style:none;outline:none;z-index:999999999;transition:transform .4s ease}:where([data-sonner-toaster][data-lifted="true"]){transform:translateY(-10px)}@media (hover: none) and (pointer: coarse){:where([data-sonner-toaster][data-lifted="true"]){transform:none}}:where([data-sonner-toaster][data-x-position="right"]){right:var(--offset-right)}:where([data-sonner-toaster][data-x-position="left"]){left:var(--offset-left)}:where([data-sonner-toaster][data-x-position="center"]){left:50%;transform:translate(-50%)}:where([data-sonner-toaster][data-y-position="top"]){top:var(--offset-top)}:where([data-sonner-toaster][data-y-position="bottom"]){bottom:var(--offset-bottom)}:where([data-sonner-toast]){--y: translateY(100%);--lift-amount: calc(var(--lift) * var(--gap));z-index:var(--z-index);position:absolute;opacity:0;transform:var(--y);filter:blur(0);touch-action:none;transition:transform .4s,opacity .4s,height .4s,box-shadow .2s;box-sizing:border-box;outline:none;overflow-wrap:anywhere}:where([data-sonner-toast][data-styled="true"]){padding:16px;background:var(--normal-bg);border:1px solid var(--normal-border);color:var(--normal-text);border-radius:var(--border-radius);box-shadow:0 4px 12px #0000001a;width:var(--width);font-size:13px;display:flex;align-items:center;gap:6px}:where([data-sonner-toast]:focus-visible){box-shadow:0 4px 12px #0000001a,0 0 0 2px #0003}:where([data-sonner-toast][data-y-position="top"]){top:0;--y: translateY(-100%);--lift: 1;--lift-amount: calc(1 * var(--gap))}:where([data-sonner-toast][data-y-position="bottom"]){bottom:0;--y: translateY(100%);--lift: -1;--lift-amount: calc(var(--lift) * var(--gap))}:where([data-sonner-toast]) :where([data-description]){font-weight:400;line-height:1.4;color:inherit}:where([data-sonner-toast]) :where([data-title]){font-weight:500;line-height:1.5;color:inherit}:where([data-sonner-toast]) :where([data-icon]){display:flex;height:16px;width:16px;position:relative;justify-content:flex-start;align-items:center;flex-shrink:0;margin-left:var(--toast-icon-margin-start);margin-right:var(--toast-icon-margin-end)}:where([data-sonner-toast][data-promise="true"]) :where([data-icon])>svg{opacity:0;transform:scale(.8);transform-origin:center;animation:sonner-fade-in .3s ease forwards}:where([data-sonner-toast]) :where([data-icon])>*{flex-shrink:0}:where([data-sonner-toast]) :where([data-icon]) svg{margin-left:var(--toast-svg-margin-start);margin-right:var(--toast-svg-margin-end)}:where([data-sonner-toast]) :where([data-content]){display:flex;flex-direction:column;gap:2px}[data-sonner-toast][data-styled=true] [data-button]{border-radius:4px;padding-left:8px;padding-right:8px;height:24px;font-size:12px;color:var(--normal-bg);background:var(--normal-text);margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end);border:none;cursor:pointer;outline:none;display:flex;align-items:center;flex-shrink:0;transition:opacity .4s,box-shadow .2s}:where([data-sonner-toast]) :where([data-button]):focus-visible{box-shadow:0 0 0 2px #0006}:where([data-sonner-toast]) :where([data-button]):first-of-type{margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end)}:where([data-sonner-toast]) :where([data-cancel]){color:var(--normal-text);background:rgba(0,0,0,.08)}:where([data-sonner-toast][data-theme="dark"]) :where([data-cancel]){background:rgba(255,255,255,.3)}:where([data-sonner-toast]) :where([data-close-button]){position:absolute;left:var(--toast-close-button-start);right:var(--toast-close-button-end);top:0;height:20px;width:20px;display:flex;justify-content:center;align-items:center;padding:0;color:var(--gray12);border:1px solid var(--gray4);transform:var(--toast-close-button-transform);border-radius:50%;cursor:pointer;z-index:1;transition:opacity .1s,background .2s,border-color .2s}[data-sonner-toast] [data-close-button]{background:var(--gray1)}:where([data-sonner-toast]) :where([data-close-button]):focus-visible{box-shadow:0 4px 12px #0000001a,0 0 0 2px #0003}:where([data-sonner-toast]) :where([data-disabled="true"]){cursor:not-allowed}:where([data-sonner-toast]):hover :where([data-close-button]):hover{background:var(--gray2);border-color:var(--gray5)}:where([data-sonner-toast][data-swiping="true"]):before{content:"";position:absolute;left:-50%;right:-50%;height:100%;z-index:-1}:where([data-sonner-toast][data-y-position="top"][data-swiping="true"]):before{bottom:50%;transform:scaleY(3) translateY(50%)}:where([data-sonner-toast][data-y-position="bottom"][data-swiping="true"]):before{top:50%;transform:scaleY(3) translateY(-50%)}:where([data-sonner-toast][data-swiping="false"][data-removed="true"]):before{content:"";position:absolute;inset:0;transform:scaleY(2)}:where([data-sonner-toast]):after{content:"";position:absolute;left:0;height:calc(var(--gap) + 1px);bottom:100%;width:100%}:where([data-sonner-toast][data-mounted="true"]){--y: translateY(0);opacity:1}:where([data-sonner-toast][data-expanded="false"][data-front="false"]){--scale: var(--toasts-before) * .05 + 1;--y: translateY(calc(var(--lift-amount) * var(--toasts-before))) scale(calc(-1 * var(--scale)));height:var(--front-toast-height)}:where([data-sonner-toast])>*{transition:opacity .4s}:where([data-sonner-toast][data-expanded="false"][data-front="false"][data-styled="true"])>*{opacity:0}:where([data-sonner-toast][data-visible="false"]){opacity:0;pointer-events:none}:where([data-sonner-toast][data-mounted="true"][data-expanded="true"]){--y: translateY(calc(var(--lift) * var(--offset)));height:var(--initial-height)}:where([data-sonner-toast][data-removed="true"][data-front="true"][data-swipe-out="false"]){--y: translateY(calc(var(--lift) * -100%));opacity:0}:where([data-sonner-toast][data-removed="true"][data-front="false"][data-swipe-out="false"][data-expanded="true"]){--y: translateY(calc(var(--lift) * var(--offset) + var(--lift) * -100%));opacity:0}:where([data-sonner-toast][data-removed="true"][data-front="false"][data-swipe-out="false"][data-expanded="false"]){--y: translateY(40%);opacity:0;transition:transform .5s,opacity .2s}:where([data-sonner-toast][data-removed="true"][data-front="false"]):before{height:calc(var(--initial-height) + 20%)}[data-sonner-toast][data-swiping=true]{transform:var(--y) translateY(var(--swipe-amount-y, 0px)) translate(var(--swipe-amount-x, 0px));transition:none}[data-sonner-toast][data-swiped=true]{user-select:none}[data-sonner-toast][data-swipe-out=true][data-y-position=bottom],[data-sonner-toast][data-swipe-out=true][data-y-position=top]{animation-duration:.2s;animation-timing-function:ease-out;animation-fill-mode:forwards}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=left]{animation-name:swipe-out-left}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=right]{animation-name:swipe-out-right}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=up]{animation-name:swipe-out-up}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=down]{animation-name:swipe-out-down}@keyframes swipe-out-left{0%{transform:var(--y) translate(var(--swipe-amount-x));opacity:1}to{transform:var(--y) translate(calc(var(--swipe-amount-x) - 100%));opacity:0}}@keyframes swipe-out-right{0%{transform:var(--y) translate(var(--swipe-amount-x));opacity:1}to{transform:var(--y) translate(calc(var(--swipe-amount-x) + 100%));opacity:0}}@keyframes swipe-out-up{0%{transform:var(--y) translateY(var(--swipe-amount-y));opacity:1}to{transform:var(--y) translateY(calc(var(--swipe-amount-y) - 100%));opacity:0}}@keyframes swipe-out-down{0%{transform:var(--y) translateY(var(--swipe-amount-y));opacity:1}to{transform:var(--y) translateY(calc(var(--swipe-amount-y) + 100%));opacity:0}}@media (max-width: 600px){[data-sonner-toaster]{position:fixed;right:var(--mobile-offset-right);left:var(--mobile-offset-left);width:100%}[data-sonner-toaster][dir=rtl]{left:calc(var(--mobile-offset-left) * -1)}[data-sonner-toaster] [data-sonner-toast]{left:0;right:0;width:calc(100% - var(--mobile-offset-left) * 2)}[data-sonner-toaster][data-x-position=left]{left:var(--mobile-offset-left)}[data-sonner-toaster][data-y-position=bottom]{bottom:var(--mobile-offset-bottom)}[data-sonner-toaster][data-y-position=top]{top:var(--mobile-offset-top)}[data-sonner-toaster][data-x-position=center]{left:var(--mobile-offset-left);right:var(--mobile-offset-right);transform:none}}[data-sonner-toaster][data-theme=light]{--normal-bg: #fff;--normal-border: var(--gray4);--normal-text: var(--gray12);--success-bg: hsl(143, 85%, 96%);--success-border: hsl(145, 92%, 91%);--success-text: hsl(140, 100%, 27%);--info-bg: hsl(208, 100%, 97%);--info-border: hsl(221, 91%, 91%);--info-text: hsl(210, 92%, 45%);--warning-bg: hsl(49, 100%, 97%);--warning-border: hsl(49, 91%, 91%);--warning-text: hsl(31, 92%, 45%);--error-bg: hsl(359, 100%, 97%);--error-border: hsl(359, 100%, 94%);--error-text: hsl(360, 100%, 45%)}[data-sonner-toaster][data-theme=light] [data-sonner-toast][data-invert=true]{--normal-bg: #000;--normal-border: hsl(0, 0%, 20%);--normal-text: var(--gray1)}[data-sonner-toaster][data-theme=dark] [data-sonner-toast][data-invert=true]{--normal-bg: #fff;--normal-border: var(--gray3);--normal-text: var(--gray12)}[data-sonner-toaster][data-theme=dark]{--normal-bg: #000;--normal-bg-hover: hsl(0, 0%, 12%);--normal-border: hsl(0, 0%, 20%);--normal-border-hover: hsl(0, 0%, 25%);--normal-text: var(--gray1);--success-bg: hsl(150, 100%, 6%);--success-border: hsl(147, 100%, 12%);--success-text: hsl(150, 86%, 65%);--info-bg: hsl(215, 100%, 6%);--info-border: hsl(223, 100%, 12%);--info-text: hsl(216, 87%, 65%);--warning-bg: hsl(64, 100%, 6%);--warning-border: hsl(60, 100%, 12%);--warning-text: hsl(46, 87%, 65%);--error-bg: hsl(358, 76%, 10%);--error-border: hsl(357, 89%, 16%);--error-text: hsl(358, 100%, 81%)}[data-sonner-toaster][data-theme=dark] [data-sonner-toast] [data-close-button]{background:var(--normal-bg);border-color:var(--normal-border);color:var(--normal-text)}[data-sonner-toaster][data-theme=dark] [data-sonner-toast] [data-close-button]:hover{background:var(--normal-bg-hover);border-color:var(--normal-border-hover)}[data-rich-colors=true][data-sonner-toast][data-type=success],[data-rich-colors=true][data-sonner-toast][data-type=success] [data-close-button]{background:var(--success-bg);border-color:var(--success-border);color:var(--success-text)}[data-rich-colors=true][data-sonner-toast][data-type=info],[data-rich-colors=true][data-sonner-toast][data-type=info] [data-close-button]{background:var(--info-bg);border-color:var(--info-border);color:var(--info-text)}[data-rich-colors=true][data-sonner-toast][data-type=warning],[data-rich-colors=true][data-sonner-toast][data-type=warning] [data-close-button]{background:var(--warning-bg);border-color:var(--warning-border);color:var(--warning-text)}[data-rich-colors=true][data-sonner-toast][data-type=error],[data-rich-colors=true][data-sonner-toast][data-type=error] [data-close-button]{background:var(--error-bg);border-color:var(--error-border);color:var(--error-text)}.sonner-loading-wrapper{--size: 16px;height:var(--size);width:var(--size);position:absolute;inset:0;z-index:10}.sonner-loading-wrapper[data-visible=false]{transform-origin:center;animation:sonner-fade-out .2s ease forwards}.sonner-spinner{position:relative;top:50%;left:50%;height:var(--size);width:var(--size)}.sonner-loading-bar{animation:sonner-spin 1.2s linear infinite;background:var(--gray11);border-radius:6px;height:8%;left:-10%;position:absolute;top:-3.9%;width:24%}.sonner-loading-bar:nth-child(1){animation-delay:-1.2s;transform:rotate(.0001deg) translate(146%)}.sonner-loading-bar:nth-child(2){animation-delay:-1.1s;transform:rotate(30deg) translate(146%)}.sonner-loading-bar:nth-child(3){animation-delay:-1s;transform:rotate(60deg) translate(146%)}.sonner-loading-bar:nth-child(4){animation-delay:-.9s;transform:rotate(90deg) translate(146%)}.sonner-loading-bar:nth-child(5){animation-delay:-.8s;transform:rotate(120deg) translate(146%)}.sonner-loading-bar:nth-child(6){animation-delay:-.7s;transform:rotate(150deg) translate(146%)}.sonner-loading-bar:nth-child(7){animation-delay:-.6s;transform:rotate(180deg) translate(146%)}.sonner-loading-bar:nth-child(8){animation-delay:-.5s;transform:rotate(210deg) translate(146%)}.sonner-loading-bar:nth-child(9){animation-delay:-.4s;transform:rotate(240deg) translate(146%)}.sonner-loading-bar:nth-child(10){animation-delay:-.3s;transform:rotate(270deg) translate(146%)}.sonner-loading-bar:nth-child(11){animation-delay:-.2s;transform:rotate(300deg) translate(146%)}.sonner-loading-bar:nth-child(12){animation-delay:-.1s;transform:rotate(330deg) translate(146%)}@keyframes sonner-fade-in{0%{opacity:0;transform:scale(.8)}to{opacity:1;transform:scale(1)}}@keyframes sonner-fade-out{0%{opacity:1;transform:scale(1)}to{opacity:0;transform:scale(.8)}}@keyframes sonner-spin{0%{opacity:1}to{opacity:.15}}@media (prefers-reduced-motion){[data-sonner-toast],[data-sonner-toast]>*,.sonner-loading-bar{transition:none!important;animation:none!important}}.sonner-loader{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);transform-origin:center;transition:opacity .2s,transform .2s}.sonner-loader[data-visible=false]{opacity:0;transform:scale(.8) translate(-50%,-50%)}
`);function Xu(t){return t.label!==void 0}var TR=3,IR="32px",RR="16px",sw=4e3,NR=356,OR=14,kR=20,MR=200;function Vr(...t){return t.filter(Boolean).join(" ")}function DR(t){let[e,n]=t.split("-"),r=[];return e&&r.push(e),n&&r.push(n),r}var PR=t=>{var e,n,r,s,o,c,h,g,p,y,x;let{invert:E,toast:b,unstyled:I,interacting:S,setHeights:R,visibleToasts:A,heights:_,index:T,toasts:D,expanded:F,removeToast:j,defaultRichColors:B,closeButton:W,style:H,cancelButtonStyle:te,actionButtonStyle:he,className:Q="",descriptionClassName:fe="",duration:ie,position:$,gap:Ee,loadingIcon:ne,expandByDefault:q,classNames:Z,icons:ue,closeButtonAriaLabel:De="Close toast",pauseWhenPageIsHidden:ge}=t,[Pe,Re]=de.useState(null),[Ct,me]=de.useState(null),[qe,yt]=de.useState(!1),[Vn,nr]=de.useState(!1),[Rt,Dr]=de.useState(!1),[ze,Pr]=de.useState(!1),[zn,li]=de.useState(!1),[Wt,nt]=de.useState(0),[He,ro]=de.useState(0),ye=de.useRef(b.duration||ie||sw),io=de.useRef(null),ci=de.useRef(null),Lr=T===0,_l=T+1<=A,St=b.type,Mi=b.dismissible!==!1,ui=b.className||"",hn=b.descriptionClassName||"",so=de.useMemo(()=>_.findIndex(Te=>Te.toastId===b.id)||0,[_,b.id]),Xo=de.useMemo(()=>{var Te;return(Te=b.closeButton)!=null?Te:W},[b.closeButton,W]),wu=de.useMemo(()=>b.duration||ie||sw,[b.duration,ie]),At=de.useRef(0),ce=de.useRef(0),Lt=de.useRef(0),Ze=de.useRef(null),[_t,oo]=$.split("-"),Ko=de.useMemo(()=>_.reduce((Te,rt,Ue)=>Ue>=so?Te:Te+rt.height,0),[_,so]),Tl=xR(),Qe=b.invert||E,Br=St==="loading";ce.current=de.useMemo(()=>so*Ee+Ko,[so,Ko]),de.useEffect(()=>{ye.current=wu},[wu]),de.useEffect(()=>{yt(!0)},[]),de.useEffect(()=>{let Te=ci.current;if(Te){let rt=Te.getBoundingClientRect().height;return ro(rt),R(Ue=>[{toastId:b.id,height:rt,position:b.position},...Ue]),()=>R(Ue=>Ue.filter(an=>an.toastId!==b.id))}},[R,b.id]),de.useLayoutEffect(()=>{if(!qe)return;let Te=ci.current,rt=Te.style.height;Te.style.height="auto";let Ue=Te.getBoundingClientRect().height;Te.style.height=rt,ro(Ue),R(an=>an.find(bn=>bn.toastId===b.id)?an.map(bn=>bn.toastId===b.id?{...bn,height:Ue}:bn):[{toastId:b.id,height:Ue,position:b.position},...an])},[qe,b.title,b.description,R,b.id]);let Fr=de.useCallback(()=>{nr(!0),nt(ce.current),R(Te=>Te.filter(rt=>rt.toastId!==b.id)),setTimeout(()=>{j(b)},MR)},[b,j,R,ce]);de.useEffect(()=>{if(b.promise&&St==="loading"||b.duration===1/0||b.type==="loading")return;let Te;return F||S||ge&&Tl?(()=>{if(Lt.current<At.current){let rt=new Date().getTime()-At.current;ye.current=ye.current-rt}Lt.current=new Date().getTime()})():ye.current!==1/0&&(At.current=new Date().getTime(),Te=setTimeout(()=>{var rt;(rt=b.onAutoClose)==null||rt.call(b,b),Fr()},ye.current)),()=>clearTimeout(Te)},[F,S,b,St,ge,Tl,Fr]),de.useEffect(()=>{b.delete&&Fr()},[Fr,b.delete]);function xu(){var Te,rt,Ue;return ue!=null&&ue.loading?de.createElement("div",{className:Vr(Z==null?void 0:Z.loader,(Te=b==null?void 0:b.classNames)==null?void 0:Te.loader,"sonner-loader"),"data-visible":St==="loading"},ue.loading):ne?de.createElement("div",{className:Vr(Z==null?void 0:Z.loader,(rt=b==null?void 0:b.classNames)==null?void 0:rt.loader,"sonner-loader"),"data-visible":St==="loading"},ne):de.createElement(fR,{className:Vr(Z==null?void 0:Z.loader,(Ue=b==null?void 0:b.classNames)==null?void 0:Ue.loader),visible:St==="loading"})}return de.createElement("li",{tabIndex:0,ref:ci,className:Vr(Q,ui,Z==null?void 0:Z.toast,(e=b==null?void 0:b.classNames)==null?void 0:e.toast,Z==null?void 0:Z.default,Z==null?void 0:Z[St],(n=b==null?void 0:b.classNames)==null?void 0:n[St]),"data-sonner-toast":"","data-rich-colors":(r=b.richColors)!=null?r:B,"data-styled":!(b.jsx||b.unstyled||I),"data-mounted":qe,"data-promise":!!b.promise,"data-swiped":zn,"data-removed":Vn,"data-visible":_l,"data-y-position":_t,"data-x-position":oo,"data-index":T,"data-front":Lr,"data-swiping":Rt,"data-dismissible":Mi,"data-type":St,"data-invert":Qe,"data-swipe-out":ze,"data-swipe-direction":Ct,"data-expanded":!!(F||q&&qe),style:{"--index":T,"--toasts-before":T,"--z-index":D.length-T,"--offset":`${Vn?Wt:ce.current}px`,"--initial-height":q?"auto":`${He}px`,...H,...b.style},onDragEnd:()=>{Dr(!1),Re(null),Ze.current=null},onPointerDown:Te=>{Br||!Mi||(io.current=new Date,nt(ce.current),Te.target.setPointerCapture(Te.pointerId),Te.target.tagName!=="BUTTON"&&(Dr(!0),Ze.current={x:Te.clientX,y:Te.clientY}))},onPointerUp:()=>{var Te,rt,Ue,an;if(ze||!Mi)return;Ze.current=null;let bn=Number(((Te=ci.current)==null?void 0:Te.style.getPropertyValue("--swipe-amount-x").replace("px",""))||0),qt=Number(((rt=ci.current)==null?void 0:rt.style.getPropertyValue("--swipe-amount-y").replace("px",""))||0),Di=new Date().getTime()-((Ue=io.current)==null?void 0:Ue.getTime()),Zt=Pe==="x"?bn:qt,wr=Math.abs(Zt)/Di;if(Math.abs(Zt)>=kR||wr>.11){nt(ce.current),(an=b.onDismiss)==null||an.call(b,b),me(Pe==="x"?bn>0?"right":"left":qt>0?"down":"up"),Fr(),Pr(!0),li(!1);return}Dr(!1),Re(null)},onPointerMove:Te=>{var rt,Ue,an,bn;if(!Ze.current||!Mi||((rt=window.getSelection())==null?void 0:rt.toString().length)>0)return;let qt=Te.clientY-Ze.current.y,Di=Te.clientX-Ze.current.x,Zt=(Ue=t.swipeDirections)!=null?Ue:DR($);!Pe&&(Math.abs(Di)>1||Math.abs(qt)>1)&&Re(Math.abs(Di)>Math.abs(qt)?"x":"y");let wr={x:0,y:0};Pe==="y"?(Zt.includes("top")||Zt.includes("bottom"))&&(Zt.includes("top")&&qt<0||Zt.includes("bottom")&&qt>0)&&(wr.y=qt):Pe==="x"&&(Zt.includes("left")||Zt.includes("right"))&&(Zt.includes("left")&&Di<0||Zt.includes("right")&&Di>0)&&(wr.x=Di),(Math.abs(wr.x)>0||Math.abs(wr.y)>0)&&li(!0),(an=ci.current)==null||an.style.setProperty("--swipe-amount-x",`${wr.x}px`),(bn=ci.current)==null||bn.style.setProperty("--swipe-amount-y",`${wr.y}px`)}},Xo&&!b.jsx?de.createElement("button",{"aria-label":De,"data-disabled":Br,"data-close-button":!0,onClick:Br||!Mi?()=>{}:()=>{var Te;Fr(),(Te=b.onDismiss)==null||Te.call(b,b)},className:Vr(Z==null?void 0:Z.closeButton,(s=b==null?void 0:b.classNames)==null?void 0:s.closeButton)},(o=ue==null?void 0:ue.close)!=null?o:wR):null,b.jsx||M.isValidElement(b.title)?b.jsx?b.jsx:typeof b.title=="function"?b.title():b.title:de.createElement(de.Fragment,null,St||b.icon||b.promise?de.createElement("div",{"data-icon":"",className:Vr(Z==null?void 0:Z.icon,(c=b==null?void 0:b.classNames)==null?void 0:c.icon)},b.promise||b.type==="loading"&&!b.icon?b.icon||xu():null,b.type!=="loading"?b.icon||(ue==null?void 0:ue[St])||dR(St):null):null,de.createElement("div",{"data-content":"",className:Vr(Z==null?void 0:Z.content,(h=b==null?void 0:b.classNames)==null?void 0:h.content)},de.createElement("div",{"data-title":"",className:Vr(Z==null?void 0:Z.title,(g=b==null?void 0:b.classNames)==null?void 0:g.title)},typeof b.title=="function"?b.title():b.title),b.description?de.createElement("div",{"data-description":"",className:Vr(fe,hn,Z==null?void 0:Z.description,(p=b==null?void 0:b.classNames)==null?void 0:p.description)},typeof b.description=="function"?b.description():b.description):null),M.isValidElement(b.cancel)?b.cancel:b.cancel&&Xu(b.cancel)?de.createElement("button",{"data-button":!0,"data-cancel":!0,style:b.cancelButtonStyle||te,onClick:Te=>{var rt,Ue;Xu(b.cancel)&&Mi&&((Ue=(rt=b.cancel).onClick)==null||Ue.call(rt,Te),Fr())},className:Vr(Z==null?void 0:Z.cancelButton,(y=b==null?void 0:b.classNames)==null?void 0:y.cancelButton)},b.cancel.label):null,M.isValidElement(b.action)?b.action:b.action&&Xu(b.action)?de.createElement("button",{"data-button":!0,"data-action":!0,style:b.actionButtonStyle||he,onClick:Te=>{var rt,Ue;Xu(b.action)&&((Ue=(rt=b.action).onClick)==null||Ue.call(rt,Te),!Te.defaultPrevented&&Fr())},className:Vr(Z==null?void 0:Z.actionButton,(x=b==null?void 0:b.classNames)==null?void 0:x.actionButton)},b.action.label):null))};function ow(){if(typeof window>"u"||typeof document>"u")return"ltr";let t=document.documentElement.getAttribute("dir");return t==="auto"||!t?window.getComputedStyle(document.documentElement).direction:t}function LR(t,e){let n={};return[t,e].forEach((r,s)=>{let o=s===1,c=o?"--mobile-offset":"--offset",h=o?RR:IR;function g(p){["top","right","bottom","left"].forEach(y=>{n[`${c}-${y}`]=typeof p=="number"?`${p}px`:p})}typeof r=="number"||typeof r=="string"?g(r):typeof r=="object"?["top","right","bottom","left"].forEach(p=>{r[p]===void 0?n[`${c}-${p}`]=h:n[`${c}-${p}`]=typeof r[p]=="number"?`${r[p]}px`:r[p]}):g(h)}),n}var BR=M.forwardRef(function(t,e){let{invert:n,position:r="bottom-right",hotkey:s=["altKey","KeyT"],expand:o,closeButton:c,className:h,offset:g,mobileOffset:p,theme:y="light",richColors:x,duration:E,style:b,visibleToasts:I=TR,toastOptions:S,dir:R=ow(),gap:A=OR,loadingIcon:_,icons:T,containerAriaLabel:D="Notifications",pauseWhenPageIsHidden:F}=t,[j,B]=de.useState([]),W=de.useMemo(()=>Array.from(new Set([r].concat(j.filter(ge=>ge.position).map(ge=>ge.position)))),[j,r]),[H,te]=de.useState([]),[he,Q]=de.useState(!1),[fe,ie]=de.useState(!1),[$,Ee]=de.useState(y!=="system"?y:typeof window<"u"&&window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"),ne=de.useRef(null),q=s.join("+").replace(/Key/g,"").replace(/Digit/g,""),Z=de.useRef(null),ue=de.useRef(!1),De=de.useCallback(ge=>{B(Pe=>{var Re;return(Re=Pe.find(Ct=>Ct.id===ge.id))!=null&&Re.delete||Xn.dismiss(ge.id),Pe.filter(({id:Ct})=>Ct!==ge.id)})},[]);return de.useEffect(()=>Xn.subscribe(ge=>{if(ge.dismiss){B(Pe=>Pe.map(Re=>Re.id===ge.id?{...Re,delete:!0}:Re));return}setTimeout(()=>{vb.flushSync(()=>{B(Pe=>{let Re=Pe.findIndex(Ct=>Ct.id===ge.id);return Re!==-1?[...Pe.slice(0,Re),{...Pe[Re],...ge},...Pe.slice(Re+1)]:[ge,...Pe]})})})}),[]),de.useEffect(()=>{if(y!=="system"){Ee(y);return}if(y==="system"&&(window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?Ee("dark"):Ee("light")),typeof window>"u")return;let ge=window.matchMedia("(prefers-color-scheme: dark)");try{ge.addEventListener("change",({matches:Pe})=>{Ee(Pe?"dark":"light")})}catch{ge.addListener(({matches:Re})=>{try{Ee(Re?"dark":"light")}catch(Ct){console.error(Ct)}})}},[y]),de.useEffect(()=>{j.length<=1&&Q(!1)},[j]),de.useEffect(()=>{let ge=Pe=>{var Re,Ct;s.every(me=>Pe[me]||Pe.code===me)&&(Q(!0),(Re=ne.current)==null||Re.focus()),Pe.code==="Escape"&&(document.activeElement===ne.current||(Ct=ne.current)!=null&&Ct.contains(document.activeElement))&&Q(!1)};return document.addEventListener("keydown",ge),()=>document.removeEventListener("keydown",ge)},[s]),de.useEffect(()=>{if(ne.current)return()=>{Z.current&&(Z.current.focus({preventScroll:!0}),Z.current=null,ue.current=!1)}},[ne.current]),de.createElement("section",{ref:e,"aria-label":`${D} ${q}`,tabIndex:-1,"aria-live":"polite","aria-relevant":"additions text","aria-atomic":"false",suppressHydrationWarning:!0},W.map((ge,Pe)=>{var Re;let[Ct,me]=ge.split("-");return j.length?de.createElement("ol",{key:ge,dir:R==="auto"?ow():R,tabIndex:-1,ref:ne,className:h,"data-sonner-toaster":!0,"data-theme":$,"data-y-position":Ct,"data-lifted":he&&j.length>1&&!o,"data-x-position":me,style:{"--front-toast-height":`${((Re=H[0])==null?void 0:Re.height)||0}px`,"--width":`${NR}px`,"--gap":`${A}px`,...b,...LR(g,p)},onBlur:qe=>{ue.current&&!qe.currentTarget.contains(qe.relatedTarget)&&(ue.current=!1,Z.current&&(Z.current.focus({preventScroll:!0}),Z.current=null))},onFocus:qe=>{qe.target instanceof HTMLElement&&qe.target.dataset.dismissible==="false"||ue.current||(ue.current=!0,Z.current=qe.relatedTarget)},onMouseEnter:()=>Q(!0),onMouseMove:()=>Q(!0),onMouseLeave:()=>{fe||Q(!1)},onDragEnd:()=>Q(!1),onPointerDown:qe=>{qe.target instanceof HTMLElement&&qe.target.dataset.dismissible==="false"||ie(!0)},onPointerUp:()=>ie(!1)},j.filter(qe=>!qe.position&&Pe===0||qe.position===ge).map((qe,yt)=>{var Vn,nr;return de.createElement(PR,{key:qe.id,icons:T,index:yt,toast:qe,defaultRichColors:x,duration:(Vn=S==null?void 0:S.duration)!=null?Vn:E,className:S==null?void 0:S.className,descriptionClassName:S==null?void 0:S.descriptionClassName,invert:n,visibleToasts:I,closeButton:(nr=S==null?void 0:S.closeButton)!=null?nr:c,interacting:fe,position:ge,style:S==null?void 0:S.style,unstyled:S==null?void 0:S.unstyled,classNames:S==null?void 0:S.classNames,cancelButtonStyle:S==null?void 0:S.cancelButtonStyle,actionButtonStyle:S==null?void 0:S.actionButtonStyle,removeToast:De,toasts:j.filter(Rt=>Rt.position==qe.position),heights:H.filter(Rt=>Rt.position==qe.position),setHeights:te,expandByDefault:o,gap:A,loadingIcon:_,expanded:he,pauseWhenPageIsHidden:F,swipeDirections:t.swipeDirections})})):null}))});const FR=({...t})=>{const{theme:e="system"}=uR();return U.jsx(BR,{theme:e,className:"toaster group",toastOptions:{classNames:{toast:"group toast group-[.toaster]:bg-background group-[.toaster]:text-foreground group-[.toaster]:border-border group-[.toaster]:shadow-lg",description:"group-[.toast]:text-muted-foreground",actionButton:"group-[.toast]:bg-primary group-[.toast]:text-primary-foreground",cancelButton:"group-[.toast]:bg-muted group-[.toast]:text-muted-foreground"}},...t})},jR=["top","right","bottom","left"],Ys=Math.min,lr=Math.max,nh=Math.round,Ku=Math.floor,Ti=t=>({x:t,y:t}),UR={left:"right",right:"left",bottom:"top",top:"bottom"},VR={start:"end",end:"start"};function k1(t,e,n){return lr(t,Ys(e,n))}function Ki(t,e){return typeof t=="function"?t(e):t}function qi(t){return t.split("-")[0]}function wl(t){return t.split("-")[1]}function Rg(t){return t==="x"?"y":"x"}function Ng(t){return t==="y"?"height":"width"}const zR=new Set(["top","bottom"]);function Si(t){return zR.has(qi(t))?"y":"x"}function Og(t){return Rg(Si(t))}function HR(t,e,n){n===void 0&&(n=!1);const r=wl(t),s=Og(t),o=Ng(s);let c=s==="x"?r===(n?"end":"start")?"right":"left":r==="start"?"bottom":"top";return e.reference[o]>e.floating[o]&&(c=rh(c)),[c,rh(c)]}function WR(t){const e=rh(t);return[M1(t),e,M1(e)]}function M1(t){return t.replace(/start|end/g,e=>VR[e])}const aw=["left","right"],lw=["right","left"],$R=["top","bottom"],GR=["bottom","top"];function YR(t,e,n){switch(t){case"top":case"bottom":return n?e?lw:aw:e?aw:lw;case"left":case"right":return e?$R:GR;default:return[]}}function XR(t,e,n,r){const s=wl(t);let o=YR(qi(t),n==="start",r);return s&&(o=o.map(c=>c+"-"+s),e&&(o=o.concat(o.map(M1)))),o}function rh(t){return t.replace(/left|right|bottom|top/g,e=>UR[e])}function KR(t){return{top:0,right:0,bottom:0,left:0,...t}}function cC(t){return typeof t!="number"?KR(t):{top:t,right:t,bottom:t,left:t}}function ih(t){const{x:e,y:n,width:r,height:s}=t;return{width:r,height:s,top:n,left:e,right:e+r,bottom:n+s,x:e,y:n}}function cw(t,e,n){let{reference:r,floating:s}=t;const o=Si(e),c=Og(e),h=Ng(c),g=qi(e),p=o==="y",y=r.x+r.width/2-s.width/2,x=r.y+r.height/2-s.height/2,E=r[h]/2-s[h]/2;let b;switch(g){case"top":b={x:y,y:r.y-s.height};break;case"bottom":b={x:y,y:r.y+r.height};break;case"right":b={x:r.x+r.width,y:x};break;case"left":b={x:r.x-s.width,y:x};break;default:b={x:r.x,y:r.y}}switch(wl(e)){case"start":b[c]-=E*(n&&p?-1:1);break;case"end":b[c]+=E*(n&&p?-1:1);break}return b}const qR=async(t,e,n)=>{const{placement:r="bottom",strategy:s="absolute",middleware:o=[],platform:c}=n,h=o.filter(Boolean),g=await(c.isRTL==null?void 0:c.isRTL(e));let p=await c.getElementRects({reference:t,floating:e,strategy:s}),{x:y,y:x}=cw(p,r,g),E=r,b={},I=0;for(let S=0;S<h.length;S++){const{name:R,fn:A}=h[S],{x:_,y:T,data:D,reset:F}=await A({x:y,y:x,initialPlacement:r,placement:E,strategy:s,middlewareData:b,rects:p,platform:c,elements:{reference:t,floating:e}});y=_??y,x=T??x,b={...b,[R]:{...b[R],...D}},F&&I<=50&&(I++,typeof F=="object"&&(F.placement&&(E=F.placement),F.rects&&(p=F.rects===!0?await c.getElementRects({reference:t,floating:e,strategy:s}):F.rects),{x:y,y:x}=cw(p,E,g)),S=-1)}return{x:y,y:x,placement:E,strategy:s,middlewareData:b}};async function Lc(t,e){var n;e===void 0&&(e={});const{x:r,y:s,platform:o,rects:c,elements:h,strategy:g}=t,{boundary:p="clippingAncestors",rootBoundary:y="viewport",elementContext:x="floating",altBoundary:E=!1,padding:b=0}=Ki(e,t),I=cC(b),R=h[E?x==="floating"?"reference":"floating":x],A=ih(await o.getClippingRect({element:(n=await(o.isElement==null?void 0:o.isElement(R)))==null||n?R:R.contextElement||await(o.getDocumentElement==null?void 0:o.getDocumentElement(h.floating)),boundary:p,rootBoundary:y,strategy:g})),_=x==="floating"?{x:r,y:s,width:c.floating.width,height:c.floating.height}:c.reference,T=await(o.getOffsetParent==null?void 0:o.getOffsetParent(h.floating)),D=await(o.isElement==null?void 0:o.isElement(T))?await(o.getScale==null?void 0:o.getScale(T))||{x:1,y:1}:{x:1,y:1},F=ih(o.convertOffsetParentRelativeRectToViewportRelativeRect?await o.convertOffsetParentRelativeRectToViewportRelativeRect({elements:h,rect:_,offsetParent:T,strategy:g}):_);return{top:(A.top-F.top+I.top)/D.y,bottom:(F.bottom-A.bottom+I.bottom)/D.y,left:(A.left-F.left+I.left)/D.x,right:(F.right-A.right+I.right)/D.x}}const ZR=t=>({name:"arrow",options:t,async fn(e){const{x:n,y:r,placement:s,rects:o,platform:c,elements:h,middlewareData:g}=e,{element:p,padding:y=0}=Ki(t,e)||{};if(p==null)return{};const x=cC(y),E={x:n,y:r},b=Og(s),I=Ng(b),S=await c.getDimensions(p),R=b==="y",A=R?"top":"left",_=R?"bottom":"right",T=R?"clientHeight":"clientWidth",D=o.reference[I]+o.reference[b]-E[b]-o.floating[I],F=E[b]-o.reference[b],j=await(c.getOffsetParent==null?void 0:c.getOffsetParent(p));let B=j?j[T]:0;(!B||!await(c.isElement==null?void 0:c.isElement(j)))&&(B=h.floating[T]||o.floating[I]);const W=D/2-F/2,H=B/2-S[I]/2-1,te=Ys(x[A],H),he=Ys(x[_],H),Q=te,fe=B-S[I]-he,ie=B/2-S[I]/2+W,$=k1(Q,ie,fe),Ee=!g.arrow&&wl(s)!=null&&ie!==$&&o.reference[I]/2-(ie<Q?te:he)-S[I]/2<0,ne=Ee?ie<Q?ie-Q:ie-fe:0;return{[b]:E[b]+ne,data:{[b]:$,centerOffset:ie-$-ne,...Ee&&{alignmentOffset:ne}},reset:Ee}}}),QR=function(t){return t===void 0&&(t={}),{name:"flip",options:t,async fn(e){var n,r;const{placement:s,middlewareData:o,rects:c,initialPlacement:h,platform:g,elements:p}=e,{mainAxis:y=!0,crossAxis:x=!0,fallbackPlacements:E,fallbackStrategy:b="bestFit",fallbackAxisSideDirection:I="none",flipAlignment:S=!0,...R}=Ki(t,e);if((n=o.arrow)!=null&&n.alignmentOffset)return{};const A=qi(s),_=Si(h),T=qi(h)===h,D=await(g.isRTL==null?void 0:g.isRTL(p.floating)),F=E||(T||!S?[rh(h)]:WR(h)),j=I!=="none";!E&&j&&F.push(...XR(h,S,I,D));const B=[h,...F],W=await Lc(e,R),H=[];let te=((r=o.flip)==null?void 0:r.overflows)||[];if(y&&H.push(W[A]),x){const ie=HR(s,c,D);H.push(W[ie[0]],W[ie[1]])}if(te=[...te,{placement:s,overflows:H}],!H.every(ie=>ie<=0)){var he,Q;const ie=(((he=o.flip)==null?void 0:he.index)||0)+1,$=B[ie];if($&&(!(x==="alignment"?_!==Si($):!1)||te.every(q=>q.overflows[0]>0&&Si(q.placement)===_)))return{data:{index:ie,overflows:te},reset:{placement:$}};let Ee=(Q=te.filter(ne=>ne.overflows[0]<=0).sort((ne,q)=>ne.overflows[1]-q.overflows[1])[0])==null?void 0:Q.placement;if(!Ee)switch(b){case"bestFit":{var fe;const ne=(fe=te.filter(q=>{if(j){const Z=Si(q.placement);return Z===_||Z==="y"}return!0}).map(q=>[q.placement,q.overflows.filter(Z=>Z>0).reduce((Z,ue)=>Z+ue,0)]).sort((q,Z)=>q[1]-Z[1])[0])==null?void 0:fe[0];ne&&(Ee=ne);break}case"initialPlacement":Ee=h;break}if(s!==Ee)return{reset:{placement:Ee}}}return{}}}};function uw(t,e){return{top:t.top-e.height,right:t.right-e.width,bottom:t.bottom-e.height,left:t.left-e.width}}function dw(t){return jR.some(e=>t[e]>=0)}const JR=function(t){return t===void 0&&(t={}),{name:"hide",options:t,async fn(e){const{rects:n}=e,{strategy:r="referenceHidden",...s}=Ki(t,e);switch(r){case"referenceHidden":{const o=await Lc(e,{...s,elementContext:"reference"}),c=uw(o,n.reference);return{data:{referenceHiddenOffsets:c,referenceHidden:dw(c)}}}case"escaped":{const o=await Lc(e,{...s,altBoundary:!0}),c=uw(o,n.floating);return{data:{escapedOffsets:c,escaped:dw(c)}}}default:return{}}}}},uC=new Set(["left","top"]);async function eN(t,e){const{placement:n,platform:r,elements:s}=t,o=await(r.isRTL==null?void 0:r.isRTL(s.floating)),c=qi(n),h=wl(n),g=Si(n)==="y",p=uC.has(c)?-1:1,y=o&&g?-1:1,x=Ki(e,t);let{mainAxis:E,crossAxis:b,alignmentAxis:I}=typeof x=="number"?{mainAxis:x,crossAxis:0,alignmentAxis:null}:{mainAxis:x.mainAxis||0,crossAxis:x.crossAxis||0,alignmentAxis:x.alignmentAxis};return h&&typeof I=="number"&&(b=h==="end"?I*-1:I),g?{x:b*y,y:E*p}:{x:E*p,y:b*y}}const tN=function(t){return t===void 0&&(t=0),{name:"offset",options:t,async fn(e){var n,r;const{x:s,y:o,placement:c,middlewareData:h}=e,g=await eN(e,t);return c===((n=h.offset)==null?void 0:n.placement)&&(r=h.arrow)!=null&&r.alignmentOffset?{}:{x:s+g.x,y:o+g.y,data:{...g,placement:c}}}}},nN=function(t){return t===void 0&&(t={}),{name:"shift",options:t,async fn(e){const{x:n,y:r,placement:s}=e,{mainAxis:o=!0,crossAxis:c=!1,limiter:h={fn:R=>{let{x:A,y:_}=R;return{x:A,y:_}}},...g}=Ki(t,e),p={x:n,y:r},y=await Lc(e,g),x=Si(qi(s)),E=Rg(x);let b=p[E],I=p[x];if(o){const R=E==="y"?"top":"left",A=E==="y"?"bottom":"right",_=b+y[R],T=b-y[A];b=k1(_,b,T)}if(c){const R=x==="y"?"top":"left",A=x==="y"?"bottom":"right",_=I+y[R],T=I-y[A];I=k1(_,I,T)}const S=h.fn({...e,[E]:b,[x]:I});return{...S,data:{x:S.x-n,y:S.y-r,enabled:{[E]:o,[x]:c}}}}}},rN=function(t){return t===void 0&&(t={}),{options:t,fn(e){const{x:n,y:r,placement:s,rects:o,middlewareData:c}=e,{offset:h=0,mainAxis:g=!0,crossAxis:p=!0}=Ki(t,e),y={x:n,y:r},x=Si(s),E=Rg(x);let b=y[E],I=y[x];const S=Ki(h,e),R=typeof S=="number"?{mainAxis:S,crossAxis:0}:{mainAxis:0,crossAxis:0,...S};if(g){const T=E==="y"?"height":"width",D=o.reference[E]-o.floating[T]+R.mainAxis,F=o.reference[E]+o.reference[T]-R.mainAxis;b<D?b=D:b>F&&(b=F)}if(p){var A,_;const T=E==="y"?"width":"height",D=uC.has(qi(s)),F=o.reference[x]-o.floating[T]+(D&&((A=c.offset)==null?void 0:A[x])||0)+(D?0:R.crossAxis),j=o.reference[x]+o.reference[T]+(D?0:((_=c.offset)==null?void 0:_[x])||0)-(D?R.crossAxis:0);I<F?I=F:I>j&&(I=j)}return{[E]:b,[x]:I}}}},iN=function(t){return t===void 0&&(t={}),{name:"size",options:t,async fn(e){var n,r;const{placement:s,rects:o,platform:c,elements:h}=e,{apply:g=()=>{},...p}=Ki(t,e),y=await Lc(e,p),x=qi(s),E=wl(s),b=Si(s)==="y",{width:I,height:S}=o.floating;let R,A;x==="top"||x==="bottom"?(R=x,A=E===(await(c.isRTL==null?void 0:c.isRTL(h.floating))?"start":"end")?"left":"right"):(A=x,R=E==="end"?"top":"bottom");const _=S-y.top-y.bottom,T=I-y.left-y.right,D=Ys(S-y[R],_),F=Ys(I-y[A],T),j=!e.middlewareData.shift;let B=D,W=F;if((n=e.middlewareData.shift)!=null&&n.enabled.x&&(W=T),(r=e.middlewareData.shift)!=null&&r.enabled.y&&(B=_),j&&!E){const te=lr(y.left,0),he=lr(y.right,0),Q=lr(y.top,0),fe=lr(y.bottom,0);b?W=I-2*(te!==0||he!==0?te+he:lr(y.left,y.right)):B=S-2*(Q!==0||fe!==0?Q+fe:lr(y.top,y.bottom))}await g({...e,availableWidth:W,availableHeight:B});const H=await c.getDimensions(h.floating);return I!==H.width||S!==H.height?{reset:{rects:!0}}:{}}}};function $h(){return typeof window<"u"}function xl(t){return dC(t)?(t.nodeName||"").toLowerCase():"#document"}function fr(t){var e;return(t==null||(e=t.ownerDocument)==null?void 0:e.defaultView)||window}function ki(t){var e;return(e=(dC(t)?t.ownerDocument:t.document)||window.document)==null?void 0:e.documentElement}function dC(t){return $h()?t instanceof Node||t instanceof fr(t).Node:!1}function oi(t){return $h()?t instanceof Element||t instanceof fr(t).Element:!1}function Ni(t){return $h()?t instanceof HTMLElement||t instanceof fr(t).HTMLElement:!1}function hw(t){return!$h()||typeof ShadowRoot>"u"?!1:t instanceof ShadowRoot||t instanceof fr(t).ShadowRoot}const sN=new Set(["inline","contents"]);function hu(t){const{overflow:e,overflowX:n,overflowY:r,display:s}=ai(t);return/auto|scroll|overlay|hidden|clip/.test(e+r+n)&&!sN.has(s)}const oN=new Set(["table","td","th"]);function aN(t){return oN.has(xl(t))}const lN=[":popover-open",":modal"];function Gh(t){return lN.some(e=>{try{return t.matches(e)}catch{return!1}})}const cN=["transform","translate","scale","rotate","perspective"],uN=["transform","translate","scale","rotate","perspective","filter"],dN=["paint","layout","strict","content"];function kg(t){const e=Mg(),n=oi(t)?ai(t):t;return cN.some(r=>n[r]?n[r]!=="none":!1)||(n.containerType?n.containerType!=="normal":!1)||!e&&(n.backdropFilter?n.backdropFilter!=="none":!1)||!e&&(n.filter?n.filter!=="none":!1)||uN.some(r=>(n.willChange||"").includes(r))||dN.some(r=>(n.contain||"").includes(r))}function hN(t){let e=Xs(t);for(;Ni(e)&&!al(e);){if(kg(e))return e;if(Gh(e))return null;e=Xs(e)}return null}function Mg(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}const fN=new Set(["html","body","#document"]);function al(t){return fN.has(xl(t))}function ai(t){return fr(t).getComputedStyle(t)}function Yh(t){return oi(t)?{scrollLeft:t.scrollLeft,scrollTop:t.scrollTop}:{scrollLeft:t.scrollX,scrollTop:t.scrollY}}function Xs(t){if(xl(t)==="html")return t;const e=t.assignedSlot||t.parentNode||hw(t)&&t.host||ki(t);return hw(e)?e.host:e}function hC(t){const e=Xs(t);return al(e)?t.ownerDocument?t.ownerDocument.body:t.body:Ni(e)&&hu(e)?e:hC(e)}function Bc(t,e,n){var r;e===void 0&&(e=[]),n===void 0&&(n=!0);const s=hC(t),o=s===((r=t.ownerDocument)==null?void 0:r.body),c=fr(s);if(o){const h=D1(c);return e.concat(c,c.visualViewport||[],hu(s)?s:[],h&&n?Bc(h):[])}return e.concat(s,Bc(s,[],n))}function D1(t){return t.parent&&Object.getPrototypeOf(t.parent)?t.frameElement:null}function fC(t){const e=ai(t);let n=parseFloat(e.width)||0,r=parseFloat(e.height)||0;const s=Ni(t),o=s?t.offsetWidth:n,c=s?t.offsetHeight:r,h=nh(n)!==o||nh(r)!==c;return h&&(n=o,r=c),{width:n,height:r,$:h}}function Dg(t){return oi(t)?t:t.contextElement}function za(t){const e=Dg(t);if(!Ni(e))return Ti(1);const n=e.getBoundingClientRect(),{width:r,height:s,$:o}=fC(e);let c=(o?nh(n.width):n.width)/r,h=(o?nh(n.height):n.height)/s;return(!c||!Number.isFinite(c))&&(c=1),(!h||!Number.isFinite(h))&&(h=1),{x:c,y:h}}const pN=Ti(0);function pC(t){const e=fr(t);return!Mg()||!e.visualViewport?pN:{x:e.visualViewport.offsetLeft,y:e.visualViewport.offsetTop}}function gN(t,e,n){return e===void 0&&(e=!1),!n||e&&n!==fr(t)?!1:e}function zo(t,e,n,r){e===void 0&&(e=!1),n===void 0&&(n=!1);const s=t.getBoundingClientRect(),o=Dg(t);let c=Ti(1);e&&(r?oi(r)&&(c=za(r)):c=za(t));const h=gN(o,n,r)?pC(o):Ti(0);let g=(s.left+h.x)/c.x,p=(s.top+h.y)/c.y,y=s.width/c.x,x=s.height/c.y;if(o){const E=fr(o),b=r&&oi(r)?fr(r):r;let I=E,S=D1(I);for(;S&&r&&b!==I;){const R=za(S),A=S.getBoundingClientRect(),_=ai(S),T=A.left+(S.clientLeft+parseFloat(_.paddingLeft))*R.x,D=A.top+(S.clientTop+parseFloat(_.paddingTop))*R.y;g*=R.x,p*=R.y,y*=R.x,x*=R.y,g+=T,p+=D,I=fr(S),S=D1(I)}}return ih({width:y,height:x,x:g,y:p})}function Pg(t,e){const n=Yh(t).scrollLeft;return e?e.left+n:zo(ki(t)).left+n}function gC(t,e,n){n===void 0&&(n=!1);const r=t.getBoundingClientRect(),s=r.left+e.scrollLeft-(n?0:Pg(t,r)),o=r.top+e.scrollTop;return{x:s,y:o}}function mN(t){let{elements:e,rect:n,offsetParent:r,strategy:s}=t;const o=s==="fixed",c=ki(r),h=e?Gh(e.floating):!1;if(r===c||h&&o)return n;let g={scrollLeft:0,scrollTop:0},p=Ti(1);const y=Ti(0),x=Ni(r);if((x||!x&&!o)&&((xl(r)!=="body"||hu(c))&&(g=Yh(r)),Ni(r))){const b=zo(r);p=za(r),y.x=b.x+r.clientLeft,y.y=b.y+r.clientTop}const E=c&&!x&&!o?gC(c,g,!0):Ti(0);return{width:n.width*p.x,height:n.height*p.y,x:n.x*p.x-g.scrollLeft*p.x+y.x+E.x,y:n.y*p.y-g.scrollTop*p.y+y.y+E.y}}function yN(t){return Array.from(t.getClientRects())}function wN(t){const e=ki(t),n=Yh(t),r=t.ownerDocument.body,s=lr(e.scrollWidth,e.clientWidth,r.scrollWidth,r.clientWidth),o=lr(e.scrollHeight,e.clientHeight,r.scrollHeight,r.clientHeight);let c=-n.scrollLeft+Pg(t);const h=-n.scrollTop;return ai(r).direction==="rtl"&&(c+=lr(e.clientWidth,r.clientWidth)-s),{width:s,height:o,x:c,y:h}}function xN(t,e){const n=fr(t),r=ki(t),s=n.visualViewport;let o=r.clientWidth,c=r.clientHeight,h=0,g=0;if(s){o=s.width,c=s.height;const p=Mg();(!p||p&&e==="fixed")&&(h=s.offsetLeft,g=s.offsetTop)}return{width:o,height:c,x:h,y:g}}const vN=new Set(["absolute","fixed"]);function EN(t,e){const n=zo(t,!0,e==="fixed"),r=n.top+t.clientTop,s=n.left+t.clientLeft,o=Ni(t)?za(t):Ti(1),c=t.clientWidth*o.x,h=t.clientHeight*o.y,g=s*o.x,p=r*o.y;return{width:c,height:h,x:g,y:p}}function fw(t,e,n){let r;if(e==="viewport")r=xN(t,n);else if(e==="document")r=wN(ki(t));else if(oi(e))r=EN(e,n);else{const s=pC(t);r={x:e.x-s.x,y:e.y-s.y,width:e.width,height:e.height}}return ih(r)}function mC(t,e){const n=Xs(t);return n===e||!oi(n)||al(n)?!1:ai(n).position==="fixed"||mC(n,e)}function bN(t,e){const n=e.get(t);if(n)return n;let r=Bc(t,[],!1).filter(h=>oi(h)&&xl(h)!=="body"),s=null;const o=ai(t).position==="fixed";let c=o?Xs(t):t;for(;oi(c)&&!al(c);){const h=ai(c),g=kg(c);!g&&h.position==="fixed"&&(s=null),(o?!g&&!s:!g&&h.position==="static"&&!!s&&vN.has(s.position)||hu(c)&&!g&&mC(t,c))?r=r.filter(y=>y!==c):s=h,c=Xs(c)}return e.set(t,r),r}function CN(t){let{element:e,boundary:n,rootBoundary:r,strategy:s}=t;const c=[...n==="clippingAncestors"?Gh(e)?[]:bN(e,this._c):[].concat(n),r],h=c[0],g=c.reduce((p,y)=>{const x=fw(e,y,s);return p.top=lr(x.top,p.top),p.right=Ys(x.right,p.right),p.bottom=Ys(x.bottom,p.bottom),p.left=lr(x.left,p.left),p},fw(e,h,s));return{width:g.right-g.left,height:g.bottom-g.top,x:g.left,y:g.top}}function SN(t){const{width:e,height:n}=fC(t);return{width:e,height:n}}function AN(t,e,n){const r=Ni(e),s=ki(e),o=n==="fixed",c=zo(t,!0,o,e);let h={scrollLeft:0,scrollTop:0};const g=Ti(0);function p(){g.x=Pg(s)}if(r||!r&&!o)if((xl(e)!=="body"||hu(s))&&(h=Yh(e)),r){const b=zo(e,!0,o,e);g.x=b.x+e.clientLeft,g.y=b.y+e.clientTop}else s&&p();o&&!r&&s&&p();const y=s&&!r&&!o?gC(s,h):Ti(0),x=c.left+h.scrollLeft-g.x-y.x,E=c.top+h.scrollTop-g.y-y.y;return{x,y:E,width:c.width,height:c.height}}function s0(t){return ai(t).position==="static"}function pw(t,e){if(!Ni(t)||ai(t).position==="fixed")return null;if(e)return e(t);let n=t.offsetParent;return ki(t)===n&&(n=n.ownerDocument.body),n}function yC(t,e){const n=fr(t);if(Gh(t))return n;if(!Ni(t)){let s=Xs(t);for(;s&&!al(s);){if(oi(s)&&!s0(s))return s;s=Xs(s)}return n}let r=pw(t,e);for(;r&&aN(r)&&s0(r);)r=pw(r,e);return r&&al(r)&&s0(r)&&!kg(r)?n:r||hN(t)||n}const _N=async function(t){const e=this.getOffsetParent||yC,n=this.getDimensions,r=await n(t.floating);return{reference:AN(t.reference,await e(t.floating),t.strategy),floating:{x:0,y:0,width:r.width,height:r.height}}};function TN(t){return ai(t).direction==="rtl"}const IN={convertOffsetParentRelativeRectToViewportRelativeRect:mN,getDocumentElement:ki,getClippingRect:CN,getOffsetParent:yC,getElementRects:_N,getClientRects:yN,getDimensions:SN,getScale:za,isElement:oi,isRTL:TN};function wC(t,e){return t.x===e.x&&t.y===e.y&&t.width===e.width&&t.height===e.height}function RN(t,e){let n=null,r;const s=ki(t);function o(){var h;clearTimeout(r),(h=n)==null||h.disconnect(),n=null}function c(h,g){h===void 0&&(h=!1),g===void 0&&(g=1),o();const p=t.getBoundingClientRect(),{left:y,top:x,width:E,height:b}=p;if(h||e(),!E||!b)return;const I=Ku(x),S=Ku(s.clientWidth-(y+E)),R=Ku(s.clientHeight-(x+b)),A=Ku(y),T={rootMargin:-I+"px "+-S+"px "+-R+"px "+-A+"px",threshold:lr(0,Ys(1,g))||1};let D=!0;function F(j){const B=j[0].intersectionRatio;if(B!==g){if(!D)return c();B?c(!1,B):r=setTimeout(()=>{c(!1,1e-7)},1e3)}B===1&&!wC(p,t.getBoundingClientRect())&&c(),D=!1}try{n=new IntersectionObserver(F,{...T,root:s.ownerDocument})}catch{n=new IntersectionObserver(F,T)}n.observe(t)}return c(!0),o}function NN(t,e,n,r){r===void 0&&(r={});const{ancestorScroll:s=!0,ancestorResize:o=!0,elementResize:c=typeof ResizeObserver=="function",layoutShift:h=typeof IntersectionObserver=="function",animationFrame:g=!1}=r,p=Dg(t),y=s||o?[...p?Bc(p):[],...Bc(e)]:[];y.forEach(A=>{s&&A.addEventListener("scroll",n,{passive:!0}),o&&A.addEventListener("resize",n)});const x=p&&h?RN(p,n):null;let E=-1,b=null;c&&(b=new ResizeObserver(A=>{let[_]=A;_&&_.target===p&&b&&(b.unobserve(e),cancelAnimationFrame(E),E=requestAnimationFrame(()=>{var T;(T=b)==null||T.observe(e)})),n()}),p&&!g&&b.observe(p),b.observe(e));let I,S=g?zo(t):null;g&&R();function R(){const A=zo(t);S&&!wC(S,A)&&n(),S=A,I=requestAnimationFrame(R)}return n(),()=>{var A;y.forEach(_=>{s&&_.removeEventListener("scroll",n),o&&_.removeEventListener("resize",n)}),x==null||x(),(A=b)==null||A.disconnect(),b=null,g&&cancelAnimationFrame(I)}}const ON=tN,kN=nN,MN=QR,DN=iN,PN=JR,gw=ZR,LN=rN,BN=(t,e,n)=>{const r=new Map,s={platform:IN,...n},o={...s.platform,_c:r};return qR(t,e,{...s,platform:o})};var FN=typeof document<"u",jN=function(){},bd=FN?M.useLayoutEffect:jN;function sh(t,e){if(t===e)return!0;if(typeof t!=typeof e)return!1;if(typeof t=="function"&&t.toString()===e.toString())return!0;let n,r,s;if(t&&e&&typeof t=="object"){if(Array.isArray(t)){if(n=t.length,n!==e.length)return!1;for(r=n;r--!==0;)if(!sh(t[r],e[r]))return!1;return!0}if(s=Object.keys(t),n=s.length,n!==Object.keys(e).length)return!1;for(r=n;r--!==0;)if(!{}.hasOwnProperty.call(e,s[r]))return!1;for(r=n;r--!==0;){const o=s[r];if(!(o==="_owner"&&t.$$typeof)&&!sh(t[o],e[o]))return!1}return!0}return t!==t&&e!==e}function xC(t){return typeof window>"u"?1:(t.ownerDocument.defaultView||window).devicePixelRatio||1}function mw(t,e){const n=xC(t);return Math.round(e*n)/n}function o0(t){const e=M.useRef(t);return bd(()=>{e.current=t}),e}function UN(t){t===void 0&&(t={});const{placement:e="bottom",strategy:n="absolute",middleware:r=[],platform:s,elements:{reference:o,floating:c}={},transform:h=!0,whileElementsMounted:g,open:p}=t,[y,x]=M.useState({x:0,y:0,strategy:n,placement:e,middlewareData:{},isPositioned:!1}),[E,b]=M.useState(r);sh(E,r)||b(r);const[I,S]=M.useState(null),[R,A]=M.useState(null),_=M.useCallback(q=>{q!==j.current&&(j.current=q,S(q))},[]),T=M.useCallback(q=>{q!==B.current&&(B.current=q,A(q))},[]),D=o||I,F=c||R,j=M.useRef(null),B=M.useRef(null),W=M.useRef(y),H=g!=null,te=o0(g),he=o0(s),Q=o0(p),fe=M.useCallback(()=>{if(!j.current||!B.current)return;const q={placement:e,strategy:n,middleware:E};he.current&&(q.platform=he.current),BN(j.current,B.current,q).then(Z=>{const ue={...Z,isPositioned:Q.current!==!1};ie.current&&!sh(W.current,ue)&&(W.current=ue,uu.flushSync(()=>{x(ue)}))})},[E,e,n,he,Q]);bd(()=>{p===!1&&W.current.isPositioned&&(W.current.isPositioned=!1,x(q=>({...q,isPositioned:!1})))},[p]);const ie=M.useRef(!1);bd(()=>(ie.current=!0,()=>{ie.current=!1}),[]),bd(()=>{if(D&&(j.current=D),F&&(B.current=F),D&&F){if(te.current)return te.current(D,F,fe);fe()}},[D,F,fe,te,H]);const $=M.useMemo(()=>({reference:j,floating:B,setReference:_,setFloating:T}),[_,T]),Ee=M.useMemo(()=>({reference:D,floating:F}),[D,F]),ne=M.useMemo(()=>{const q={position:n,left:0,top:0};if(!Ee.floating)return q;const Z=mw(Ee.floating,y.x),ue=mw(Ee.floating,y.y);return h?{...q,transform:"translate("+Z+"px, "+ue+"px)",...xC(Ee.floating)>=1.5&&{willChange:"transform"}}:{position:n,left:Z,top:ue}},[n,h,Ee.floating,y.x,y.y]);return M.useMemo(()=>({...y,update:fe,refs:$,elements:Ee,floatingStyles:ne}),[y,fe,$,Ee,ne])}const VN=t=>{function e(n){return{}.hasOwnProperty.call(n,"current")}return{name:"arrow",options:t,fn(n){const{element:r,padding:s}=typeof t=="function"?t(n):t;return r&&e(r)?r.current!=null?gw({element:r.current,padding:s}).fn(n):{}:r?gw({element:r,padding:s}).fn(n):{}}}},zN=(t,e)=>({...ON(t),options:[t,e]}),HN=(t,e)=>({...kN(t),options:[t,e]}),WN=(t,e)=>({...LN(t),options:[t,e]}),$N=(t,e)=>({...MN(t),options:[t,e]}),GN=(t,e)=>({...DN(t),options:[t,e]}),YN=(t,e)=>({...PN(t),options:[t,e]}),XN=(t,e)=>({...VN(t),options:[t,e]});var KN="Arrow",vC=M.forwardRef((t,e)=>{const{children:n,width:r=10,height:s=5,...o}=t;return U.jsx(tr.svg,{...o,ref:e,width:r,height:s,viewBox:"0 0 30 10",preserveAspectRatio:"none",children:t.asChild?n:U.jsx("polygon",{points:"0,0 30,0 15,10"})})});vC.displayName=KN;var qN=vC;function ZN(t){const[e,n]=M.useState(void 0);return Gs(()=>{if(t){n({width:t.offsetWidth,height:t.offsetHeight});const r=new ResizeObserver(s=>{if(!Array.isArray(s)||!s.length)return;const o=s[0];let c,h;if("borderBoxSize"in o){const g=o.borderBoxSize,p=Array.isArray(g)?g[0]:g;c=p.inlineSize,h=p.blockSize}else c=t.offsetWidth,h=t.offsetHeight;n({width:c,height:h})});return r.observe(t,{box:"border-box"}),()=>r.unobserve(t)}else n(void 0)},[t]),e}var EC="Popper",[bC,CC]=zh(EC),[Y9,SC]=bC(EC),AC="PopperAnchor",_C=M.forwardRef((t,e)=>{const{__scopePopper:n,virtualRef:r,...s}=t,o=SC(AC,n),c=M.useRef(null),h=ii(e,c);return M.useEffect(()=>{o.onAnchorChange((r==null?void 0:r.current)||c.current)}),r?null:U.jsx(tr.div,{...s,ref:h})});_C.displayName=AC;var Lg="PopperContent",[QN,JN]=bC(Lg),TC=M.forwardRef((t,e)=>{var qe,yt,Vn,nr,Rt,Dr;const{__scopePopper:n,side:r="bottom",sideOffset:s=0,align:o="center",alignOffset:c=0,arrowPadding:h=0,avoidCollisions:g=!0,collisionBoundary:p=[],collisionPadding:y=0,sticky:x="partial",hideWhenDetached:E=!1,updatePositionStrategy:b="optimized",onPlaced:I,...S}=t,R=SC(Lg,n),[A,_]=M.useState(null),T=ii(e,ze=>_(ze)),[D,F]=M.useState(null),j=ZN(D),B=(j==null?void 0:j.width)??0,W=(j==null?void 0:j.height)??0,H=r+(o!=="center"?"-"+o:""),te=typeof y=="number"?y:{top:0,right:0,bottom:0,left:0,...y},he=Array.isArray(p)?p:[p],Q=he.length>0,fe={padding:te,boundary:he.filter(tO),altBoundary:Q},{refs:ie,floatingStyles:$,placement:Ee,isPositioned:ne,middlewareData:q}=UN({strategy:"fixed",placement:H,whileElementsMounted:(...ze)=>NN(...ze,{animationFrame:b==="always"}),elements:{reference:R.anchor},middleware:[zN({mainAxis:s+W,alignmentAxis:c}),g&&HN({mainAxis:!0,crossAxis:!1,limiter:x==="partial"?WN():void 0,...fe}),g&&$N({...fe}),GN({...fe,apply:({elements:ze,rects:Pr,availableWidth:zn,availableHeight:li})=>{const{width:Wt,height:nt}=Pr.reference,He=ze.floating.style;He.setProperty("--radix-popper-available-width",`${zn}px`),He.setProperty("--radix-popper-available-height",`${li}px`),He.setProperty("--radix-popper-anchor-width",`${Wt}px`),He.setProperty("--radix-popper-anchor-height",`${nt}px`)}}),D&&XN({element:D,padding:h}),nO({arrowWidth:B,arrowHeight:W}),E&&YN({strategy:"referenceHidden",...fe})]}),[Z,ue]=NC(Ee),De=$s(I);Gs(()=>{ne&&(De==null||De())},[ne,De]);const ge=(qe=q.arrow)==null?void 0:qe.x,Pe=(yt=q.arrow)==null?void 0:yt.y,Re=((Vn=q.arrow)==null?void 0:Vn.centerOffset)!==0,[Ct,me]=M.useState();return Gs(()=>{A&&me(window.getComputedStyle(A).zIndex)},[A]),U.jsx("div",{ref:ie.setFloating,"data-radix-popper-content-wrapper":"",style:{...$,transform:ne?$.transform:"translate(0, -200%)",minWidth:"max-content",zIndex:Ct,"--radix-popper-transform-origin":[(nr=q.transformOrigin)==null?void 0:nr.x,(Rt=q.transformOrigin)==null?void 0:Rt.y].join(" "),...((Dr=q.hide)==null?void 0:Dr.referenceHidden)&&{visibility:"hidden",pointerEvents:"none"}},dir:t.dir,children:U.jsx(QN,{scope:n,placedSide:Z,onArrowChange:F,arrowX:ge,arrowY:Pe,shouldHideArrow:Re,children:U.jsx(tr.div,{"data-side":Z,"data-align":ue,...S,ref:T,style:{...S.style,animation:ne?void 0:"none"}})})})});TC.displayName=Lg;var IC="PopperArrow",eO={top:"bottom",right:"left",bottom:"top",left:"right"},RC=M.forwardRef(function(e,n){const{__scopePopper:r,...s}=e,o=JN(IC,r),c=eO[o.placedSide];return U.jsx("span",{ref:o.onArrowChange,style:{position:"absolute",left:o.arrowX,top:o.arrowY,[c]:0,transformOrigin:{top:"",right:"0 0",bottom:"center 0",left:"100% 0"}[o.placedSide],transform:{top:"translateY(100%)",right:"translateY(50%) rotate(90deg) translateX(-50%)",bottom:"rotate(180deg)",left:"translateY(50%) rotate(-90deg) translateX(50%)"}[o.placedSide],visibility:o.shouldHideArrow?"hidden":void 0},children:U.jsx(qN,{...s,ref:n,style:{...s.style,display:"block"}})})});RC.displayName=IC;function tO(t){return t!==null}var nO=t=>({name:"transformOrigin",options:t,fn(e){var R,A,_;const{placement:n,rects:r,middlewareData:s}=e,c=((R=s.arrow)==null?void 0:R.centerOffset)!==0,h=c?0:t.arrowWidth,g=c?0:t.arrowHeight,[p,y]=NC(n),x={start:"0%",center:"50%",end:"100%"}[y],E=(((A=s.arrow)==null?void 0:A.x)??0)+h/2,b=(((_=s.arrow)==null?void 0:_.y)??0)+g/2;let I="",S="";return p==="bottom"?(I=c?x:`${E}px`,S=`${-g}px`):p==="top"?(I=c?x:`${E}px`,S=`${r.floating.height+g}px`):p==="right"?(I=`${-g}px`,S=c?x:`${b}px`):p==="left"&&(I=`${r.floating.width+g}px`,S=c?x:`${b}px`),{data:{x:I,y:S}}}});function NC(t){const[e,n="center"]=t.split("-");return[e,n]}var rO=_C,iO=TC,sO=RC,[Xh,X9]=zh("Tooltip",[CC]),Bg=CC(),OC="TooltipProvider",oO=700,yw="tooltip.open",[aO,kC]=Xh(OC),MC=t=>{const{__scopeTooltip:e,delayDuration:n=oO,skipDelayDuration:r=300,disableHoverableContent:s=!1,children:o}=t,c=M.useRef(!0),h=M.useRef(!1),g=M.useRef(0);return M.useEffect(()=>{const p=g.current;return()=>window.clearTimeout(p)},[]),U.jsx(aO,{scope:e,isOpenDelayedRef:c,delayDuration:n,onOpen:M.useCallback(()=>{window.clearTimeout(g.current),c.current=!1},[]),onClose:M.useCallback(()=>{window.clearTimeout(g.current),g.current=window.setTimeout(()=>c.current=!0,r)},[r]),isPointerInTransitRef:h,onPointerInTransitChange:M.useCallback(p=>{h.current=p},[]),disableHoverableContent:s,children:o})};MC.displayName=OC;var DC="Tooltip",[K9,Kh]=Xh(DC),P1="TooltipTrigger",lO=M.forwardRef((t,e)=>{const{__scopeTooltip:n,...r}=t,s=Kh(P1,n),o=kC(P1,n),c=Bg(n),h=M.useRef(null),g=ii(e,h,s.onTriggerChange),p=M.useRef(!1),y=M.useRef(!1),x=M.useCallback(()=>p.current=!1,[]);return M.useEffect(()=>()=>document.removeEventListener("pointerup",x),[x]),U.jsx(rO,{asChild:!0,...c,children:U.jsx(tr.button,{"aria-describedby":s.open?s.contentId:void 0,"data-state":s.stateAttribute,...r,ref:g,onPointerMove:rn(t.onPointerMove,E=>{E.pointerType!=="touch"&&!y.current&&!o.isPointerInTransitRef.current&&(s.onTriggerEnter(),y.current=!0)}),onPointerLeave:rn(t.onPointerLeave,()=>{s.onTriggerLeave(),y.current=!1}),onPointerDown:rn(t.onPointerDown,()=>{s.open&&s.onClose(),p.current=!0,document.addEventListener("pointerup",x,{once:!0})}),onFocus:rn(t.onFocus,()=>{p.current||s.onOpen()}),onBlur:rn(t.onBlur,s.onClose),onClick:rn(t.onClick,s.onClose)})})});lO.displayName=P1;var cO="TooltipPortal",[q9,uO]=Xh(cO,{forceMount:void 0}),ll="TooltipContent",PC=M.forwardRef((t,e)=>{const n=uO(ll,t.__scopeTooltip),{forceMount:r=n.forceMount,side:s="top",...o}=t,c=Kh(ll,t.__scopeTooltip);return U.jsx(bg,{present:r||c.open,children:c.disableHoverableContent?U.jsx(LC,{side:s,...o,ref:e}):U.jsx(dO,{side:s,...o,ref:e})})}),dO=M.forwardRef((t,e)=>{const n=Kh(ll,t.__scopeTooltip),r=kC(ll,t.__scopeTooltip),s=M.useRef(null),o=ii(e,s),[c,h]=M.useState(null),{trigger:g,onClose:p}=n,y=s.current,{onPointerInTransitChange:x}=r,E=M.useCallback(()=>{h(null),x(!1)},[x]),b=M.useCallback((I,S)=>{const R=I.currentTarget,A={x:I.clientX,y:I.clientY},_=mO(A,R.getBoundingClientRect()),T=yO(A,_),D=wO(S.getBoundingClientRect()),F=vO([...T,...D]);h(F),x(!0)},[x]);return M.useEffect(()=>()=>E(),[E]),M.useEffect(()=>{if(g&&y){const I=R=>b(R,y),S=R=>b(R,g);return g.addEventListener("pointerleave",I),y.addEventListener("pointerleave",S),()=>{g.removeEventListener("pointerleave",I),y.removeEventListener("pointerleave",S)}}},[g,y,b,E]),M.useEffect(()=>{if(c){const I=S=>{const R=S.target,A={x:S.clientX,y:S.clientY},_=(g==null?void 0:g.contains(R))||(y==null?void 0:y.contains(R)),T=!xO(A,c);_?E():T&&(E(),p())};return document.addEventListener("pointermove",I),()=>document.removeEventListener("pointermove",I)}},[g,y,c,p,E]),U.jsx(LC,{...t,ref:o})}),[hO,fO]=Xh(DC,{isInside:!1}),pO=SI("TooltipContent"),LC=M.forwardRef((t,e)=>{const{__scopeTooltip:n,children:r,"aria-label":s,onEscapeKeyDown:o,onPointerDownOutside:c,...h}=t,g=Kh(ll,n),p=Bg(n),{onClose:y}=g;return M.useEffect(()=>(document.addEventListener(yw,y),()=>document.removeEventListener(yw,y)),[y]),M.useEffect(()=>{if(g.trigger){const x=E=>{const b=E.target;b!=null&&b.contains(g.trigger)&&y()};return window.addEventListener("scroll",x,{capture:!0}),()=>window.removeEventListener("scroll",x,{capture:!0})}},[g.trigger,y]),U.jsx(Eg,{asChild:!0,disableOutsidePointerEvents:!1,onEscapeKeyDown:o,onPointerDownOutside:c,onFocusOutside:x=>x.preventDefault(),onDismiss:y,children:U.jsxs(iO,{"data-state":g.stateAttribute,...p,...h,ref:e,style:{...h.style,"--radix-tooltip-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-tooltip-content-available-width":"var(--radix-popper-available-width)","--radix-tooltip-content-available-height":"var(--radix-popper-available-height)","--radix-tooltip-trigger-width":"var(--radix-popper-anchor-width)","--radix-tooltip-trigger-height":"var(--radix-popper-anchor-height)"},children:[U.jsx(pO,{children:r}),U.jsx(hO,{scope:n,isInside:!0,children:U.jsx(KI,{id:g.contentId,role:"tooltip",children:s||r})})]})})});PC.displayName=ll;var BC="TooltipArrow",gO=M.forwardRef((t,e)=>{const{__scopeTooltip:n,...r}=t,s=Bg(n);return fO(BC,n).isInside?null:U.jsx(sO,{...s,...r,ref:e})});gO.displayName=BC;function mO(t,e){const n=Math.abs(e.top-t.y),r=Math.abs(e.bottom-t.y),s=Math.abs(e.right-t.x),o=Math.abs(e.left-t.x);switch(Math.min(n,r,s,o)){case o:return"left";case s:return"right";case n:return"top";case r:return"bottom";default:throw new Error("unreachable")}}function yO(t,e,n=5){const r=[];switch(e){case"top":r.push({x:t.x-n,y:t.y+n},{x:t.x+n,y:t.y+n});break;case"bottom":r.push({x:t.x-n,y:t.y-n},{x:t.x+n,y:t.y-n});break;case"left":r.push({x:t.x+n,y:t.y-n},{x:t.x+n,y:t.y+n});break;case"right":r.push({x:t.x-n,y:t.y-n},{x:t.x-n,y:t.y+n});break}return r}function wO(t){const{top:e,right:n,bottom:r,left:s}=t;return[{x:s,y:e},{x:n,y:e},{x:n,y:r},{x:s,y:r}]}function xO(t,e){const{x:n,y:r}=t;let s=!1;for(let o=0,c=e.length-1;o<e.length;c=o++){const h=e[o],g=e[c],p=h.x,y=h.y,x=g.x,E=g.y;y>r!=E>r&&n<(x-p)*(r-y)/(E-y)+p&&(s=!s)}return s}function vO(t){const e=t.slice();return e.sort((n,r)=>n.x<r.x?-1:n.x>r.x?1:n.y<r.y?-1:n.y>r.y?1:0),EO(e)}function EO(t){if(t.length<=1)return t.slice();const e=[];for(let r=0;r<t.length;r++){const s=t[r];for(;e.length>=2;){const o=e[e.length-1],c=e[e.length-2];if((o.x-c.x)*(s.y-c.y)>=(o.y-c.y)*(s.x-c.x))e.pop();else break}e.push(s)}e.pop();const n=[];for(let r=t.length-1;r>=0;r--){const s=t[r];for(;n.length>=2;){const o=n[n.length-1],c=n[n.length-2];if((o.x-c.x)*(s.y-c.y)>=(o.y-c.y)*(s.x-c.x))n.pop();else break}n.push(s)}return n.pop(),e.length===1&&n.length===1&&e[0].x===n[0].x&&e[0].y===n[0].y?e:e.concat(n)}var bO=MC,FC=PC;const CO=bO,SO=M.forwardRef(({className:t,sideOffset:e=4,...n},r)=>U.jsx(FC,{ref:r,sideOffset:e,className:si("z-50 overflow-hidden rounded-md border bg-popover px-3 py-1.5 text-sm text-popover-foreground shadow-md animate-in fade-in-0 zoom-in-95 data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=closed]:zoom-out-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",t),...n}));SO.displayName=FC.displayName;var qh=class{constructor(){this.listeners=new Set,this.subscribe=this.subscribe.bind(this)}subscribe(t){return this.listeners.add(t),this.onSubscribe(),()=>{this.listeners.delete(t),this.onUnsubscribe()}}hasListeners(){return this.listeners.size>0}onSubscribe(){}onUnsubscribe(){}},Zh=typeof window>"u"||"Deno"in globalThis;function Gr(){}function AO(t,e){return typeof t=="function"?t(e):t}function _O(t){return typeof t=="number"&&t>=0&&t!==1/0}function TO(t,e){return Math.max(t+(e||0)-Date.now(),0)}function L1(t,e){return typeof t=="function"?t(e):t}function IO(t,e){return typeof t=="function"?t(e):t}function ww(t,e){const{type:n="all",exact:r,fetchStatus:s,predicate:o,queryKey:c,stale:h}=t;if(c){if(r){if(e.queryHash!==Fg(c,e.options))return!1}else if(!jc(e.queryKey,c))return!1}if(n!=="all"){const g=e.isActive();if(n==="active"&&!g||n==="inactive"&&g)return!1}return!(typeof h=="boolean"&&e.isStale()!==h||s&&s!==e.state.fetchStatus||o&&!o(e))}function xw(t,e){const{exact:n,status:r,predicate:s,mutationKey:o}=t;if(o){if(!e.options.mutationKey)return!1;if(n){if(Fc(e.options.mutationKey)!==Fc(o))return!1}else if(!jc(e.options.mutationKey,o))return!1}return!(r&&e.state.status!==r||s&&!s(e))}function Fg(t,e){return((e==null?void 0:e.queryKeyHashFn)||Fc)(t)}function Fc(t){return JSON.stringify(t,(e,n)=>B1(n)?Object.keys(n).sort().reduce((r,s)=>(r[s]=n[s],r),{}):n)}function jc(t,e){return t===e?!0:typeof t!=typeof e?!1:t&&e&&typeof t=="object"&&typeof e=="object"?Object.keys(e).every(n=>jc(t[n],e[n])):!1}function jC(t,e){if(t===e)return t;const n=vw(t)&&vw(e);if(n||B1(t)&&B1(e)){const r=n?t:Object.keys(t),s=r.length,o=n?e:Object.keys(e),c=o.length,h=n?[]:{},g=new Set(r);let p=0;for(let y=0;y<c;y++){const x=n?y:o[y];(!n&&g.has(x)||n)&&t[x]===void 0&&e[x]===void 0?(h[x]=void 0,p++):(h[x]=jC(t[x],e[x]),h[x]===t[x]&&t[x]!==void 0&&p++)}return s===c&&p===s?t:h}return e}function vw(t){return Array.isArray(t)&&t.length===Object.keys(t).length}function B1(t){if(!Ew(t))return!1;const e=t.constructor;if(e===void 0)return!0;const n=e.prototype;return!(!Ew(n)||!n.hasOwnProperty("isPrototypeOf")||Object.getPrototypeOf(t)!==Object.prototype)}function Ew(t){return Object.prototype.toString.call(t)==="[object Object]"}function RO(t){return new Promise(e=>{setTimeout(e,t)})}function NO(t,e,n){return typeof n.structuralSharing=="function"?n.structuralSharing(t,e):n.structuralSharing!==!1?jC(t,e):e}function OO(t,e,n=0){const r=[...t,e];return n&&r.length>n?r.slice(1):r}function kO(t,e,n=0){const r=[e,...t];return n&&r.length>n?r.slice(0,-1):r}var jg=Symbol();function UC(t,e){return!t.queryFn&&(e!=null&&e.initialPromise)?()=>e.initialPromise:!t.queryFn||t.queryFn===jg?()=>Promise.reject(new Error(`Missing queryFn: '${t.queryHash}'`)):t.queryFn}var To,bs,$a,Qv,MO=(Qv=class extends qh{constructor(){super();it(this,To);it(this,bs);it(this,$a);Fe(this,$a,e=>{if(!Zh&&window.addEventListener){const n=()=>e();return window.addEventListener("visibilitychange",n,!1),()=>{window.removeEventListener("visibilitychange",n)}}})}onSubscribe(){J(this,bs)||this.setEventListener(J(this,$a))}onUnsubscribe(){var e;this.hasListeners()||((e=J(this,bs))==null||e.call(this),Fe(this,bs,void 0))}setEventListener(e){var n;Fe(this,$a,e),(n=J(this,bs))==null||n.call(this),Fe(this,bs,e(r=>{typeof r=="boolean"?this.setFocused(r):this.onFocus()}))}setFocused(e){J(this,To)!==e&&(Fe(this,To,e),this.onFocus())}onFocus(){const e=this.isFocused();this.listeners.forEach(n=>{n(e)})}isFocused(){var e;return typeof J(this,To)=="boolean"?J(this,To):((e=globalThis.document)==null?void 0:e.visibilityState)!=="hidden"}},To=new WeakMap,bs=new WeakMap,$a=new WeakMap,Qv),VC=new MO,Ga,Cs,Ya,Jv,DO=(Jv=class extends qh{constructor(){super();it(this,Ga,!0);it(this,Cs);it(this,Ya);Fe(this,Ya,e=>{if(!Zh&&window.addEventListener){const n=()=>e(!0),r=()=>e(!1);return window.addEventListener("online",n,!1),window.addEventListener("offline",r,!1),()=>{window.removeEventListener("online",n),window.removeEventListener("offline",r)}}})}onSubscribe(){J(this,Cs)||this.setEventListener(J(this,Ya))}onUnsubscribe(){var e;this.hasListeners()||((e=J(this,Cs))==null||e.call(this),Fe(this,Cs,void 0))}setEventListener(e){var n;Fe(this,Ya,e),(n=J(this,Cs))==null||n.call(this),Fe(this,Cs,e(this.setOnline.bind(this)))}setOnline(e){J(this,Ga)!==e&&(Fe(this,Ga,e),this.listeners.forEach(r=>{r(e)}))}isOnline(){return J(this,Ga)}},Ga=new WeakMap,Cs=new WeakMap,Ya=new WeakMap,Jv),oh=new DO;function PO(){let t,e;const n=new Promise((s,o)=>{t=s,e=o});n.status="pending",n.catch(()=>{});function r(s){Object.assign(n,s),delete n.resolve,delete n.reject}return n.resolve=s=>{r({status:"fulfilled",value:s}),t(s)},n.reject=s=>{r({status:"rejected",reason:s}),e(s)},n}function LO(t){return Math.min(1e3*2**t,3e4)}function zC(t){return(t??"online")==="online"?oh.isOnline():!0}var HC=class extends Error{constructor(t){super("CancelledError"),this.revert=t==null?void 0:t.revert,this.silent=t==null?void 0:t.silent}};function a0(t){return t instanceof HC}function WC(t){let e=!1,n=0,r=!1,s;const o=PO(),c=S=>{var R;r||(E(new HC(S)),(R=t.abort)==null||R.call(t))},h=()=>{e=!0},g=()=>{e=!1},p=()=>VC.isFocused()&&(t.networkMode==="always"||oh.isOnline())&&t.canRun(),y=()=>zC(t.networkMode)&&t.canRun(),x=S=>{var R;r||(r=!0,(R=t.onSuccess)==null||R.call(t,S),s==null||s(),o.resolve(S))},E=S=>{var R;r||(r=!0,(R=t.onError)==null||R.call(t,S),s==null||s(),o.reject(S))},b=()=>new Promise(S=>{var R;s=A=>{(r||p())&&S(A)},(R=t.onPause)==null||R.call(t)}).then(()=>{var S;s=void 0,r||(S=t.onContinue)==null||S.call(t)}),I=()=>{if(r)return;let S;const R=n===0?t.initialPromise:void 0;try{S=R??t.fn()}catch(A){S=Promise.reject(A)}Promise.resolve(S).then(x).catch(A=>{var j;if(r)return;const _=t.retry??(Zh?0:3),T=t.retryDelay??LO,D=typeof T=="function"?T(n,A):T,F=_===!0||typeof _=="number"&&n<_||typeof _=="function"&&_(n,A);if(e||!F){E(A);return}n++,(j=t.onFail)==null||j.call(t,n,A),RO(D).then(()=>p()?void 0:b()).then(()=>{e?E(A):I()})})};return{promise:o,cancel:c,continue:()=>(s==null||s(),o),cancelRetry:h,continueRetry:g,canStart:y,start:()=>(y()?I():b().then(I),o)}}var BO=t=>setTimeout(t,0);function FO(){let t=[],e=0,n=h=>{h()},r=h=>{h()},s=BO;const o=h=>{e?t.push(h):s(()=>{n(h)})},c=()=>{const h=t;t=[],h.length&&s(()=>{r(()=>{h.forEach(g=>{n(g)})})})};return{batch:h=>{let g;e++;try{g=h()}finally{e--,e||c()}return g},batchCalls:h=>(...g)=>{o(()=>{h(...g)})},schedule:o,setNotifyFunction:h=>{n=h},setBatchNotifyFunction:h=>{r=h},setScheduler:h=>{s=h}}}var Pn=FO(),Io,e2,$C=(e2=class{constructor(){it(this,Io)}destroy(){this.clearGcTimeout()}scheduleGc(){this.clearGcTimeout(),_O(this.gcTime)&&Fe(this,Io,setTimeout(()=>{this.optionalRemove()},this.gcTime))}updateGcTime(t){this.gcTime=Math.max(this.gcTime||0,t??(Zh?1/0:5*60*1e3))}clearGcTimeout(){J(this,Io)&&(clearTimeout(J(this,Io)),Fe(this,Io,void 0))}},Io=new WeakMap,e2),Xa,Ro,Cr,No,Tn,ru,Oo,Xr,Li,t2,jO=(t2=class extends $C{constructor(e){super();it(this,Xr);it(this,Xa);it(this,Ro);it(this,Cr);it(this,No);it(this,Tn);it(this,ru);it(this,Oo);Fe(this,Oo,!1),Fe(this,ru,e.defaultOptions),this.setOptions(e.options),this.observers=[],Fe(this,No,e.client),Fe(this,Cr,J(this,No).getQueryCache()),this.queryKey=e.queryKey,this.queryHash=e.queryHash,Fe(this,Xa,VO(this.options)),this.state=e.state??J(this,Xa),this.scheduleGc()}get meta(){return this.options.meta}get promise(){var e;return(e=J(this,Tn))==null?void 0:e.promise}setOptions(e){this.options={...J(this,ru),...e},this.updateGcTime(this.options.gcTime)}optionalRemove(){!this.observers.length&&this.state.fetchStatus==="idle"&&J(this,Cr).remove(this)}setData(e,n){const r=NO(this.state.data,e,this.options);return Sn(this,Xr,Li).call(this,{data:r,type:"success",dataUpdatedAt:n==null?void 0:n.updatedAt,manual:n==null?void 0:n.manual}),r}setState(e,n){Sn(this,Xr,Li).call(this,{type:"setState",state:e,setStateOptions:n})}cancel(e){var r,s;const n=(r=J(this,Tn))==null?void 0:r.promise;return(s=J(this,Tn))==null||s.cancel(e),n?n.then(Gr).catch(Gr):Promise.resolve()}destroy(){super.destroy(),this.cancel({silent:!0})}reset(){this.destroy(),this.setState(J(this,Xa))}isActive(){return this.observers.some(e=>IO(e.options.enabled,this)!==!1)}isDisabled(){return this.getObserversCount()>0?!this.isActive():this.options.queryFn===jg||this.state.dataUpdateCount+this.state.errorUpdateCount===0}isStatic(){return this.getObserversCount()>0?this.observers.some(e=>L1(e.options.staleTime,this)==="static"):!1}isStale(){return this.getObserversCount()>0?this.observers.some(e=>e.getCurrentResult().isStale):this.state.data===void 0||this.state.isInvalidated}isStaleByTime(e=0){return this.state.data===void 0?!0:e==="static"?!1:this.state.isInvalidated?!0:!TO(this.state.dataUpdatedAt,e)}onFocus(){var n;const e=this.observers.find(r=>r.shouldFetchOnWindowFocus());e==null||e.refetch({cancelRefetch:!1}),(n=J(this,Tn))==null||n.continue()}onOnline(){var n;const e=this.observers.find(r=>r.shouldFetchOnReconnect());e==null||e.refetch({cancelRefetch:!1}),(n=J(this,Tn))==null||n.continue()}addObserver(e){this.observers.includes(e)||(this.observers.push(e),this.clearGcTimeout(),J(this,Cr).notify({type:"observerAdded",query:this,observer:e}))}removeObserver(e){this.observers.includes(e)&&(this.observers=this.observers.filter(n=>n!==e),this.observers.length||(J(this,Tn)&&(J(this,Oo)?J(this,Tn).cancel({revert:!0}):J(this,Tn).cancelRetry()),this.scheduleGc()),J(this,Cr).notify({type:"observerRemoved",query:this,observer:e}))}getObserversCount(){return this.observers.length}invalidate(){this.state.isInvalidated||Sn(this,Xr,Li).call(this,{type:"invalidate"})}fetch(e,n){var p,y,x;if(this.state.fetchStatus!=="idle"){if(this.state.data!==void 0&&(n!=null&&n.cancelRefetch))this.cancel({silent:!0});else if(J(this,Tn))return J(this,Tn).continueRetry(),J(this,Tn).promise}if(e&&this.setOptions(e),!this.options.queryFn){const E=this.observers.find(b=>b.options.queryFn);E&&this.setOptions(E.options)}const r=new AbortController,s=E=>{Object.defineProperty(E,"signal",{enumerable:!0,get:()=>(Fe(this,Oo,!0),r.signal)})},o=()=>{const E=UC(this.options,n),I=(()=>{const S={client:J(this,No),queryKey:this.queryKey,meta:this.meta};return s(S),S})();return Fe(this,Oo,!1),this.options.persister?this.options.persister(E,I,this):E(I)},h=(()=>{const E={fetchOptions:n,options:this.options,queryKey:this.queryKey,client:J(this,No),state:this.state,fetchFn:o};return s(E),E})();(p=this.options.behavior)==null||p.onFetch(h,this),Fe(this,Ro,this.state),(this.state.fetchStatus==="idle"||this.state.fetchMeta!==((y=h.fetchOptions)==null?void 0:y.meta))&&Sn(this,Xr,Li).call(this,{type:"fetch",meta:(x=h.fetchOptions)==null?void 0:x.meta});const g=E=>{var b,I,S,R;a0(E)&&E.silent||Sn(this,Xr,Li).call(this,{type:"error",error:E}),a0(E)||((I=(b=J(this,Cr).config).onError)==null||I.call(b,E,this),(R=(S=J(this,Cr).config).onSettled)==null||R.call(S,this.state.data,E,this)),this.scheduleGc()};return Fe(this,Tn,WC({initialPromise:n==null?void 0:n.initialPromise,fn:h.fetchFn,abort:r.abort.bind(r),onSuccess:E=>{var b,I,S,R;if(E===void 0){g(new Error(`${this.queryHash} data is undefined`));return}try{this.setData(E)}catch(A){g(A);return}(I=(b=J(this,Cr).config).onSuccess)==null||I.call(b,E,this),(R=(S=J(this,Cr).config).onSettled)==null||R.call(S,E,this.state.error,this),this.scheduleGc()},onError:g,onFail:(E,b)=>{Sn(this,Xr,Li).call(this,{type:"failed",failureCount:E,error:b})},onPause:()=>{Sn(this,Xr,Li).call(this,{type:"pause"})},onContinue:()=>{Sn(this,Xr,Li).call(this,{type:"continue"})},retry:h.options.retry,retryDelay:h.options.retryDelay,networkMode:h.options.networkMode,canRun:()=>!0})),J(this,Tn).start()}},Xa=new WeakMap,Ro=new WeakMap,Cr=new WeakMap,No=new WeakMap,Tn=new WeakMap,ru=new WeakMap,Oo=new WeakMap,Xr=new WeakSet,Li=function(e){const n=r=>{switch(e.type){case"failed":return{...r,fetchFailureCount:e.failureCount,fetchFailureReason:e.error};case"pause":return{...r,fetchStatus:"paused"};case"continue":return{...r,fetchStatus:"fetching"};case"fetch":return{...r,...UO(r.data,this.options),fetchMeta:e.meta??null};case"success":return Fe(this,Ro,void 0),{...r,data:e.data,dataUpdateCount:r.dataUpdateCount+1,dataUpdatedAt:e.dataUpdatedAt??Date.now(),error:null,isInvalidated:!1,status:"success",...!e.manual&&{fetchStatus:"idle",fetchFailureCount:0,fetchFailureReason:null}};case"error":const s=e.error;return a0(s)&&s.revert&&J(this,Ro)?{...J(this,Ro),fetchStatus:"idle"}:{...r,error:s,errorUpdateCount:r.errorUpdateCount+1,errorUpdatedAt:Date.now(),fetchFailureCount:r.fetchFailureCount+1,fetchFailureReason:s,fetchStatus:"idle",status:"error"};case"invalidate":return{...r,isInvalidated:!0};case"setState":return{...r,...e.state}}};this.state=n(this.state),Pn.batch(()=>{this.observers.forEach(r=>{r.onQueryUpdate()}),J(this,Cr).notify({query:this,type:"updated",action:e})})},t2);function UO(t,e){return{fetchFailureCount:0,fetchFailureReason:null,fetchStatus:zC(e.networkMode)?"fetching":"paused",...t===void 0&&{error:null,status:"pending"}}}function VO(t){const e=typeof t.initialData=="function"?t.initialData():t.initialData,n=e!==void 0,r=n?typeof t.initialDataUpdatedAt=="function"?t.initialDataUpdatedAt():t.initialDataUpdatedAt:0;return{data:e,dataUpdateCount:0,dataUpdatedAt:n?r??Date.now():0,error:null,errorUpdateCount:0,errorUpdatedAt:0,fetchFailureCount:0,fetchFailureReason:null,fetchMeta:null,isInvalidated:!1,status:n?"success":"pending",fetchStatus:"idle"}}var vi,n2,zO=(n2=class extends qh{constructor(e={}){super();it(this,vi);this.config=e,Fe(this,vi,new Map)}build(e,n,r){const s=n.queryKey,o=n.queryHash??Fg(s,n);let c=this.get(o);return c||(c=new jO({client:e,queryKey:s,queryHash:o,options:e.defaultQueryOptions(n),state:r,defaultOptions:e.getQueryDefaults(s)}),this.add(c)),c}add(e){J(this,vi).has(e.queryHash)||(J(this,vi).set(e.queryHash,e),this.notify({type:"added",query:e}))}remove(e){const n=J(this,vi).get(e.queryHash);n&&(e.destroy(),n===e&&J(this,vi).delete(e.queryHash),this.notify({type:"removed",query:e}))}clear(){Pn.batch(()=>{this.getAll().forEach(e=>{this.remove(e)})})}get(e){return J(this,vi).get(e)}getAll(){return[...J(this,vi).values()]}find(e){const n={exact:!0,...e};return this.getAll().find(r=>ww(n,r))}findAll(e={}){const n=this.getAll();return Object.keys(e).length>0?n.filter(r=>ww(e,r)):n}notify(e){Pn.batch(()=>{this.listeners.forEach(n=>{n(e)})})}onFocus(){Pn.batch(()=>{this.getAll().forEach(e=>{e.onFocus()})})}onOnline(){Pn.batch(()=>{this.getAll().forEach(e=>{e.onOnline()})})}},vi=new WeakMap,n2),Ei,kn,ko,bi,hs,r2,HO=(r2=class extends $C{constructor(e){super();it(this,bi);it(this,Ei);it(this,kn);it(this,ko);this.mutationId=e.mutationId,Fe(this,kn,e.mutationCache),Fe(this,Ei,[]),this.state=e.state||WO(),this.setOptions(e.options),this.scheduleGc()}setOptions(e){this.options=e,this.updateGcTime(this.options.gcTime)}get meta(){return this.options.meta}addObserver(e){J(this,Ei).includes(e)||(J(this,Ei).push(e),this.clearGcTimeout(),J(this,kn).notify({type:"observerAdded",mutation:this,observer:e}))}removeObserver(e){Fe(this,Ei,J(this,Ei).filter(n=>n!==e)),this.scheduleGc(),J(this,kn).notify({type:"observerRemoved",mutation:this,observer:e})}optionalRemove(){J(this,Ei).length||(this.state.status==="pending"?this.scheduleGc():J(this,kn).remove(this))}continue(){var e;return((e=J(this,ko))==null?void 0:e.continue())??this.execute(this.state.variables)}async execute(e){var o,c,h,g,p,y,x,E,b,I,S,R,A,_,T,D,F,j,B,W;const n=()=>{Sn(this,bi,hs).call(this,{type:"continue"})};Fe(this,ko,WC({fn:()=>this.options.mutationFn?this.options.mutationFn(e):Promise.reject(new Error("No mutationFn found")),onFail:(H,te)=>{Sn(this,bi,hs).call(this,{type:"failed",failureCount:H,error:te})},onPause:()=>{Sn(this,bi,hs).call(this,{type:"pause"})},onContinue:n,retry:this.options.retry??0,retryDelay:this.options.retryDelay,networkMode:this.options.networkMode,canRun:()=>J(this,kn).canRun(this)}));const r=this.state.status==="pending",s=!J(this,ko).canStart();try{if(r)n();else{Sn(this,bi,hs).call(this,{type:"pending",variables:e,isPaused:s}),await((c=(o=J(this,kn).config).onMutate)==null?void 0:c.call(o,e,this));const te=await((g=(h=this.options).onMutate)==null?void 0:g.call(h,e));te!==this.state.context&&Sn(this,bi,hs).call(this,{type:"pending",context:te,variables:e,isPaused:s})}const H=await J(this,ko).start();return await((y=(p=J(this,kn).config).onSuccess)==null?void 0:y.call(p,H,e,this.state.context,this)),await((E=(x=this.options).onSuccess)==null?void 0:E.call(x,H,e,this.state.context)),await((I=(b=J(this,kn).config).onSettled)==null?void 0:I.call(b,H,null,this.state.variables,this.state.context,this)),await((R=(S=this.options).onSettled)==null?void 0:R.call(S,H,null,e,this.state.context)),Sn(this,bi,hs).call(this,{type:"success",data:H}),H}catch(H){try{throw await((_=(A=J(this,kn).config).onError)==null?void 0:_.call(A,H,e,this.state.context,this)),await((D=(T=this.options).onError)==null?void 0:D.call(T,H,e,this.state.context)),await((j=(F=J(this,kn).config).onSettled)==null?void 0:j.call(F,void 0,H,this.state.variables,this.state.context,this)),await((W=(B=this.options).onSettled)==null?void 0:W.call(B,void 0,H,e,this.state.context)),H}finally{Sn(this,bi,hs).call(this,{type:"error",error:H})}}finally{J(this,kn).runNext(this)}}},Ei=new WeakMap,kn=new WeakMap,ko=new WeakMap,bi=new WeakSet,hs=function(e){const n=r=>{switch(e.type){case"failed":return{...r,failureCount:e.failureCount,failureReason:e.error};case"pause":return{...r,isPaused:!0};case"continue":return{...r,isPaused:!1};case"pending":return{...r,context:e.context,data:void 0,failureCount:0,failureReason:null,error:null,isPaused:e.isPaused,status:"pending",variables:e.variables,submittedAt:Date.now()};case"success":return{...r,data:e.data,failureCount:0,failureReason:null,error:null,status:"success",isPaused:!1};case"error":return{...r,data:void 0,error:e.error,failureCount:r.failureCount+1,failureReason:e.error,isPaused:!1,status:"error"}}};this.state=n(this.state),Pn.batch(()=>{J(this,Ei).forEach(r=>{r.onMutationUpdate(e)}),J(this,kn).notify({mutation:this,type:"updated",action:e})})},r2);function WO(){return{context:void 0,data:void 0,error:null,failureCount:0,failureReason:null,isPaused:!1,status:"idle",variables:void 0,submittedAt:0}}var Ui,Kr,iu,i2,$O=(i2=class extends qh{constructor(e={}){super();it(this,Ui);it(this,Kr);it(this,iu);this.config=e,Fe(this,Ui,new Set),Fe(this,Kr,new Map),Fe(this,iu,0)}build(e,n,r){const s=new HO({mutationCache:this,mutationId:++Iu(this,iu)._,options:e.defaultMutationOptions(n),state:r});return this.add(s),s}add(e){J(this,Ui).add(e);const n=qu(e);if(typeof n=="string"){const r=J(this,Kr).get(n);r?r.push(e):J(this,Kr).set(n,[e])}this.notify({type:"added",mutation:e})}remove(e){if(J(this,Ui).delete(e)){const n=qu(e);if(typeof n=="string"){const r=J(this,Kr).get(n);if(r)if(r.length>1){const s=r.indexOf(e);s!==-1&&r.splice(s,1)}else r[0]===e&&J(this,Kr).delete(n)}}this.notify({type:"removed",mutation:e})}canRun(e){const n=qu(e);if(typeof n=="string"){const r=J(this,Kr).get(n),s=r==null?void 0:r.find(o=>o.state.status==="pending");return!s||s===e}else return!0}runNext(e){var r;const n=qu(e);if(typeof n=="string"){const s=(r=J(this,Kr).get(n))==null?void 0:r.find(o=>o!==e&&o.state.isPaused);return(s==null?void 0:s.continue())??Promise.resolve()}else return Promise.resolve()}clear(){Pn.batch(()=>{J(this,Ui).forEach(e=>{this.notify({type:"removed",mutation:e})}),J(this,Ui).clear(),J(this,Kr).clear()})}getAll(){return Array.from(J(this,Ui))}find(e){const n={exact:!0,...e};return this.getAll().find(r=>xw(n,r))}findAll(e={}){return this.getAll().filter(n=>xw(e,n))}notify(e){Pn.batch(()=>{this.listeners.forEach(n=>{n(e)})})}resumePausedMutations(){const e=this.getAll().filter(n=>n.state.isPaused);return Pn.batch(()=>Promise.all(e.map(n=>n.continue().catch(Gr))))}},Ui=new WeakMap,Kr=new WeakMap,iu=new WeakMap,i2);function qu(t){var e;return(e=t.options.scope)==null?void 0:e.id}function bw(t){return{onFetch:(e,n)=>{var y,x,E,b,I;const r=e.options,s=(E=(x=(y=e.fetchOptions)==null?void 0:y.meta)==null?void 0:x.fetchMore)==null?void 0:E.direction,o=((b=e.state.data)==null?void 0:b.pages)||[],c=((I=e.state.data)==null?void 0:I.pageParams)||[];let h={pages:[],pageParams:[]},g=0;const p=async()=>{let S=!1;const R=T=>{Object.defineProperty(T,"signal",{enumerable:!0,get:()=>(e.signal.aborted?S=!0:e.signal.addEventListener("abort",()=>{S=!0}),e.signal)})},A=UC(e.options,e.fetchOptions),_=async(T,D,F)=>{if(S)return Promise.reject();if(D==null&&T.pages.length)return Promise.resolve(T);const B=(()=>{const he={client:e.client,queryKey:e.queryKey,pageParam:D,direction:F?"backward":"forward",meta:e.options.meta};return R(he),he})(),W=await A(B),{maxPages:H}=e.options,te=F?kO:OO;return{pages:te(T.pages,W,H),pageParams:te(T.pageParams,D,H)}};if(s&&o.length){const T=s==="backward",D=T?GO:Cw,F={pages:o,pageParams:c},j=D(r,F);h=await _(F,j,T)}else{const T=t??o.length;do{const D=g===0?c[0]??r.initialPageParam:Cw(r,h);if(g>0&&D==null)break;h=await _(h,D),g++}while(g<T)}return h};e.options.persister?e.fetchFn=()=>{var S,R;return(R=(S=e.options).persister)==null?void 0:R.call(S,p,{client:e.client,queryKey:e.queryKey,meta:e.options.meta,signal:e.signal},n)}:e.fetchFn=p}}}function Cw(t,{pages:e,pageParams:n}){const r=e.length-1;return e.length>0?t.getNextPageParam(e[r],e,n[r],n):void 0}function GO(t,{pages:e,pageParams:n}){var r;return e.length>0?(r=t.getPreviousPageParam)==null?void 0:r.call(t,e[0],e,n[0],n):void 0}var jt,Ss,As,Ka,qa,_s,Za,Qa,s2,YO=(s2=class{constructor(t={}){it(this,jt);it(this,Ss);it(this,As);it(this,Ka);it(this,qa);it(this,_s);it(this,Za);it(this,Qa);Fe(this,jt,t.queryCache||new zO),Fe(this,Ss,t.mutationCache||new $O),Fe(this,As,t.defaultOptions||{}),Fe(this,Ka,new Map),Fe(this,qa,new Map),Fe(this,_s,0)}mount(){Iu(this,_s)._++,J(this,_s)===1&&(Fe(this,Za,VC.subscribe(async t=>{t&&(await this.resumePausedMutations(),J(this,jt).onFocus())})),Fe(this,Qa,oh.subscribe(async t=>{t&&(await this.resumePausedMutations(),J(this,jt).onOnline())})))}unmount(){var t,e;Iu(this,_s)._--,J(this,_s)===0&&((t=J(this,Za))==null||t.call(this),Fe(this,Za,void 0),(e=J(this,Qa))==null||e.call(this),Fe(this,Qa,void 0))}isFetching(t){return J(this,jt).findAll({...t,fetchStatus:"fetching"}).length}isMutating(t){return J(this,Ss).findAll({...t,status:"pending"}).length}getQueryData(t){var n;const e=this.defaultQueryOptions({queryKey:t});return(n=J(this,jt).get(e.queryHash))==null?void 0:n.state.data}ensureQueryData(t){const e=this.defaultQueryOptions(t),n=J(this,jt).build(this,e),r=n.state.data;return r===void 0?this.fetchQuery(t):(t.revalidateIfStale&&n.isStaleByTime(L1(e.staleTime,n))&&this.prefetchQuery(e),Promise.resolve(r))}getQueriesData(t){return J(this,jt).findAll(t).map(({queryKey:e,state:n})=>{const r=n.data;return[e,r]})}setQueryData(t,e,n){const r=this.defaultQueryOptions({queryKey:t}),s=J(this,jt).get(r.queryHash),o=s==null?void 0:s.state.data,c=AO(e,o);if(c!==void 0)return J(this,jt).build(this,r).setData(c,{...n,manual:!0})}setQueriesData(t,e,n){return Pn.batch(()=>J(this,jt).findAll(t).map(({queryKey:r})=>[r,this.setQueryData(r,e,n)]))}getQueryState(t){var n;const e=this.defaultQueryOptions({queryKey:t});return(n=J(this,jt).get(e.queryHash))==null?void 0:n.state}removeQueries(t){const e=J(this,jt);Pn.batch(()=>{e.findAll(t).forEach(n=>{e.remove(n)})})}resetQueries(t,e){const n=J(this,jt);return Pn.batch(()=>(n.findAll(t).forEach(r=>{r.reset()}),this.refetchQueries({type:"active",...t},e)))}cancelQueries(t,e={}){const n={revert:!0,...e},r=Pn.batch(()=>J(this,jt).findAll(t).map(s=>s.cancel(n)));return Promise.all(r).then(Gr).catch(Gr)}invalidateQueries(t,e={}){return Pn.batch(()=>(J(this,jt).findAll(t).forEach(n=>{n.invalidate()}),(t==null?void 0:t.refetchType)==="none"?Promise.resolve():this.refetchQueries({...t,type:(t==null?void 0:t.refetchType)??(t==null?void 0:t.type)??"active"},e)))}refetchQueries(t,e={}){const n={...e,cancelRefetch:e.cancelRefetch??!0},r=Pn.batch(()=>J(this,jt).findAll(t).filter(s=>!s.isDisabled()&&!s.isStatic()).map(s=>{let o=s.fetch(void 0,n);return n.throwOnError||(o=o.catch(Gr)),s.state.fetchStatus==="paused"?Promise.resolve():o}));return Promise.all(r).then(Gr)}fetchQuery(t){const e=this.defaultQueryOptions(t);e.retry===void 0&&(e.retry=!1);const n=J(this,jt).build(this,e);return n.isStaleByTime(L1(e.staleTime,n))?n.fetch(e):Promise.resolve(n.state.data)}prefetchQuery(t){return this.fetchQuery(t).then(Gr).catch(Gr)}fetchInfiniteQuery(t){return t.behavior=bw(t.pages),this.fetchQuery(t)}prefetchInfiniteQuery(t){return this.fetchInfiniteQuery(t).then(Gr).catch(Gr)}ensureInfiniteQueryData(t){return t.behavior=bw(t.pages),this.ensureQueryData(t)}resumePausedMutations(){return oh.isOnline()?J(this,Ss).resumePausedMutations():Promise.resolve()}getQueryCache(){return J(this,jt)}getMutationCache(){return J(this,Ss)}getDefaultOptions(){return J(this,As)}setDefaultOptions(t){Fe(this,As,t)}setQueryDefaults(t,e){J(this,Ka).set(Fc(t),{queryKey:t,defaultOptions:e})}getQueryDefaults(t){const e=[...J(this,Ka).values()],n={};return e.forEach(r=>{jc(t,r.queryKey)&&Object.assign(n,r.defaultOptions)}),n}setMutationDefaults(t,e){J(this,qa).set(Fc(t),{mutationKey:t,defaultOptions:e})}getMutationDefaults(t){const e=[...J(this,qa).values()],n={};return e.forEach(r=>{jc(t,r.mutationKey)&&Object.assign(n,r.defaultOptions)}),n}defaultQueryOptions(t){if(t._defaulted)return t;const e={...J(this,As).queries,...this.getQueryDefaults(t.queryKey),...t,_defaulted:!0};return e.queryHash||(e.queryHash=Fg(e.queryKey,e)),e.refetchOnReconnect===void 0&&(e.refetchOnReconnect=e.networkMode!=="always"),e.throwOnError===void 0&&(e.throwOnError=!!e.suspense),!e.networkMode&&e.persister&&(e.networkMode="offlineFirst"),e.queryFn===jg&&(e.enabled=!1),e}defaultMutationOptions(t){return t!=null&&t._defaulted?t:{...J(this,As).mutations,...(t==null?void 0:t.mutationKey)&&this.getMutationDefaults(t.mutationKey),...t,_defaulted:!0}}clear(){J(this,jt).clear(),J(this,Ss).clear()}},jt=new WeakMap,Ss=new WeakMap,As=new WeakMap,Ka=new WeakMap,qa=new WeakMap,_s=new WeakMap,Za=new WeakMap,Qa=new WeakMap,s2),XO=M.createContext(void 0),KO=({client:t,children:e})=>(M.useEffect(()=>(t.mount(),()=>{t.unmount()}),[t]),U.jsx(XO.Provider,{value:t,children:e}));/**
 * @remix-run/router v1.23.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Uc(){return Uc=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Uc.apply(this,arguments)}var Rs;(function(t){t.Pop="POP",t.Push="PUSH",t.Replace="REPLACE"})(Rs||(Rs={}));const Sw="popstate";function qO(t){t===void 0&&(t={});function e(r,s){let{pathname:o,search:c,hash:h}=r.location;return F1("",{pathname:o,search:c,hash:h},s.state&&s.state.usr||null,s.state&&s.state.key||"default")}function n(r,s){return typeof s=="string"?s:YC(s)}return QO(e,n,null,t)}function on(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function GC(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function ZO(){return Math.random().toString(36).substr(2,8)}function Aw(t,e){return{usr:t.state,key:t.key,idx:e}}function F1(t,e,n,r){return n===void 0&&(n=null),Uc({pathname:typeof t=="string"?t:t.pathname,search:"",hash:""},typeof e=="string"?vl(e):e,{state:n,key:e&&e.key||r||ZO()})}function YC(t){let{pathname:e="/",search:n="",hash:r=""}=t;return n&&n!=="?"&&(e+=n.charAt(0)==="?"?n:"?"+n),r&&r!=="#"&&(e+=r.charAt(0)==="#"?r:"#"+r),e}function vl(t){let e={};if(t){let n=t.indexOf("#");n>=0&&(e.hash=t.substr(n),t=t.substr(0,n));let r=t.indexOf("?");r>=0&&(e.search=t.substr(r),t=t.substr(0,r)),t&&(e.pathname=t)}return e}function QO(t,e,n,r){r===void 0&&(r={});let{window:s=document.defaultView,v5Compat:o=!1}=r,c=s.history,h=Rs.Pop,g=null,p=y();p==null&&(p=0,c.replaceState(Uc({},c.state,{idx:p}),""));function y(){return(c.state||{idx:null}).idx}function x(){h=Rs.Pop;let R=y(),A=R==null?null:R-p;p=R,g&&g({action:h,location:S.location,delta:A})}function E(R,A){h=Rs.Push;let _=F1(S.location,R,A);p=y()+1;let T=Aw(_,p),D=S.createHref(_);try{c.pushState(T,"",D)}catch(F){if(F instanceof DOMException&&F.name==="DataCloneError")throw F;s.location.assign(D)}o&&g&&g({action:h,location:S.location,delta:1})}function b(R,A){h=Rs.Replace;let _=F1(S.location,R,A);p=y();let T=Aw(_,p),D=S.createHref(_);c.replaceState(T,"",D),o&&g&&g({action:h,location:S.location,delta:0})}function I(R){let A=s.location.origin!=="null"?s.location.origin:s.location.href,_=typeof R=="string"?R:YC(R);return _=_.replace(/ $/,"%20"),on(A,"No window.location.(origin|href) available to create URL for href: "+_),new URL(_,A)}let S={get action(){return h},get location(){return t(s,c)},listen(R){if(g)throw new Error("A history only accepts one active listener");return s.addEventListener(Sw,x),g=R,()=>{s.removeEventListener(Sw,x),g=null}},createHref(R){return e(s,R)},createURL:I,encodeLocation(R){let A=I(R);return{pathname:A.pathname,search:A.search,hash:A.hash}},push:E,replace:b,go(R){return c.go(R)}};return S}var _w;(function(t){t.data="data",t.deferred="deferred",t.redirect="redirect",t.error="error"})(_w||(_w={}));function JO(t,e,n){return n===void 0&&(n="/"),e8(t,e,n,!1)}function e8(t,e,n,r){let s=typeof e=="string"?vl(e):e,o=qC(s.pathname||"/",n);if(o==null)return null;let c=XC(t);t8(c);let h=null;for(let g=0;h==null&&g<c.length;++g){let p=h8(o);h=u8(c[g],p,r)}return h}function XC(t,e,n,r){e===void 0&&(e=[]),n===void 0&&(n=[]),r===void 0&&(r="");let s=(o,c,h)=>{let g={relativePath:h===void 0?o.path||"":h,caseSensitive:o.caseSensitive===!0,childrenIndex:c,route:o};g.relativePath.startsWith("/")&&(on(g.relativePath.startsWith(r),'Absolute route path "'+g.relativePath+'" nested under path '+('"'+r+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),g.relativePath=g.relativePath.slice(r.length));let p=Po([r,g.relativePath]),y=n.concat(g);o.children&&o.children.length>0&&(on(o.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+p+'".')),XC(o.children,e,y,p)),!(o.path==null&&!o.index)&&e.push({path:p,score:l8(p,o.index),routesMeta:y})};return t.forEach((o,c)=>{var h;if(o.path===""||!((h=o.path)!=null&&h.includes("?")))s(o,c);else for(let g of KC(o.path))s(o,c,g)}),e}function KC(t){let e=t.split("/");if(e.length===0)return[];let[n,...r]=e,s=n.endsWith("?"),o=n.replace(/\?$/,"");if(r.length===0)return s?[o,""]:[o];let c=KC(r.join("/")),h=[];return h.push(...c.map(g=>g===""?o:[o,g].join("/"))),s&&h.push(...c),h.map(g=>t.startsWith("/")&&g===""?"/":g)}function t8(t){t.sort((e,n)=>e.score!==n.score?n.score-e.score:c8(e.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}const n8=/^:[\w-]+$/,r8=3,i8=2,s8=1,o8=10,a8=-2,Tw=t=>t==="*";function l8(t,e){let n=t.split("/"),r=n.length;return n.some(Tw)&&(r+=a8),e&&(r+=i8),n.filter(s=>!Tw(s)).reduce((s,o)=>s+(n8.test(o)?r8:o===""?s8:o8),r)}function c8(t,e){return t.length===e.length&&t.slice(0,-1).every((r,s)=>r===e[s])?t[t.length-1]-e[e.length-1]:0}function u8(t,e,n){let{routesMeta:r}=t,s={},o="/",c=[];for(let h=0;h<r.length;++h){let g=r[h],p=h===r.length-1,y=o==="/"?e:e.slice(o.length)||"/",x=Iw({path:g.relativePath,caseSensitive:g.caseSensitive,end:p},y),E=g.route;if(!x&&p&&n&&!r[r.length-1].route.index&&(x=Iw({path:g.relativePath,caseSensitive:g.caseSensitive,end:!1},y)),!x)return null;Object.assign(s,x.params),c.push({params:s,pathname:Po([o,x.pathname]),pathnameBase:w8(Po([o,x.pathnameBase])),route:E}),x.pathnameBase!=="/"&&(o=Po([o,x.pathnameBase]))}return c}function Iw(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[n,r]=d8(t.path,t.caseSensitive,t.end),s=e.match(n);if(!s)return null;let o=s[0],c=o.replace(/(.)\/+$/,"$1"),h=s.slice(1);return{params:r.reduce((p,y,x)=>{let{paramName:E,isOptional:b}=y;if(E==="*"){let S=h[x]||"";c=o.slice(0,o.length-S.length).replace(/(.)\/+$/,"$1")}const I=h[x];return b&&!I?p[E]=void 0:p[E]=(I||"").replace(/%2F/g,"/"),p},{}),pathname:o,pathnameBase:c,pattern:t}}function d8(t,e,n){e===void 0&&(e=!1),n===void 0&&(n=!0),GC(t==="*"||!t.endsWith("*")||t.endsWith("/*"),'Route path "'+t+'" will be treated as if it were '+('"'+t.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+t.replace(/\*$/,"/*")+'".'));let r=[],s="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(c,h,g)=>(r.push({paramName:h,isOptional:g!=null}),g?"/?([^\\/]+)?":"/([^\\/]+)"));return t.endsWith("*")?(r.push({paramName:"*"}),s+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?s+="\\/*$":t!==""&&t!=="/"&&(s+="(?:(?=\\/|$))"),[new RegExp(s,e?void 0:"i"),r]}function h8(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return GC(!1,'The URL path "'+t+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),t}}function qC(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,r=t.charAt(n);return r&&r!=="/"?null:t.slice(n)||"/"}function f8(t,e){e===void 0&&(e="/");let{pathname:n,search:r="",hash:s=""}=typeof t=="string"?vl(t):t;return{pathname:n?n.startsWith("/")?n:p8(n,e):e,search:x8(r),hash:v8(s)}}function p8(t,e){let n=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(s=>{s===".."?n.length>1&&n.pop():s!=="."&&n.push(s)}),n.length>1?n.join("/"):"/"}function l0(t,e,n,r){return"Cannot include a '"+t+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(r)+"].  Please separate it out to the ")+("`to."+n+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function g8(t){return t.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function m8(t,e){let n=g8(t);return e?n.map((r,s)=>s===n.length-1?r.pathname:r.pathnameBase):n.map(r=>r.pathnameBase)}function y8(t,e,n,r){r===void 0&&(r=!1);let s;typeof t=="string"?s=vl(t):(s=Uc({},t),on(!s.pathname||!s.pathname.includes("?"),l0("?","pathname","search",s)),on(!s.pathname||!s.pathname.includes("#"),l0("#","pathname","hash",s)),on(!s.search||!s.search.includes("#"),l0("#","search","hash",s)));let o=t===""||s.pathname==="",c=o?"/":s.pathname,h;if(c==null)h=n;else{let x=e.length-1;if(!r&&c.startsWith("..")){let E=c.split("/");for(;E[0]==="..";)E.shift(),x-=1;s.pathname=E.join("/")}h=x>=0?e[x]:"/"}let g=f8(s,h),p=c&&c!=="/"&&c.endsWith("/"),y=(o||c===".")&&n.endsWith("/");return!g.pathname.endsWith("/")&&(p||y)&&(g.pathname+="/"),g}const Po=t=>t.join("/").replace(/\/\/+/g,"/"),w8=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),x8=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,v8=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function E8(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}const ZC=["post","put","patch","delete"];new Set(ZC);const b8=["get",...ZC];new Set(b8);/**
 * React Router v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Vc(){return Vc=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Vc.apply(this,arguments)}const Ug=M.createContext(null),C8=M.createContext(null),Qh=M.createContext(null),Jh=M.createContext(null),El=M.createContext({outlet:null,matches:[],isDataRoute:!1}),QC=M.createContext(null);function ef(){return M.useContext(Jh)!=null}function Vg(){return ef()||on(!1),M.useContext(Jh).location}function JC(t){M.useContext(Qh).static||M.useLayoutEffect(t)}function eS(){let{isDataRoute:t}=M.useContext(El);return t?L8():S8()}function S8(){ef()||on(!1);let t=M.useContext(Ug),{basename:e,future:n,navigator:r}=M.useContext(Qh),{matches:s}=M.useContext(El),{pathname:o}=Vg(),c=JSON.stringify(m8(s,n.v7_relativeSplatPath)),h=M.useRef(!1);return JC(()=>{h.current=!0}),M.useCallback(function(p,y){if(y===void 0&&(y={}),!h.current)return;if(typeof p=="number"){r.go(p);return}let x=y8(p,JSON.parse(c),o,y.relative==="path");t==null&&e!=="/"&&(x.pathname=x.pathname==="/"?e:Po([e,x.pathname])),(y.replace?r.replace:r.push)(x,y.state,y)},[e,r,c,o,t])}function A8(t,e){return _8(t,e)}function _8(t,e,n,r){ef()||on(!1);let{navigator:s}=M.useContext(Qh),{matches:o}=M.useContext(El),c=o[o.length-1],h=c?c.params:{};c&&c.pathname;let g=c?c.pathnameBase:"/";c&&c.route;let p=Vg(),y;if(e){var x;let R=typeof e=="string"?vl(e):e;g==="/"||(x=R.pathname)!=null&&x.startsWith(g)||on(!1),y=R}else y=p;let E=y.pathname||"/",b=E;if(g!=="/"){let R=g.replace(/^\//,"").split("/");b="/"+E.replace(/^\//,"").split("/").slice(R.length).join("/")}let I=JO(t,{pathname:b}),S=O8(I&&I.map(R=>Object.assign({},R,{params:Object.assign({},h,R.params),pathname:Po([g,s.encodeLocation?s.encodeLocation(R.pathname).pathname:R.pathname]),pathnameBase:R.pathnameBase==="/"?g:Po([g,s.encodeLocation?s.encodeLocation(R.pathnameBase).pathname:R.pathnameBase])})),o,n,r);return e&&S?M.createElement(Jh.Provider,{value:{location:Vc({pathname:"/",search:"",hash:"",state:null,key:"default"},y),navigationType:Rs.Pop}},S):S}function T8(){let t=P8(),e=E8(t)?t.status+" "+t.statusText:t instanceof Error?t.message:JSON.stringify(t),n=t instanceof Error?t.stack:null,s={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return M.createElement(M.Fragment,null,M.createElement("h2",null,"Unexpected Application Error!"),M.createElement("h3",{style:{fontStyle:"italic"}},e),n?M.createElement("pre",{style:s},n):null,null)}const I8=M.createElement(T8,null);class R8 extends M.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,n){return n.location!==e.location||n.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:n.error,location:n.location,revalidation:e.revalidation||n.revalidation}}componentDidCatch(e,n){console.error("React Router caught the following error during render",e,n)}render(){return this.state.error!==void 0?M.createElement(El.Provider,{value:this.props.routeContext},M.createElement(QC.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function N8(t){let{routeContext:e,match:n,children:r}=t,s=M.useContext(Ug);return s&&s.static&&s.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(s.staticContext._deepestRenderedBoundaryId=n.route.id),M.createElement(El.Provider,{value:e},r)}function O8(t,e,n,r){var s;if(e===void 0&&(e=[]),n===void 0&&(n=null),r===void 0&&(r=null),t==null){var o;if(!n)return null;if(n.errors)t=n.matches;else if((o=r)!=null&&o.v7_partialHydration&&e.length===0&&!n.initialized&&n.matches.length>0)t=n.matches;else return null}let c=t,h=(s=n)==null?void 0:s.errors;if(h!=null){let y=c.findIndex(x=>x.route.id&&(h==null?void 0:h[x.route.id])!==void 0);y>=0||on(!1),c=c.slice(0,Math.min(c.length,y+1))}let g=!1,p=-1;if(n&&r&&r.v7_partialHydration)for(let y=0;y<c.length;y++){let x=c[y];if((x.route.HydrateFallback||x.route.hydrateFallbackElement)&&(p=y),x.route.id){let{loaderData:E,errors:b}=n,I=x.route.loader&&E[x.route.id]===void 0&&(!b||b[x.route.id]===void 0);if(x.route.lazy||I){g=!0,p>=0?c=c.slice(0,p+1):c=[c[0]];break}}}return c.reduceRight((y,x,E)=>{let b,I=!1,S=null,R=null;n&&(b=h&&x.route.id?h[x.route.id]:void 0,S=x.route.errorElement||I8,g&&(p<0&&E===0?(I=!0,R=null):p===E&&(I=!0,R=x.route.hydrateFallbackElement||null)));let A=e.concat(c.slice(0,E+1)),_=()=>{let T;return b?T=S:I?T=R:x.route.Component?T=M.createElement(x.route.Component,null):x.route.element?T=x.route.element:T=y,M.createElement(N8,{match:x,routeContext:{outlet:y,matches:A,isDataRoute:n!=null},children:T})};return n&&(x.route.ErrorBoundary||x.route.errorElement||E===0)?M.createElement(R8,{location:n.location,revalidation:n.revalidation,component:S,error:b,children:_(),routeContext:{outlet:null,matches:A,isDataRoute:!0}}):_()},null)}var tS=function(t){return t.UseBlocker="useBlocker",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t}(tS||{}),ah=function(t){return t.UseBlocker="useBlocker",t.UseLoaderData="useLoaderData",t.UseActionData="useActionData",t.UseRouteError="useRouteError",t.UseNavigation="useNavigation",t.UseRouteLoaderData="useRouteLoaderData",t.UseMatches="useMatches",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t.UseRouteId="useRouteId",t}(ah||{});function k8(t){let e=M.useContext(Ug);return e||on(!1),e}function M8(t){let e=M.useContext(C8);return e||on(!1),e}function D8(t){let e=M.useContext(El);return e||on(!1),e}function nS(t){let e=D8(),n=e.matches[e.matches.length-1];return n.route.id||on(!1),n.route.id}function P8(){var t;let e=M.useContext(QC),n=M8(ah.UseRouteError),r=nS(ah.UseRouteError);return e!==void 0?e:(t=n.errors)==null?void 0:t[r]}function L8(){let{router:t}=k8(tS.UseNavigateStable),e=nS(ah.UseNavigateStable),n=M.useRef(!1);return JC(()=>{n.current=!0}),M.useCallback(function(s,o){o===void 0&&(o={}),n.current&&(typeof s=="number"?t.navigate(s):t.navigate(s,Vc({fromRouteId:e},o)))},[t,e])}function B8(t,e){t==null||t.v7_startTransition,t==null||t.v7_relativeSplatPath}function Cd(t){on(!1)}function F8(t){let{basename:e="/",children:n=null,location:r,navigationType:s=Rs.Pop,navigator:o,static:c=!1,future:h}=t;ef()&&on(!1);let g=e.replace(/^\/*/,"/"),p=M.useMemo(()=>({basename:g,navigator:o,static:c,future:Vc({v7_relativeSplatPath:!1},h)}),[g,h,o,c]);typeof r=="string"&&(r=vl(r));let{pathname:y="/",search:x="",hash:E="",state:b=null,key:I="default"}=r,S=M.useMemo(()=>{let R=qC(y,g);return R==null?null:{location:{pathname:R,search:x,hash:E,state:b,key:I},navigationType:s}},[g,y,x,E,b,I,s]);return S==null?null:M.createElement(Qh.Provider,{value:p},M.createElement(Jh.Provider,{children:n,value:S}))}function j8(t){let{children:e,location:n}=t;return A8(j1(e),n)}new Promise(()=>{});function j1(t,e){e===void 0&&(e=[]);let n=[];return M.Children.forEach(t,(r,s)=>{if(!M.isValidElement(r))return;let o=[...e,s];if(r.type===M.Fragment){n.push.apply(n,j1(r.props.children,o));return}r.type!==Cd&&on(!1),!r.props.index||!r.props.children||on(!1);let c={id:r.props.id||o.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(c.children=j1(r.props.children,o)),n.push(c)}),n}/**
 * React Router DOM v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */const U8="6";try{window.__reactRouterVersion=U8}catch{}const V8="startTransition",Rw=y2[V8];function z8(t){let{basename:e,children:n,future:r,window:s}=t,o=M.useRef();o.current==null&&(o.current=qO({window:s,v5Compat:!0}));let c=o.current,[h,g]=M.useState({action:c.action,location:c.location}),{v7_startTransition:p}=r||{},y=M.useCallback(x=>{p&&Rw?Rw(()=>g(x)):g(x)},[g,p]);return M.useLayoutEffect(()=>c.listen(y),[c,y]),M.useEffect(()=>B8(r),[r]),M.createElement(F8,{basename:e,children:n,location:h.location,navigationType:h.action,navigator:c,future:r})}var Nw;(function(t){t.UseScrollRestoration="useScrollRestoration",t.UseSubmit="useSubmit",t.UseSubmitFetcher="useSubmitFetcher",t.UseFetcher="useFetcher",t.useViewTransitionState="useViewTransitionState"})(Nw||(Nw={}));var Ow;(function(t){t.UseFetcher="useFetcher",t.UseFetchers="useFetchers",t.UseScrollRestoration="useScrollRestoration"})(Ow||(Ow={}));function tf(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(t);s<r.length;s++)e.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(t,r[s])&&(n[r[s]]=t[r[s]]);return n}function H8(t,e,n,r){function s(o){return o instanceof n?o:new n(function(c){c(o)})}return new(n||(n=Promise))(function(o,c){function h(y){try{p(r.next(y))}catch(x){c(x)}}function g(y){try{p(r.throw(y))}catch(x){c(x)}}function p(y){y.done?o(y.value):s(y.value).then(h,g)}p((r=r.apply(t,e||[])).next())})}const W8=t=>t?(...e)=>t(...e):(...e)=>fetch(...e);class zg extends Error{constructor(e,n="FunctionsError",r){super(e),this.name=n,this.context=r}}class $8 extends zg{constructor(e){super("Failed to send a request to the Edge Function","FunctionsFetchError",e)}}class kw extends zg{constructor(e){super("Relay Error invoking the Edge Function","FunctionsRelayError",e)}}class Mw extends zg{constructor(e){super("Edge Function returned a non-2xx status code","FunctionsHttpError",e)}}var U1;(function(t){t.Any="any",t.ApNortheast1="ap-northeast-1",t.ApNortheast2="ap-northeast-2",t.ApSouth1="ap-south-1",t.ApSoutheast1="ap-southeast-1",t.ApSoutheast2="ap-southeast-2",t.CaCentral1="ca-central-1",t.EuCentral1="eu-central-1",t.EuWest1="eu-west-1",t.EuWest2="eu-west-2",t.EuWest3="eu-west-3",t.SaEast1="sa-east-1",t.UsEast1="us-east-1",t.UsWest1="us-west-1",t.UsWest2="us-west-2"})(U1||(U1={}));class G8{constructor(e,{headers:n={},customFetch:r,region:s=U1.Any}={}){this.url=e,this.headers=n,this.region=s,this.fetch=W8(r)}setAuth(e){this.headers.Authorization=`Bearer ${e}`}invoke(e){return H8(this,arguments,void 0,function*(n,r={}){var s;let o,c;try{const{headers:h,method:g,body:p,signal:y,timeout:x}=r;let E={},{region:b}=r;b||(b=this.region);const I=new URL(`${this.url}/${n}`);b&&b!=="any"&&(E["x-region"]=b,I.searchParams.set("forceFunctionRegion",b));let S;p&&(h&&!Object.prototype.hasOwnProperty.call(h,"Content-Type")||!h)?typeof Blob<"u"&&p instanceof Blob||p instanceof ArrayBuffer?(E["Content-Type"]="application/octet-stream",S=p):typeof p=="string"?(E["Content-Type"]="text/plain",S=p):typeof FormData<"u"&&p instanceof FormData?S=p:(E["Content-Type"]="application/json",S=JSON.stringify(p)):p&&typeof p!="string"&&!(typeof Blob<"u"&&p instanceof Blob)&&!(p instanceof ArrayBuffer)&&!(typeof FormData<"u"&&p instanceof FormData)?S=JSON.stringify(p):S=p;let R=y;x&&(c=new AbortController,o=setTimeout(()=>c.abort(),x),y?(R=c.signal,y.addEventListener("abort",()=>c.abort())):R=c.signal);const A=yield this.fetch(I.toString(),{method:g||"POST",headers:Object.assign(Object.assign(Object.assign({},E),this.headers),h),body:S,signal:R}).catch(F=>{throw new $8(F)}),_=A.headers.get("x-relay-error");if(_&&_==="true")throw new kw(A);if(!A.ok)throw new Mw(A);let T=((s=A.headers.get("Content-Type"))!==null&&s!==void 0?s:"text/plain").split(";")[0].trim(),D;return T==="application/json"?D=yield A.json():T==="application/octet-stream"||T==="application/pdf"?D=yield A.blob():T==="text/event-stream"?D=A:T==="multipart/form-data"?D=yield A.formData():D=yield A.text(),{data:D,error:null,response:A}}catch(h){return{data:null,error:h,response:h instanceof Mw||h instanceof kw?h.context:void 0}}finally{o&&clearTimeout(o)}})}}var Y8=class extends Error{constructor(t){super(t.message),this.name="PostgrestError",this.details=t.details,this.hint=t.hint,this.code=t.code}},X8=class{constructor(t){var e,n,r;this.shouldThrowOnError=!1,this.method=t.method,this.url=t.url,this.headers=new Headers(t.headers),this.schema=t.schema,this.body=t.body,this.shouldThrowOnError=(e=t.shouldThrowOnError)!==null&&e!==void 0?e:!1,this.signal=t.signal,this.isMaybeSingle=(n=t.isMaybeSingle)!==null&&n!==void 0?n:!1,this.urlLengthLimit=(r=t.urlLengthLimit)!==null&&r!==void 0?r:8e3,t.fetch?this.fetch=t.fetch:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(t,e){return this.headers=new Headers(this.headers),this.headers.set(t,e),this}then(t,e){var n=this;this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers.set("Accept-Profile",this.schema):this.headers.set("Content-Profile",this.schema)),this.method!=="GET"&&this.method!=="HEAD"&&this.headers.set("Content-Type","application/json");const r=this.fetch;let s=r(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async o=>{let c=null,h=null,g=null,p=o.status,y=o.statusText;if(o.ok){var x,E;if(n.method!=="HEAD"){var b;const A=await o.text();A===""||(n.headers.get("Accept")==="text/csv"||n.headers.get("Accept")&&(!((b=n.headers.get("Accept"))===null||b===void 0)&&b.includes("application/vnd.pgrst.plan+text"))?h=A:h=JSON.parse(A))}const S=(x=n.headers.get("Prefer"))===null||x===void 0?void 0:x.match(/count=(exact|planned|estimated)/),R=(E=o.headers.get("content-range"))===null||E===void 0?void 0:E.split("/");S&&R&&R.length>1&&(g=parseInt(R[1])),n.isMaybeSingle&&n.method==="GET"&&Array.isArray(h)&&(h.length>1?(c={code:"PGRST116",details:`Results contain ${h.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},h=null,g=null,p=406,y="Not Acceptable"):h.length===1?h=h[0]:h=null)}else{var I;const S=await o.text();try{c=JSON.parse(S),Array.isArray(c)&&o.status===404&&(h=[],c=null,p=200,y="OK")}catch{o.status===404&&S===""?(p=204,y="No Content"):c={message:S}}if(c&&n.isMaybeSingle&&(!(c==null||(I=c.details)===null||I===void 0)&&I.includes("0 rows"))&&(c=null,p=200,y="OK"),c&&n.shouldThrowOnError)throw new Y8(c)}return{error:c,data:h,count:g,status:p,statusText:y}});return this.shouldThrowOnError||(s=s.catch(o=>{var c;let h="",g="",p="";const y=o==null?void 0:o.cause;if(y){var x,E,b,I;const A=(x=y==null?void 0:y.message)!==null&&x!==void 0?x:"",_=(E=y==null?void 0:y.code)!==null&&E!==void 0?E:"";h=`${(b=o==null?void 0:o.name)!==null&&b!==void 0?b:"FetchError"}: ${o==null?void 0:o.message}`,h+=`

Caused by: ${(I=y==null?void 0:y.name)!==null&&I!==void 0?I:"Error"}: ${A}`,_&&(h+=` (${_})`),y!=null&&y.stack&&(h+=`
${y.stack}`)}else{var S;h=(S=o==null?void 0:o.stack)!==null&&S!==void 0?S:""}const R=this.url.toString().length;return(o==null?void 0:o.name)==="AbortError"||(o==null?void 0:o.code)==="ABORT_ERR"?(p="",g="Request was aborted (timeout or manual cancellation)",R>this.urlLengthLimit&&(g+=`. Note: Your request URL is ${R} characters, which may exceed server limits. If selecting many fields, consider using views. If filtering with large arrays (e.g., .in('id', [many IDs])), consider using an RPC function to pass values server-side.`)):((y==null?void 0:y.name)==="HeadersOverflowError"||(y==null?void 0:y.code)==="UND_ERR_HEADERS_OVERFLOW")&&(p="",g="HTTP headers exceeded server limits (typically 16KB)",R>this.urlLengthLimit&&(g+=`. Your request URL is ${R} characters. If selecting many fields, consider using views. If filtering with large arrays (e.g., .in('id', [200+ IDs])), consider using an RPC function instead.`)),{error:{message:`${(c=o==null?void 0:o.name)!==null&&c!==void 0?c:"FetchError"}: ${o==null?void 0:o.message}`,details:h,hint:g,code:p},data:null,count:null,status:0,statusText:""}})),s.then(t,e)}returns(){return this}overrideTypes(){return this}},K8=class extends X8{select(t){let e=!1;const n=(t??"*").split("").map(r=>/\s/.test(r)&&!e?"":(r==='"'&&(e=!e),r)).join("");return this.url.searchParams.set("select",n),this.headers.append("Prefer","return=representation"),this}order(t,{ascending:e=!0,nullsFirst:n,foreignTable:r,referencedTable:s=r}={}){const o=s?`${s}.order`:"order",c=this.url.searchParams.get(o);return this.url.searchParams.set(o,`${c?`${c},`:""}${t}.${e?"asc":"desc"}${n===void 0?"":n?".nullsfirst":".nullslast"}`),this}limit(t,{foreignTable:e,referencedTable:n=e}={}){const r=typeof n>"u"?"limit":`${n}.limit`;return this.url.searchParams.set(r,`${t}`),this}range(t,e,{foreignTable:n,referencedTable:r=n}={}){const s=typeof r>"u"?"offset":`${r}.offset`,o=typeof r>"u"?"limit":`${r}.limit`;return this.url.searchParams.set(s,`${t}`),this.url.searchParams.set(o,`${e-t+1}`),this}abortSignal(t){return this.signal=t,this}single(){return this.headers.set("Accept","application/vnd.pgrst.object+json"),this}maybeSingle(){return this.method==="GET"?this.headers.set("Accept","application/json"):this.headers.set("Accept","application/vnd.pgrst.object+json"),this.isMaybeSingle=!0,this}csv(){return this.headers.set("Accept","text/csv"),this}geojson(){return this.headers.set("Accept","application/geo+json"),this}explain({analyze:t=!1,verbose:e=!1,settings:n=!1,buffers:r=!1,wal:s=!1,format:o="text"}={}){var c;const h=[t?"analyze":null,e?"verbose":null,n?"settings":null,r?"buffers":null,s?"wal":null].filter(Boolean).join("|"),g=(c=this.headers.get("Accept"))!==null&&c!==void 0?c:"application/json";return this.headers.set("Accept",`application/vnd.pgrst.plan+${o}; for="${g}"; options=${h};`),o==="json"?this:this}rollback(){return this.headers.append("Prefer","tx=rollback"),this}returns(){return this}maxAffected(t){return this.headers.append("Prefer","handling=strict"),this.headers.append("Prefer",`max-affected=${t}`),this}};const Dw=new RegExp("[,()]");var da=class extends K8{eq(t,e){return this.url.searchParams.append(t,`eq.${e}`),this}neq(t,e){return this.url.searchParams.append(t,`neq.${e}`),this}gt(t,e){return this.url.searchParams.append(t,`gt.${e}`),this}gte(t,e){return this.url.searchParams.append(t,`gte.${e}`),this}lt(t,e){return this.url.searchParams.append(t,`lt.${e}`),this}lte(t,e){return this.url.searchParams.append(t,`lte.${e}`),this}like(t,e){return this.url.searchParams.append(t,`like.${e}`),this}likeAllOf(t,e){return this.url.searchParams.append(t,`like(all).{${e.join(",")}}`),this}likeAnyOf(t,e){return this.url.searchParams.append(t,`like(any).{${e.join(",")}}`),this}ilike(t,e){return this.url.searchParams.append(t,`ilike.${e}`),this}ilikeAllOf(t,e){return this.url.searchParams.append(t,`ilike(all).{${e.join(",")}}`),this}ilikeAnyOf(t,e){return this.url.searchParams.append(t,`ilike(any).{${e.join(",")}}`),this}regexMatch(t,e){return this.url.searchParams.append(t,`match.${e}`),this}regexIMatch(t,e){return this.url.searchParams.append(t,`imatch.${e}`),this}is(t,e){return this.url.searchParams.append(t,`is.${e}`),this}isDistinct(t,e){return this.url.searchParams.append(t,`isdistinct.${e}`),this}in(t,e){const n=Array.from(new Set(e)).map(r=>typeof r=="string"&&Dw.test(r)?`"${r}"`:`${r}`).join(",");return this.url.searchParams.append(t,`in.(${n})`),this}notIn(t,e){const n=Array.from(new Set(e)).map(r=>typeof r=="string"&&Dw.test(r)?`"${r}"`:`${r}`).join(",");return this.url.searchParams.append(t,`not.in.(${n})`),this}contains(t,e){return typeof e=="string"?this.url.searchParams.append(t,`cs.${e}`):Array.isArray(e)?this.url.searchParams.append(t,`cs.{${e.join(",")}}`):this.url.searchParams.append(t,`cs.${JSON.stringify(e)}`),this}containedBy(t,e){return typeof e=="string"?this.url.searchParams.append(t,`cd.${e}`):Array.isArray(e)?this.url.searchParams.append(t,`cd.{${e.join(",")}}`):this.url.searchParams.append(t,`cd.${JSON.stringify(e)}`),this}rangeGt(t,e){return this.url.searchParams.append(t,`sr.${e}`),this}rangeGte(t,e){return this.url.searchParams.append(t,`nxl.${e}`),this}rangeLt(t,e){return this.url.searchParams.append(t,`sl.${e}`),this}rangeLte(t,e){return this.url.searchParams.append(t,`nxr.${e}`),this}rangeAdjacent(t,e){return this.url.searchParams.append(t,`adj.${e}`),this}overlaps(t,e){return typeof e=="string"?this.url.searchParams.append(t,`ov.${e}`):this.url.searchParams.append(t,`ov.{${e.join(",")}}`),this}textSearch(t,e,{config:n,type:r}={}){let s="";r==="plain"?s="pl":r==="phrase"?s="ph":r==="websearch"&&(s="w");const o=n===void 0?"":`(${n})`;return this.url.searchParams.append(t,`${s}fts${o}.${e}`),this}match(t){return Object.entries(t).forEach(([e,n])=>{this.url.searchParams.append(e,`eq.${n}`)}),this}not(t,e,n){return this.url.searchParams.append(t,`not.${e}.${n}`),this}or(t,{foreignTable:e,referencedTable:n=e}={}){const r=n?`${n}.or`:"or";return this.url.searchParams.append(r,`(${t})`),this}filter(t,e,n){return this.url.searchParams.append(t,`${e}.${n}`),this}},q8=class{constructor(t,{headers:e={},schema:n,fetch:r,urlLengthLimit:s=8e3}){this.url=t,this.headers=new Headers(e),this.schema=n,this.fetch=r,this.urlLengthLimit=s}cloneRequestState(){return{url:new URL(this.url.toString()),headers:new Headers(this.headers)}}select(t,e){const{head:n=!1,count:r}=e??{},s=n?"HEAD":"GET";let o=!1;const c=(t??"*").split("").map(p=>/\s/.test(p)&&!o?"":(p==='"'&&(o=!o),p)).join(""),{url:h,headers:g}=this.cloneRequestState();return h.searchParams.set("select",c),r&&g.append("Prefer",`count=${r}`),new da({method:s,url:h,headers:g,schema:this.schema,fetch:this.fetch,urlLengthLimit:this.urlLengthLimit})}insert(t,{count:e,defaultToNull:n=!0}={}){var r;const s="POST",{url:o,headers:c}=this.cloneRequestState();if(e&&c.append("Prefer",`count=${e}`),n||c.append("Prefer","missing=default"),Array.isArray(t)){const h=t.reduce((g,p)=>g.concat(Object.keys(p)),[]);if(h.length>0){const g=[...new Set(h)].map(p=>`"${p}"`);o.searchParams.set("columns",g.join(","))}}return new da({method:s,url:o,headers:c,schema:this.schema,body:t,fetch:(r=this.fetch)!==null&&r!==void 0?r:fetch,urlLengthLimit:this.urlLengthLimit})}upsert(t,{onConflict:e,ignoreDuplicates:n=!1,count:r,defaultToNull:s=!0}={}){var o;const c="POST",{url:h,headers:g}=this.cloneRequestState();if(g.append("Prefer",`resolution=${n?"ignore":"merge"}-duplicates`),e!==void 0&&h.searchParams.set("on_conflict",e),r&&g.append("Prefer",`count=${r}`),s||g.append("Prefer","missing=default"),Array.isArray(t)){const p=t.reduce((y,x)=>y.concat(Object.keys(x)),[]);if(p.length>0){const y=[...new Set(p)].map(x=>`"${x}"`);h.searchParams.set("columns",y.join(","))}}return new da({method:c,url:h,headers:g,schema:this.schema,body:t,fetch:(o=this.fetch)!==null&&o!==void 0?o:fetch,urlLengthLimit:this.urlLengthLimit})}update(t,{count:e}={}){var n;const r="PATCH",{url:s,headers:o}=this.cloneRequestState();return e&&o.append("Prefer",`count=${e}`),new da({method:r,url:s,headers:o,schema:this.schema,body:t,fetch:(n=this.fetch)!==null&&n!==void 0?n:fetch,urlLengthLimit:this.urlLengthLimit})}delete({count:t}={}){var e;const n="DELETE",{url:r,headers:s}=this.cloneRequestState();return t&&s.append("Prefer",`count=${t}`),new da({method:n,url:r,headers:s,schema:this.schema,fetch:(e=this.fetch)!==null&&e!==void 0?e:fetch,urlLengthLimit:this.urlLengthLimit})}};function zc(t){"@babel/helpers - typeof";return zc=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},zc(t)}function Z8(t,e){if(zc(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(zc(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Q8(t){var e=Z8(t,"string");return zc(e)=="symbol"?e:e+""}function J8(t,e,n){return(e=Q8(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Pw(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),n.push.apply(n,r)}return n}function Zu(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?Pw(Object(n),!0).forEach(function(r){J8(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Pw(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}var ek=class rS{constructor(e,{headers:n={},schema:r,fetch:s,timeout:o,urlLengthLimit:c=8e3}={}){this.url=e,this.headers=new Headers(n),this.schemaName=r,this.urlLengthLimit=c;const h=s??globalThis.fetch;o!==void 0&&o>0?this.fetch=(g,p)=>{const y=new AbortController,x=setTimeout(()=>y.abort(),o),E=p==null?void 0:p.signal;if(E){if(E.aborted)return clearTimeout(x),h(g,p);const b=()=>{clearTimeout(x),y.abort()};return E.addEventListener("abort",b,{once:!0}),h(g,Zu(Zu({},p),{},{signal:y.signal})).finally(()=>{clearTimeout(x),E.removeEventListener("abort",b)})}return h(g,Zu(Zu({},p),{},{signal:y.signal})).finally(()=>clearTimeout(x))}:this.fetch=h}from(e){if(!e||typeof e!="string"||e.trim()==="")throw new Error("Invalid relation name: relation must be a non-empty string.");return new q8(new URL(`${this.url}/${e}`),{headers:new Headers(this.headers),schema:this.schemaName,fetch:this.fetch,urlLengthLimit:this.urlLengthLimit})}schema(e){return new rS(this.url,{headers:this.headers,schema:e,fetch:this.fetch,urlLengthLimit:this.urlLengthLimit})}rpc(e,n={},{head:r=!1,get:s=!1,count:o}={}){var c;let h;const g=new URL(`${this.url}/rpc/${e}`);let p;const y=b=>b!==null&&typeof b=="object"&&(!Array.isArray(b)||b.some(y)),x=r&&Object.values(n).some(y);x?(h="POST",p=n):r||s?(h=r?"HEAD":"GET",Object.entries(n).filter(([b,I])=>I!==void 0).map(([b,I])=>[b,Array.isArray(I)?`{${I.join(",")}}`:`${I}`]).forEach(([b,I])=>{g.searchParams.append(b,I)})):(h="POST",p=n);const E=new Headers(this.headers);return x?E.set("Prefer",o?`count=${o},return=minimal`:"return=minimal"):o&&E.set("Prefer",`count=${o}`),new da({method:h,url:g,headers:E,schema:this.schemaName,body:p,fetch:(c=this.fetch)!==null&&c!==void 0?c:fetch,urlLengthLimit:this.urlLengthLimit})}};class tk{constructor(){}static detectEnvironment(){var e;if(typeof WebSocket<"u")return{type:"native",constructor:WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocket<"u")return{type:"native",constructor:globalThis.WebSocket};if(typeof global<"u"&&typeof global.WebSocket<"u")return{type:"native",constructor:global.WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocketPair<"u"&&typeof globalThis.WebSocket>"u")return{type:"cloudflare",error:"Cloudflare Workers detected. WebSocket clients are not supported in Cloudflare Workers.",workaround:"Use Cloudflare Workers WebSocket API for server-side WebSocket handling, or deploy to a different runtime."};if(typeof globalThis<"u"&&globalThis.EdgeRuntime||typeof navigator<"u"&&(!((e=navigator.userAgent)===null||e===void 0)&&e.includes("Vercel-Edge")))return{type:"unsupported",error:"Edge runtime detected (Vercel Edge/Netlify Edge). WebSockets are not supported in edge functions.",workaround:"Use serverless functions or a different deployment target for WebSocket functionality."};const n=globalThis.process;if(n){const r=n.versions;if(r&&r.node){const s=r.node,o=parseInt(s.replace(/^v/,"").split(".")[0]);return o>=22?typeof globalThis.WebSocket<"u"?{type:"native",constructor:globalThis.WebSocket}:{type:"unsupported",error:`Node.js ${o} detected but native WebSocket not found.`,workaround:"Provide a WebSocket implementation via the transport option."}:{type:"unsupported",error:`Node.js ${o} detected without native WebSocket support.`,workaround:`For Node.js < 22, install "ws" package and provide it via the transport option:
import ws from "ws"
new RealtimeClient(url, { transport: ws })`}}}return{type:"unsupported",error:"Unknown JavaScript runtime without WebSocket support.",workaround:"Ensure you're running in a supported environment (browser, Node.js, Deno) or provide a custom WebSocket implementation."}}static getWebSocketConstructor(){const e=this.detectEnvironment();if(e.constructor)return e.constructor;let n=e.error||"WebSocket not supported in this environment.";throw e.workaround&&(n+=`

Suggested solution: ${e.workaround}`),new Error(n)}static createWebSocket(e,n){const r=this.getWebSocketConstructor();return new r(e,n)}static isWebSocketSupported(){try{const e=this.detectEnvironment();return e.type==="native"||e.type==="ws"}catch{return!1}}}const nk="2.95.3",rk=`realtime-js/${nk}`,ik="1.0.0",iS="2.0.0",Lw=iS,V1=1e4,sk=1e3,ok=100;var ys;(function(t){t[t.connecting=0]="connecting",t[t.open=1]="open",t[t.closing=2]="closing",t[t.closed=3]="closed"})(ys||(ys={}));var en;(function(t){t.closed="closed",t.errored="errored",t.joined="joined",t.joining="joining",t.leaving="leaving"})(en||(en={}));var Zr;(function(t){t.close="phx_close",t.error="phx_error",t.join="phx_join",t.reply="phx_reply",t.leave="phx_leave",t.access_token="access_token"})(Zr||(Zr={}));var z1;(function(t){t.websocket="websocket"})(z1||(z1={}));var xo;(function(t){t.Connecting="connecting",t.Open="open",t.Closing="closing",t.Closed="closed"})(xo||(xo={}));class ak{constructor(e){this.HEADER_LENGTH=1,this.USER_BROADCAST_PUSH_META_LENGTH=6,this.KINDS={userBroadcastPush:3,userBroadcast:4},this.BINARY_ENCODING=0,this.JSON_ENCODING=1,this.BROADCAST_EVENT="broadcast",this.allowedMetadataKeys=[],this.allowedMetadataKeys=e??[]}encode(e,n){if(e.event===this.BROADCAST_EVENT&&!(e.payload instanceof ArrayBuffer)&&typeof e.payload.event=="string")return n(this._binaryEncodeUserBroadcastPush(e));let r=[e.join_ref,e.ref,e.topic,e.event,e.payload];return n(JSON.stringify(r))}_binaryEncodeUserBroadcastPush(e){var n;return this._isArrayBuffer((n=e.payload)===null||n===void 0?void 0:n.payload)?this._encodeBinaryUserBroadcastPush(e):this._encodeJsonUserBroadcastPush(e)}_encodeBinaryUserBroadcastPush(e){var n,r;const s=(r=(n=e.payload)===null||n===void 0?void 0:n.payload)!==null&&r!==void 0?r:new ArrayBuffer(0);return this._encodeUserBroadcastPush(e,this.BINARY_ENCODING,s)}_encodeJsonUserBroadcastPush(e){var n,r;const s=(r=(n=e.payload)===null||n===void 0?void 0:n.payload)!==null&&r!==void 0?r:{},c=new TextEncoder().encode(JSON.stringify(s)).buffer;return this._encodeUserBroadcastPush(e,this.JSON_ENCODING,c)}_encodeUserBroadcastPush(e,n,r){var s,o;const c=e.topic,h=(s=e.ref)!==null&&s!==void 0?s:"",g=(o=e.join_ref)!==null&&o!==void 0?o:"",p=e.payload.event,y=this.allowedMetadataKeys?this._pick(e.payload,this.allowedMetadataKeys):{},x=Object.keys(y).length===0?"":JSON.stringify(y);if(g.length>255)throw new Error(`joinRef length ${g.length} exceeds maximum of 255`);if(h.length>255)throw new Error(`ref length ${h.length} exceeds maximum of 255`);if(c.length>255)throw new Error(`topic length ${c.length} exceeds maximum of 255`);if(p.length>255)throw new Error(`userEvent length ${p.length} exceeds maximum of 255`);if(x.length>255)throw new Error(`metadata length ${x.length} exceeds maximum of 255`);const E=this.USER_BROADCAST_PUSH_META_LENGTH+g.length+h.length+c.length+p.length+x.length,b=new ArrayBuffer(this.HEADER_LENGTH+E);let I=new DataView(b),S=0;I.setUint8(S++,this.KINDS.userBroadcastPush),I.setUint8(S++,g.length),I.setUint8(S++,h.length),I.setUint8(S++,c.length),I.setUint8(S++,p.length),I.setUint8(S++,x.length),I.setUint8(S++,n),Array.from(g,A=>I.setUint8(S++,A.charCodeAt(0))),Array.from(h,A=>I.setUint8(S++,A.charCodeAt(0))),Array.from(c,A=>I.setUint8(S++,A.charCodeAt(0))),Array.from(p,A=>I.setUint8(S++,A.charCodeAt(0))),Array.from(x,A=>I.setUint8(S++,A.charCodeAt(0)));var R=new Uint8Array(b.byteLength+r.byteLength);return R.set(new Uint8Array(b),0),R.set(new Uint8Array(r),b.byteLength),R.buffer}decode(e,n){if(this._isArrayBuffer(e)){let r=this._binaryDecode(e);return n(r)}if(typeof e=="string"){const r=JSON.parse(e),[s,o,c,h,g]=r;return n({join_ref:s,ref:o,topic:c,event:h,payload:g})}return n({})}_binaryDecode(e){const n=new DataView(e),r=n.getUint8(0),s=new TextDecoder;switch(r){case this.KINDS.userBroadcast:return this._decodeUserBroadcast(e,n,s)}}_decodeUserBroadcast(e,n,r){const s=n.getUint8(1),o=n.getUint8(2),c=n.getUint8(3),h=n.getUint8(4);let g=this.HEADER_LENGTH+4;const p=r.decode(e.slice(g,g+s));g=g+s;const y=r.decode(e.slice(g,g+o));g=g+o;const x=r.decode(e.slice(g,g+c));g=g+c;const E=e.slice(g,e.byteLength),b=h===this.JSON_ENCODING?JSON.parse(r.decode(E)):E,I={type:this.BROADCAST_EVENT,event:y,payload:b};return c>0&&(I.meta=JSON.parse(x)),{join_ref:null,ref:null,topic:p,event:this.BROADCAST_EVENT,payload:I}}_isArrayBuffer(e){var n;return e instanceof ArrayBuffer||((n=e==null?void 0:e.constructor)===null||n===void 0?void 0:n.name)==="ArrayBuffer"}_pick(e,n){return!e||typeof e!="object"?{}:Object.fromEntries(Object.entries(e).filter(([r])=>n.includes(r)))}}class sS{constructor(e,n){this.callback=e,this.timerCalc=n,this.timer=void 0,this.tries=0,this.callback=e,this.timerCalc=n}reset(){this.tries=0,clearTimeout(this.timer),this.timer=void 0}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var gt;(function(t){t.abstime="abstime",t.bool="bool",t.date="date",t.daterange="daterange",t.float4="float4",t.float8="float8",t.int2="int2",t.int4="int4",t.int4range="int4range",t.int8="int8",t.int8range="int8range",t.json="json",t.jsonb="jsonb",t.money="money",t.numeric="numeric",t.oid="oid",t.reltime="reltime",t.text="text",t.time="time",t.timestamp="timestamp",t.timestamptz="timestamptz",t.timetz="timetz",t.tsrange="tsrange",t.tstzrange="tstzrange"})(gt||(gt={}));const Bw=(t,e,n={})=>{var r;const s=(r=n.skipTypes)!==null&&r!==void 0?r:[];return e?Object.keys(e).reduce((o,c)=>(o[c]=lk(c,t,e,s),o),{}):{}},lk=(t,e,n,r)=>{const s=e.find(h=>h.name===t),o=s==null?void 0:s.type,c=n[t];return o&&!r.includes(o)?oS(o,c):H1(c)},oS=(t,e)=>{if(t.charAt(0)==="_"){const n=t.slice(1,t.length);return hk(e,n)}switch(t){case gt.bool:return ck(e);case gt.float4:case gt.float8:case gt.int2:case gt.int4:case gt.int8:case gt.numeric:case gt.oid:return uk(e);case gt.json:case gt.jsonb:return dk(e);case gt.timestamp:return fk(e);case gt.abstime:case gt.date:case gt.daterange:case gt.int4range:case gt.int8range:case gt.money:case gt.reltime:case gt.text:case gt.time:case gt.timestamptz:case gt.timetz:case gt.tsrange:case gt.tstzrange:return H1(e);default:return H1(e)}},H1=t=>t,ck=t=>{switch(t){case"t":return!0;case"f":return!1;default:return t}},uk=t=>{if(typeof t=="string"){const e=parseFloat(t);if(!Number.isNaN(e))return e}return t},dk=t=>{if(typeof t=="string")try{return JSON.parse(t)}catch{return t}return t},hk=(t,e)=>{if(typeof t!="string")return t;const n=t.length-1,r=t[n];if(t[0]==="{"&&r==="}"){let o;const c=t.slice(1,n);try{o=JSON.parse("["+c+"]")}catch{o=c?c.split(","):[]}return o.map(h=>oS(e,h))}return t},fk=t=>typeof t=="string"?t.replace(" ","T"):t,aS=t=>{const e=new URL(t);return e.protocol=e.protocol.replace(/^ws/i,"http"),e.pathname=e.pathname.replace(/\/+$/,"").replace(/\/socket\/websocket$/i,"").replace(/\/socket$/i,"").replace(/\/websocket$/i,""),e.pathname===""||e.pathname==="/"?e.pathname="/api/broadcast":e.pathname=e.pathname+"/api/broadcast",e.href};class c0{constructor(e,n,r={},s=V1){this.channel=e,this.event=n,this.payload=r,this.timeout=s,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(e){this.timeout=e,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(e){this.payload=Object.assign(Object.assign({},this.payload),e)}receive(e,n){var r;return this._hasReceived(e)&&n((r=this.receivedResp)===null||r===void 0?void 0:r.response),this.recHooks.push({status:e,callback:n}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const e=n=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=n,this._matchReceive(n)};this.channel._on(this.refEvent,{},e),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(e,n){this.refEvent&&this.channel._trigger(this.refEvent,{status:e,response:n})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:e,response:n}){this.recHooks.filter(r=>r.status===e).forEach(r=>r.callback(n))}_hasReceived(e){return this.receivedResp&&this.receivedResp.status===e}}var Fw;(function(t){t.SYNC="sync",t.JOIN="join",t.LEAVE="leave"})(Fw||(Fw={}));class hc{constructor(e,n){this.channel=e,this.state={},this.pendingDiffs=[],this.joinRef=null,this.enabled=!1,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const r=(n==null?void 0:n.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(r.state,{},s=>{const{onJoin:o,onLeave:c,onSync:h}=this.caller;this.joinRef=this.channel._joinRef(),this.state=hc.syncState(this.state,s,o,c),this.pendingDiffs.forEach(g=>{this.state=hc.syncDiff(this.state,g,o,c)}),this.pendingDiffs=[],h()}),this.channel._on(r.diff,{},s=>{const{onJoin:o,onLeave:c,onSync:h}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(s):(this.state=hc.syncDiff(this.state,s,o,c),h())}),this.onJoin((s,o,c)=>{this.channel._trigger("presence",{event:"join",key:s,currentPresences:o,newPresences:c})}),this.onLeave((s,o,c)=>{this.channel._trigger("presence",{event:"leave",key:s,currentPresences:o,leftPresences:c})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(e,n,r,s){const o=this.cloneDeep(e),c=this.transformState(n),h={},g={};return this.map(o,(p,y)=>{c[p]||(g[p]=y)}),this.map(c,(p,y)=>{const x=o[p];if(x){const E=y.map(R=>R.presence_ref),b=x.map(R=>R.presence_ref),I=y.filter(R=>b.indexOf(R.presence_ref)<0),S=x.filter(R=>E.indexOf(R.presence_ref)<0);I.length>0&&(h[p]=I),S.length>0&&(g[p]=S)}else h[p]=y}),this.syncDiff(o,{joins:h,leaves:g},r,s)}static syncDiff(e,n,r,s){const{joins:o,leaves:c}={joins:this.transformState(n.joins),leaves:this.transformState(n.leaves)};return r||(r=()=>{}),s||(s=()=>{}),this.map(o,(h,g)=>{var p;const y=(p=e[h])!==null&&p!==void 0?p:[];if(e[h]=this.cloneDeep(g),y.length>0){const x=e[h].map(b=>b.presence_ref),E=y.filter(b=>x.indexOf(b.presence_ref)<0);e[h].unshift(...E)}r(h,y,g)}),this.map(c,(h,g)=>{let p=e[h];if(!p)return;const y=g.map(x=>x.presence_ref);p=p.filter(x=>y.indexOf(x.presence_ref)<0),e[h]=p,s(h,p,g),p.length===0&&delete e[h]}),e}static map(e,n){return Object.getOwnPropertyNames(e).map(r=>n(r,e[r]))}static transformState(e){return e=this.cloneDeep(e),Object.getOwnPropertyNames(e).reduce((n,r)=>{const s=e[r];return"metas"in s?n[r]=s.metas.map(o=>(o.presence_ref=o.phx_ref,delete o.phx_ref,delete o.phx_ref_prev,o)):n[r]=s,n},{})}static cloneDeep(e){return JSON.parse(JSON.stringify(e))}onJoin(e){this.caller.onJoin=e}onLeave(e){this.caller.onLeave=e}onSync(e){this.caller.onSync=e}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var jw;(function(t){t.ALL="*",t.INSERT="INSERT",t.UPDATE="UPDATE",t.DELETE="DELETE"})(jw||(jw={}));var fc;(function(t){t.BROADCAST="broadcast",t.PRESENCE="presence",t.POSTGRES_CHANGES="postgres_changes",t.SYSTEM="system"})(fc||(fc={}));var Fi;(function(t){t.SUBSCRIBED="SUBSCRIBED",t.TIMED_OUT="TIMED_OUT",t.CLOSED="CLOSED",t.CHANNEL_ERROR="CHANNEL_ERROR"})(Fi||(Fi={}));class Ia{constructor(e,n={config:{}},r){var s,o;if(this.topic=e,this.params=n,this.socket=r,this.bindings={},this.state=en.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=e.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:"",enabled:!1},private:!1},n.config),this.timeout=this.socket.timeout,this.joinPush=new c0(this,Zr.join,this.params,this.timeout),this.rejoinTimer=new sS(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=en.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(c=>c.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=en.closed,this.socket._remove(this)}),this._onError(c=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,c),this.state=en.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=en.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("error",c=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,c),this.state=en.errored,this.rejoinTimer.scheduleTimeout())}),this._on(Zr.reply,{},(c,h)=>{this._trigger(this._replyEventName(h),c)}),this.presence=new hc(this),this.broadcastEndpointURL=aS(this.socket.endPoint),this.private=this.params.config.private||!1,!this.private&&(!((o=(s=this.params.config)===null||s===void 0?void 0:s.broadcast)===null||o===void 0)&&o.replay))throw`tried to use replay on public channel '${this.topic}'. It must be a private channel.`}subscribe(e,n=this.timeout){var r,s,o;if(this.socket.isConnected()||this.socket.connect(),this.state==en.closed){const{config:{broadcast:c,presence:h,private:g}}=this.params,p=(s=(r=this.bindings.postgres_changes)===null||r===void 0?void 0:r.map(b=>b.filter))!==null&&s!==void 0?s:[],y=!!this.bindings[fc.PRESENCE]&&this.bindings[fc.PRESENCE].length>0||((o=this.params.config.presence)===null||o===void 0?void 0:o.enabled)===!0,x={},E={broadcast:c,presence:Object.assign(Object.assign({},h),{enabled:y}),postgres_changes:p,private:g};this.socket.accessTokenValue&&(x.access_token=this.socket.accessTokenValue),this._onError(b=>e==null?void 0:e(Fi.CHANNEL_ERROR,b)),this._onClose(()=>e==null?void 0:e(Fi.CLOSED)),this.updateJoinPayload(Object.assign({config:E},x)),this.joinedOnce=!0,this._rejoin(n),this.joinPush.receive("ok",async({postgres_changes:b})=>{var I;if(this.socket._isManualToken()||this.socket.setAuth(),b===void 0){e==null||e(Fi.SUBSCRIBED);return}else{const S=this.bindings.postgres_changes,R=(I=S==null?void 0:S.length)!==null&&I!==void 0?I:0,A=[];for(let _=0;_<R;_++){const T=S[_],{filter:{event:D,schema:F,table:j,filter:B}}=T,W=b&&b[_];if(W&&W.event===D&&Ia.isFilterValueEqual(W.schema,F)&&Ia.isFilterValueEqual(W.table,j)&&Ia.isFilterValueEqual(W.filter,B))A.push(Object.assign(Object.assign({},T),{id:W.id}));else{this.unsubscribe(),this.state=en.errored,e==null||e(Fi.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=A,e&&e(Fi.SUBSCRIBED);return}}).receive("error",b=>{this.state=en.errored,e==null||e(Fi.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(b).join(", ")||"error")))}).receive("timeout",()=>{e==null||e(Fi.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(e,n={}){return await this.send({type:"presence",event:"track",payload:e},n.timeout||this.timeout)}async untrack(e={}){return await this.send({type:"presence",event:"untrack"},e)}on(e,n,r){return this.state===en.joined&&e===fc.PRESENCE&&(this.socket.log("channel",`resubscribe to ${this.topic} due to change in presence callbacks on joined channel`),this.unsubscribe().then(async()=>await this.subscribe())),this._on(e,n,r)}async httpSend(e,n,r={}){var s;if(n==null)return Promise.reject("Payload is required for httpSend()");const o={apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"};this.socket.accessTokenValue&&(o.Authorization=`Bearer ${this.socket.accessTokenValue}`);const c={method:"POST",headers:o,body:JSON.stringify({messages:[{topic:this.subTopic,event:e,payload:n,private:this.private}]})},h=await this._fetchWithTimeout(this.broadcastEndpointURL,c,(s=r.timeout)!==null&&s!==void 0?s:this.timeout);if(h.status===202)return{success:!0};let g=h.statusText;try{const p=await h.json();g=p.error||p.message||g}catch{}return Promise.reject(new Error(g))}async send(e,n={}){var r,s;if(!this._canPush()&&e.type==="broadcast"){console.warn("Realtime send() is automatically falling back to REST API. This behavior will be deprecated in the future. Please use httpSend() explicitly for REST delivery.");const{event:o,payload:c}=e,h={apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"};this.socket.accessTokenValue&&(h.Authorization=`Bearer ${this.socket.accessTokenValue}`);const g={method:"POST",headers:h,body:JSON.stringify({messages:[{topic:this.subTopic,event:o,payload:c,private:this.private}]})};try{const p=await this._fetchWithTimeout(this.broadcastEndpointURL,g,(r=n.timeout)!==null&&r!==void 0?r:this.timeout);return await((s=p.body)===null||s===void 0?void 0:s.cancel()),p.ok?"ok":"error"}catch(p){return p.name==="AbortError"?"timed out":"error"}}else return new Promise(o=>{var c,h,g;const p=this._push(e.type,e,n.timeout||this.timeout);e.type==="broadcast"&&!(!((g=(h=(c=this.params)===null||c===void 0?void 0:c.config)===null||h===void 0?void 0:h.broadcast)===null||g===void 0)&&g.ack)&&o("ok"),p.receive("ok",()=>o("ok")),p.receive("error",()=>o("error")),p.receive("timeout",()=>o("timed out"))})}updateJoinPayload(e){this.joinPush.updatePayload(e)}unsubscribe(e=this.timeout){this.state=en.leaving;const n=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(Zr.close,"leave",this._joinRef())};this.joinPush.destroy();let r=null;return new Promise(s=>{r=new c0(this,Zr.leave,{},e),r.receive("ok",()=>{n(),s("ok")}).receive("timeout",()=>{n(),s("timed out")}).receive("error",()=>{s("error")}),r.send(),this._canPush()||r.trigger("ok",{})}).finally(()=>{r==null||r.destroy()})}teardown(){this.pushBuffer.forEach(e=>e.destroy()),this.pushBuffer=[],this.rejoinTimer.reset(),this.joinPush.destroy(),this.state=en.closed,this.bindings={}}async _fetchWithTimeout(e,n,r){const s=new AbortController,o=setTimeout(()=>s.abort(),r),c=await this.socket.fetch(e,Object.assign(Object.assign({},n),{signal:s.signal}));return clearTimeout(o),c}_push(e,n,r=this.timeout){if(!this.joinedOnce)throw`tried to push '${e}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let s=new c0(this,e,n,r);return this._canPush()?s.send():this._addToPushBuffer(s),s}_addToPushBuffer(e){if(e.startTimeout(),this.pushBuffer.push(e),this.pushBuffer.length>ok){const n=this.pushBuffer.shift();n&&(n.destroy(),this.socket.log("channel",`discarded push due to buffer overflow: ${n.event}`,n.payload))}}_onMessage(e,n,r){return n}_isMember(e){return this.topic===e}_joinRef(){return this.joinPush.ref}_trigger(e,n,r){var s,o;const c=e.toLocaleLowerCase(),{close:h,error:g,leave:p,join:y}=Zr;if(r&&[h,g,p,y].indexOf(c)>=0&&r!==this._joinRef())return;let E=this._onMessage(c,n,r);if(n&&!E)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(c)?(s=this.bindings.postgres_changes)===null||s===void 0||s.filter(b=>{var I,S,R;return((I=b.filter)===null||I===void 0?void 0:I.event)==="*"||((R=(S=b.filter)===null||S===void 0?void 0:S.event)===null||R===void 0?void 0:R.toLocaleLowerCase())===c}).map(b=>b.callback(E,r)):(o=this.bindings[c])===null||o===void 0||o.filter(b=>{var I,S,R,A,_,T;if(["broadcast","presence","postgres_changes"].includes(c))if("id"in b){const D=b.id,F=(I=b.filter)===null||I===void 0?void 0:I.event;return D&&((S=n.ids)===null||S===void 0?void 0:S.includes(D))&&(F==="*"||(F==null?void 0:F.toLocaleLowerCase())===((R=n.data)===null||R===void 0?void 0:R.type.toLocaleLowerCase()))}else{const D=(_=(A=b==null?void 0:b.filter)===null||A===void 0?void 0:A.event)===null||_===void 0?void 0:_.toLocaleLowerCase();return D==="*"||D===((T=n==null?void 0:n.event)===null||T===void 0?void 0:T.toLocaleLowerCase())}else return b.type.toLocaleLowerCase()===c}).map(b=>{if(typeof E=="object"&&"ids"in E){const I=E.data,{schema:S,table:R,commit_timestamp:A,type:_,errors:T}=I;E=Object.assign(Object.assign({},{schema:S,table:R,commit_timestamp:A,eventType:_,new:{},old:{},errors:T}),this._getPayloadRecords(I))}b.callback(E,r)})}_isClosed(){return this.state===en.closed}_isJoined(){return this.state===en.joined}_isJoining(){return this.state===en.joining}_isLeaving(){return this.state===en.leaving}_replyEventName(e){return`chan_reply_${e}`}_on(e,n,r){const s=e.toLocaleLowerCase(),o={type:s,filter:n,callback:r};return this.bindings[s]?this.bindings[s].push(o):this.bindings[s]=[o],this}_off(e,n){const r=e.toLocaleLowerCase();return this.bindings[r]&&(this.bindings[r]=this.bindings[r].filter(s=>{var o;return!(((o=s.type)===null||o===void 0?void 0:o.toLocaleLowerCase())===r&&Ia.isEqual(s.filter,n))})),this}static isEqual(e,n){if(Object.keys(e).length!==Object.keys(n).length)return!1;for(const r in e)if(e[r]!==n[r])return!1;return!0}static isFilterValueEqual(e,n){return(e??void 0)===(n??void 0)}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(e){this._on(Zr.close,{},e)}_onError(e){this._on(Zr.error,{},n=>e(n))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(e=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=en.joining,this.joinPush.resend(e))}_getPayloadRecords(e){const n={new:{},old:{}};return(e.type==="INSERT"||e.type==="UPDATE")&&(n.new=Bw(e.columns,e.record)),(e.type==="UPDATE"||e.type==="DELETE")&&(n.old=Bw(e.columns,e.old_record)),n}}const u0=()=>{},Qu={HEARTBEAT_INTERVAL:25e3,RECONNECT_DELAY:10,HEARTBEAT_TIMEOUT_FALLBACK:100},pk=[1e3,2e3,5e3,1e4],gk=1e4,mk=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class yk{constructor(e,n){var r;if(this.accessTokenValue=null,this.apiKey=null,this._manuallySetToken=!1,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=V1,this.transport=null,this.heartbeatIntervalMs=Qu.HEARTBEAT_INTERVAL,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=u0,this.ref=0,this.reconnectTimer=null,this.vsn=Lw,this.logger=u0,this.conn=null,this.sendBuffer=[],this.serializer=new ak,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._connectionState="disconnected",this._wasManualDisconnect=!1,this._authPromise=null,this._heartbeatSentAt=null,this._resolveFetch=s=>s?(...o)=>s(...o):(...o)=>fetch(...o),!(!((r=n==null?void 0:n.params)===null||r===void 0)&&r.apikey))throw new Error("API key is required to connect to Realtime");this.apiKey=n.params.apikey,this.endPoint=`${e}/${z1.websocket}`,this.httpEndpoint=aS(e),this._initializeOptions(n),this._setupReconnectionTimer(),this.fetch=this._resolveFetch(n==null?void 0:n.fetch)}connect(){if(!(this.isConnecting()||this.isDisconnecting()||this.conn!==null&&this.isConnected())){if(this._setConnectionState("connecting"),this.accessToken&&!this._authPromise&&this._setAuthSafely("connect"),this.transport)this.conn=new this.transport(this.endpointURL());else try{this.conn=tk.createWebSocket(this.endpointURL())}catch(e){this._setConnectionState("disconnected");const n=e.message;throw n.includes("Node.js")?new Error(`${n}

To use Realtime in Node.js, you need to provide a WebSocket implementation:

Option 1: Use Node.js 22+ which has native WebSocket support
Option 2: Install and provide the "ws" package:

  npm install ws

  import ws from "ws"
  const client = new RealtimeClient(url, {
    ...options,
    transport: ws
  })`):new Error(`WebSocket not available: ${n}`)}this._setupConnectionHandlers()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:this.vsn}))}disconnect(e,n){if(!this.isDisconnecting())if(this._setConnectionState("disconnecting",!0),this.conn){const r=setTimeout(()=>{this._setConnectionState("disconnected")},100);this.conn.onclose=()=>{clearTimeout(r),this._setConnectionState("disconnected")},typeof this.conn.close=="function"&&(e?this.conn.close(e,n??""):this.conn.close()),this._teardownConnection()}else this._setConnectionState("disconnected")}getChannels(){return this.channels}async removeChannel(e){const n=await e.unsubscribe();return n==="ok"&&this._remove(e),this.channels.length===0&&this.disconnect(),n}async removeAllChannels(){const e=await Promise.all(this.channels.map(n=>n.unsubscribe()));return this.channels=[],this.disconnect(),e}log(e,n,r){this.logger(e,n,r)}connectionState(){switch(this.conn&&this.conn.readyState){case ys.connecting:return xo.Connecting;case ys.open:return xo.Open;case ys.closing:return xo.Closing;default:return xo.Closed}}isConnected(){return this.connectionState()===xo.Open}isConnecting(){return this._connectionState==="connecting"}isDisconnecting(){return this._connectionState==="disconnecting"}channel(e,n={config:{}}){const r=`realtime:${e}`,s=this.getChannels().find(o=>o.topic===r);if(s)return s;{const o=new Ia(`realtime:${e}`,n,this);return this.channels.push(o),o}}push(e){const{topic:n,event:r,payload:s,ref:o}=e,c=()=>{this.encode(e,h=>{var g;(g=this.conn)===null||g===void 0||g.send(h)})};this.log("push",`${n} ${r} (${o})`,s),this.isConnected()?c():this.sendBuffer.push(c)}async setAuth(e=null){this._authPromise=this._performAuth(e);try{await this._authPromise}finally{this._authPromise=null}}_isManualToken(){return this._manuallySetToken}async sendHeartbeat(){var e;if(!this.isConnected()){try{this.heartbeatCallback("disconnected")}catch(n){this.log("error","error in heartbeat callback",n)}return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this._heartbeatSentAt=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection");try{this.heartbeatCallback("timeout")}catch(n){this.log("error","error in heartbeat callback",n)}this._wasManualDisconnect=!1,(e=this.conn)===null||e===void 0||e.close(sk,"heartbeat timeout"),setTimeout(()=>{var n;this.isConnected()||(n=this.reconnectTimer)===null||n===void 0||n.scheduleTimeout()},Qu.HEARTBEAT_TIMEOUT_FALLBACK);return}this._heartbeatSentAt=Date.now(),this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef});try{this.heartbeatCallback("sent")}catch(n){this.log("error","error in heartbeat callback",n)}this._setAuthSafely("heartbeat")}onHeartbeat(e){this.heartbeatCallback=e}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(e=>e()),this.sendBuffer=[])}_makeRef(){let e=this.ref+1;return e===this.ref?this.ref=0:this.ref=e,this.ref.toString()}_leaveOpenTopic(e){let n=this.channels.find(r=>r.topic===e&&(r._isJoined()||r._isJoining()));n&&(this.log("transport",`leaving duplicate topic "${e}"`),n.unsubscribe())}_remove(e){this.channels=this.channels.filter(n=>n.topic!==e.topic)}_onConnMessage(e){this.decode(e.data,n=>{if(n.topic==="phoenix"&&n.event==="phx_reply"&&n.ref&&n.ref===this.pendingHeartbeatRef){const p=this._heartbeatSentAt?Date.now()-this._heartbeatSentAt:void 0;try{this.heartbeatCallback(n.payload.status==="ok"?"ok":"error",p)}catch(y){this.log("error","error in heartbeat callback",y)}this._heartbeatSentAt=null,this.pendingHeartbeatRef=null}const{topic:r,event:s,payload:o,ref:c}=n,h=c?`(${c})`:"",g=o.status||"";this.log("receive",`${g} ${r} ${s} ${h}`.trim(),o),this.channels.filter(p=>p._isMember(r)).forEach(p=>p._trigger(s,o,c)),this._triggerStateCallbacks("message",n)})}_clearTimer(e){var n;e==="heartbeat"&&this.heartbeatTimer?(clearInterval(this.heartbeatTimer),this.heartbeatTimer=void 0):e==="reconnect"&&((n=this.reconnectTimer)===null||n===void 0||n.reset())}_clearAllTimers(){this._clearTimer("heartbeat"),this._clearTimer("reconnect")}_setupConnectionHandlers(){this.conn&&("binaryType"in this.conn&&(this.conn.binaryType="arraybuffer"),this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=e=>this._onConnError(e),this.conn.onmessage=e=>this._onConnMessage(e),this.conn.onclose=e=>this._onConnClose(e),this.conn.readyState===ys.open&&this._onConnOpen())}_teardownConnection(){if(this.conn){if(this.conn.readyState===ys.open||this.conn.readyState===ys.connecting)try{this.conn.close()}catch(e){this.log("error","Error closing connection",e)}this.conn.onopen=null,this.conn.onerror=null,this.conn.onmessage=null,this.conn.onclose=null,this.conn=null}this._clearAllTimers(),this._terminateWorker(),this.channels.forEach(e=>e.teardown())}_onConnOpen(){this._setConnectionState("connected"),this.log("transport",`connected to ${this.endpointURL()}`),(this._authPromise||(this.accessToken&&!this.accessTokenValue?this.setAuth():Promise.resolve())).then(()=>{this.flushSendBuffer()}).catch(n=>{this.log("error","error waiting for auth on connect",n),this.flushSendBuffer()}),this._clearTimer("reconnect"),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this._triggerStateCallbacks("open")}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const e=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(e),this.workerRef.onerror=n=>{this.log("worker","worker error",n.message),this._terminateWorker()},this.workerRef.onmessage=n=>{n.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_terminateWorker(){this.workerRef&&(this.log("worker","terminating worker"),this.workerRef.terminate(),this.workerRef=void 0)}_onConnClose(e){var n;this._setConnectionState("disconnected"),this.log("transport","close",e),this._triggerChanError(),this._clearTimer("heartbeat"),this._wasManualDisconnect||(n=this.reconnectTimer)===null||n===void 0||n.scheduleTimeout(),this._triggerStateCallbacks("close",e)}_onConnError(e){this._setConnectionState("disconnected"),this.log("transport",`${e}`),this._triggerChanError(),this._triggerStateCallbacks("error",e);try{this.heartbeatCallback("error")}catch(n){this.log("error","error in heartbeat callback",n)}}_triggerChanError(){this.channels.forEach(e=>e._trigger(Zr.error))}_appendParams(e,n){if(Object.keys(n).length===0)return e;const r=e.match(/\?/)?"&":"?",s=new URLSearchParams(n);return`${e}${r}${s}`}_workerObjectUrl(e){let n;if(e)n=e;else{const r=new Blob([mk],{type:"application/javascript"});n=URL.createObjectURL(r)}return n}_setConnectionState(e,n=!1){this._connectionState=e,e==="connecting"?this._wasManualDisconnect=!1:e==="disconnecting"&&(this._wasManualDisconnect=n)}async _performAuth(e=null){let n,r=!1;if(e)n=e,r=!0;else if(this.accessToken)try{n=await this.accessToken()}catch(s){this.log("error","Error fetching access token from callback",s),n=this.accessTokenValue}else n=this.accessTokenValue;r?this._manuallySetToken=!0:this.accessToken&&(this._manuallySetToken=!1),this.accessTokenValue!=n&&(this.accessTokenValue=n,this.channels.forEach(s=>{const o={access_token:n,version:rk};n&&s.updateJoinPayload(o),s.joinedOnce&&s._isJoined()&&s._push(Zr.access_token,{access_token:n})}))}async _waitForAuthIfNeeded(){this._authPromise&&await this._authPromise}_setAuthSafely(e="general"){this._isManualToken()||this.setAuth().catch(n=>{this.log("error",`Error setting auth in ${e}`,n)})}_triggerStateCallbacks(e,n){try{this.stateChangeCallbacks[e].forEach(r=>{try{r(n)}catch(s){this.log("error",`error in ${e} callback`,s)}})}catch(r){this.log("error",`error triggering ${e} callbacks`,r)}}_setupReconnectionTimer(){this.reconnectTimer=new sS(async()=>{setTimeout(async()=>{await this._waitForAuthIfNeeded(),this.isConnected()||this.connect()},Qu.RECONNECT_DELAY)},this.reconnectAfterMs)}_initializeOptions(e){var n,r,s,o,c,h,g,p,y,x,E,b;switch(this.transport=(n=e==null?void 0:e.transport)!==null&&n!==void 0?n:null,this.timeout=(r=e==null?void 0:e.timeout)!==null&&r!==void 0?r:V1,this.heartbeatIntervalMs=(s=e==null?void 0:e.heartbeatIntervalMs)!==null&&s!==void 0?s:Qu.HEARTBEAT_INTERVAL,this.worker=(o=e==null?void 0:e.worker)!==null&&o!==void 0?o:!1,this.accessToken=(c=e==null?void 0:e.accessToken)!==null&&c!==void 0?c:null,this.heartbeatCallback=(h=e==null?void 0:e.heartbeatCallback)!==null&&h!==void 0?h:u0,this.vsn=(g=e==null?void 0:e.vsn)!==null&&g!==void 0?g:Lw,e!=null&&e.params&&(this.params=e.params),e!=null&&e.logger&&(this.logger=e.logger),(e!=null&&e.logLevel||e!=null&&e.log_level)&&(this.logLevel=e.logLevel||e.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),this.reconnectAfterMs=(p=e==null?void 0:e.reconnectAfterMs)!==null&&p!==void 0?p:I=>pk[I-1]||gk,this.vsn){case ik:this.encode=(y=e==null?void 0:e.encode)!==null&&y!==void 0?y:(I,S)=>S(JSON.stringify(I)),this.decode=(x=e==null?void 0:e.decode)!==null&&x!==void 0?x:(I,S)=>S(JSON.parse(I));break;case iS:this.encode=(E=e==null?void 0:e.encode)!==null&&E!==void 0?E:this.serializer.encode.bind(this.serializer),this.decode=(b=e==null?void 0:e.decode)!==null&&b!==void 0?b:this.serializer.decode.bind(this.serializer);break;default:throw new Error(`Unsupported serializer version: ${this.vsn}`)}if(this.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.workerUrl=e==null?void 0:e.workerUrl}}}var Hc=class extends Error{constructor(t,e){var n;super(t),this.name="IcebergError",this.status=e.status,this.icebergType=e.icebergType,this.icebergCode=e.icebergCode,this.details=e.details,this.isCommitStateUnknown=e.icebergType==="CommitStateUnknownException"||[500,502,504].includes(e.status)&&((n=e.icebergType)==null?void 0:n.includes("CommitState"))===!0}isNotFound(){return this.status===404}isConflict(){return this.status===409}isAuthenticationTimeout(){return this.status===419}};function wk(t,e,n){const r=new URL(e,t);if(n)for(const[s,o]of Object.entries(n))o!==void 0&&r.searchParams.set(s,o);return r.toString()}async function xk(t){return!t||t.type==="none"?{}:t.type==="bearer"?{Authorization:`Bearer ${t.token}`}:t.type==="header"?{[t.name]:t.value}:t.type==="custom"?await t.getHeaders():{}}function vk(t){const e=t.fetchImpl??globalThis.fetch;return{async request({method:n,path:r,query:s,body:o,headers:c}){const h=wk(t.baseUrl,r,s),g=await xk(t.auth),p=await e(h,{method:n,headers:{...o?{"Content-Type":"application/json"}:{},...g,...c},body:o?JSON.stringify(o):void 0}),y=await p.text(),x=(p.headers.get("content-type")||"").includes("application/json"),E=x&&y?JSON.parse(y):y;if(!p.ok){const b=x?E:void 0,I=b==null?void 0:b.error;throw new Hc((I==null?void 0:I.message)??`Request failed with status ${p.status}`,{status:p.status,icebergType:I==null?void 0:I.type,icebergCode:I==null?void 0:I.code,details:b})}return{status:p.status,headers:p.headers,data:E}}}}function Ju(t){return t.join("")}var Ek=class{constructor(t,e=""){this.client=t,this.prefix=e}async listNamespaces(t){const e=t?{parent:Ju(t.namespace)}:void 0;return(await this.client.request({method:"GET",path:`${this.prefix}/namespaces`,query:e})).data.namespaces.map(r=>({namespace:r}))}async createNamespace(t,e){const n={namespace:t.namespace,properties:e==null?void 0:e.properties};return(await this.client.request({method:"POST",path:`${this.prefix}/namespaces`,body:n})).data}async dropNamespace(t){await this.client.request({method:"DELETE",path:`${this.prefix}/namespaces/${Ju(t.namespace)}`})}async loadNamespaceMetadata(t){return{properties:(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${Ju(t.namespace)}`})).data.properties}}async namespaceExists(t){try{return await this.client.request({method:"HEAD",path:`${this.prefix}/namespaces/${Ju(t.namespace)}`}),!0}catch(e){if(e instanceof Hc&&e.status===404)return!1;throw e}}async createNamespaceIfNotExists(t,e){try{return await this.createNamespace(t,e)}catch(n){if(n instanceof Hc&&n.status===409)return;throw n}}};function sa(t){return t.join("")}var bk=class{constructor(t,e="",n){this.client=t,this.prefix=e,this.accessDelegation=n}async listTables(t){return(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${sa(t.namespace)}/tables`})).data.identifiers}async createTable(t,e){const n={};return this.accessDelegation&&(n["X-Iceberg-Access-Delegation"]=this.accessDelegation),(await this.client.request({method:"POST",path:`${this.prefix}/namespaces/${sa(t.namespace)}/tables`,body:e,headers:n})).data.metadata}async updateTable(t,e){const n=await this.client.request({method:"POST",path:`${this.prefix}/namespaces/${sa(t.namespace)}/tables/${t.name}`,body:e});return{"metadata-location":n.data["metadata-location"],metadata:n.data.metadata}}async dropTable(t,e){await this.client.request({method:"DELETE",path:`${this.prefix}/namespaces/${sa(t.namespace)}/tables/${t.name}`,query:{purgeRequested:String((e==null?void 0:e.purge)??!1)}})}async loadTable(t){const e={};return this.accessDelegation&&(e["X-Iceberg-Access-Delegation"]=this.accessDelegation),(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${sa(t.namespace)}/tables/${t.name}`,headers:e})).data.metadata}async tableExists(t){const e={};this.accessDelegation&&(e["X-Iceberg-Access-Delegation"]=this.accessDelegation);try{return await this.client.request({method:"HEAD",path:`${this.prefix}/namespaces/${sa(t.namespace)}/tables/${t.name}`,headers:e}),!0}catch(n){if(n instanceof Hc&&n.status===404)return!1;throw n}}async createTableIfNotExists(t,e){try{return await this.createTable(t,e)}catch(n){if(n instanceof Hc&&n.status===409)return await this.loadTable({namespace:t.namespace,name:e.name});throw n}}},Ck=class{constructor(t){var r;let e="v1";t.catalogName&&(e+=`/${t.catalogName}`);const n=t.baseUrl.endsWith("/")?t.baseUrl:`${t.baseUrl}/`;this.client=vk({baseUrl:n,auth:t.auth,fetchImpl:t.fetch}),this.accessDelegation=(r=t.accessDelegation)==null?void 0:r.join(","),this.namespaceOps=new Ek(this.client,e),this.tableOps=new bk(this.client,e,this.accessDelegation)}async listNamespaces(t){return this.namespaceOps.listNamespaces(t)}async createNamespace(t,e){return this.namespaceOps.createNamespace(t,e)}async dropNamespace(t){await this.namespaceOps.dropNamespace(t)}async loadNamespaceMetadata(t){return this.namespaceOps.loadNamespaceMetadata(t)}async listTables(t){return this.tableOps.listTables(t)}async createTable(t,e){return this.tableOps.createTable(t,e)}async updateTable(t,e){return this.tableOps.updateTable(t,e)}async dropTable(t,e){await this.tableOps.dropTable(t,e)}async loadTable(t){return this.tableOps.loadTable(t)}async namespaceExists(t){return this.namespaceOps.namespaceExists(t)}async tableExists(t){return this.tableOps.tableExists(t)}async createNamespaceIfNotExists(t,e){return this.namespaceOps.createNamespaceIfNotExists(t,e)}async createTableIfNotExists(t,e){return this.tableOps.createTableIfNotExists(t,e)}},nf=class extends Error{constructor(t,e="storage",n,r){super(t),this.__isStorageError=!0,this.namespace=e,this.name=e==="vectors"?"StorageVectorsError":"StorageError",this.status=n,this.statusCode=r}};function rf(t){return typeof t=="object"&&t!==null&&"__isStorageError"in t}var ed=class extends nf{constructor(t,e,n,r="storage"){super(t,r,e,n),this.name=r==="vectors"?"StorageVectorsApiError":"StorageApiError",this.status=e,this.statusCode=n}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}},lS=class extends nf{constructor(t,e,n="storage"){super(t,n),this.name=n==="vectors"?"StorageVectorsUnknownError":"StorageUnknownError",this.originalError=e}};const Sk=t=>t?(...e)=>t(...e):(...e)=>fetch(...e),Ak=t=>{if(typeof t!="object"||t===null)return!1;const e=Object.getPrototypeOf(t);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in t)&&!(Symbol.iterator in t)},W1=t=>{if(Array.isArray(t))return t.map(n=>W1(n));if(typeof t=="function"||t!==Object(t))return t;const e={};return Object.entries(t).forEach(([n,r])=>{const s=n.replace(/([-_][a-z])/gi,o=>o.toUpperCase().replace(/[-_]/g,""));e[s]=W1(r)}),e},_k=t=>!t||typeof t!="string"||t.length===0||t.length>100||t.trim()!==t||t.includes("/")||t.includes("\\")?!1:/^[\w!.\*'() &$@=;:+,?-]+$/.test(t);function Wc(t){"@babel/helpers - typeof";return Wc=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Wc(t)}function Tk(t,e){if(Wc(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(Wc(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Ik(t){var e=Tk(t,"string");return Wc(e)=="symbol"?e:e+""}function Rk(t,e,n){return(e=Ik(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Uw(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),n.push.apply(n,r)}return n}function Me(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?Uw(Object(n),!0).forEach(function(r){Rk(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Uw(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}const Vw=t=>{var e;return t.msg||t.message||t.error_description||(typeof t.error=="string"?t.error:(e=t.error)===null||e===void 0?void 0:e.message)||JSON.stringify(t)},Nk=async(t,e,n,r)=>{if(t&&typeof t=="object"&&"status"in t&&"ok"in t&&typeof t.status=="number"&&!(n!=null&&n.noResolveJson)){const s=t,o=s.status||500;if(typeof s.json=="function")s.json().then(c=>{const h=(c==null?void 0:c.statusCode)||(c==null?void 0:c.code)||o+"";e(new ed(Vw(c),o,h,r))}).catch(()=>{if(r==="vectors"){const c=o+"";e(new ed(s.statusText||`HTTP ${o} error`,o,c,r))}else{const c=o+"";e(new ed(s.statusText||`HTTP ${o} error`,o,c,r))}});else{const c=o+"";e(new ed(s.statusText||`HTTP ${o} error`,o,c,r))}}else e(new lS(Vw(t),t,r))},Ok=(t,e,n,r)=>{const s={method:t,headers:(e==null?void 0:e.headers)||{}};return t==="GET"||t==="HEAD"||!r?Me(Me({},s),n):(Ak(r)?(s.headers=Me({"Content-Type":"application/json"},e==null?void 0:e.headers),s.body=JSON.stringify(r)):s.body=r,e!=null&&e.duplex&&(s.duplex=e.duplex),Me(Me({},s),n))};async function Yl(t,e,n,r,s,o,c){return new Promise((h,g)=>{t(n,Ok(e,r,s,o)).then(p=>{if(!p.ok)throw p;if(r!=null&&r.noResolveJson)return p;if(c==="vectors"){const y=p.headers.get("content-type");if(p.headers.get("content-length")==="0"||p.status===204)return{};if(!y||!y.includes("application/json"))return{}}return p.json()}).then(p=>h(p)).catch(p=>Nk(p,g,r,c))})}function cS(t="storage"){return{get:async(e,n,r,s)=>Yl(e,"GET",n,r,s,void 0,t),post:async(e,n,r,s,o)=>Yl(e,"POST",n,s,o,r,t),put:async(e,n,r,s,o)=>Yl(e,"PUT",n,s,o,r,t),head:async(e,n,r,s)=>Yl(e,"HEAD",n,Me(Me({},r),{},{noResolveJson:!0}),s,void 0,t),remove:async(e,n,r,s,o)=>Yl(e,"DELETE",n,s,o,r,t)}}const kk=cS("storage"),{get:$c,post:Yr,put:$1,head:Mk,remove:Hg}=kk,cr=cS("vectors");var bl=class{constructor(t,e={},n,r="storage"){this.shouldThrowOnError=!1,this.url=t,this.headers=e,this.fetch=Sk(n),this.namespace=r}throwOnError(){return this.shouldThrowOnError=!0,this}async handleOperation(t){var e=this;try{return{data:await t(),error:null}}catch(n){if(e.shouldThrowOnError)throw n;if(rf(n))return{data:null,error:n};throw n}}},Dk=class{constructor(t,e){this.downloadFn=t,this.shouldThrowOnError=e}then(t,e){return this.execute().then(t,e)}async execute(){var t=this;try{return{data:(await t.downloadFn()).body,error:null}}catch(e){if(t.shouldThrowOnError)throw e;if(rf(e))return{data:null,error:e};throw e}}};let uS;uS=Symbol.toStringTag;var Pk=class{constructor(t,e){this.downloadFn=t,this.shouldThrowOnError=e,this[uS]="BlobDownloadBuilder",this.promise=null}asStream(){return new Dk(this.downloadFn,this.shouldThrowOnError)}then(t,e){return this.getPromise().then(t,e)}catch(t){return this.getPromise().catch(t)}finally(t){return this.getPromise().finally(t)}getPromise(){return this.promise||(this.promise=this.execute()),this.promise}async execute(){var t=this;try{return{data:await(await t.downloadFn()).blob(),error:null}}catch(e){if(t.shouldThrowOnError)throw e;if(rf(e))return{data:null,error:e};throw e}}};const Lk={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},zw={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};var Bk=class extends bl{constructor(t,e={},n,r){super(t,e,r,"storage"),this.bucketId=n}async uploadOrUpdate(t,e,n,r){var s=this;return s.handleOperation(async()=>{let o;const c=Me(Me({},zw),r);let h=Me(Me({},s.headers),t==="POST"&&{"x-upsert":String(c.upsert)});const g=c.metadata;typeof Blob<"u"&&n instanceof Blob?(o=new FormData,o.append("cacheControl",c.cacheControl),g&&o.append("metadata",s.encodeMetadata(g)),o.append("",n)):typeof FormData<"u"&&n instanceof FormData?(o=n,o.has("cacheControl")||o.append("cacheControl",c.cacheControl),g&&!o.has("metadata")&&o.append("metadata",s.encodeMetadata(g))):(o=n,h["cache-control"]=`max-age=${c.cacheControl}`,h["content-type"]=c.contentType,g&&(h["x-metadata"]=s.toBase64(s.encodeMetadata(g))),(typeof ReadableStream<"u"&&o instanceof ReadableStream||o&&typeof o=="object"&&"pipe"in o&&typeof o.pipe=="function")&&!c.duplex&&(c.duplex="half")),r!=null&&r.headers&&(h=Me(Me({},h),r.headers));const p=s._removeEmptyFolders(e),y=s._getFinalPath(p),x=await(t=="PUT"?$1:Yr)(s.fetch,`${s.url}/object/${y}`,o,Me({headers:h},c!=null&&c.duplex?{duplex:c.duplex}:{}));return{path:p,id:x.Id,fullPath:x.Key}})}async upload(t,e,n){return this.uploadOrUpdate("POST",t,e,n)}async uploadToSignedUrl(t,e,n,r){var s=this;const o=s._removeEmptyFolders(t),c=s._getFinalPath(o),h=new URL(s.url+`/object/upload/sign/${c}`);return h.searchParams.set("token",e),s.handleOperation(async()=>{let g;const p=Me({upsert:zw.upsert},r),y=Me(Me({},s.headers),{"x-upsert":String(p.upsert)});return typeof Blob<"u"&&n instanceof Blob?(g=new FormData,g.append("cacheControl",p.cacheControl),g.append("",n)):typeof FormData<"u"&&n instanceof FormData?(g=n,g.append("cacheControl",p.cacheControl)):(g=n,y["cache-control"]=`max-age=${p.cacheControl}`,y["content-type"]=p.contentType),{path:o,fullPath:(await $1(s.fetch,h.toString(),g,{headers:y})).Key}})}async createSignedUploadUrl(t,e){var n=this;return n.handleOperation(async()=>{let r=n._getFinalPath(t);const s=Me({},n.headers);e!=null&&e.upsert&&(s["x-upsert"]="true");const o=await Yr(n.fetch,`${n.url}/object/upload/sign/${r}`,{},{headers:s}),c=new URL(n.url+o.url),h=c.searchParams.get("token");if(!h)throw new nf("No token returned by API");return{signedUrl:c.toString(),path:t,token:h}})}async update(t,e,n){return this.uploadOrUpdate("PUT",t,e,n)}async move(t,e,n){var r=this;return r.handleOperation(async()=>await Yr(r.fetch,`${r.url}/object/move`,{bucketId:r.bucketId,sourceKey:t,destinationKey:e,destinationBucket:n==null?void 0:n.destinationBucket},{headers:r.headers}))}async copy(t,e,n){var r=this;return r.handleOperation(async()=>({path:(await Yr(r.fetch,`${r.url}/object/copy`,{bucketId:r.bucketId,sourceKey:t,destinationKey:e,destinationBucket:n==null?void 0:n.destinationBucket},{headers:r.headers})).Key}))}async createSignedUrl(t,e,n){var r=this;return r.handleOperation(async()=>{let s=r._getFinalPath(t),o=await Yr(r.fetch,`${r.url}/object/sign/${s}`,Me({expiresIn:e},n!=null&&n.transform?{transform:n.transform}:{}),{headers:r.headers});const c=n!=null&&n.download?`&download=${n.download===!0?"":n.download}`:"";return{signedUrl:encodeURI(`${r.url}${o.signedURL}${c}`)}})}async createSignedUrls(t,e,n){var r=this;return r.handleOperation(async()=>{const s=await Yr(r.fetch,`${r.url}/object/sign/${r.bucketId}`,{expiresIn:e,paths:t},{headers:r.headers}),o=n!=null&&n.download?`&download=${n.download===!0?"":n.download}`:"";return s.map(c=>Me(Me({},c),{},{signedUrl:c.signedURL?encodeURI(`${r.url}${c.signedURL}${o}`):null}))})}download(t,e,n){const r=typeof(e==null?void 0:e.transform)<"u"?"render/image/authenticated":"object",s=this.transformOptsToQueryString((e==null?void 0:e.transform)||{}),o=s?`?${s}`:"",c=this._getFinalPath(t),h=()=>$c(this.fetch,`${this.url}/${r}/${c}${o}`,{headers:this.headers,noResolveJson:!0},n);return new Pk(h,this.shouldThrowOnError)}async info(t){var e=this;const n=e._getFinalPath(t);return e.handleOperation(async()=>W1(await $c(e.fetch,`${e.url}/object/info/${n}`,{headers:e.headers})))}async exists(t){var e=this;const n=e._getFinalPath(t);try{return await Mk(e.fetch,`${e.url}/object/${n}`,{headers:e.headers}),{data:!0,error:null}}catch(r){if(e.shouldThrowOnError)throw r;if(rf(r)&&r instanceof lS){const s=r.originalError;if([400,404].includes(s==null?void 0:s.status))return{data:!1,error:r}}throw r}}getPublicUrl(t,e){const n=this._getFinalPath(t),r=[],s=e!=null&&e.download?`download=${e.download===!0?"":e.download}`:"";s!==""&&r.push(s);const o=typeof(e==null?void 0:e.transform)<"u"?"render/image":"object",c=this.transformOptsToQueryString((e==null?void 0:e.transform)||{});c!==""&&r.push(c);let h=r.join("&");return h!==""&&(h=`?${h}`),{data:{publicUrl:encodeURI(`${this.url}/${o}/public/${n}${h}`)}}}async remove(t){var e=this;return e.handleOperation(async()=>await Hg(e.fetch,`${e.url}/object/${e.bucketId}`,{prefixes:t},{headers:e.headers}))}async list(t,e,n){var r=this;return r.handleOperation(async()=>{const s=Me(Me(Me({},Lk),e),{},{prefix:t||""});return await Yr(r.fetch,`${r.url}/object/list/${r.bucketId}`,s,{headers:r.headers},n)})}async listV2(t,e){var n=this;return n.handleOperation(async()=>{const r=Me({},t);return await Yr(n.fetch,`${n.url}/object/list-v2/${n.bucketId}`,r,{headers:n.headers},e)})}encodeMetadata(t){return JSON.stringify(t)}toBase64(t){return typeof Buffer<"u"?Buffer.from(t).toString("base64"):btoa(t)}_getFinalPath(t){return`${this.bucketId}/${t.replace(/^\/+/,"")}`}_removeEmptyFolders(t){return t.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(t){const e=[];return t.width&&e.push(`width=${t.width}`),t.height&&e.push(`height=${t.height}`),t.resize&&e.push(`resize=${t.resize}`),t.format&&e.push(`format=${t.format}`),t.quality&&e.push(`quality=${t.quality}`),e.join("&")}};const Fk="2.95.3",fu={"X-Client-Info":`storage-js/${Fk}`};var jk=class extends bl{constructor(t,e={},n,r){const s=new URL(t);r!=null&&r.useNewHostname&&/supabase\.(co|in|red)$/.test(s.hostname)&&!s.hostname.includes("storage.supabase.")&&(s.hostname=s.hostname.replace("supabase.","storage.supabase."));const o=s.href.replace(/\/$/,""),c=Me(Me({},fu),e);super(o,c,n,"storage")}async listBuckets(t){var e=this;return e.handleOperation(async()=>{const n=e.listBucketOptionsToQueryString(t);return await $c(e.fetch,`${e.url}/bucket${n}`,{headers:e.headers})})}async getBucket(t){var e=this;return e.handleOperation(async()=>await $c(e.fetch,`${e.url}/bucket/${t}`,{headers:e.headers}))}async createBucket(t,e={public:!1}){var n=this;return n.handleOperation(async()=>await Yr(n.fetch,`${n.url}/bucket`,{id:t,name:t,type:e.type,public:e.public,file_size_limit:e.fileSizeLimit,allowed_mime_types:e.allowedMimeTypes},{headers:n.headers}))}async updateBucket(t,e){var n=this;return n.handleOperation(async()=>await $1(n.fetch,`${n.url}/bucket/${t}`,{id:t,name:t,public:e.public,file_size_limit:e.fileSizeLimit,allowed_mime_types:e.allowedMimeTypes},{headers:n.headers}))}async emptyBucket(t){var e=this;return e.handleOperation(async()=>await Yr(e.fetch,`${e.url}/bucket/${t}/empty`,{},{headers:e.headers}))}async deleteBucket(t){var e=this;return e.handleOperation(async()=>await Hg(e.fetch,`${e.url}/bucket/${t}`,{},{headers:e.headers}))}listBucketOptionsToQueryString(t){const e={};return t&&("limit"in t&&(e.limit=String(t.limit)),"offset"in t&&(e.offset=String(t.offset)),t.search&&(e.search=t.search),t.sortColumn&&(e.sortColumn=t.sortColumn),t.sortOrder&&(e.sortOrder=t.sortOrder)),Object.keys(e).length>0?"?"+new URLSearchParams(e).toString():""}},Uk=class extends bl{constructor(t,e={},n){const r=t.replace(/\/$/,""),s=Me(Me({},fu),e);super(r,s,n,"storage")}async createBucket(t){var e=this;return e.handleOperation(async()=>await Yr(e.fetch,`${e.url}/bucket`,{name:t},{headers:e.headers}))}async listBuckets(t){var e=this;return e.handleOperation(async()=>{const n=new URLSearchParams;(t==null?void 0:t.limit)!==void 0&&n.set("limit",t.limit.toString()),(t==null?void 0:t.offset)!==void 0&&n.set("offset",t.offset.toString()),t!=null&&t.sortColumn&&n.set("sortColumn",t.sortColumn),t!=null&&t.sortOrder&&n.set("sortOrder",t.sortOrder),t!=null&&t.search&&n.set("search",t.search);const r=n.toString(),s=r?`${e.url}/bucket?${r}`:`${e.url}/bucket`;return await $c(e.fetch,s,{headers:e.headers})})}async deleteBucket(t){var e=this;return e.handleOperation(async()=>await Hg(e.fetch,`${e.url}/bucket/${t}`,{},{headers:e.headers}))}from(t){var e=this;if(!_k(t))throw new nf("Invalid bucket name: File, folder, and bucket names must follow AWS object key naming guidelines and should avoid the use of any other characters.");const n=new Ck({baseUrl:this.url,catalogName:t,auth:{type:"custom",getHeaders:async()=>e.headers},fetch:this.fetch}),r=this.shouldThrowOnError;return new Proxy(n,{get(s,o){const c=s[o];return typeof c!="function"?c:async(...h)=>{try{return{data:await c.apply(s,h),error:null}}catch(g){if(r)throw g;return{data:null,error:g}}}}})}},Vk=class extends bl{constructor(t,e={},n){const r=t.replace(/\/$/,""),s=Me(Me({},fu),{},{"Content-Type":"application/json"},e);super(r,s,n,"vectors")}async createIndex(t){var e=this;return e.handleOperation(async()=>await cr.post(e.fetch,`${e.url}/CreateIndex`,t,{headers:e.headers})||{})}async getIndex(t,e){var n=this;return n.handleOperation(async()=>await cr.post(n.fetch,`${n.url}/GetIndex`,{vectorBucketName:t,indexName:e},{headers:n.headers}))}async listIndexes(t){var e=this;return e.handleOperation(async()=>await cr.post(e.fetch,`${e.url}/ListIndexes`,t,{headers:e.headers}))}async deleteIndex(t,e){var n=this;return n.handleOperation(async()=>await cr.post(n.fetch,`${n.url}/DeleteIndex`,{vectorBucketName:t,indexName:e},{headers:n.headers})||{})}},zk=class extends bl{constructor(t,e={},n){const r=t.replace(/\/$/,""),s=Me(Me({},fu),{},{"Content-Type":"application/json"},e);super(r,s,n,"vectors")}async putVectors(t){var e=this;if(t.vectors.length<1||t.vectors.length>500)throw new Error("Vector batch size must be between 1 and 500 items");return e.handleOperation(async()=>await cr.post(e.fetch,`${e.url}/PutVectors`,t,{headers:e.headers})||{})}async getVectors(t){var e=this;return e.handleOperation(async()=>await cr.post(e.fetch,`${e.url}/GetVectors`,t,{headers:e.headers}))}async listVectors(t){var e=this;if(t.segmentCount!==void 0){if(t.segmentCount<1||t.segmentCount>16)throw new Error("segmentCount must be between 1 and 16");if(t.segmentIndex!==void 0&&(t.segmentIndex<0||t.segmentIndex>=t.segmentCount))throw new Error(`segmentIndex must be between 0 and ${t.segmentCount-1}`)}return e.handleOperation(async()=>await cr.post(e.fetch,`${e.url}/ListVectors`,t,{headers:e.headers}))}async queryVectors(t){var e=this;return e.handleOperation(async()=>await cr.post(e.fetch,`${e.url}/QueryVectors`,t,{headers:e.headers}))}async deleteVectors(t){var e=this;if(t.keys.length<1||t.keys.length>500)throw new Error("Keys batch size must be between 1 and 500 items");return e.handleOperation(async()=>await cr.post(e.fetch,`${e.url}/DeleteVectors`,t,{headers:e.headers})||{})}},Hk=class extends bl{constructor(t,e={},n){const r=t.replace(/\/$/,""),s=Me(Me({},fu),{},{"Content-Type":"application/json"},e);super(r,s,n,"vectors")}async createBucket(t){var e=this;return e.handleOperation(async()=>await cr.post(e.fetch,`${e.url}/CreateVectorBucket`,{vectorBucketName:t},{headers:e.headers})||{})}async getBucket(t){var e=this;return e.handleOperation(async()=>await cr.post(e.fetch,`${e.url}/GetVectorBucket`,{vectorBucketName:t},{headers:e.headers}))}async listBuckets(t={}){var e=this;return e.handleOperation(async()=>await cr.post(e.fetch,`${e.url}/ListVectorBuckets`,t,{headers:e.headers}))}async deleteBucket(t){var e=this;return e.handleOperation(async()=>await cr.post(e.fetch,`${e.url}/DeleteVectorBucket`,{vectorBucketName:t},{headers:e.headers})||{})}},Wk=class extends Hk{constructor(t,e={}){super(t,e.headers||{},e.fetch)}from(t){return new $k(this.url,this.headers,t,this.fetch)}async createBucket(t){var e=()=>super.createBucket,n=this;return e().call(n,t)}async getBucket(t){var e=()=>super.getBucket,n=this;return e().call(n,t)}async listBuckets(t={}){var e=()=>super.listBuckets,n=this;return e().call(n,t)}async deleteBucket(t){var e=()=>super.deleteBucket,n=this;return e().call(n,t)}},$k=class extends Vk{constructor(t,e,n,r){super(t,e,r),this.vectorBucketName=n}async createIndex(t){var e=()=>super.createIndex,n=this;return e().call(n,Me(Me({},t),{},{vectorBucketName:n.vectorBucketName}))}async listIndexes(t={}){var e=()=>super.listIndexes,n=this;return e().call(n,Me(Me({},t),{},{vectorBucketName:n.vectorBucketName}))}async getIndex(t){var e=()=>super.getIndex,n=this;return e().call(n,n.vectorBucketName,t)}async deleteIndex(t){var e=()=>super.deleteIndex,n=this;return e().call(n,n.vectorBucketName,t)}index(t){return new Gk(this.url,this.headers,this.vectorBucketName,t,this.fetch)}},Gk=class extends zk{constructor(t,e,n,r,s){super(t,e,s),this.vectorBucketName=n,this.indexName=r}async putVectors(t){var e=()=>super.putVectors,n=this;return e().call(n,Me(Me({},t),{},{vectorBucketName:n.vectorBucketName,indexName:n.indexName}))}async getVectors(t){var e=()=>super.getVectors,n=this;return e().call(n,Me(Me({},t),{},{vectorBucketName:n.vectorBucketName,indexName:n.indexName}))}async listVectors(t={}){var e=()=>super.listVectors,n=this;return e().call(n,Me(Me({},t),{},{vectorBucketName:n.vectorBucketName,indexName:n.indexName}))}async queryVectors(t){var e=()=>super.queryVectors,n=this;return e().call(n,Me(Me({},t),{},{vectorBucketName:n.vectorBucketName,indexName:n.indexName}))}async deleteVectors(t){var e=()=>super.deleteVectors,n=this;return e().call(n,Me(Me({},t),{},{vectorBucketName:n.vectorBucketName,indexName:n.indexName}))}},Yk=class extends jk{constructor(t,e={},n,r){super(t,e,n,r)}from(t){return new Bk(this.url,this.headers,t,this.fetch)}get vectors(){return new Wk(this.url+"/vector",{headers:this.headers,fetch:this.fetch})}get analytics(){return new Uk(this.url+"/iceberg",this.headers,this.fetch)}};const dS="2.95.3",ha=30*1e3,G1=3,d0=G1*ha,Xk="http://localhost:9999",Kk="supabase.auth.token",qk={"X-Client-Info":`gotrue-js/${dS}`},Y1="X-Supabase-Api-Version",hS={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},Zk=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,Qk=10*60*1e3;class Gc extends Error{constructor(e,n,r){super(e),this.__isAuthError=!0,this.name="AuthError",this.status=n,this.code=r}}function Ae(t){return typeof t=="object"&&t!==null&&"__isAuthError"in t}class Jk extends Gc{constructor(e,n,r){super(e,n,r),this.name="AuthApiError",this.status=n,this.code=r}}function eM(t){return Ae(t)&&t.name==="AuthApiError"}class vo extends Gc{constructor(e,n){super(e),this.name="AuthUnknownError",this.originalError=n}}class ts extends Gc{constructor(e,n,r,s){super(e,r,s),this.name=n,this.status=r}}class ir extends ts{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function h0(t){return Ae(t)&&t.name==="AuthSessionMissingError"}class oa extends ts{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class td extends ts{constructor(e){super(e,"AuthInvalidCredentialsError",400,void 0)}}class nd extends ts{constructor(e,n=null){super(e,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=n}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function tM(t){return Ae(t)&&t.name==="AuthImplicitGrantRedirectError"}class Hw extends ts{constructor(e,n=null){super(e,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=n}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class nM extends ts{constructor(){super("PKCE code verifier not found in storage. This can happen if the auth flow was initiated in a different browser or device, or if the storage was cleared. For SSR frameworks (Next.js, SvelteKit, etc.), use @supabase/ssr on both the server and client to store the code verifier in cookies.","AuthPKCECodeVerifierMissingError",400,"pkce_code_verifier_not_found")}}class X1 extends ts{constructor(e,n){super(e,"AuthRetryableFetchError",n,void 0)}}function f0(t){return Ae(t)&&t.name==="AuthRetryableFetchError"}class Ww extends ts{constructor(e,n,r){super(e,"AuthWeakPasswordError",n,"weak_password"),this.reasons=r}}class K1 extends ts{constructor(e){super(e,"AuthInvalidJwtError",400,"invalid_jwt")}}const lh="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),$w=` 	
\r=`.split(""),rM=(()=>{const t=new Array(128);for(let e=0;e<t.length;e+=1)t[e]=-1;for(let e=0;e<$w.length;e+=1)t[$w[e].charCodeAt(0)]=-2;for(let e=0;e<lh.length;e+=1)t[lh[e].charCodeAt(0)]=e;return t})();function Gw(t,e,n){if(t!==null)for(e.queue=e.queue<<8|t,e.queuedBits+=8;e.queuedBits>=6;){const r=e.queue>>e.queuedBits-6&63;n(lh[r]),e.queuedBits-=6}else if(e.queuedBits>0)for(e.queue=e.queue<<6-e.queuedBits,e.queuedBits=6;e.queuedBits>=6;){const r=e.queue>>e.queuedBits-6&63;n(lh[r]),e.queuedBits-=6}}function fS(t,e,n){const r=rM[t];if(r>-1)for(e.queue=e.queue<<6|r,e.queuedBits+=6;e.queuedBits>=8;)n(e.queue>>e.queuedBits-8&255),e.queuedBits-=8;else{if(r===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(t)}"`)}}function Yw(t){const e=[],n=c=>{e.push(String.fromCodePoint(c))},r={utf8seq:0,codepoint:0},s={queue:0,queuedBits:0},o=c=>{oM(c,r,n)};for(let c=0;c<t.length;c+=1)fS(t.charCodeAt(c),s,o);return e.join("")}function iM(t,e){if(t<=127){e(t);return}else if(t<=2047){e(192|t>>6),e(128|t&63);return}else if(t<=65535){e(224|t>>12),e(128|t>>6&63),e(128|t&63);return}else if(t<=1114111){e(240|t>>18),e(128|t>>12&63),e(128|t>>6&63),e(128|t&63);return}throw new Error(`Unrecognized Unicode codepoint: ${t.toString(16)}`)}function sM(t,e){for(let n=0;n<t.length;n+=1){let r=t.charCodeAt(n);if(r>55295&&r<=56319){const s=(r-55296)*1024&65535;r=(t.charCodeAt(n+1)-56320&65535|s)+65536,n+=1}iM(r,e)}}function oM(t,e,n){if(e.utf8seq===0){if(t<=127){n(t);return}for(let r=1;r<6;r+=1)if(!(t>>7-r&1)){e.utf8seq=r;break}if(e.utf8seq===2)e.codepoint=t&31;else if(e.utf8seq===3)e.codepoint=t&15;else if(e.utf8seq===4)e.codepoint=t&7;else throw new Error("Invalid UTF-8 sequence");e.utf8seq-=1}else if(e.utf8seq>0){if(t<=127)throw new Error("Invalid UTF-8 sequence");e.codepoint=e.codepoint<<6|t&63,e.utf8seq-=1,e.utf8seq===0&&n(e.codepoint)}}function Ha(t){const e=[],n={queue:0,queuedBits:0},r=s=>{e.push(s)};for(let s=0;s<t.length;s+=1)fS(t.charCodeAt(s),n,r);return new Uint8Array(e)}function aM(t){const e=[];return sM(t,n=>e.push(n)),new Uint8Array(e)}function So(t){const e=[],n={queue:0,queuedBits:0},r=s=>{e.push(s)};return t.forEach(s=>Gw(s,n,r)),Gw(null,n,r),e.join("")}function lM(t){return Math.round(Date.now()/1e3)+t}function cM(){return Symbol("auth-callback")}const yn=()=>typeof window<"u"&&typeof document<"u",ho={tested:!1,writable:!1},pS=()=>{if(!yn())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(ho.tested)return ho.writable;const t=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(t,t),globalThis.localStorage.removeItem(t),ho.tested=!0,ho.writable=!0}catch{ho.tested=!0,ho.writable=!1}return ho.writable};function uM(t){const e={},n=new URL(t);if(n.hash&&n.hash[0]==="#")try{new URLSearchParams(n.hash.substring(1)).forEach((s,o)=>{e[o]=s})}catch{}return n.searchParams.forEach((r,s)=>{e[s]=r}),e}const gS=t=>t?(...e)=>t(...e):(...e)=>fetch(...e),dM=t=>typeof t=="object"&&t!==null&&"status"in t&&"ok"in t&&"json"in t&&typeof t.json=="function",fa=async(t,e,n)=>{await t.setItem(e,JSON.stringify(n))},fo=async(t,e)=>{const n=await t.getItem(e);if(!n)return null;try{return JSON.parse(n)}catch{return n}},mn=async(t,e)=>{await t.removeItem(e)};class sf{constructor(){this.promise=new sf.promiseConstructor((e,n)=>{this.resolve=e,this.reject=n})}}sf.promiseConstructor=Promise;function rd(t){const e=t.split(".");if(e.length!==3)throw new K1("Invalid JWT structure");for(let r=0;r<e.length;r++)if(!Zk.test(e[r]))throw new K1("JWT not in base64url format");return{header:JSON.parse(Yw(e[0])),payload:JSON.parse(Yw(e[1])),signature:Ha(e[2]),raw:{header:e[0],payload:e[1]}}}async function hM(t){return await new Promise(e=>{setTimeout(()=>e(null),t)})}function fM(t,e){return new Promise((r,s)=>{(async()=>{for(let o=0;o<1/0;o++)try{const c=await t(o);if(!e(o,null,c)){r(c);return}}catch(c){if(!e(o,c)){s(c);return}}})()})}function pM(t){return("0"+t.toString(16)).substr(-2)}function gM(){const e=new Uint32Array(56);if(typeof crypto>"u"){const n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",r=n.length;let s="";for(let o=0;o<56;o++)s+=n.charAt(Math.floor(Math.random()*r));return s}return crypto.getRandomValues(e),Array.from(e,pM).join("")}async function mM(t){const n=new TextEncoder().encode(t),r=await crypto.subtle.digest("SHA-256",n),s=new Uint8Array(r);return Array.from(s).map(o=>String.fromCharCode(o)).join("")}async function yM(t){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),t;const n=await mM(t);return btoa(n).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function aa(t,e,n=!1){const r=gM();let s=r;n&&(s+="/PASSWORD_RECOVERY"),await fa(t,`${e}-code-verifier`,s);const o=await yM(r);return[o,r===o?"plain":"s256"]}const wM=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function xM(t){const e=t.headers.get(Y1);if(!e||!e.match(wM))return null;try{return new Date(`${e}T00:00:00.0Z`)}catch{return null}}function vM(t){if(!t)throw new Error("Missing exp claim");const e=Math.floor(Date.now()/1e3);if(t<=e)throw new Error("JWT has expired")}function EM(t){switch(t){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}const bM=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function la(t){if(!bM.test(t))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}function p0(){const t={};return new Proxy(t,{get:(e,n)=>{if(n==="__isUserNotAvailableProxy")return!0;if(typeof n=="symbol"){const r=n.toString();if(r==="Symbol(Symbol.toPrimitive)"||r==="Symbol(Symbol.toStringTag)"||r==="Symbol(util.inspect.custom)")return}throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Accessing the "${n}" property of the session object is not supported. Please use getUser() instead.`)},set:(e,n)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Setting the "${n}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)},deleteProperty:(e,n)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Deleting the "${n}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)}})}function CM(t,e){return new Proxy(t,{get:(n,r,s)=>{if(r==="__isInsecureUserWarningProxy")return!0;if(typeof r=="symbol"){const o=r.toString();if(o==="Symbol(Symbol.toPrimitive)"||o==="Symbol(Symbol.toStringTag)"||o==="Symbol(util.inspect.custom)"||o==="Symbol(nodejs.util.inspect.custom)")return Reflect.get(n,r,s)}return!e.value&&typeof r=="string"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),e.value=!0),Reflect.get(n,r,s)}})}function Xw(t){return JSON.parse(JSON.stringify(t))}const yo=t=>t.msg||t.message||t.error_description||t.error||JSON.stringify(t),SM=[502,503,504];async function Kw(t){var e;if(!dM(t))throw new X1(yo(t),0);if(SM.includes(t.status))throw new X1(yo(t),t.status);let n;try{n=await t.json()}catch(o){throw new vo(yo(o),o)}let r;const s=xM(t);if(s&&s.getTime()>=hS["2024-01-01"].timestamp&&typeof n=="object"&&n&&typeof n.code=="string"?r=n.code:typeof n=="object"&&n&&typeof n.error_code=="string"&&(r=n.error_code),r){if(r==="weak_password")throw new Ww(yo(n),t.status,((e=n.weak_password)===null||e===void 0?void 0:e.reasons)||[]);if(r==="session_not_found")throw new ir}else if(typeof n=="object"&&n&&typeof n.weak_password=="object"&&n.weak_password&&Array.isArray(n.weak_password.reasons)&&n.weak_password.reasons.length&&n.weak_password.reasons.reduce((o,c)=>o&&typeof c=="string",!0))throw new Ww(yo(n),t.status,n.weak_password.reasons);throw new Jk(yo(n),t.status||500,r)}const AM=(t,e,n,r)=>{const s={method:t,headers:(e==null?void 0:e.headers)||{}};return t==="GET"?s:(s.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},e==null?void 0:e.headers),s.body=JSON.stringify(r),Object.assign(Object.assign({},s),n))};async function Oe(t,e,n,r){var s;const o=Object.assign({},r==null?void 0:r.headers);o[Y1]||(o[Y1]=hS["2024-01-01"].name),r!=null&&r.jwt&&(o.Authorization=`Bearer ${r.jwt}`);const c=(s=r==null?void 0:r.query)!==null&&s!==void 0?s:{};r!=null&&r.redirectTo&&(c.redirect_to=r.redirectTo);const h=Object.keys(c).length?"?"+new URLSearchParams(c).toString():"",g=await _M(t,e,n+h,{headers:o,noResolveJson:r==null?void 0:r.noResolveJson},{},r==null?void 0:r.body);return r!=null&&r.xform?r==null?void 0:r.xform(g):{data:Object.assign({},g),error:null}}async function _M(t,e,n,r,s,o){const c=AM(e,r,s,o);let h;try{h=await t(n,Object.assign({},c))}catch(g){throw console.error(g),new X1(yo(g),0)}if(h.ok||await Kw(h),r!=null&&r.noResolveJson)return h;try{return await h.json()}catch(g){await Kw(g)}}function Hr(t){var e;let n=null;RM(t)&&(n=Object.assign({},t),t.expires_at||(n.expires_at=lM(t.expires_in)));const r=(e=t.user)!==null&&e!==void 0?e:t;return{data:{session:n,user:r},error:null}}function qw(t){const e=Hr(t);return!e.error&&t.weak_password&&typeof t.weak_password=="object"&&Array.isArray(t.weak_password.reasons)&&t.weak_password.reasons.length&&t.weak_password.message&&typeof t.weak_password.message=="string"&&t.weak_password.reasons.reduce((n,r)=>n&&typeof r=="string",!0)&&(e.data.weak_password=t.weak_password),e}function Es(t){var e;return{data:{user:(e=t.user)!==null&&e!==void 0?e:t},error:null}}function TM(t){return{data:t,error:null}}function IM(t){const{action_link:e,email_otp:n,hashed_token:r,redirect_to:s,verification_type:o}=t,c=tf(t,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),h={action_link:e,email_otp:n,hashed_token:r,redirect_to:s,verification_type:o},g=Object.assign({},c);return{data:{properties:h,user:g},error:null}}function Zw(t){return t}function RM(t){return t.access_token&&t.refresh_token&&t.expires_in}const g0=["global","local","others"];class NM{constructor({url:e="",headers:n={},fetch:r}){this.url=e,this.headers=n,this.fetch=gS(r),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)},this.oauth={listClients:this._listOAuthClients.bind(this),createClient:this._createOAuthClient.bind(this),getClient:this._getOAuthClient.bind(this),updateClient:this._updateOAuthClient.bind(this),deleteClient:this._deleteOAuthClient.bind(this),regenerateClientSecret:this._regenerateOAuthClientSecret.bind(this)}}async signOut(e,n=g0[0]){if(g0.indexOf(n)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${g0.join(", ")}`);try{return await Oe(this.fetch,"POST",`${this.url}/logout?scope=${n}`,{headers:this.headers,jwt:e,noResolveJson:!0}),{data:null,error:null}}catch(r){if(Ae(r))return{data:null,error:r};throw r}}async inviteUserByEmail(e,n={}){try{return await Oe(this.fetch,"POST",`${this.url}/invite`,{body:{email:e,data:n.data},headers:this.headers,redirectTo:n.redirectTo,xform:Es})}catch(r){if(Ae(r))return{data:{user:null},error:r};throw r}}async generateLink(e){try{const{options:n}=e,r=tf(e,["options"]),s=Object.assign(Object.assign({},r),n);return"newEmail"in r&&(s.new_email=r==null?void 0:r.newEmail,delete s.newEmail),await Oe(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:s,headers:this.headers,xform:IM,redirectTo:n==null?void 0:n.redirectTo})}catch(n){if(Ae(n))return{data:{properties:null,user:null},error:n};throw n}}async createUser(e){try{return await Oe(this.fetch,"POST",`${this.url}/admin/users`,{body:e,headers:this.headers,xform:Es})}catch(n){if(Ae(n))return{data:{user:null},error:n};throw n}}async listUsers(e){var n,r,s,o,c,h,g;try{const p={nextPage:null,lastPage:0,total:0},y=await Oe(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(r=(n=e==null?void 0:e.page)===null||n===void 0?void 0:n.toString())!==null&&r!==void 0?r:"",per_page:(o=(s=e==null?void 0:e.perPage)===null||s===void 0?void 0:s.toString())!==null&&o!==void 0?o:""},xform:Zw});if(y.error)throw y.error;const x=await y.json(),E=(c=y.headers.get("x-total-count"))!==null&&c!==void 0?c:0,b=(g=(h=y.headers.get("link"))===null||h===void 0?void 0:h.split(","))!==null&&g!==void 0?g:[];return b.length>0&&(b.forEach(I=>{const S=parseInt(I.split(";")[0].split("=")[1].substring(0,1)),R=JSON.parse(I.split(";")[1].split("=")[1]);p[`${R}Page`]=S}),p.total=parseInt(E)),{data:Object.assign(Object.assign({},x),p),error:null}}catch(p){if(Ae(p))return{data:{users:[]},error:p};throw p}}async getUserById(e){la(e);try{return await Oe(this.fetch,"GET",`${this.url}/admin/users/${e}`,{headers:this.headers,xform:Es})}catch(n){if(Ae(n))return{data:{user:null},error:n};throw n}}async updateUserById(e,n){la(e);try{return await Oe(this.fetch,"PUT",`${this.url}/admin/users/${e}`,{body:n,headers:this.headers,xform:Es})}catch(r){if(Ae(r))return{data:{user:null},error:r};throw r}}async deleteUser(e,n=!1){la(e);try{return await Oe(this.fetch,"DELETE",`${this.url}/admin/users/${e}`,{headers:this.headers,body:{should_soft_delete:n},xform:Es})}catch(r){if(Ae(r))return{data:{user:null},error:r};throw r}}async _listFactors(e){la(e.userId);try{const{data:n,error:r}=await Oe(this.fetch,"GET",`${this.url}/admin/users/${e.userId}/factors`,{headers:this.headers,xform:s=>({data:{factors:s},error:null})});return{data:n,error:r}}catch(n){if(Ae(n))return{data:null,error:n};throw n}}async _deleteFactor(e){la(e.userId),la(e.id);try{return{data:await Oe(this.fetch,"DELETE",`${this.url}/admin/users/${e.userId}/factors/${e.id}`,{headers:this.headers}),error:null}}catch(n){if(Ae(n))return{data:null,error:n};throw n}}async _listOAuthClients(e){var n,r,s,o,c,h,g;try{const p={nextPage:null,lastPage:0,total:0},y=await Oe(this.fetch,"GET",`${this.url}/admin/oauth/clients`,{headers:this.headers,noResolveJson:!0,query:{page:(r=(n=e==null?void 0:e.page)===null||n===void 0?void 0:n.toString())!==null&&r!==void 0?r:"",per_page:(o=(s=e==null?void 0:e.perPage)===null||s===void 0?void 0:s.toString())!==null&&o!==void 0?o:""},xform:Zw});if(y.error)throw y.error;const x=await y.json(),E=(c=y.headers.get("x-total-count"))!==null&&c!==void 0?c:0,b=(g=(h=y.headers.get("link"))===null||h===void 0?void 0:h.split(","))!==null&&g!==void 0?g:[];return b.length>0&&(b.forEach(I=>{const S=parseInt(I.split(";")[0].split("=")[1].substring(0,1)),R=JSON.parse(I.split(";")[1].split("=")[1]);p[`${R}Page`]=S}),p.total=parseInt(E)),{data:Object.assign(Object.assign({},x),p),error:null}}catch(p){if(Ae(p))return{data:{clients:[]},error:p};throw p}}async _createOAuthClient(e){try{return await Oe(this.fetch,"POST",`${this.url}/admin/oauth/clients`,{body:e,headers:this.headers,xform:n=>({data:n,error:null})})}catch(n){if(Ae(n))return{data:null,error:n};throw n}}async _getOAuthClient(e){try{return await Oe(this.fetch,"GET",`${this.url}/admin/oauth/clients/${e}`,{headers:this.headers,xform:n=>({data:n,error:null})})}catch(n){if(Ae(n))return{data:null,error:n};throw n}}async _updateOAuthClient(e,n){try{return await Oe(this.fetch,"PUT",`${this.url}/admin/oauth/clients/${e}`,{body:n,headers:this.headers,xform:r=>({data:r,error:null})})}catch(r){if(Ae(r))return{data:null,error:r};throw r}}async _deleteOAuthClient(e){try{return await Oe(this.fetch,"DELETE",`${this.url}/admin/oauth/clients/${e}`,{headers:this.headers,noResolveJson:!0}),{data:null,error:null}}catch(n){if(Ae(n))return{data:null,error:n};throw n}}async _regenerateOAuthClientSecret(e){try{return await Oe(this.fetch,"POST",`${this.url}/admin/oauth/clients/${e}/regenerate_secret`,{headers:this.headers,xform:n=>({data:n,error:null})})}catch(n){if(Ae(n))return{data:null,error:n};throw n}}}function Qw(t={}){return{getItem:e=>t[e]||null,setItem:(e,n)=>{t[e]=n},removeItem:e=>{delete t[e]}}}const ca={debug:!!(globalThis&&pS()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class mS extends Error{constructor(e){super(e),this.isAcquireTimeout=!0}}class OM extends mS{}async function kM(t,e,n){ca.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",t,e);const r=new globalThis.AbortController;return e>0&&setTimeout(()=>{r.abort(),ca.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",t)},e),await Promise.resolve().then(()=>globalThis.navigator.locks.request(t,e===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:r.signal},async s=>{if(s){ca.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",t,s.name);try{return await n()}finally{ca.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",t,s.name)}}else{if(e===0)throw ca.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",t),new OM(`Acquiring an exclusive Navigator LockManager lock "${t}" immediately failed`);if(ca.debug)try{const o=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(o,null,"  "))}catch(o){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",o)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await n()}}))}function MM(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}function yS(t){if(!/^0x[a-fA-F0-9]{40}$/.test(t))throw new Error(`@supabase/auth-js: Address "${t}" is invalid.`);return t.toLowerCase()}function DM(t){return parseInt(t,16)}function PM(t){const e=new TextEncoder().encode(t);return"0x"+Array.from(e,r=>r.toString(16).padStart(2,"0")).join("")}function LM(t){var e;const{chainId:n,domain:r,expirationTime:s,issuedAt:o=new Date,nonce:c,notBefore:h,requestId:g,resources:p,scheme:y,uri:x,version:E}=t;{if(!Number.isInteger(n))throw new Error(`@supabase/auth-js: Invalid SIWE message field "chainId". Chain ID must be a EIP-155 chain ID. Provided value: ${n}`);if(!r)throw new Error('@supabase/auth-js: Invalid SIWE message field "domain". Domain must be provided.');if(c&&c.length<8)throw new Error(`@supabase/auth-js: Invalid SIWE message field "nonce". Nonce must be at least 8 characters. Provided value: ${c}`);if(!x)throw new Error('@supabase/auth-js: Invalid SIWE message field "uri". URI must be provided.');if(E!=="1")throw new Error(`@supabase/auth-js: Invalid SIWE message field "version". Version must be '1'. Provided value: ${E}`);if(!((e=t.statement)===null||e===void 0)&&e.includes(`
`))throw new Error(`@supabase/auth-js: Invalid SIWE message field "statement". Statement must not include '\\n'. Provided value: ${t.statement}`)}const b=yS(t.address),I=y?`${y}://${r}`:r,S=t.statement?`${t.statement}
`:"",R=`${I} wants you to sign in with your Ethereum account:
${b}

${S}`;let A=`URI: ${x}
Version: ${E}
Chain ID: ${n}${c?`
Nonce: ${c}`:""}
Issued At: ${o.toISOString()}`;if(s&&(A+=`
Expiration Time: ${s.toISOString()}`),h&&(A+=`
Not Before: ${h.toISOString()}`),g&&(A+=`
Request ID: ${g}`),p){let _=`
Resources:`;for(const T of p){if(!T||typeof T!="string")throw new Error(`@supabase/auth-js: Invalid SIWE message field "resources". Every resource must be a valid string. Provided value: ${T}`);_+=`
- ${T}`}A+=_}return`${R}
${A}`}class Yt extends Error{constructor({message:e,code:n,cause:r,name:s}){var o;super(e,{cause:r}),this.__isWebAuthnError=!0,this.name=(o=s??(r instanceof Error?r.name:void 0))!==null&&o!==void 0?o:"Unknown Error",this.code=n}}class ch extends Yt{constructor(e,n){super({code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:n,message:e}),this.name="WebAuthnUnknownError",this.originalError=n}}function BM({error:t,options:e}){var n,r,s;const{publicKey:o}=e;if(!o)throw Error("options was missing required publicKey property");if(t.name==="AbortError"){if(e.signal instanceof AbortSignal)return new Yt({message:"Registration ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:t})}else if(t.name==="ConstraintError"){if(((n=o.authenticatorSelection)===null||n===void 0?void 0:n.requireResidentKey)===!0)return new Yt({message:"Discoverable credentials were required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_DISCOVERABLE_CREDENTIAL_SUPPORT",cause:t});if(e.mediation==="conditional"&&((r=o.authenticatorSelection)===null||r===void 0?void 0:r.userVerification)==="required")return new Yt({message:"User verification was required during automatic registration but it could not be performed",code:"ERROR_AUTO_REGISTER_USER_VERIFICATION_FAILURE",cause:t});if(((s=o.authenticatorSelection)===null||s===void 0?void 0:s.userVerification)==="required")return new Yt({message:"User verification was required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_USER_VERIFICATION_SUPPORT",cause:t})}else{if(t.name==="InvalidStateError")return new Yt({message:"The authenticator was previously registered",code:"ERROR_AUTHENTICATOR_PREVIOUSLY_REGISTERED",cause:t});if(t.name==="NotAllowedError")return new Yt({message:t.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:t});if(t.name==="NotSupportedError")return o.pubKeyCredParams.filter(h=>h.type==="public-key").length===0?new Yt({message:'No entry in pubKeyCredParams was of type "public-key"',code:"ERROR_MALFORMED_PUBKEYCREDPARAMS",cause:t}):new Yt({message:"No available authenticator supported any of the specified pubKeyCredParams algorithms",code:"ERROR_AUTHENTICATOR_NO_SUPPORTED_PUBKEYCREDPARAMS_ALG",cause:t});if(t.name==="SecurityError"){const c=window.location.hostname;if(wS(c)){if(o.rp.id!==c)return new Yt({message:`The RP ID "${o.rp.id}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:t})}else return new Yt({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:t})}else if(t.name==="TypeError"){if(o.user.id.byteLength<1||o.user.id.byteLength>64)return new Yt({message:"User ID was not between 1 and 64 characters",code:"ERROR_INVALID_USER_ID_LENGTH",cause:t})}else if(t.name==="UnknownError")return new Yt({message:"The authenticator was unable to process the specified options, or could not create a new credential",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:t})}return new Yt({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:t})}function FM({error:t,options:e}){const{publicKey:n}=e;if(!n)throw Error("options was missing required publicKey property");if(t.name==="AbortError"){if(e.signal instanceof AbortSignal)return new Yt({message:"Authentication ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:t})}else{if(t.name==="NotAllowedError")return new Yt({message:t.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:t});if(t.name==="SecurityError"){const r=window.location.hostname;if(wS(r)){if(n.rpId!==r)return new Yt({message:`The RP ID "${n.rpId}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:t})}else return new Yt({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:t})}else if(t.name==="UnknownError")return new Yt({message:"The authenticator was unable to process the specified options, or could not create a new assertion signature",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:t})}return new Yt({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:t})}class jM{createNewAbortSignal(){if(this.controller){const n=new Error("Cancelling existing WebAuthn API call for new one");n.name="AbortError",this.controller.abort(n)}const e=new AbortController;return this.controller=e,e.signal}cancelCeremony(){if(this.controller){const e=new Error("Manually cancelling existing WebAuthn API call");e.name="AbortError",this.controller.abort(e),this.controller=void 0}}}const UM=new jM;function VM(t){if(!t)throw new Error("Credential creation options are required");if(typeof PublicKeyCredential<"u"&&"parseCreationOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseCreationOptionsFromJSON=="function")return PublicKeyCredential.parseCreationOptionsFromJSON(t);const{challenge:e,user:n,excludeCredentials:r}=t,s=tf(t,["challenge","user","excludeCredentials"]),o=Ha(e).buffer,c=Object.assign(Object.assign({},n),{id:Ha(n.id).buffer}),h=Object.assign(Object.assign({},s),{challenge:o,user:c});if(r&&r.length>0){h.excludeCredentials=new Array(r.length);for(let g=0;g<r.length;g++){const p=r[g];h.excludeCredentials[g]=Object.assign(Object.assign({},p),{id:Ha(p.id).buffer,type:p.type||"public-key",transports:p.transports})}}return h}function zM(t){if(!t)throw new Error("Credential request options are required");if(typeof PublicKeyCredential<"u"&&"parseRequestOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseRequestOptionsFromJSON=="function")return PublicKeyCredential.parseRequestOptionsFromJSON(t);const{challenge:e,allowCredentials:n}=t,r=tf(t,["challenge","allowCredentials"]),s=Ha(e).buffer,o=Object.assign(Object.assign({},r),{challenge:s});if(n&&n.length>0){o.allowCredentials=new Array(n.length);for(let c=0;c<n.length;c++){const h=n[c];o.allowCredentials[c]=Object.assign(Object.assign({},h),{id:Ha(h.id).buffer,type:h.type||"public-key",transports:h.transports})}}return o}function HM(t){var e;if("toJSON"in t&&typeof t.toJSON=="function")return t.toJSON();const n=t;return{id:t.id,rawId:t.id,response:{attestationObject:So(new Uint8Array(t.response.attestationObject)),clientDataJSON:So(new Uint8Array(t.response.clientDataJSON))},type:"public-key",clientExtensionResults:t.getClientExtensionResults(),authenticatorAttachment:(e=n.authenticatorAttachment)!==null&&e!==void 0?e:void 0}}function WM(t){var e;if("toJSON"in t&&typeof t.toJSON=="function")return t.toJSON();const n=t,r=t.getClientExtensionResults(),s=t.response;return{id:t.id,rawId:t.id,response:{authenticatorData:So(new Uint8Array(s.authenticatorData)),clientDataJSON:So(new Uint8Array(s.clientDataJSON)),signature:So(new Uint8Array(s.signature)),userHandle:s.userHandle?So(new Uint8Array(s.userHandle)):void 0},type:"public-key",clientExtensionResults:r,authenticatorAttachment:(e=n.authenticatorAttachment)!==null&&e!==void 0?e:void 0}}function wS(t){return t==="localhost"||/^([a-z0-9]+(-[a-z0-9]+)*\.)+[a-z]{2,}$/i.test(t)}function Jw(){var t,e;return!!(yn()&&"PublicKeyCredential"in window&&window.PublicKeyCredential&&"credentials"in navigator&&typeof((t=navigator==null?void 0:navigator.credentials)===null||t===void 0?void 0:t.create)=="function"&&typeof((e=navigator==null?void 0:navigator.credentials)===null||e===void 0?void 0:e.get)=="function")}async function $M(t){try{const e=await navigator.credentials.create(t);return e?e instanceof PublicKeyCredential?{data:e,error:null}:{data:null,error:new ch("Browser returned unexpected credential type",e)}:{data:null,error:new ch("Empty credential response",e)}}catch(e){return{data:null,error:BM({error:e,options:t})}}}async function GM(t){try{const e=await navigator.credentials.get(t);return e?e instanceof PublicKeyCredential?{data:e,error:null}:{data:null,error:new ch("Browser returned unexpected credential type",e)}:{data:null,error:new ch("Empty credential response",e)}}catch(e){return{data:null,error:FM({error:e,options:t})}}}const YM={hints:["security-key"],authenticatorSelection:{authenticatorAttachment:"cross-platform",requireResidentKey:!1,userVerification:"preferred",residentKey:"discouraged"},attestation:"direct"},XM={userVerification:"preferred",hints:["security-key"],attestation:"direct"};function uh(...t){const e=s=>s!==null&&typeof s=="object"&&!Array.isArray(s),n=s=>s instanceof ArrayBuffer||ArrayBuffer.isView(s),r={};for(const s of t)if(s)for(const o in s){const c=s[o];if(c!==void 0)if(Array.isArray(c))r[o]=c;else if(n(c))r[o]=c;else if(e(c)){const h=r[o];e(h)?r[o]=uh(h,c):r[o]=uh(c)}else r[o]=c}return r}function KM(t,e){return uh(YM,t,e||{})}function qM(t,e){return uh(XM,t,e||{})}class ZM{constructor(e){this.client=e,this.enroll=this._enroll.bind(this),this.challenge=this._challenge.bind(this),this.verify=this._verify.bind(this),this.authenticate=this._authenticate.bind(this),this.register=this._register.bind(this)}async _enroll(e){return this.client.mfa.enroll(Object.assign(Object.assign({},e),{factorType:"webauthn"}))}async _challenge({factorId:e,webauthn:n,friendlyName:r,signal:s},o){var c;try{const{data:h,error:g}=await this.client.mfa.challenge({factorId:e,webauthn:n});if(!h)return{data:null,error:g};const p=s??UM.createNewAbortSignal();if(h.webauthn.type==="create"){const{user:y}=h.webauthn.credential_options.publicKey;if(!y.name){const x=r;if(x)y.name=`${y.id}:${x}`;else{const b=(await this.client.getUser()).data.user,I=((c=b==null?void 0:b.user_metadata)===null||c===void 0?void 0:c.name)||(b==null?void 0:b.email)||(b==null?void 0:b.id)||"User";y.name=`${y.id}:${I}`}}y.displayName||(y.displayName=y.name)}switch(h.webauthn.type){case"create":{const y=KM(h.webauthn.credential_options.publicKey,o==null?void 0:o.create),{data:x,error:E}=await $M({publicKey:y,signal:p});return x?{data:{factorId:e,challengeId:h.id,webauthn:{type:h.webauthn.type,credential_response:x}},error:null}:{data:null,error:E}}case"request":{const y=qM(h.webauthn.credential_options.publicKey,o==null?void 0:o.request),{data:x,error:E}=await GM(Object.assign(Object.assign({},h.webauthn.credential_options),{publicKey:y,signal:p}));return x?{data:{factorId:e,challengeId:h.id,webauthn:{type:h.webauthn.type,credential_response:x}},error:null}:{data:null,error:E}}}}catch(h){return Ae(h)?{data:null,error:h}:{data:null,error:new vo("Unexpected error in challenge",h)}}}async _verify({challengeId:e,factorId:n,webauthn:r}){return this.client.mfa.verify({factorId:n,challengeId:e,webauthn:r})}async _authenticate({factorId:e,webauthn:{rpId:n=typeof window<"u"?window.location.hostname:void 0,rpOrigins:r=typeof window<"u"?[window.location.origin]:void 0,signal:s}={}},o){if(!n)return{data:null,error:new Gc("rpId is required for WebAuthn authentication")};try{if(!Jw())return{data:null,error:new vo("Browser does not support WebAuthn",null)};const{data:c,error:h}=await this.challenge({factorId:e,webauthn:{rpId:n,rpOrigins:r},signal:s},{request:o});if(!c)return{data:null,error:h};const{webauthn:g}=c;return this._verify({factorId:e,challengeId:c.challengeId,webauthn:{type:g.type,rpId:n,rpOrigins:r,credential_response:g.credential_response}})}catch(c){return Ae(c)?{data:null,error:c}:{data:null,error:new vo("Unexpected error in authenticate",c)}}}async _register({friendlyName:e,webauthn:{rpId:n=typeof window<"u"?window.location.hostname:void 0,rpOrigins:r=typeof window<"u"?[window.location.origin]:void 0,signal:s}={}},o){if(!n)return{data:null,error:new Gc("rpId is required for WebAuthn registration")};try{if(!Jw())return{data:null,error:new vo("Browser does not support WebAuthn",null)};const{data:c,error:h}=await this._enroll({friendlyName:e});if(!c)return await this.client.mfa.listFactors().then(y=>{var x;return(x=y.data)===null||x===void 0?void 0:x.all.find(E=>E.factor_type==="webauthn"&&E.friendly_name===e&&E.status!=="unverified")}).then(y=>y?this.client.mfa.unenroll({factorId:y==null?void 0:y.id}):void 0),{data:null,error:h};const{data:g,error:p}=await this._challenge({factorId:c.id,friendlyName:c.friendly_name,webauthn:{rpId:n,rpOrigins:r},signal:s},{create:o});return g?this._verify({factorId:c.id,challengeId:g.challengeId,webauthn:{rpId:n,rpOrigins:r,type:g.webauthn.type,credential_response:g.webauthn.credential_response}}):{data:null,error:p}}catch(c){return Ae(c)?{data:null,error:c}:{data:null,error:new vo("Unexpected error in register",c)}}}}MM();const QM={url:Xk,storageKey:Kk,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:qk,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1,throwOnError:!1,lockAcquireTimeout:1e4};async function ex(t,e,n){return await n()}const ua={};class Yc{get jwks(){var e,n;return(n=(e=ua[this.storageKey])===null||e===void 0?void 0:e.jwks)!==null&&n!==void 0?n:{keys:[]}}set jwks(e){ua[this.storageKey]=Object.assign(Object.assign({},ua[this.storageKey]),{jwks:e})}get jwks_cached_at(){var e,n;return(n=(e=ua[this.storageKey])===null||e===void 0?void 0:e.cachedAt)!==null&&n!==void 0?n:Number.MIN_SAFE_INTEGER}set jwks_cached_at(e){ua[this.storageKey]=Object.assign(Object.assign({},ua[this.storageKey]),{cachedAt:e})}constructor(e){var n,r,s;this.userStorage=null,this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.autoRefreshTickTimeout=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log;const o=Object.assign(Object.assign({},QM),e);if(this.storageKey=o.storageKey,this.instanceID=(n=Yc.nextInstanceID[this.storageKey])!==null&&n!==void 0?n:0,Yc.nextInstanceID[this.storageKey]=this.instanceID+1,this.logDebugMessages=!!o.debug,typeof o.debug=="function"&&(this.logger=o.debug),this.instanceID>0&&yn()){const c=`${this._logPrefix()} Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.`;console.warn(c),this.logDebugMessages&&console.trace(c)}if(this.persistSession=o.persistSession,this.autoRefreshToken=o.autoRefreshToken,this.admin=new NM({url:o.url,headers:o.headers,fetch:o.fetch}),this.url=o.url,this.headers=o.headers,this.fetch=gS(o.fetch),this.lock=o.lock||ex,this.detectSessionInUrl=o.detectSessionInUrl,this.flowType=o.flowType,this.hasCustomAuthorizationHeader=o.hasCustomAuthorizationHeader,this.throwOnError=o.throwOnError,this.lockAcquireTimeout=o.lockAcquireTimeout,o.lock?this.lock=o.lock:this.persistSession&&yn()&&(!((r=globalThis==null?void 0:globalThis.navigator)===null||r===void 0)&&r.locks)?this.lock=kM:this.lock=ex,this.jwks||(this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER),this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this),webauthn:new ZM(this)},this.oauth={getAuthorizationDetails:this._getAuthorizationDetails.bind(this),approveAuthorization:this._approveAuthorization.bind(this),denyAuthorization:this._denyAuthorization.bind(this),listGrants:this._listOAuthGrants.bind(this),revokeGrant:this._revokeOAuthGrant.bind(this)},this.persistSession?(o.storage?this.storage=o.storage:pS()?this.storage=globalThis.localStorage:(this.memoryStorage={},this.storage=Qw(this.memoryStorage)),o.userStorage&&(this.userStorage=o.userStorage)):(this.memoryStorage={},this.storage=Qw(this.memoryStorage)),yn()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(c){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",c)}(s=this.broadcastChannel)===null||s===void 0||s.addEventListener("message",async c=>{this._debug("received broadcast notification from other tab or client",c);try{await this._notifyAllSubscribers(c.data.event,c.data.session,!1)}catch(h){this._debug("#broadcastChannel","error",h)}})}this.initialize().catch(c=>{this._debug("#initialize()","error",c)})}isThrowOnErrorEnabled(){return this.throwOnError}_returnResult(e){if(this.throwOnError&&e&&e.error)throw e.error;return e}_logPrefix(){return`GoTrueClient@${this.storageKey}:${this.instanceID} (${dS}) ${new Date().toISOString()}`}_debug(...e){return this.logDebugMessages&&this.logger(this._logPrefix(),...e),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(this.lockAcquireTimeout,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var e;try{let n={},r="none";if(yn()&&(n=uM(window.location.href),this._isImplicitGrantCallback(n)?r="implicit":await this._isPKCECallback(n)&&(r="pkce")),yn()&&this.detectSessionInUrl&&r!=="none"){const{data:s,error:o}=await this._getSessionFromURL(n,r);if(o){if(this._debug("#_initialize()","error detecting session from URL",o),tM(o)){const g=(e=o.details)===null||e===void 0?void 0:e.code;if(g==="identity_already_exists"||g==="identity_not_found"||g==="single_identity_not_deletable")return{error:o}}return{error:o}}const{session:c,redirectType:h}=s;return this._debug("#_initialize()","detected session in URL",c,"redirect type",h),await this._saveSession(c),setTimeout(async()=>{h==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",c):await this._notifyAllSubscribers("SIGNED_IN",c)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(n){return Ae(n)?this._returnResult({error:n}):this._returnResult({error:new vo("Unexpected error during initialization",n)})}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(e){var n,r,s;try{const o=await Oe(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(r=(n=e==null?void 0:e.options)===null||n===void 0?void 0:n.data)!==null&&r!==void 0?r:{},gotrue_meta_security:{captcha_token:(s=e==null?void 0:e.options)===null||s===void 0?void 0:s.captchaToken}},xform:Hr}),{data:c,error:h}=o;if(h||!c)return this._returnResult({data:{user:null,session:null},error:h});const g=c.session,p=c.user;return c.session&&(await this._saveSession(c.session),await this._notifyAllSubscribers("SIGNED_IN",g)),this._returnResult({data:{user:p,session:g},error:null})}catch(o){if(Ae(o))return this._returnResult({data:{user:null,session:null},error:o});throw o}}async signUp(e){var n,r,s;try{let o;if("email"in e){const{email:y,password:x,options:E}=e;let b=null,I=null;this.flowType==="pkce"&&([b,I]=await aa(this.storage,this.storageKey)),o=await Oe(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:E==null?void 0:E.emailRedirectTo,body:{email:y,password:x,data:(n=E==null?void 0:E.data)!==null&&n!==void 0?n:{},gotrue_meta_security:{captcha_token:E==null?void 0:E.captchaToken},code_challenge:b,code_challenge_method:I},xform:Hr})}else if("phone"in e){const{phone:y,password:x,options:E}=e;o=await Oe(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:y,password:x,data:(r=E==null?void 0:E.data)!==null&&r!==void 0?r:{},channel:(s=E==null?void 0:E.channel)!==null&&s!==void 0?s:"sms",gotrue_meta_security:{captcha_token:E==null?void 0:E.captchaToken}},xform:Hr})}else throw new td("You must provide either an email or phone number and a password");const{data:c,error:h}=o;if(h||!c)return await mn(this.storage,`${this.storageKey}-code-verifier`),this._returnResult({data:{user:null,session:null},error:h});const g=c.session,p=c.user;return c.session&&(await this._saveSession(c.session),await this._notifyAllSubscribers("SIGNED_IN",g)),this._returnResult({data:{user:p,session:g},error:null})}catch(o){if(await mn(this.storage,`${this.storageKey}-code-verifier`),Ae(o))return this._returnResult({data:{user:null,session:null},error:o});throw o}}async signInWithPassword(e){try{let n;if("email"in e){const{email:o,password:c,options:h}=e;n=await Oe(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:o,password:c,gotrue_meta_security:{captcha_token:h==null?void 0:h.captchaToken}},xform:qw})}else if("phone"in e){const{phone:o,password:c,options:h}=e;n=await Oe(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:o,password:c,gotrue_meta_security:{captcha_token:h==null?void 0:h.captchaToken}},xform:qw})}else throw new td("You must provide either an email or phone number and a password");const{data:r,error:s}=n;if(s)return this._returnResult({data:{user:null,session:null},error:s});if(!r||!r.session||!r.user){const o=new oa;return this._returnResult({data:{user:null,session:null},error:o})}return r.session&&(await this._saveSession(r.session),await this._notifyAllSubscribers("SIGNED_IN",r.session)),this._returnResult({data:Object.assign({user:r.user,session:r.session},r.weak_password?{weakPassword:r.weak_password}:null),error:s})}catch(n){if(Ae(n))return this._returnResult({data:{user:null,session:null},error:n});throw n}}async signInWithOAuth(e){var n,r,s,o;return await this._handleProviderSignIn(e.provider,{redirectTo:(n=e.options)===null||n===void 0?void 0:n.redirectTo,scopes:(r=e.options)===null||r===void 0?void 0:r.scopes,queryParams:(s=e.options)===null||s===void 0?void 0:s.queryParams,skipBrowserRedirect:(o=e.options)===null||o===void 0?void 0:o.skipBrowserRedirect})}async exchangeCodeForSession(e){return await this.initializePromise,this._acquireLock(this.lockAcquireTimeout,async()=>this._exchangeCodeForSession(e))}async signInWithWeb3(e){const{chain:n}=e;switch(n){case"ethereum":return await this.signInWithEthereum(e);case"solana":return await this.signInWithSolana(e);default:throw new Error(`@supabase/auth-js: Unsupported chain "${n}"`)}}async signInWithEthereum(e){var n,r,s,o,c,h,g,p,y,x,E;let b,I;if("message"in e)b=e.message,I=e.signature;else{const{chain:S,wallet:R,statement:A,options:_}=e;let T;if(yn())if(typeof R=="object")T=R;else{const H=window;if("ethereum"in H&&typeof H.ethereum=="object"&&"request"in H.ethereum&&typeof H.ethereum.request=="function")T=H.ethereum;else throw new Error("@supabase/auth-js: No compatible Ethereum wallet interface on the window object (window.ethereum) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'ethereum', wallet: resolvedUserWallet }) instead.")}else{if(typeof R!="object"||!(_!=null&&_.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");T=R}const D=new URL((n=_==null?void 0:_.url)!==null&&n!==void 0?n:window.location.href),F=await T.request({method:"eth_requestAccounts"}).then(H=>H).catch(()=>{throw new Error("@supabase/auth-js: Wallet method eth_requestAccounts is missing or invalid")});if(!F||F.length===0)throw new Error("@supabase/auth-js: No accounts available. Please ensure the wallet is connected.");const j=yS(F[0]);let B=(r=_==null?void 0:_.signInWithEthereum)===null||r===void 0?void 0:r.chainId;if(!B){const H=await T.request({method:"eth_chainId"});B=DM(H)}const W={domain:D.host,address:j,statement:A,uri:D.href,version:"1",chainId:B,nonce:(s=_==null?void 0:_.signInWithEthereum)===null||s===void 0?void 0:s.nonce,issuedAt:(c=(o=_==null?void 0:_.signInWithEthereum)===null||o===void 0?void 0:o.issuedAt)!==null&&c!==void 0?c:new Date,expirationTime:(h=_==null?void 0:_.signInWithEthereum)===null||h===void 0?void 0:h.expirationTime,notBefore:(g=_==null?void 0:_.signInWithEthereum)===null||g===void 0?void 0:g.notBefore,requestId:(p=_==null?void 0:_.signInWithEthereum)===null||p===void 0?void 0:p.requestId,resources:(y=_==null?void 0:_.signInWithEthereum)===null||y===void 0?void 0:y.resources};b=LM(W),I=await T.request({method:"personal_sign",params:[PM(b),j]})}try{const{data:S,error:R}=await Oe(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"ethereum",message:b,signature:I},!((x=e.options)===null||x===void 0)&&x.captchaToken?{gotrue_meta_security:{captcha_token:(E=e.options)===null||E===void 0?void 0:E.captchaToken}}:null),xform:Hr});if(R)throw R;if(!S||!S.session||!S.user){const A=new oa;return this._returnResult({data:{user:null,session:null},error:A})}return S.session&&(await this._saveSession(S.session),await this._notifyAllSubscribers("SIGNED_IN",S.session)),this._returnResult({data:Object.assign({},S),error:R})}catch(S){if(Ae(S))return this._returnResult({data:{user:null,session:null},error:S});throw S}}async signInWithSolana(e){var n,r,s,o,c,h,g,p,y,x,E,b;let I,S;if("message"in e)I=e.message,S=e.signature;else{const{chain:R,wallet:A,statement:_,options:T}=e;let D;if(yn())if(typeof A=="object")D=A;else{const j=window;if("solana"in j&&typeof j.solana=="object"&&("signIn"in j.solana&&typeof j.solana.signIn=="function"||"signMessage"in j.solana&&typeof j.solana.signMessage=="function"))D=j.solana;else throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.")}else{if(typeof A!="object"||!(T!=null&&T.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");D=A}const F=new URL((n=T==null?void 0:T.url)!==null&&n!==void 0?n:window.location.href);if("signIn"in D&&D.signIn){const j=await D.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},T==null?void 0:T.signInWithSolana),{version:"1",domain:F.host,uri:F.href}),_?{statement:_}:null));let B;if(Array.isArray(j)&&j[0]&&typeof j[0]=="object")B=j[0];else if(j&&typeof j=="object"&&"signedMessage"in j&&"signature"in j)B=j;else throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in B&&"signature"in B&&(typeof B.signedMessage=="string"||B.signedMessage instanceof Uint8Array)&&B.signature instanceof Uint8Array)I=typeof B.signedMessage=="string"?B.signedMessage:new TextDecoder().decode(B.signedMessage),S=B.signature;else throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in D)||typeof D.signMessage!="function"||!("publicKey"in D)||typeof D!="object"||!D.publicKey||!("toBase58"in D.publicKey)||typeof D.publicKey.toBase58!="function")throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");I=[`${F.host} wants you to sign in with your Solana account:`,D.publicKey.toBase58(),..._?["",_,""]:[""],"Version: 1",`URI: ${F.href}`,`Issued At: ${(s=(r=T==null?void 0:T.signInWithSolana)===null||r===void 0?void 0:r.issuedAt)!==null&&s!==void 0?s:new Date().toISOString()}`,...!((o=T==null?void 0:T.signInWithSolana)===null||o===void 0)&&o.notBefore?[`Not Before: ${T.signInWithSolana.notBefore}`]:[],...!((c=T==null?void 0:T.signInWithSolana)===null||c===void 0)&&c.expirationTime?[`Expiration Time: ${T.signInWithSolana.expirationTime}`]:[],...!((h=T==null?void 0:T.signInWithSolana)===null||h===void 0)&&h.chainId?[`Chain ID: ${T.signInWithSolana.chainId}`]:[],...!((g=T==null?void 0:T.signInWithSolana)===null||g===void 0)&&g.nonce?[`Nonce: ${T.signInWithSolana.nonce}`]:[],...!((p=T==null?void 0:T.signInWithSolana)===null||p===void 0)&&p.requestId?[`Request ID: ${T.signInWithSolana.requestId}`]:[],...!((x=(y=T==null?void 0:T.signInWithSolana)===null||y===void 0?void 0:y.resources)===null||x===void 0)&&x.length?["Resources",...T.signInWithSolana.resources.map(B=>`- ${B}`)]:[]].join(`
`);const j=await D.signMessage(new TextEncoder().encode(I),"utf8");if(!j||!(j instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");S=j}}try{const{data:R,error:A}=await Oe(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:I,signature:So(S)},!((E=e.options)===null||E===void 0)&&E.captchaToken?{gotrue_meta_security:{captcha_token:(b=e.options)===null||b===void 0?void 0:b.captchaToken}}:null),xform:Hr});if(A)throw A;if(!R||!R.session||!R.user){const _=new oa;return this._returnResult({data:{user:null,session:null},error:_})}return R.session&&(await this._saveSession(R.session),await this._notifyAllSubscribers("SIGNED_IN",R.session)),this._returnResult({data:Object.assign({},R),error:A})}catch(R){if(Ae(R))return this._returnResult({data:{user:null,session:null},error:R});throw R}}async _exchangeCodeForSession(e){const n=await fo(this.storage,`${this.storageKey}-code-verifier`),[r,s]=(n??"").split("/");try{if(!r&&this.flowType==="pkce")throw new nM;const{data:o,error:c}=await Oe(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:e,code_verifier:r},xform:Hr});if(await mn(this.storage,`${this.storageKey}-code-verifier`),c)throw c;if(!o||!o.session||!o.user){const h=new oa;return this._returnResult({data:{user:null,session:null,redirectType:null},error:h})}return o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",o.session)),this._returnResult({data:Object.assign(Object.assign({},o),{redirectType:s??null}),error:c})}catch(o){if(await mn(this.storage,`${this.storageKey}-code-verifier`),Ae(o))return this._returnResult({data:{user:null,session:null,redirectType:null},error:o});throw o}}async signInWithIdToken(e){try{const{options:n,provider:r,token:s,access_token:o,nonce:c}=e,h=await Oe(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:r,id_token:s,access_token:o,nonce:c,gotrue_meta_security:{captcha_token:n==null?void 0:n.captchaToken}},xform:Hr}),{data:g,error:p}=h;if(p)return this._returnResult({data:{user:null,session:null},error:p});if(!g||!g.session||!g.user){const y=new oa;return this._returnResult({data:{user:null,session:null},error:y})}return g.session&&(await this._saveSession(g.session),await this._notifyAllSubscribers("SIGNED_IN",g.session)),this._returnResult({data:g,error:p})}catch(n){if(Ae(n))return this._returnResult({data:{user:null,session:null},error:n});throw n}}async signInWithOtp(e){var n,r,s,o,c;try{if("email"in e){const{email:h,options:g}=e;let p=null,y=null;this.flowType==="pkce"&&([p,y]=await aa(this.storage,this.storageKey));const{error:x}=await Oe(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:h,data:(n=g==null?void 0:g.data)!==null&&n!==void 0?n:{},create_user:(r=g==null?void 0:g.shouldCreateUser)!==null&&r!==void 0?r:!0,gotrue_meta_security:{captcha_token:g==null?void 0:g.captchaToken},code_challenge:p,code_challenge_method:y},redirectTo:g==null?void 0:g.emailRedirectTo});return this._returnResult({data:{user:null,session:null},error:x})}if("phone"in e){const{phone:h,options:g}=e,{data:p,error:y}=await Oe(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:h,data:(s=g==null?void 0:g.data)!==null&&s!==void 0?s:{},create_user:(o=g==null?void 0:g.shouldCreateUser)!==null&&o!==void 0?o:!0,gotrue_meta_security:{captcha_token:g==null?void 0:g.captchaToken},channel:(c=g==null?void 0:g.channel)!==null&&c!==void 0?c:"sms"}});return this._returnResult({data:{user:null,session:null,messageId:p==null?void 0:p.message_id},error:y})}throw new td("You must provide either an email or phone number.")}catch(h){if(await mn(this.storage,`${this.storageKey}-code-verifier`),Ae(h))return this._returnResult({data:{user:null,session:null},error:h});throw h}}async verifyOtp(e){var n,r;try{let s,o;"options"in e&&(s=(n=e.options)===null||n===void 0?void 0:n.redirectTo,o=(r=e.options)===null||r===void 0?void 0:r.captchaToken);const{data:c,error:h}=await Oe(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},e),{gotrue_meta_security:{captcha_token:o}}),redirectTo:s,xform:Hr});if(h)throw h;if(!c)throw new Error("An error occurred on token verification.");const g=c.session,p=c.user;return g!=null&&g.access_token&&(await this._saveSession(g),await this._notifyAllSubscribers(e.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",g)),this._returnResult({data:{user:p,session:g},error:null})}catch(s){if(Ae(s))return this._returnResult({data:{user:null,session:null},error:s});throw s}}async signInWithSSO(e){var n,r,s,o,c;try{let h=null,g=null;this.flowType==="pkce"&&([h,g]=await aa(this.storage,this.storageKey));const p=await Oe(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in e?{provider_id:e.providerId}:null),"domain"in e?{domain:e.domain}:null),{redirect_to:(r=(n=e.options)===null||n===void 0?void 0:n.redirectTo)!==null&&r!==void 0?r:void 0}),!((s=e==null?void 0:e.options)===null||s===void 0)&&s.captchaToken?{gotrue_meta_security:{captcha_token:e.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:h,code_challenge_method:g}),headers:this.headers,xform:TM});return!((o=p.data)===null||o===void 0)&&o.url&&yn()&&!(!((c=e.options)===null||c===void 0)&&c.skipBrowserRedirect)&&window.location.assign(p.data.url),this._returnResult(p)}catch(h){if(await mn(this.storage,`${this.storageKey}-code-verifier`),Ae(h))return this._returnResult({data:null,error:h});throw h}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async e=>{const{data:{session:n},error:r}=e;if(r)throw r;if(!n)throw new ir;const{error:s}=await Oe(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:n.access_token});return this._returnResult({data:{user:null,session:null},error:s})})}catch(e){if(Ae(e))return this._returnResult({data:{user:null,session:null},error:e});throw e}}async resend(e){try{const n=`${this.url}/resend`;if("email"in e){const{email:r,type:s,options:o}=e,{error:c}=await Oe(this.fetch,"POST",n,{headers:this.headers,body:{email:r,type:s,gotrue_meta_security:{captcha_token:o==null?void 0:o.captchaToken}},redirectTo:o==null?void 0:o.emailRedirectTo});return this._returnResult({data:{user:null,session:null},error:c})}else if("phone"in e){const{phone:r,type:s,options:o}=e,{data:c,error:h}=await Oe(this.fetch,"POST",n,{headers:this.headers,body:{phone:r,type:s,gotrue_meta_security:{captcha_token:o==null?void 0:o.captchaToken}}});return this._returnResult({data:{user:null,session:null,messageId:c==null?void 0:c.message_id},error:h})}throw new td("You must provide either an email or phone number and a type")}catch(n){if(Ae(n))return this._returnResult({data:{user:null,session:null},error:n});throw n}}async getSession(){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>this._useSession(async n=>n))}async _acquireLock(e,n){this._debug("#_acquireLock","begin",e);try{if(this.lockAcquired){const r=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),s=(async()=>(await r,await n()))();return this.pendingInLock.push((async()=>{try{await s}catch{}})()),s}return await this.lock(`lock:${this.storageKey}`,e,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const r=n();for(this.pendingInLock.push((async()=>{try{await r}catch{}})()),await r;this.pendingInLock.length;){const s=[...this.pendingInLock];await Promise.all(s),this.pendingInLock.splice(0,s.length)}return await r}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(e){this._debug("#_useSession","begin");try{const n=await this.__loadSession();return await e(n)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let e=null;const n=await fo(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",n),n!==null&&(this._isValidSession(n)?e=n:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!e)return{data:{session:null},error:null};const r=e.expires_at?e.expires_at*1e3-Date.now()<d0:!1;if(this._debug("#__loadSession()",`session has${r?"":" not"} expired`,"expires_at",e.expires_at),!r){if(this.userStorage){const c=await fo(this.userStorage,this.storageKey+"-user");c!=null&&c.user?e.user=c.user:e.user=p0()}if(this.storage.isServer&&e.user&&!e.user.__isUserNotAvailableProxy){const c={value:this.suppressGetSessionWarning};e.user=CM(e.user,c),c.value&&(this.suppressGetSessionWarning=!0)}return{data:{session:e},error:null}}const{data:s,error:o}=await this._callRefreshToken(e.refresh_token);return o?this._returnResult({data:{session:null},error:o}):this._returnResult({data:{session:s},error:null})}finally{this._debug("#__loadSession()","end")}}async getUser(e){if(e)return await this._getUser(e);await this.initializePromise;const n=await this._acquireLock(this.lockAcquireTimeout,async()=>await this._getUser());return n.data.user&&(this.suppressGetSessionWarning=!0),n}async _getUser(e){try{return e?await Oe(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:e,xform:Es}):await this._useSession(async n=>{var r,s,o;const{data:c,error:h}=n;if(h)throw h;return!(!((r=c.session)===null||r===void 0)&&r.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new ir}:await Oe(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(o=(s=c.session)===null||s===void 0?void 0:s.access_token)!==null&&o!==void 0?o:void 0,xform:Es})})}catch(n){if(Ae(n))return h0(n)&&(await this._removeSession(),await mn(this.storage,`${this.storageKey}-code-verifier`)),this._returnResult({data:{user:null},error:n});throw n}}async updateUser(e,n={}){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>await this._updateUser(e,n))}async _updateUser(e,n={}){try{return await this._useSession(async r=>{const{data:s,error:o}=r;if(o)throw o;if(!s.session)throw new ir;const c=s.session;let h=null,g=null;this.flowType==="pkce"&&e.email!=null&&([h,g]=await aa(this.storage,this.storageKey));const{data:p,error:y}=await Oe(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:n==null?void 0:n.emailRedirectTo,body:Object.assign(Object.assign({},e),{code_challenge:h,code_challenge_method:g}),jwt:c.access_token,xform:Es});if(y)throw y;return c.user=p.user,await this._saveSession(c),await this._notifyAllSubscribers("USER_UPDATED",c),this._returnResult({data:{user:c.user},error:null})})}catch(r){if(await mn(this.storage,`${this.storageKey}-code-verifier`),Ae(r))return this._returnResult({data:{user:null},error:r});throw r}}async setSession(e){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>await this._setSession(e))}async _setSession(e){try{if(!e.access_token||!e.refresh_token)throw new ir;const n=Date.now()/1e3;let r=n,s=!0,o=null;const{payload:c}=rd(e.access_token);if(c.exp&&(r=c.exp,s=r<=n),s){const{data:h,error:g}=await this._callRefreshToken(e.refresh_token);if(g)return this._returnResult({data:{user:null,session:null},error:g});if(!h)return{data:{user:null,session:null},error:null};o=h}else{const{data:h,error:g}=await this._getUser(e.access_token);if(g)return this._returnResult({data:{user:null,session:null},error:g});o={access_token:e.access_token,refresh_token:e.refresh_token,user:h.user,token_type:"bearer",expires_in:r-n,expires_at:r},await this._saveSession(o),await this._notifyAllSubscribers("SIGNED_IN",o)}return this._returnResult({data:{user:o.user,session:o},error:null})}catch(n){if(Ae(n))return this._returnResult({data:{session:null,user:null},error:n});throw n}}async refreshSession(e){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>await this._refreshSession(e))}async _refreshSession(e){try{return await this._useSession(async n=>{var r;if(!e){const{data:c,error:h}=n;if(h)throw h;e=(r=c.session)!==null&&r!==void 0?r:void 0}if(!(e!=null&&e.refresh_token))throw new ir;const{data:s,error:o}=await this._callRefreshToken(e.refresh_token);return o?this._returnResult({data:{user:null,session:null},error:o}):s?this._returnResult({data:{user:s.user,session:s},error:null}):this._returnResult({data:{user:null,session:null},error:null})})}catch(n){if(Ae(n))return this._returnResult({data:{user:null,session:null},error:n});throw n}}async _getSessionFromURL(e,n){try{if(!yn())throw new nd("No browser detected.");if(e.error||e.error_description||e.error_code)throw new nd(e.error_description||"Error in URL with unspecified error_description",{error:e.error||"unspecified_error",code:e.error_code||"unspecified_code"});switch(n){case"implicit":if(this.flowType==="pkce")throw new Hw("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new nd("Not a valid implicit grant flow url.");break;default:}if(n==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!e.code)throw new Hw("No code detected.");const{data:_,error:T}=await this._exchangeCodeForSession(e.code);if(T)throw T;const D=new URL(window.location.href);return D.searchParams.delete("code"),window.history.replaceState(window.history.state,"",D.toString()),{data:{session:_.session,redirectType:null},error:null}}const{provider_token:r,provider_refresh_token:s,access_token:o,refresh_token:c,expires_in:h,expires_at:g,token_type:p}=e;if(!o||!h||!c||!p)throw new nd("No session defined in URL");const y=Math.round(Date.now()/1e3),x=parseInt(h);let E=y+x;g&&(E=parseInt(g));const b=E-y;b*1e3<=ha&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${b}s, should have been closer to ${x}s`);const I=E-x;y-I>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",I,E,y):y-I<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",I,E,y);const{data:S,error:R}=await this._getUser(o);if(R)throw R;const A={provider_token:r,provider_refresh_token:s,access_token:o,expires_in:x,expires_at:E,refresh_token:c,token_type:p,user:S.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),this._returnResult({data:{session:A,redirectType:e.type},error:null})}catch(r){if(Ae(r))return this._returnResult({data:{session:null,redirectType:null},error:r});throw r}}_isImplicitGrantCallback(e){return typeof this.detectSessionInUrl=="function"?this.detectSessionInUrl(new URL(window.location.href),e):!!(e.access_token||e.error_description)}async _isPKCECallback(e){const n=await fo(this.storage,`${this.storageKey}-code-verifier`);return!!(e.code&&n)}async signOut(e={scope:"global"}){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>await this._signOut(e))}async _signOut({scope:e}={scope:"global"}){return await this._useSession(async n=>{var r;const{data:s,error:o}=n;if(o&&!h0(o))return this._returnResult({error:o});const c=(r=s.session)===null||r===void 0?void 0:r.access_token;if(c){const{error:h}=await this.admin.signOut(c,e);if(h&&!(eM(h)&&(h.status===404||h.status===401||h.status===403)||h0(h)))return this._returnResult({error:h})}return e!=="others"&&(await this._removeSession(),await mn(this.storage,`${this.storageKey}-code-verifier`)),this._returnResult({error:null})})}onAuthStateChange(e){const n=cM(),r={id:n,callback:e,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",n),this.stateChangeEmitters.delete(n)}};return this._debug("#onAuthStateChange()","registered callback with id",n),this.stateChangeEmitters.set(n,r),(async()=>(await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>{this._emitInitialSession(n)})))(),{data:{subscription:r}}}async _emitInitialSession(e){return await this._useSession(async n=>{var r,s;try{const{data:{session:o},error:c}=n;if(c)throw c;await((r=this.stateChangeEmitters.get(e))===null||r===void 0?void 0:r.callback("INITIAL_SESSION",o)),this._debug("INITIAL_SESSION","callback id",e,"session",o)}catch(o){await((s=this.stateChangeEmitters.get(e))===null||s===void 0?void 0:s.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",e,"error",o),console.error(o)}})}async resetPasswordForEmail(e,n={}){let r=null,s=null;this.flowType==="pkce"&&([r,s]=await aa(this.storage,this.storageKey,!0));try{return await Oe(this.fetch,"POST",`${this.url}/recover`,{body:{email:e,code_challenge:r,code_challenge_method:s,gotrue_meta_security:{captcha_token:n.captchaToken}},headers:this.headers,redirectTo:n.redirectTo})}catch(o){if(await mn(this.storage,`${this.storageKey}-code-verifier`),Ae(o))return this._returnResult({data:null,error:o});throw o}}async getUserIdentities(){var e;try{const{data:n,error:r}=await this.getUser();if(r)throw r;return this._returnResult({data:{identities:(e=n.user.identities)!==null&&e!==void 0?e:[]},error:null})}catch(n){if(Ae(n))return this._returnResult({data:null,error:n});throw n}}async linkIdentity(e){return"token"in e?this.linkIdentityIdToken(e):this.linkIdentityOAuth(e)}async linkIdentityOAuth(e){var n;try{const{data:r,error:s}=await this._useSession(async o=>{var c,h,g,p,y;const{data:x,error:E}=o;if(E)throw E;const b=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,e.provider,{redirectTo:(c=e.options)===null||c===void 0?void 0:c.redirectTo,scopes:(h=e.options)===null||h===void 0?void 0:h.scopes,queryParams:(g=e.options)===null||g===void 0?void 0:g.queryParams,skipBrowserRedirect:!0});return await Oe(this.fetch,"GET",b,{headers:this.headers,jwt:(y=(p=x.session)===null||p===void 0?void 0:p.access_token)!==null&&y!==void 0?y:void 0})});if(s)throw s;return yn()&&!(!((n=e.options)===null||n===void 0)&&n.skipBrowserRedirect)&&window.location.assign(r==null?void 0:r.url),this._returnResult({data:{provider:e.provider,url:r==null?void 0:r.url},error:null})}catch(r){if(Ae(r))return this._returnResult({data:{provider:e.provider,url:null},error:r});throw r}}async linkIdentityIdToken(e){return await this._useSession(async n=>{var r;try{const{error:s,data:{session:o}}=n;if(s)throw s;const{options:c,provider:h,token:g,access_token:p,nonce:y}=e,x=await Oe(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,jwt:(r=o==null?void 0:o.access_token)!==null&&r!==void 0?r:void 0,body:{provider:h,id_token:g,access_token:p,nonce:y,link_identity:!0,gotrue_meta_security:{captcha_token:c==null?void 0:c.captchaToken}},xform:Hr}),{data:E,error:b}=x;return b?this._returnResult({data:{user:null,session:null},error:b}):!E||!E.session||!E.user?this._returnResult({data:{user:null,session:null},error:new oa}):(E.session&&(await this._saveSession(E.session),await this._notifyAllSubscribers("USER_UPDATED",E.session)),this._returnResult({data:E,error:b}))}catch(s){if(await mn(this.storage,`${this.storageKey}-code-verifier`),Ae(s))return this._returnResult({data:{user:null,session:null},error:s});throw s}})}async unlinkIdentity(e){try{return await this._useSession(async n=>{var r,s;const{data:o,error:c}=n;if(c)throw c;return await Oe(this.fetch,"DELETE",`${this.url}/user/identities/${e.identity_id}`,{headers:this.headers,jwt:(s=(r=o.session)===null||r===void 0?void 0:r.access_token)!==null&&s!==void 0?s:void 0})})}catch(n){if(Ae(n))return this._returnResult({data:null,error:n});throw n}}async _refreshAccessToken(e){const n=`#_refreshAccessToken(${e.substring(0,5)}...)`;this._debug(n,"begin");try{const r=Date.now();return await fM(async s=>(s>0&&await hM(200*Math.pow(2,s-1)),this._debug(n,"refreshing attempt",s),await Oe(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:e},headers:this.headers,xform:Hr})),(s,o)=>{const c=200*Math.pow(2,s);return o&&f0(o)&&Date.now()+c-r<ha})}catch(r){if(this._debug(n,"error",r),Ae(r))return this._returnResult({data:{session:null,user:null},error:r});throw r}finally{this._debug(n,"end")}}_isValidSession(e){return typeof e=="object"&&e!==null&&"access_token"in e&&"refresh_token"in e&&"expires_at"in e}async _handleProviderSignIn(e,n){const r=await this._getUrlForProvider(`${this.url}/authorize`,e,{redirectTo:n.redirectTo,scopes:n.scopes,queryParams:n.queryParams});return this._debug("#_handleProviderSignIn()","provider",e,"options",n,"url",r),yn()&&!n.skipBrowserRedirect&&window.location.assign(r),{data:{provider:e,url:r},error:null}}async _recoverAndRefresh(){var e,n;const r="#_recoverAndRefresh()";this._debug(r,"begin");try{const s=await fo(this.storage,this.storageKey);if(s&&this.userStorage){let c=await fo(this.userStorage,this.storageKey+"-user");!this.storage.isServer&&Object.is(this.storage,this.userStorage)&&!c&&(c={user:s.user},await fa(this.userStorage,this.storageKey+"-user",c)),s.user=(e=c==null?void 0:c.user)!==null&&e!==void 0?e:p0()}else if(s&&!s.user&&!s.user){const c=await fo(this.storage,this.storageKey+"-user");c&&(c!=null&&c.user)?(s.user=c.user,await mn(this.storage,this.storageKey+"-user"),await fa(this.storage,this.storageKey,s)):s.user=p0()}if(this._debug(r,"session from storage",s),!this._isValidSession(s)){this._debug(r,"session is not valid"),s!==null&&await this._removeSession();return}const o=((n=s.expires_at)!==null&&n!==void 0?n:1/0)*1e3-Date.now()<d0;if(this._debug(r,`session has${o?"":" not"} expired with margin of ${d0}s`),o){if(this.autoRefreshToken&&s.refresh_token){const{error:c}=await this._callRefreshToken(s.refresh_token);c&&(console.error(c),f0(c)||(this._debug(r,"refresh failed with a non-retryable error, removing the session",c),await this._removeSession()))}}else if(s.user&&s.user.__isUserNotAvailableProxy===!0)try{const{data:c,error:h}=await this._getUser(s.access_token);!h&&(c!=null&&c.user)?(s.user=c.user,await this._saveSession(s),await this._notifyAllSubscribers("SIGNED_IN",s)):this._debug(r,"could not get user data, skipping SIGNED_IN notification")}catch(c){console.error("Error getting user data:",c),this._debug(r,"error getting user data, skipping SIGNED_IN notification",c)}else await this._notifyAllSubscribers("SIGNED_IN",s)}catch(s){this._debug(r,"error",s),console.error(s);return}finally{this._debug(r,"end")}}async _callRefreshToken(e){var n,r;if(!e)throw new ir;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const s=`#_callRefreshToken(${e.substring(0,5)}...)`;this._debug(s,"begin");try{this.refreshingDeferred=new sf;const{data:o,error:c}=await this._refreshAccessToken(e);if(c)throw c;if(!o.session)throw new ir;await this._saveSession(o.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",o.session);const h={data:o.session,error:null};return this.refreshingDeferred.resolve(h),h}catch(o){if(this._debug(s,"error",o),Ae(o)){const c={data:null,error:o};return f0(o)||await this._removeSession(),(n=this.refreshingDeferred)===null||n===void 0||n.resolve(c),c}throw(r=this.refreshingDeferred)===null||r===void 0||r.reject(o),o}finally{this.refreshingDeferred=null,this._debug(s,"end")}}async _notifyAllSubscribers(e,n,r=!0){const s=`#_notifyAllSubscribers(${e})`;this._debug(s,"begin",n,`broadcast = ${r}`);try{this.broadcastChannel&&r&&this.broadcastChannel.postMessage({event:e,session:n});const o=[],c=Array.from(this.stateChangeEmitters.values()).map(async h=>{try{await h.callback(e,n)}catch(g){o.push(g)}});if(await Promise.all(c),o.length>0){for(let h=0;h<o.length;h+=1)console.error(o[h]);throw o[0]}}finally{this._debug(s,"end")}}async _saveSession(e){this._debug("#_saveSession()",e),this.suppressGetSessionWarning=!0,await mn(this.storage,`${this.storageKey}-code-verifier`);const n=Object.assign({},e),r=n.user&&n.user.__isUserNotAvailableProxy===!0;if(this.userStorage){!r&&n.user&&await fa(this.userStorage,this.storageKey+"-user",{user:n.user});const s=Object.assign({},n);delete s.user;const o=Xw(s);await fa(this.storage,this.storageKey,o)}else{const s=Xw(n);await fa(this.storage,this.storageKey,s)}}async _removeSession(){this._debug("#_removeSession()"),this.suppressGetSessionWarning=!1,await mn(this.storage,this.storageKey),await mn(this.storage,this.storageKey+"-code-verifier"),await mn(this.storage,this.storageKey+"-user"),this.userStorage&&await mn(this.userStorage,this.storageKey+"-user"),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const e=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{e&&yn()&&(window!=null&&window.removeEventListener)&&window.removeEventListener("visibilitychange",e)}catch(n){console.error("removing visibilitychange callback failed",n)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const e=setInterval(()=>this._autoRefreshTokenTick(),ha);this.autoRefreshTicker=e,e&&typeof e=="object"&&typeof e.unref=="function"?e.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(e);const n=setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0);this.autoRefreshTickTimeout=n,n&&typeof n=="object"&&typeof n.unref=="function"?n.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(n)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const e=this.autoRefreshTicker;this.autoRefreshTicker=null,e&&clearInterval(e);const n=this.autoRefreshTickTimeout;this.autoRefreshTickTimeout=null,n&&clearTimeout(n)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const e=Date.now();try{return await this._useSession(async n=>{const{data:{session:r}}=n;if(!r||!r.refresh_token||!r.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const s=Math.floor((r.expires_at*1e3-e)/ha);this._debug("#_autoRefreshTokenTick()",`access token expires in ${s} ticks, a tick lasts ${ha}ms, refresh threshold is ${G1} ticks`),s<=G1&&await this._callRefreshToken(r.refresh_token)})}catch(n){console.error("Auto refresh tick failed with error. This is likely a transient error.",n)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(e){if(e.isAcquireTimeout||e instanceof mS)this._debug("auto refresh token tick lock not available");else throw e}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!yn()||!(window!=null&&window.addEventListener))return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>{try{await this._onVisibilityChanged(!1)}catch(e){this._debug("#visibilityChangedCallback","error",e)}},window==null||window.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(e){console.error("_handleVisibilityChange",e)}}async _onVisibilityChanged(e){const n=`#_onVisibilityChanged(${e})`;this._debug(n,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),e||(await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>{if(document.visibilityState!=="visible"){this._debug(n,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(e,n,r){const s=[`provider=${encodeURIComponent(n)}`];if(r!=null&&r.redirectTo&&s.push(`redirect_to=${encodeURIComponent(r.redirectTo)}`),r!=null&&r.scopes&&s.push(`scopes=${encodeURIComponent(r.scopes)}`),this.flowType==="pkce"){const[o,c]=await aa(this.storage,this.storageKey),h=new URLSearchParams({code_challenge:`${encodeURIComponent(o)}`,code_challenge_method:`${encodeURIComponent(c)}`});s.push(h.toString())}if(r!=null&&r.queryParams){const o=new URLSearchParams(r.queryParams);s.push(o.toString())}return r!=null&&r.skipBrowserRedirect&&s.push(`skip_http_redirect=${r.skipBrowserRedirect}`),`${e}?${s.join("&")}`}async _unenroll(e){try{return await this._useSession(async n=>{var r;const{data:s,error:o}=n;return o?this._returnResult({data:null,error:o}):await Oe(this.fetch,"DELETE",`${this.url}/factors/${e.factorId}`,{headers:this.headers,jwt:(r=s==null?void 0:s.session)===null||r===void 0?void 0:r.access_token})})}catch(n){if(Ae(n))return this._returnResult({data:null,error:n});throw n}}async _enroll(e){try{return await this._useSession(async n=>{var r,s;const{data:o,error:c}=n;if(c)return this._returnResult({data:null,error:c});const h=Object.assign({friendly_name:e.friendlyName,factor_type:e.factorType},e.factorType==="phone"?{phone:e.phone}:e.factorType==="totp"?{issuer:e.issuer}:{}),{data:g,error:p}=await Oe(this.fetch,"POST",`${this.url}/factors`,{body:h,headers:this.headers,jwt:(r=o==null?void 0:o.session)===null||r===void 0?void 0:r.access_token});return p?this._returnResult({data:null,error:p}):(e.factorType==="totp"&&g.type==="totp"&&(!((s=g==null?void 0:g.totp)===null||s===void 0)&&s.qr_code)&&(g.totp.qr_code=`data:image/svg+xml;utf-8,${g.totp.qr_code}`),this._returnResult({data:g,error:null}))})}catch(n){if(Ae(n))return this._returnResult({data:null,error:n});throw n}}async _verify(e){return this._acquireLock(this.lockAcquireTimeout,async()=>{try{return await this._useSession(async n=>{var r;const{data:s,error:o}=n;if(o)return this._returnResult({data:null,error:o});const c=Object.assign({challenge_id:e.challengeId},"webauthn"in e?{webauthn:Object.assign(Object.assign({},e.webauthn),{credential_response:e.webauthn.type==="create"?HM(e.webauthn.credential_response):WM(e.webauthn.credential_response)})}:{code:e.code}),{data:h,error:g}=await Oe(this.fetch,"POST",`${this.url}/factors/${e.factorId}/verify`,{body:c,headers:this.headers,jwt:(r=s==null?void 0:s.session)===null||r===void 0?void 0:r.access_token});return g?this._returnResult({data:null,error:g}):(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+h.expires_in},h)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",h),this._returnResult({data:h,error:g}))})}catch(n){if(Ae(n))return this._returnResult({data:null,error:n});throw n}})}async _challenge(e){return this._acquireLock(this.lockAcquireTimeout,async()=>{try{return await this._useSession(async n=>{var r;const{data:s,error:o}=n;if(o)return this._returnResult({data:null,error:o});const c=await Oe(this.fetch,"POST",`${this.url}/factors/${e.factorId}/challenge`,{body:e,headers:this.headers,jwt:(r=s==null?void 0:s.session)===null||r===void 0?void 0:r.access_token});if(c.error)return c;const{data:h}=c;if(h.type!=="webauthn")return{data:h,error:null};switch(h.webauthn.type){case"create":return{data:Object.assign(Object.assign({},h),{webauthn:Object.assign(Object.assign({},h.webauthn),{credential_options:Object.assign(Object.assign({},h.webauthn.credential_options),{publicKey:VM(h.webauthn.credential_options.publicKey)})})}),error:null};case"request":return{data:Object.assign(Object.assign({},h),{webauthn:Object.assign(Object.assign({},h.webauthn),{credential_options:Object.assign(Object.assign({},h.webauthn.credential_options),{publicKey:zM(h.webauthn.credential_options.publicKey)})})}),error:null}}})}catch(n){if(Ae(n))return this._returnResult({data:null,error:n});throw n}})}async _challengeAndVerify(e){const{data:n,error:r}=await this._challenge({factorId:e.factorId});return r?this._returnResult({data:null,error:r}):await this._verify({factorId:e.factorId,challengeId:n.id,code:e.code})}async _listFactors(){var e;const{data:{user:n},error:r}=await this.getUser();if(r)return{data:null,error:r};const s={all:[],phone:[],totp:[],webauthn:[]};for(const o of(e=n==null?void 0:n.factors)!==null&&e!==void 0?e:[])s.all.push(o),o.status==="verified"&&s[o.factor_type].push(o);return{data:s,error:null}}async _getAuthenticatorAssuranceLevel(e){var n,r,s,o;if(e)try{const{payload:b}=rd(e);let I=null;b.aal&&(I=b.aal);let S=I;const{data:{user:R},error:A}=await this.getUser(e);if(A)return this._returnResult({data:null,error:A});((r=(n=R==null?void 0:R.factors)===null||n===void 0?void 0:n.filter(D=>D.status==="verified"))!==null&&r!==void 0?r:[]).length>0&&(S="aal2");const T=b.amr||[];return{data:{currentLevel:I,nextLevel:S,currentAuthenticationMethods:T},error:null}}catch(b){if(Ae(b))return this._returnResult({data:null,error:b});throw b}const{data:{session:c},error:h}=await this.getSession();if(h)return this._returnResult({data:null,error:h});if(!c)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:g}=rd(c.access_token);let p=null;g.aal&&(p=g.aal);let y=p;((o=(s=c.user.factors)===null||s===void 0?void 0:s.filter(b=>b.status==="verified"))!==null&&o!==void 0?o:[]).length>0&&(y="aal2");const E=g.amr||[];return{data:{currentLevel:p,nextLevel:y,currentAuthenticationMethods:E},error:null}}async _getAuthorizationDetails(e){try{return await this._useSession(async n=>{const{data:{session:r},error:s}=n;return s?this._returnResult({data:null,error:s}):r?await Oe(this.fetch,"GET",`${this.url}/oauth/authorizations/${e}`,{headers:this.headers,jwt:r.access_token,xform:o=>({data:o,error:null})}):this._returnResult({data:null,error:new ir})})}catch(n){if(Ae(n))return this._returnResult({data:null,error:n});throw n}}async _approveAuthorization(e,n){try{return await this._useSession(async r=>{const{data:{session:s},error:o}=r;if(o)return this._returnResult({data:null,error:o});if(!s)return this._returnResult({data:null,error:new ir});const c=await Oe(this.fetch,"POST",`${this.url}/oauth/authorizations/${e}/consent`,{headers:this.headers,jwt:s.access_token,body:{action:"approve"},xform:h=>({data:h,error:null})});return c.data&&c.data.redirect_url&&yn()&&!(n!=null&&n.skipBrowserRedirect)&&window.location.assign(c.data.redirect_url),c})}catch(r){if(Ae(r))return this._returnResult({data:null,error:r});throw r}}async _denyAuthorization(e,n){try{return await this._useSession(async r=>{const{data:{session:s},error:o}=r;if(o)return this._returnResult({data:null,error:o});if(!s)return this._returnResult({data:null,error:new ir});const c=await Oe(this.fetch,"POST",`${this.url}/oauth/authorizations/${e}/consent`,{headers:this.headers,jwt:s.access_token,body:{action:"deny"},xform:h=>({data:h,error:null})});return c.data&&c.data.redirect_url&&yn()&&!(n!=null&&n.skipBrowserRedirect)&&window.location.assign(c.data.redirect_url),c})}catch(r){if(Ae(r))return this._returnResult({data:null,error:r});throw r}}async _listOAuthGrants(){try{return await this._useSession(async e=>{const{data:{session:n},error:r}=e;return r?this._returnResult({data:null,error:r}):n?await Oe(this.fetch,"GET",`${this.url}/user/oauth/grants`,{headers:this.headers,jwt:n.access_token,xform:s=>({data:s,error:null})}):this._returnResult({data:null,error:new ir})})}catch(e){if(Ae(e))return this._returnResult({data:null,error:e});throw e}}async _revokeOAuthGrant(e){try{return await this._useSession(async n=>{const{data:{session:r},error:s}=n;return s?this._returnResult({data:null,error:s}):r?(await Oe(this.fetch,"DELETE",`${this.url}/user/oauth/grants`,{headers:this.headers,jwt:r.access_token,query:{client_id:e.clientId},noResolveJson:!0}),{data:{},error:null}):this._returnResult({data:null,error:new ir})})}catch(n){if(Ae(n))return this._returnResult({data:null,error:n});throw n}}async fetchJwk(e,n={keys:[]}){let r=n.keys.find(h=>h.kid===e);if(r)return r;const s=Date.now();if(r=this.jwks.keys.find(h=>h.kid===e),r&&this.jwks_cached_at+Qk>s)return r;const{data:o,error:c}=await Oe(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(c)throw c;return!o.keys||o.keys.length===0||(this.jwks=o,this.jwks_cached_at=s,r=o.keys.find(h=>h.kid===e),!r)?null:r}async getClaims(e,n={}){try{let r=e;if(!r){const{data:b,error:I}=await this.getSession();if(I||!b.session)return this._returnResult({data:null,error:I});r=b.session.access_token}const{header:s,payload:o,signature:c,raw:{header:h,payload:g}}=rd(r);n!=null&&n.allowExpired||vM(o.exp);const p=!s.alg||s.alg.startsWith("HS")||!s.kid||!("crypto"in globalThis&&"subtle"in globalThis.crypto)?null:await this.fetchJwk(s.kid,n!=null&&n.keys?{keys:n.keys}:n==null?void 0:n.jwks);if(!p){const{error:b}=await this.getUser(r);if(b)throw b;return{data:{claims:o,header:s,signature:c},error:null}}const y=EM(s.alg),x=await crypto.subtle.importKey("jwk",p,y,!0,["verify"]);if(!await crypto.subtle.verify(y,x,c,aM(`${h}.${g}`)))throw new K1("Invalid JWT signature");return{data:{claims:o,header:s,signature:c},error:null}}catch(r){if(Ae(r))return this._returnResult({data:null,error:r});throw r}}}Yc.nextInstanceID={};const JM=Yc,e6="2.95.3";let Jl="";typeof Deno<"u"?Jl="deno":typeof document<"u"?Jl="web":typeof navigator<"u"&&navigator.product==="ReactNative"?Jl="react-native":Jl="node";const t6={"X-Client-Info":`supabase-js-${Jl}/${e6}`},n6={headers:t6},r6={schema:"public"},i6={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},s6={};function Xc(t){"@babel/helpers - typeof";return Xc=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Xc(t)}function o6(t,e){if(Xc(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(Xc(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function a6(t){var e=o6(t,"string");return Xc(e)=="symbol"?e:e+""}function l6(t,e,n){return(e=a6(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function tx(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),n.push.apply(n,r)}return n}function Vt(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?tx(Object(n),!0).forEach(function(r){l6(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):tx(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}const c6=t=>t?(...e)=>t(...e):(...e)=>fetch(...e),u6=()=>Headers,d6=(t,e,n)=>{const r=c6(n),s=u6();return async(o,c)=>{var h;const g=(h=await e())!==null&&h!==void 0?h:t;let p=new s(c==null?void 0:c.headers);return p.has("apikey")||p.set("apikey",t),p.has("Authorization")||p.set("Authorization",`Bearer ${g}`),r(o,Vt(Vt({},c),{},{headers:p}))}};function h6(t){return t.endsWith("/")?t:t+"/"}function f6(t,e){var n,r;const{db:s,auth:o,realtime:c,global:h}=t,{db:g,auth:p,realtime:y,global:x}=e,E={db:Vt(Vt({},g),s),auth:Vt(Vt({},p),o),realtime:Vt(Vt({},y),c),storage:{},global:Vt(Vt(Vt({},x),h),{},{headers:Vt(Vt({},(n=x==null?void 0:x.headers)!==null&&n!==void 0?n:{}),(r=h==null?void 0:h.headers)!==null&&r!==void 0?r:{})}),accessToken:async()=>""};return t.accessToken?E.accessToken=t.accessToken:delete E.accessToken,E}function p6(t){const e=t==null?void 0:t.trim();if(!e)throw new Error("supabaseUrl is required.");if(!e.match(/^https?:\/\//i))throw new Error("Invalid supabaseUrl: Must be a valid HTTP or HTTPS URL.");try{return new URL(h6(e))}catch{throw Error("Invalid supabaseUrl: Provided URL is malformed.")}}var g6=class extends JM{constructor(t){super(t)}},m6=class{constructor(t,e,n){var r,s;this.supabaseUrl=t,this.supabaseKey=e;const o=p6(t);if(!e)throw new Error("supabaseKey is required.");this.realtimeUrl=new URL("realtime/v1",o),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",o),this.storageUrl=new URL("storage/v1",o),this.functionsUrl=new URL("functions/v1",o);const c=`sb-${o.hostname.split(".")[0]}-auth-token`,h={db:r6,realtime:s6,auth:Vt(Vt({},i6),{},{storageKey:c}),global:n6},g=f6(n??{},h);if(this.storageKey=(r=g.auth.storageKey)!==null&&r!==void 0?r:"",this.headers=(s=g.global.headers)!==null&&s!==void 0?s:{},g.accessToken)this.accessToken=g.accessToken,this.auth=new Proxy({},{get:(y,x)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(x)} is not possible`)}});else{var p;this.auth=this._initSupabaseAuthClient((p=g.auth)!==null&&p!==void 0?p:{},this.headers,g.global.fetch)}this.fetch=d6(e,this._getAccessToken.bind(this),g.global.fetch),this.realtime=this._initRealtimeClient(Vt({headers:this.headers,accessToken:this._getAccessToken.bind(this)},g.realtime)),this.accessToken&&Promise.resolve(this.accessToken()).then(y=>this.realtime.setAuth(y)).catch(y=>console.warn("Failed to set initial Realtime auth token:",y)),this.rest=new ek(new URL("rest/v1",o).href,{headers:this.headers,schema:g.db.schema,fetch:this.fetch,timeout:g.db.timeout,urlLengthLimit:g.db.urlLengthLimit}),this.storage=new Yk(this.storageUrl.href,this.headers,this.fetch,n==null?void 0:n.storage),g.accessToken||this._listenForAuthEvents()}get functions(){return new G8(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}from(t){return this.rest.from(t)}schema(t){return this.rest.schema(t)}rpc(t,e={},n={head:!1,get:!1,count:void 0}){return this.rest.rpc(t,e,n)}channel(t,e={config:{}}){return this.realtime.channel(t,e)}getChannels(){return this.realtime.getChannels()}removeChannel(t){return this.realtime.removeChannel(t)}removeAllChannels(){return this.realtime.removeAllChannels()}async _getAccessToken(){var t=this,e,n;if(t.accessToken)return await t.accessToken();const{data:r}=await t.auth.getSession();return(e=(n=r.session)===null||n===void 0?void 0:n.access_token)!==null&&e!==void 0?e:t.supabaseKey}_initSupabaseAuthClient({autoRefreshToken:t,persistSession:e,detectSessionInUrl:n,storage:r,userStorage:s,storageKey:o,flowType:c,lock:h,debug:g,throwOnError:p},y,x){const E={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new g6({url:this.authUrl.href,headers:Vt(Vt({},E),y),storageKey:o,autoRefreshToken:t,persistSession:e,detectSessionInUrl:n,storage:r,userStorage:s,flowType:c,lock:h,debug:g,throwOnError:p,fetch:x,hasCustomAuthorizationHeader:Object.keys(this.headers).some(b=>b.toLowerCase()==="authorization")})}_initRealtimeClient(t){return new yk(this.realtimeUrl.href,Vt(Vt({},t),{},{params:Vt(Vt({},{apikey:this.supabaseKey}),t==null?void 0:t.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((t,e)=>{this._handleTokenChanged(t,"CLIENT",e==null?void 0:e.access_token)})}_handleTokenChanged(t,e,n){(t==="TOKEN_REFRESHED"||t==="SIGNED_IN")&&this.changedAccessToken!==n?(this.changedAccessToken=n,this.realtime.setAuth(n)):t==="SIGNED_OUT"&&(this.realtime.setAuth(),e=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}};const y6=(t,e,n)=>new m6(t,e,n);function w6(){if(typeof window<"u")return!1;const t=globalThis.process;if(!t)return!1;const e=t.version;if(e==null)return!1;const n=e.match(/^v(\d+)\./);return n?parseInt(n[1],10)<=18:!1}w6()&&console.warn("  Node.js 18 and below are deprecated and will no longer be supported in future versions of @supabase/supabase-js. Please upgrade to Node.js 20 or later. For more information, visit: https://github.com/orgs/supabase/discussions/37217");const x6="https://wowdfkrgeoxjpprarxiw.supabase.co",v6="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Indvd2Rma3JnZW94anBwcmFyeGl3Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NzA0NjMyNDksImV4cCI6MjA4NjAzOTI0OX0.gaBPC7aVGE-SgJ70OcMprrGdxNfwqefya3iBkFrlk7A",Zn=y6(x6,v6,{auth:{storage:localStorage,persistSession:!0,autoRefreshToken:!0}});function E6(){const[t,e]=M.useState(null),[n,r]=M.useState(null),[s,o]=M.useState(!0),[c,h]=M.useState(null);M.useEffect(()=>{const{data:{subscription:y}}=Zn.auth.onAuthStateChange((x,E)=>{r(E),e((E==null?void 0:E.user)??null),E!=null&&E.user?setTimeout(()=>{g(E.user.id)},0):h(null)});return Zn.auth.getSession().then(({data:{session:x}})=>{r(x),e((x==null?void 0:x.user)??null),x!=null&&x.user&&g(x.user.id),o(!1)}),()=>y.unsubscribe()},[]);const g=async y=>{const{data:x}=await Zn.from("profiles").select("display_name").eq("user_id",y).maybeSingle();h((x==null?void 0:x.display_name)??null)};return{user:t,session:n,loading:s,displayName:c,signOut:async()=>{await Zn.auth.signOut()},refetchProfile:()=>t&&g(t.id)}}const b6=[{id:"suggest",label:"Vorschlagen",icon:y4},{id:"swipe",label:"Swipen",icon:v4},{id:"ranking",label:"Ranking",icon:S4}];function C6({activeTab:t,onTabChange:e}){return U.jsx("nav",{className:"fixed bottom-0 left-0 right-0 z-50 border-t border-border bg-card/95 backdrop-blur-md safe-area-bottom",children:U.jsx("div",{className:"mx-auto flex max-w-md items-center justify-around py-2",children:b6.map(({id:n,label:r,icon:s})=>U.jsxs("button",{onClick:()=>e(n),className:si("flex flex-1 flex-col items-center gap-0.5 py-1 transition-colors",t===n?"text-primary":"text-muted-foreground"),children:[U.jsx(s,{className:si("h-6 w-6",t===n&&"fill-primary/20")}),U.jsx("span",{className:"text-xs font-medium",children:r})]},n))})})}const dh=M.forwardRef(({className:t,type:e,...n},r)=>U.jsx("input",{type:e,className:si("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",t),ref:r,...n}));dh.displayName="Input";const S6=qb("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),Us=M.forwardRef(({className:t,variant:e,size:n,asChild:r=!1,...s},o)=>{const c=r?bI:"button";return U.jsx(c,{className:si(S6({variant:e,size:n,className:t})),ref:o,...s})});Us.displayName="Button";var xe;(function(t){t[t.QR_CODE=0]="QR_CODE",t[t.AZTEC=1]="AZTEC",t[t.CODABAR=2]="CODABAR",t[t.CODE_39=3]="CODE_39",t[t.CODE_93=4]="CODE_93",t[t.CODE_128=5]="CODE_128",t[t.DATA_MATRIX=6]="DATA_MATRIX",t[t.MAXICODE=7]="MAXICODE",t[t.ITF=8]="ITF",t[t.EAN_13=9]="EAN_13",t[t.EAN_8=10]="EAN_8",t[t.PDF_417=11]="PDF_417",t[t.RSS_14=12]="RSS_14",t[t.RSS_EXPANDED=13]="RSS_EXPANDED",t[t.UPC_A=14]="UPC_A",t[t.UPC_E=15]="UPC_E",t[t.UPC_EAN_EXTENSION=16]="UPC_EAN_EXTENSION"})(xe||(xe={}));var nx=new Map([[xe.QR_CODE,"QR_CODE"],[xe.AZTEC,"AZTEC"],[xe.CODABAR,"CODABAR"],[xe.CODE_39,"CODE_39"],[xe.CODE_93,"CODE_93"],[xe.CODE_128,"CODE_128"],[xe.DATA_MATRIX,"DATA_MATRIX"],[xe.MAXICODE,"MAXICODE"],[xe.ITF,"ITF"],[xe.EAN_13,"EAN_13"],[xe.EAN_8,"EAN_8"],[xe.PDF_417,"PDF_417"],[xe.RSS_14,"RSS_14"],[xe.RSS_EXPANDED,"RSS_EXPANDED"],[xe.UPC_A,"UPC_A"],[xe.UPC_E,"UPC_E"],[xe.UPC_EAN_EXTENSION,"UPC_EAN_EXTENSION"]]),rx;(function(t){t[t.UNKNOWN=0]="UNKNOWN",t[t.URL=1]="URL"})(rx||(rx={}));function A6(t){return Object.values(xe).includes(t)}var Ks;(function(t){t[t.SCAN_TYPE_CAMERA=0]="SCAN_TYPE_CAMERA",t[t.SCAN_TYPE_FILE=1]="SCAN_TYPE_FILE"})(Ks||(Ks={}));var Qr=function(){function t(){}return t.GITHUB_PROJECT_URL="https://github.com/mebjas/html5-qrcode",t.SCAN_DEFAULT_FPS=2,t.DEFAULT_DISABLE_FLIP=!1,t.DEFAULT_REMEMBER_LAST_CAMERA_USED=!0,t.DEFAULT_SUPPORTED_SCAN_TYPE=[Ks.SCAN_TYPE_CAMERA,Ks.SCAN_TYPE_FILE],t}(),xS=function(){function t(e,n){this.format=e,this.formatName=n}return t.prototype.toString=function(){return this.formatName},t.create=function(e){if(!nx.has(e))throw"".concat(e," not in html5QrcodeSupportedFormatsTextMap");return new t(e,nx.get(e))},t}(),ix=function(){function t(){}return t.createFromText=function(e){var n={text:e};return{decodedText:e,result:n}},t.createFromQrcodeResult=function(e){return{decodedText:e.text,result:e}},t}(),q1;(function(t){t[t.UNKWOWN_ERROR=0]="UNKWOWN_ERROR",t[t.IMPLEMENTATION_ERROR=1]="IMPLEMENTATION_ERROR",t[t.NO_CODE_FOUND_ERROR=2]="NO_CODE_FOUND_ERROR"})(q1||(q1={}));var vS=function(){function t(){}return t.createFrom=function(e){return{errorMessage:e,type:q1.UNKWOWN_ERROR}},t}(),ES=function(){function t(e){this.verbose=e}return t.prototype.log=function(e){this.verbose&&console.log(e)},t.prototype.warn=function(e){this.verbose&&console.warn(e)},t.prototype.logError=function(e,n){(this.verbose||n===!0)&&console.error(e)},t.prototype.logErrors=function(e){if(e.length===0)throw"Logger#logError called without arguments";this.verbose&&console.error(e)},t}();function wi(t){return typeof t>"u"||t===null}function _6(t,e,n){return t>n?n:t<e?e:t}var Ra=function(){function t(){}return t.codeParseError=function(e){return"QR code parse error, error = ".concat(e)},t.errorGettingUserMedia=function(e){return"Error getting userMedia, error = ".concat(e)},t.onlyDeviceSupportedError=function(){return"The device doesn't support navigator.mediaDevices , only supported cameraIdOrConfig in this case is deviceId parameter (string)."},t.cameraStreamingNotSupported=function(){return"Camera streaming not supported by the browser."},t.unableToQuerySupportedDevices=function(){return"Unable to query supported devices, unknown error."},t.insecureContextCameraQueryError=function(){return"Camera access is only supported in secure context like https or localhost."},t.scannerPaused=function(){return"Scanner paused"},t}(),lt=function(){function t(){}return t.scanningStatus=function(){return"Scanning"},t.idleStatus=function(){return"Idle"},t.errorStatus=function(){return"Error"},t.permissionStatus=function(){return"Permission"},t.noCameraFoundErrorStatus=function(){return"No Cameras"},t.lastMatch=function(e){return"Last Match: ".concat(e)},t.codeScannerTitle=function(){return"Code Scanner"},t.cameraPermissionTitle=function(){return"Request Camera Permissions"},t.cameraPermissionRequesting=function(){return"Requesting camera permissions..."},t.noCameraFound=function(){return"No camera found"},t.scanButtonStopScanningText=function(){return"Stop Scanning"},t.scanButtonStartScanningText=function(){return"Start Scanning"},t.torchOnButton=function(){return"Switch On Torch"},t.torchOffButton=function(){return"Switch Off Torch"},t.torchOnFailedMessage=function(){return"Failed to turn on torch"},t.torchOffFailedMessage=function(){return"Failed to turn off torch"},t.scanButtonScanningStarting=function(){return"Launching Camera..."},t.textIfCameraScanSelected=function(){return"Scan an Image File"},t.textIfFileScanSelected=function(){return"Scan using camera directly"},t.selectCamera=function(){return"Select Camera"},t.fileSelectionChooseImage=function(){return"Choose Image"},t.fileSelectionChooseAnother=function(){return"Choose Another"},t.fileSelectionNoImageSelected=function(){return"No image choosen"},t.anonymousCameraPrefix=function(){return"Anonymous Camera"},t.dragAndDropMessage=function(){return"Or drop an image to scan"},t.dragAndDropMessageOnlyImages=function(){return"Or drop an image to scan (other files not supported)"},t.zoom=function(){return"zoom"},t.loadingImage=function(){return"Loading image..."},t.cameraScanAltText=function(){return"Camera based scan"},t.fileScanAltText=function(){return"Fule based scan"},t}(),sx=function(){function t(){}return t.poweredBy=function(){return"Powered by "},t.reportIssues=function(){return"Report issues"},t}(),bS=function(){function t(){}return t.isMediaStreamConstraintsValid=function(e,n){if(typeof e!="object"){var r=typeof e;return n.logError("videoConstraints should be of type object, the "+"object passed is of type ".concat(r,"."),!0),!1}for(var s=["autoGainControl","channelCount","echoCancellation","latency","noiseSuppression","sampleRate","sampleSize","volume"],o=new Set(s),c=Object.keys(e),h=0,g=c;h<g.length;h++){var p=g[h];if(o.has(p))return n.logError("".concat(p," is not supported videoConstaints."),!0),!1}return!0},t}(),Z1={exports:{}};(function(t,e){(function(n,r){r(e)})(Ll,function(n){function r(N){return N==null}var s=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(N,i){N.__proto__=i}||function(N,i){for(var a in i)i.hasOwnProperty(a)&&(N[a]=i[a])};function o(N,i){s(N,i);function a(){this.constructor=N}N.prototype=i===null?Object.create(i):(a.prototype=i.prototype,new a)}function c(N,i){var a=Object.setPrototypeOf;a?a(N,i):N.__proto__=i}function h(N,i){i===void 0&&(i=N.constructor);var a=Error.captureStackTrace;a&&a(N,i)}var g=function(N){o(i,N);function i(a){var l=this.constructor,u=N.call(this,a)||this;return Object.defineProperty(u,"name",{value:l.name,enumerable:!1}),c(u,l.prototype),h(u),u}return i}(Error);class p extends g{constructor(i=void 0){super(i),this.message=i}getKind(){return this.constructor.kind}}p.kind="Exception";class y extends p{}y.kind="ArgumentException";class x extends p{}x.kind="IllegalArgumentException";class E{constructor(i){if(this.binarizer=i,i===null)throw new x("Binarizer must be non-null.")}getWidth(){return this.binarizer.getWidth()}getHeight(){return this.binarizer.getHeight()}getBlackRow(i,a){return this.binarizer.getBlackRow(i,a)}getBlackMatrix(){return(this.matrix===null||this.matrix===void 0)&&(this.matrix=this.binarizer.getBlackMatrix()),this.matrix}isCropSupported(){return this.binarizer.getLuminanceSource().isCropSupported()}crop(i,a,l,u){const d=this.binarizer.getLuminanceSource().crop(i,a,l,u);return new E(this.binarizer.createBinarizer(d))}isRotateSupported(){return this.binarizer.getLuminanceSource().isRotateSupported()}rotateCounterClockwise(){const i=this.binarizer.getLuminanceSource().rotateCounterClockwise();return new E(this.binarizer.createBinarizer(i))}rotateCounterClockwise45(){const i=this.binarizer.getLuminanceSource().rotateCounterClockwise45();return new E(this.binarizer.createBinarizer(i))}toString(){try{return this.getBlackMatrix().toString()}catch{return""}}}class b extends p{static getChecksumInstance(){return new b}}b.kind="ChecksumException";class I{constructor(i){this.source=i}getLuminanceSource(){return this.source}getWidth(){return this.source.getWidth()}getHeight(){return this.source.getHeight()}}class S{static arraycopy(i,a,l,u,d){for(;d--;)l[u++]=i[a++]}static currentTimeMillis(){return Date.now()}}class R extends p{}R.kind="IndexOutOfBoundsException";class A extends R{constructor(i=void 0,a=void 0){super(a),this.index=i,this.message=a}}A.kind="ArrayIndexOutOfBoundsException";class _{static fill(i,a){for(let l=0,u=i.length;l<u;l++)i[l]=a}static fillWithin(i,a,l,u){_.rangeCheck(i.length,a,l);for(let d=a;d<l;d++)i[d]=u}static rangeCheck(i,a,l){if(a>l)throw new x("fromIndex("+a+") > toIndex("+l+")");if(a<0)throw new A(a);if(l>i)throw new A(l)}static asList(...i){return i}static create(i,a,l){return Array.from({length:i}).map(d=>Array.from({length:a}).fill(l))}static createInt32Array(i,a,l){return Array.from({length:i}).map(d=>Int32Array.from({length:a}).fill(l))}static equals(i,a){if(!i||!a||!i.length||!a.length||i.length!==a.length)return!1;for(let l=0,u=i.length;l<u;l++)if(i[l]!==a[l])return!1;return!0}static hashCode(i){if(i===null)return 0;let a=1;for(const l of i)a=31*a+l;return a}static fillUint8Array(i,a){for(let l=0;l!==i.length;l++)i[l]=a}static copyOf(i,a){return i.slice(0,a)}static copyOfUint8Array(i,a){if(i.length<=a){const l=new Uint8Array(a);return l.set(i),l}return i.slice(0,a)}static copyOfRange(i,a,l){const u=l-a,d=new Int32Array(u);return S.arraycopy(i,a,d,0,u),d}static binarySearch(i,a,l){l===void 0&&(l=_.numberComparator);let u=0,d=i.length-1;for(;u<=d;){const f=d+u>>1,m=l(a,i[f]);if(m>0)u=f+1;else if(m<0)d=f-1;else return f}return-u-1}static numberComparator(i,a){return i-a}}class T{static numberOfTrailingZeros(i){let a;if(i===0)return 32;let l=31;return a=i<<16,a!==0&&(l-=16,i=a),a=i<<8,a!==0&&(l-=8,i=a),a=i<<4,a!==0&&(l-=4,i=a),a=i<<2,a!==0&&(l-=2,i=a),l-(i<<1>>>31)}static numberOfLeadingZeros(i){if(i===0)return 32;let a=1;return i>>>16||(a+=16,i<<=16),i>>>24||(a+=8,i<<=8),i>>>28||(a+=4,i<<=4),i>>>30||(a+=2,i<<=2),a-=i>>>31,a}static toHexString(i){return i.toString(16)}static toBinaryString(i){return String(parseInt(String(i),2))}static bitCount(i){return i=i-(i>>>1&1431655765),i=(i&858993459)+(i>>>2&858993459),i=i+(i>>>4)&252645135,i=i+(i>>>8),i=i+(i>>>16),i&63}static truncDivision(i,a){return Math.trunc(i/a)}static parseInt(i,a=void 0){return parseInt(i,a)}}T.MIN_VALUE_32_BITS=-2147483648,T.MAX_VALUE=Number.MAX_SAFE_INTEGER;class D{constructor(i,a){i===void 0?(this.size=0,this.bits=new Int32Array(1)):(this.size=i,a==null?this.bits=D.makeArray(i):this.bits=a)}getSize(){return this.size}getSizeInBytes(){return Math.floor((this.size+7)/8)}ensureCapacity(i){if(i>this.bits.length*32){const a=D.makeArray(i);S.arraycopy(this.bits,0,a,0,this.bits.length),this.bits=a}}get(i){return(this.bits[Math.floor(i/32)]&1<<(i&31))!==0}set(i){this.bits[Math.floor(i/32)]|=1<<(i&31)}flip(i){this.bits[Math.floor(i/32)]^=1<<(i&31)}getNextSet(i){const a=this.size;if(i>=a)return a;const l=this.bits;let u=Math.floor(i/32),d=l[u];d&=~((1<<(i&31))-1);const f=l.length;for(;d===0;){if(++u===f)return a;d=l[u]}const m=u*32+T.numberOfTrailingZeros(d);return m>a?a:m}getNextUnset(i){const a=this.size;if(i>=a)return a;const l=this.bits;let u=Math.floor(i/32),d=~l[u];d&=~((1<<(i&31))-1);const f=l.length;for(;d===0;){if(++u===f)return a;d=~l[u]}const m=u*32+T.numberOfTrailingZeros(d);return m>a?a:m}setBulk(i,a){this.bits[Math.floor(i/32)]=a}setRange(i,a){if(a<i||i<0||a>this.size)throw new x;if(a===i)return;a--;const l=Math.floor(i/32),u=Math.floor(a/32),d=this.bits;for(let f=l;f<=u;f++){const m=f>l?0:i&31,v=(2<<(f<u?31:a&31))-(1<<m);d[f]|=v}}clear(){const i=this.bits.length,a=this.bits;for(let l=0;l<i;l++)a[l]=0}isRange(i,a,l){if(a<i||i<0||a>this.size)throw new x;if(a===i)return!0;a--;const u=Math.floor(i/32),d=Math.floor(a/32),f=this.bits;for(let m=u;m<=d;m++){const w=m>u?0:i&31,C=(2<<(m<d?31:a&31))-(1<<w)&4294967295;if((f[m]&C)!==(l?C:0))return!1}return!0}appendBit(i){this.ensureCapacity(this.size+1),i&&(this.bits[Math.floor(this.size/32)]|=1<<(this.size&31)),this.size++}appendBits(i,a){if(a<0||a>32)throw new x("Num bits must be between 0 and 32");this.ensureCapacity(this.size+a);for(let l=a;l>0;l--)this.appendBit((i>>l-1&1)===1)}appendBitArray(i){const a=i.size;this.ensureCapacity(this.size+a);for(let l=0;l<a;l++)this.appendBit(i.get(l))}xor(i){if(this.size!==i.size)throw new x("Sizes don't match");const a=this.bits;for(let l=0,u=a.length;l<u;l++)a[l]^=i.bits[l]}toBytes(i,a,l,u){for(let d=0;d<u;d++){let f=0;for(let m=0;m<8;m++)this.get(i)&&(f|=1<<7-m),i++;a[l+d]=f}}getBitArray(){return this.bits}reverse(){const i=new Int32Array(this.bits.length),a=Math.floor((this.size-1)/32),l=a+1,u=this.bits;for(let d=0;d<l;d++){let f=u[d];f=f>>1&1431655765|(f&1431655765)<<1,f=f>>2&858993459|(f&858993459)<<2,f=f>>4&252645135|(f&252645135)<<4,f=f>>8&16711935|(f&16711935)<<8,f=f>>16&65535|(f&65535)<<16,i[a-d]=f}if(this.size!==l*32){const d=l*32-this.size;let f=i[0]>>>d;for(let m=1;m<l;m++){const w=i[m];f|=w<<32-d,i[m-1]=f,f=w>>>d}i[l-1]=f}this.bits=i}static makeArray(i){return new Int32Array(Math.floor((i+31)/32))}equals(i){if(!(i instanceof D))return!1;const a=i;return this.size===a.size&&_.equals(this.bits,a.bits)}hashCode(){return 31*this.size+_.hashCode(this.bits)}toString(){let i="";for(let a=0,l=this.size;a<l;a++)a&7||(i+=" "),i+=this.get(a)?"X":".";return i}clone(){return new D(this.size,this.bits.slice())}}var F;(function(N){N[N.OTHER=0]="OTHER",N[N.PURE_BARCODE=1]="PURE_BARCODE",N[N.POSSIBLE_FORMATS=2]="POSSIBLE_FORMATS",N[N.TRY_HARDER=3]="TRY_HARDER",N[N.CHARACTER_SET=4]="CHARACTER_SET",N[N.ALLOWED_LENGTHS=5]="ALLOWED_LENGTHS",N[N.ASSUME_CODE_39_CHECK_DIGIT=6]="ASSUME_CODE_39_CHECK_DIGIT",N[N.ASSUME_GS1=7]="ASSUME_GS1",N[N.RETURN_CODABAR_START_END=8]="RETURN_CODABAR_START_END",N[N.NEED_RESULT_POINT_CALLBACK=9]="NEED_RESULT_POINT_CALLBACK",N[N.ALLOWED_EAN_EXTENSIONS=10]="ALLOWED_EAN_EXTENSIONS"})(F||(F={}));var j=F;class B extends p{static getFormatInstance(){return new B}}B.kind="FormatException";var W;(function(N){N[N.Cp437=0]="Cp437",N[N.ISO8859_1=1]="ISO8859_1",N[N.ISO8859_2=2]="ISO8859_2",N[N.ISO8859_3=3]="ISO8859_3",N[N.ISO8859_4=4]="ISO8859_4",N[N.ISO8859_5=5]="ISO8859_5",N[N.ISO8859_6=6]="ISO8859_6",N[N.ISO8859_7=7]="ISO8859_7",N[N.ISO8859_8=8]="ISO8859_8",N[N.ISO8859_9=9]="ISO8859_9",N[N.ISO8859_10=10]="ISO8859_10",N[N.ISO8859_11=11]="ISO8859_11",N[N.ISO8859_13=12]="ISO8859_13",N[N.ISO8859_14=13]="ISO8859_14",N[N.ISO8859_15=14]="ISO8859_15",N[N.ISO8859_16=15]="ISO8859_16",N[N.SJIS=16]="SJIS",N[N.Cp1250=17]="Cp1250",N[N.Cp1251=18]="Cp1251",N[N.Cp1252=19]="Cp1252",N[N.Cp1256=20]="Cp1256",N[N.UnicodeBigUnmarked=21]="UnicodeBigUnmarked",N[N.UTF8=22]="UTF8",N[N.ASCII=23]="ASCII",N[N.Big5=24]="Big5",N[N.GB18030=25]="GB18030",N[N.EUC_KR=26]="EUC_KR"})(W||(W={}));class H{constructor(i,a,l,...u){this.valueIdentifier=i,this.name=l,typeof a=="number"?this.values=Int32Array.from([a]):this.values=a,this.otherEncodingNames=u,H.VALUE_IDENTIFIER_TO_ECI.set(i,this),H.NAME_TO_ECI.set(l,this);const d=this.values;for(let f=0,m=d.length;f!==m;f++){const w=d[f];H.VALUES_TO_ECI.set(w,this)}for(const f of u)H.NAME_TO_ECI.set(f,this)}getValueIdentifier(){return this.valueIdentifier}getName(){return this.name}getValue(){return this.values[0]}static getCharacterSetECIByValue(i){if(i<0||i>=900)throw new B("incorect value");const a=H.VALUES_TO_ECI.get(i);if(a===void 0)throw new B("incorect value");return a}static getCharacterSetECIByName(i){const a=H.NAME_TO_ECI.get(i);if(a===void 0)throw new B("incorect value");return a}equals(i){if(!(i instanceof H))return!1;const a=i;return this.getName()===a.getName()}}H.VALUE_IDENTIFIER_TO_ECI=new Map,H.VALUES_TO_ECI=new Map,H.NAME_TO_ECI=new Map,H.Cp437=new H(W.Cp437,Int32Array.from([0,2]),"Cp437"),H.ISO8859_1=new H(W.ISO8859_1,Int32Array.from([1,3]),"ISO-8859-1","ISO88591","ISO8859_1"),H.ISO8859_2=new H(W.ISO8859_2,4,"ISO-8859-2","ISO88592","ISO8859_2"),H.ISO8859_3=new H(W.ISO8859_3,5,"ISO-8859-3","ISO88593","ISO8859_3"),H.ISO8859_4=new H(W.ISO8859_4,6,"ISO-8859-4","ISO88594","ISO8859_4"),H.ISO8859_5=new H(W.ISO8859_5,7,"ISO-8859-5","ISO88595","ISO8859_5"),H.ISO8859_6=new H(W.ISO8859_6,8,"ISO-8859-6","ISO88596","ISO8859_6"),H.ISO8859_7=new H(W.ISO8859_7,9,"ISO-8859-7","ISO88597","ISO8859_7"),H.ISO8859_8=new H(W.ISO8859_8,10,"ISO-8859-8","ISO88598","ISO8859_8"),H.ISO8859_9=new H(W.ISO8859_9,11,"ISO-8859-9","ISO88599","ISO8859_9"),H.ISO8859_10=new H(W.ISO8859_10,12,"ISO-8859-10","ISO885910","ISO8859_10"),H.ISO8859_11=new H(W.ISO8859_11,13,"ISO-8859-11","ISO885911","ISO8859_11"),H.ISO8859_13=new H(W.ISO8859_13,15,"ISO-8859-13","ISO885913","ISO8859_13"),H.ISO8859_14=new H(W.ISO8859_14,16,"ISO-8859-14","ISO885914","ISO8859_14"),H.ISO8859_15=new H(W.ISO8859_15,17,"ISO-8859-15","ISO885915","ISO8859_15"),H.ISO8859_16=new H(W.ISO8859_16,18,"ISO-8859-16","ISO885916","ISO8859_16"),H.SJIS=new H(W.SJIS,20,"SJIS","Shift_JIS"),H.Cp1250=new H(W.Cp1250,21,"Cp1250","windows-1250"),H.Cp1251=new H(W.Cp1251,22,"Cp1251","windows-1251"),H.Cp1252=new H(W.Cp1252,23,"Cp1252","windows-1252"),H.Cp1256=new H(W.Cp1256,24,"Cp1256","windows-1256"),H.UnicodeBigUnmarked=new H(W.UnicodeBigUnmarked,25,"UnicodeBigUnmarked","UTF-16BE","UnicodeBig"),H.UTF8=new H(W.UTF8,26,"UTF8","UTF-8"),H.ASCII=new H(W.ASCII,Int32Array.from([27,170]),"ASCII","US-ASCII"),H.Big5=new H(W.Big5,28,"Big5"),H.GB18030=new H(W.GB18030,29,"GB18030","GB2312","EUC_CN","GBK"),H.EUC_KR=new H(W.EUC_KR,30,"EUC_KR","EUC-KR");class te extends p{}te.kind="UnsupportedOperationException";class he{static decode(i,a){const l=this.encodingName(a);return this.customDecoder?this.customDecoder(i,l):typeof TextDecoder>"u"||this.shouldDecodeOnFallback(l)?this.decodeFallback(i,l):new TextDecoder(l).decode(i)}static shouldDecodeOnFallback(i){return!he.isBrowser()&&i==="ISO-8859-1"}static encode(i,a){const l=this.encodingName(a);return this.customEncoder?this.customEncoder(i,l):typeof TextEncoder>"u"?this.encodeFallback(i):new TextEncoder().encode(i)}static isBrowser(){return typeof window<"u"&&{}.toString.call(window)==="[object Window]"}static encodingName(i){return typeof i=="string"?i:i.getName()}static encodingCharacterSet(i){return i instanceof H?i:H.getCharacterSetECIByName(i)}static decodeFallback(i,a){const l=this.encodingCharacterSet(a);if(he.isDecodeFallbackSupported(l)){let u="";for(let d=0,f=i.length;d<f;d++){let m=i[d].toString(16);m.length<2&&(m="0"+m),u+="%"+m}return decodeURIComponent(u)}if(l.equals(H.UnicodeBigUnmarked))return String.fromCharCode.apply(null,new Uint16Array(i.buffer));throw new te(`Encoding ${this.encodingName(a)} not supported by fallback.`)}static isDecodeFallbackSupported(i){return i.equals(H.UTF8)||i.equals(H.ISO8859_1)||i.equals(H.ASCII)}static encodeFallback(i){const l=btoa(unescape(encodeURIComponent(i))).split(""),u=[];for(let d=0;d<l.length;d++)u.push(l[d].charCodeAt(0));return new Uint8Array(u)}}class Q{static castAsNonUtf8Char(i,a=null){const l=a?a.getName():this.ISO88591;return he.decode(new Uint8Array([i]),l)}static guessEncoding(i,a){if(a!=null&&a.get(j.CHARACTER_SET)!==void 0)return a.get(j.CHARACTER_SET).toString();const l=i.length;let u=!0,d=!0,f=!0,m=0,w=0,v=0,C=0,O=0,k=0,L=0,V=0,z=0,G=0,K=0;const oe=i.length>3&&i[0]===239&&i[1]===187&&i[2]===191;for(let ae=0;ae<l&&(u||d||f);ae++){const re=i[ae]&255;f&&(m>0?re&128?m--:f=!1:re&128&&(re&64?(m++,re&32?(m++,re&16?(m++,re&8?f=!1:C++):v++):w++):f=!1)),u&&(re>127&&re<160?u=!1:re>159&&(re<192||re===215||re===247)&&K++),d&&(O>0?re<64||re===127||re>252?d=!1:O--:re===128||re===160||re>239?d=!1:re>160&&re<224?(k++,V=0,L++,L>z&&(z=L)):re>127?(O++,L=0,V++,V>G&&(G=V)):(L=0,V=0))}return f&&m>0&&(f=!1),d&&O>0&&(d=!1),f&&(oe||w+v+C>0)?Q.UTF8:d&&(Q.ASSUME_SHIFT_JIS||z>=3||G>=3)?Q.SHIFT_JIS:u&&d?z===2&&k===2||K*10>=l?Q.SHIFT_JIS:Q.ISO88591:u?Q.ISO88591:d?Q.SHIFT_JIS:f?Q.UTF8:Q.PLATFORM_DEFAULT_ENCODING}static format(i,...a){let l=-1;function u(f,m,w,v,C,O){if(f==="%%")return"%";if(a[++l]===void 0)return;f=v?parseInt(v.substr(1)):void 0;let k=C?parseInt(C.substr(1)):void 0,L;switch(O){case"s":L=a[l];break;case"c":L=a[l][0];break;case"f":L=parseFloat(a[l]).toFixed(f);break;case"p":L=parseFloat(a[l]).toPrecision(f);break;case"e":L=parseFloat(a[l]).toExponential(f);break;case"x":L=parseInt(a[l]).toString(k||16);break;case"d":L=parseFloat(parseInt(a[l],k||10).toPrecision(f)).toFixed(0);break}L=typeof L=="object"?JSON.stringify(L):(+L).toString(k);let V=parseInt(w),z=w&&w[0]+""=="0"?"0":" ";for(;L.length<V;)L=m!==void 0?L+z:z+L;return L}let d=/%(-)?(0?[0-9]+)?([.][0-9]+)?([#][0-9]+)?([scfpexd%])/g;return i.replace(d,u)}static getBytes(i,a){return he.encode(i,a)}static getCharCode(i,a=0){return i.charCodeAt(a)}static getCharAt(i){return String.fromCharCode(i)}}Q.SHIFT_JIS=H.SJIS.getName(),Q.GB2312="GB2312",Q.ISO88591=H.ISO8859_1.getName(),Q.EUC_JP="EUC_JP",Q.UTF8=H.UTF8.getName(),Q.PLATFORM_DEFAULT_ENCODING=Q.UTF8,Q.ASSUME_SHIFT_JIS=!1;class fe{constructor(i=""){this.value=i}enableDecoding(i){return this.encoding=i,this}append(i){return typeof i=="string"?this.value+=i.toString():this.encoding?this.value+=Q.castAsNonUtf8Char(i,this.encoding):this.value+=String.fromCharCode(i),this}appendChars(i,a,l){for(let u=a;a<a+l;u++)this.append(i[u]);return this}length(){return this.value.length}charAt(i){return this.value.charAt(i)}deleteCharAt(i){this.value=this.value.substr(0,i)+this.value.substring(i+1)}setCharAt(i,a){this.value=this.value.substr(0,i)+a+this.value.substr(i+1)}substring(i,a){return this.value.substring(i,a)}setLengthToZero(){this.value=""}toString(){return this.value}insert(i,a){this.value=this.value.substr(0,i)+a+this.value.substr(i+a.length)}}class ie{constructor(i,a,l,u){if(this.width=i,this.height=a,this.rowSize=l,this.bits=u,a==null&&(a=i),this.height=a,i<1||a<1)throw new x("Both dimensions must be greater than 0");l==null&&(l=Math.floor((i+31)/32)),this.rowSize=l,u==null&&(this.bits=new Int32Array(this.rowSize*this.height))}static parseFromBooleanArray(i){const a=i.length,l=i[0].length,u=new ie(l,a);for(let d=0;d<a;d++){const f=i[d];for(let m=0;m<l;m++)f[m]&&u.set(m,d)}return u}static parseFromString(i,a,l){if(i===null)throw new x("stringRepresentation cannot be null");const u=new Array(i.length);let d=0,f=0,m=-1,w=0,v=0;for(;v<i.length;)if(i.charAt(v)===`
`||i.charAt(v)==="\r"){if(d>f){if(m===-1)m=d-f;else if(d-f!==m)throw new x("row lengths do not match");f=d,w++}v++}else if(i.substring(v,v+a.length)===a)v+=a.length,u[d]=!0,d++;else if(i.substring(v,v+l.length)===l)v+=l.length,u[d]=!1,d++;else throw new x("illegal character encountered: "+i.substring(v));if(d>f){if(m===-1)m=d-f;else if(d-f!==m)throw new x("row lengths do not match");w++}const C=new ie(m,w);for(let O=0;O<d;O++)u[O]&&C.set(Math.floor(O%m),Math.floor(O/m));return C}get(i,a){const l=a*this.rowSize+Math.floor(i/32);return(this.bits[l]>>>(i&31)&1)!==0}set(i,a){const l=a*this.rowSize+Math.floor(i/32);this.bits[l]|=1<<(i&31)&4294967295}unset(i,a){const l=a*this.rowSize+Math.floor(i/32);this.bits[l]&=~(1<<(i&31)&4294967295)}flip(i,a){const l=a*this.rowSize+Math.floor(i/32);this.bits[l]^=1<<(i&31)&4294967295}xor(i){if(this.width!==i.getWidth()||this.height!==i.getHeight()||this.rowSize!==i.getRowSize())throw new x("input matrix dimensions do not match");const a=new D(Math.floor(this.width/32)+1),l=this.rowSize,u=this.bits;for(let d=0,f=this.height;d<f;d++){const m=d*l,w=i.getRow(d,a).getBitArray();for(let v=0;v<l;v++)u[m+v]^=w[v]}}clear(){const i=this.bits,a=i.length;for(let l=0;l<a;l++)i[l]=0}setRegion(i,a,l,u){if(a<0||i<0)throw new x("Left and top must be nonnegative");if(u<1||l<1)throw new x("Height and width must be at least 1");const d=i+l,f=a+u;if(f>this.height||d>this.width)throw new x("The region must fit inside the matrix");const m=this.rowSize,w=this.bits;for(let v=a;v<f;v++){const C=v*m;for(let O=i;O<d;O++)w[C+Math.floor(O/32)]|=1<<(O&31)&4294967295}}getRow(i,a){a==null||a.getSize()<this.width?a=new D(this.width):a.clear();const l=this.rowSize,u=this.bits,d=i*l;for(let f=0;f<l;f++)a.setBulk(f*32,u[d+f]);return a}setRow(i,a){S.arraycopy(a.getBitArray(),0,this.bits,i*this.rowSize,this.rowSize)}rotate180(){const i=this.getWidth(),a=this.getHeight();let l=new D(i),u=new D(i);for(let d=0,f=Math.floor((a+1)/2);d<f;d++)l=this.getRow(d,l),u=this.getRow(a-1-d,u),l.reverse(),u.reverse(),this.setRow(d,u),this.setRow(a-1-d,l)}getEnclosingRectangle(){const i=this.width,a=this.height,l=this.rowSize,u=this.bits;let d=i,f=a,m=-1,w=-1;for(let v=0;v<a;v++)for(let C=0;C<l;C++){const O=u[v*l+C];if(O!==0){if(v<f&&(f=v),v>w&&(w=v),C*32<d){let k=0;for(;!(O<<31-k&4294967295);)k++;C*32+k<d&&(d=C*32+k)}if(C*32+31>m){let k=31;for(;!(O>>>k);)k--;C*32+k>m&&(m=C*32+k)}}}return m<d||w<f?null:Int32Array.from([d,f,m-d+1,w-f+1])}getTopLeftOnBit(){const i=this.rowSize,a=this.bits;let l=0;for(;l<a.length&&a[l]===0;)l++;if(l===a.length)return null;const u=l/i;let d=l%i*32;const f=a[l];let m=0;for(;!(f<<31-m&4294967295);)m++;return d+=m,Int32Array.from([d,u])}getBottomRightOnBit(){const i=this.rowSize,a=this.bits;let l=a.length-1;for(;l>=0&&a[l]===0;)l--;if(l<0)return null;const u=Math.floor(l/i);let d=Math.floor(l%i)*32;const f=a[l];let m=31;for(;!(f>>>m);)m--;return d+=m,Int32Array.from([d,u])}getWidth(){return this.width}getHeight(){return this.height}getRowSize(){return this.rowSize}equals(i){if(!(i instanceof ie))return!1;const a=i;return this.width===a.width&&this.height===a.height&&this.rowSize===a.rowSize&&_.equals(this.bits,a.bits)}hashCode(){let i=this.width;return i=31*i+this.width,i=31*i+this.height,i=31*i+this.rowSize,i=31*i+_.hashCode(this.bits),i}toString(i="X ",a="  ",l=`
`){return this.buildToString(i,a,l)}buildToString(i,a,l){let u=new fe;for(let d=0,f=this.height;d<f;d++){for(let m=0,w=this.width;m<w;m++)u.append(this.get(m,d)?i:a);u.append(l)}return u.toString()}clone(){return new ie(this.width,this.height,this.rowSize,this.bits.slice())}}class $ extends p{static getNotFoundInstance(){return new $}}$.kind="NotFoundException";class Ee extends I{constructor(i){super(i),this.luminances=Ee.EMPTY,this.buckets=new Int32Array(Ee.LUMINANCE_BUCKETS)}getBlackRow(i,a){const l=this.getLuminanceSource(),u=l.getWidth();a==null||a.getSize()<u?a=new D(u):a.clear(),this.initArrays(u);const d=l.getRow(i,this.luminances),f=this.buckets;for(let w=0;w<u;w++)f[(d[w]&255)>>Ee.LUMINANCE_SHIFT]++;const m=Ee.estimateBlackPoint(f);if(u<3)for(let w=0;w<u;w++)(d[w]&255)<m&&a.set(w);else{let w=d[0]&255,v=d[1]&255;for(let C=1;C<u-1;C++){const O=d[C+1]&255;(v*4-w-O)/2<m&&a.set(C),w=v,v=O}}return a}getBlackMatrix(){const i=this.getLuminanceSource(),a=i.getWidth(),l=i.getHeight(),u=new ie(a,l);this.initArrays(a);const d=this.buckets;for(let w=1;w<5;w++){const v=Math.floor(l*w/5),C=i.getRow(v,this.luminances),O=Math.floor(a*4/5);for(let k=Math.floor(a/5);k<O;k++){const L=C[k]&255;d[L>>Ee.LUMINANCE_SHIFT]++}}const f=Ee.estimateBlackPoint(d),m=i.getMatrix();for(let w=0;w<l;w++){const v=w*a;for(let C=0;C<a;C++)(m[v+C]&255)<f&&u.set(C,w)}return u}createBinarizer(i){return new Ee(i)}initArrays(i){this.luminances.length<i&&(this.luminances=new Uint8ClampedArray(i));const a=this.buckets;for(let l=0;l<Ee.LUMINANCE_BUCKETS;l++)a[l]=0}static estimateBlackPoint(i){const a=i.length;let l=0,u=0,d=0;for(let C=0;C<a;C++)i[C]>d&&(u=C,d=i[C]),i[C]>l&&(l=i[C]);let f=0,m=0;for(let C=0;C<a;C++){const O=C-u,k=i[C]*O*O;k>m&&(f=C,m=k)}if(u>f){const C=u;u=f,f=C}if(f-u<=a/16)throw new $;let w=f-1,v=-1;for(let C=f-1;C>u;C--){const O=C-u,k=O*O*(f-C)*(l-i[C]);k>v&&(w=C,v=k)}return w<<Ee.LUMINANCE_SHIFT}}Ee.LUMINANCE_BITS=5,Ee.LUMINANCE_SHIFT=8-Ee.LUMINANCE_BITS,Ee.LUMINANCE_BUCKETS=1<<Ee.LUMINANCE_BITS,Ee.EMPTY=Uint8ClampedArray.from([0]);class ne extends Ee{constructor(i){super(i),this.matrix=null}getBlackMatrix(){if(this.matrix!==null)return this.matrix;const i=this.getLuminanceSource(),a=i.getWidth(),l=i.getHeight();if(a>=ne.MINIMUM_DIMENSION&&l>=ne.MINIMUM_DIMENSION){const u=i.getMatrix();let d=a>>ne.BLOCK_SIZE_POWER;a&ne.BLOCK_SIZE_MASK&&d++;let f=l>>ne.BLOCK_SIZE_POWER;l&ne.BLOCK_SIZE_MASK&&f++;const m=ne.calculateBlackPoints(u,d,f,a,l),w=new ie(a,l);ne.calculateThresholdForBlock(u,d,f,a,l,m,w),this.matrix=w}else this.matrix=super.getBlackMatrix();return this.matrix}createBinarizer(i){return new ne(i)}static calculateThresholdForBlock(i,a,l,u,d,f,m){const w=d-ne.BLOCK_SIZE,v=u-ne.BLOCK_SIZE;for(let C=0;C<l;C++){let O=C<<ne.BLOCK_SIZE_POWER;O>w&&(O=w);const k=ne.cap(C,2,l-3);for(let L=0;L<a;L++){let V=L<<ne.BLOCK_SIZE_POWER;V>v&&(V=v);const z=ne.cap(L,2,a-3);let G=0;for(let oe=-2;oe<=2;oe++){const ae=f[k+oe];G+=ae[z-2]+ae[z-1]+ae[z]+ae[z+1]+ae[z+2]}const K=G/25;ne.thresholdBlock(i,V,O,K,u,m)}}}static cap(i,a,l){return i<a?a:i>l?l:i}static thresholdBlock(i,a,l,u,d,f){for(let m=0,w=l*d+a;m<ne.BLOCK_SIZE;m++,w+=d)for(let v=0;v<ne.BLOCK_SIZE;v++)(i[w+v]&255)<=u&&f.set(a+v,l+m)}static calculateBlackPoints(i,a,l,u,d){const f=d-ne.BLOCK_SIZE,m=u-ne.BLOCK_SIZE,w=new Array(l);for(let v=0;v<l;v++){w[v]=new Int32Array(a);let C=v<<ne.BLOCK_SIZE_POWER;C>f&&(C=f);for(let O=0;O<a;O++){let k=O<<ne.BLOCK_SIZE_POWER;k>m&&(k=m);let L=0,V=255,z=0;for(let K=0,oe=C*u+k;K<ne.BLOCK_SIZE;K++,oe+=u){for(let ae=0;ae<ne.BLOCK_SIZE;ae++){const re=i[oe+ae]&255;L+=re,re<V&&(V=re),re>z&&(z=re)}if(z-V>ne.MIN_DYNAMIC_RANGE)for(K++,oe+=u;K<ne.BLOCK_SIZE;K++,oe+=u)for(let ae=0;ae<ne.BLOCK_SIZE;ae++)L+=i[oe+ae]&255}let G=L>>ne.BLOCK_SIZE_POWER*2;if(z-V<=ne.MIN_DYNAMIC_RANGE&&(G=V/2,v>0&&O>0)){const K=(w[v-1][O]+2*w[v][O-1]+w[v-1][O-1])/4;V<K&&(G=K)}w[v][O]=G}}return w}}ne.BLOCK_SIZE_POWER=3,ne.BLOCK_SIZE=1<<ne.BLOCK_SIZE_POWER,ne.BLOCK_SIZE_MASK=ne.BLOCK_SIZE-1,ne.MINIMUM_DIMENSION=ne.BLOCK_SIZE*5,ne.MIN_DYNAMIC_RANGE=24;class q{constructor(i,a){this.width=i,this.height=a}getWidth(){return this.width}getHeight(){return this.height}isCropSupported(){return!1}crop(i,a,l,u){throw new te("This luminance source does not support cropping.")}isRotateSupported(){return!1}rotateCounterClockwise(){throw new te("This luminance source does not support rotation by 90 degrees.")}rotateCounterClockwise45(){throw new te("This luminance source does not support rotation by 45 degrees.")}toString(){const i=new Uint8ClampedArray(this.width);let a=new fe;for(let l=0;l<this.height;l++){const u=this.getRow(l,i);for(let d=0;d<this.width;d++){const f=u[d]&255;let m;f<64?m="#":f<128?m="+":f<192?m=".":m=" ",a.append(m)}a.append(`
`)}return a.toString()}}class Z extends q{constructor(i){super(i.getWidth(),i.getHeight()),this.delegate=i}getRow(i,a){const l=this.delegate.getRow(i,a),u=this.getWidth();for(let d=0;d<u;d++)l[d]=255-(l[d]&255);return l}getMatrix(){const i=this.delegate.getMatrix(),a=this.getWidth()*this.getHeight(),l=new Uint8ClampedArray(a);for(let u=0;u<a;u++)l[u]=255-(i[u]&255);return l}isCropSupported(){return this.delegate.isCropSupported()}crop(i,a,l,u){return new Z(this.delegate.crop(i,a,l,u))}isRotateSupported(){return this.delegate.isRotateSupported()}invert(){return this.delegate}rotateCounterClockwise(){return new Z(this.delegate.rotateCounterClockwise())}rotateCounterClockwise45(){return new Z(this.delegate.rotateCounterClockwise45())}}class ue extends q{constructor(i){super(i.width,i.height),this.canvas=i,this.tempCanvasElement=null,this.buffer=ue.makeBufferFromCanvasImageData(i)}static makeBufferFromCanvasImageData(i){const a=i.getContext("2d").getImageData(0,0,i.width,i.height);return ue.toGrayscaleBuffer(a.data,i.width,i.height)}static toGrayscaleBuffer(i,a,l){const u=new Uint8ClampedArray(a*l);for(let d=0,f=0,m=i.length;d<m;d+=4,f++){let w;if(i[d+3]===0)w=255;else{const C=i[d],O=i[d+1],k=i[d+2];w=306*C+601*O+117*k+512>>10}u[f]=w}return u}getRow(i,a){if(i<0||i>=this.getHeight())throw new x("Requested row is outside the image: "+i);const l=this.getWidth(),u=i*l;return a===null?a=this.buffer.slice(u,u+l):(a.length<l&&(a=new Uint8ClampedArray(l)),a.set(this.buffer.slice(u,u+l))),a}getMatrix(){return this.buffer}isCropSupported(){return!0}crop(i,a,l,u){return super.crop(i,a,l,u),this}isRotateSupported(){return!0}rotateCounterClockwise(){return this.rotate(-90),this}rotateCounterClockwise45(){return this.rotate(-45),this}getTempCanvasElement(){if(this.tempCanvasElement===null){const i=this.canvas.ownerDocument.createElement("canvas");i.width=this.canvas.width,i.height=this.canvas.height,this.tempCanvasElement=i}return this.tempCanvasElement}rotate(i){const a=this.getTempCanvasElement(),l=a.getContext("2d"),u=i*ue.DEGREE_TO_RADIANS,d=this.canvas.width,f=this.canvas.height,m=Math.ceil(Math.abs(Math.cos(u))*d+Math.abs(Math.sin(u))*f),w=Math.ceil(Math.abs(Math.sin(u))*d+Math.abs(Math.cos(u))*f);return a.width=m,a.height=w,l.translate(m/2,w/2),l.rotate(u),l.drawImage(this.canvas,d/-2,f/-2),this.buffer=ue.makeBufferFromCanvasImageData(a),this}invert(){return new Z(this)}}ue.DEGREE_TO_RADIANS=Math.PI/180;class De{constructor(i,a,l){this.deviceId=i,this.label=a,this.kind="videoinput",this.groupId=l||void 0}toJSON(){return{kind:this.kind,groupId:this.groupId,deviceId:this.deviceId,label:this.label}}}var ge=(globalThis||Ll||self||window||void 0)&&(globalThis||Ll||self||window||void 0).__awaiter||function(N,i,a,l){function u(d){return d instanceof a?d:new a(function(f){f(d)})}return new(a||(a=Promise))(function(d,f){function m(C){try{v(l.next(C))}catch(O){f(O)}}function w(C){try{v(l.throw(C))}catch(O){f(O)}}function v(C){C.done?d(C.value):u(C.value).then(m,w)}v((l=l.apply(N,i||[])).next())})};class Pe{constructor(i,a=500,l){this.reader=i,this.timeBetweenScansMillis=a,this._hints=l,this._stopContinuousDecode=!1,this._stopAsyncDecode=!1,this._timeBetweenDecodingAttempts=0}get hasNavigator(){return typeof navigator<"u"}get isMediaDevicesSuported(){return this.hasNavigator&&!!navigator.mediaDevices}get canEnumerateDevices(){return!!(this.isMediaDevicesSuported&&navigator.mediaDevices.enumerateDevices)}get timeBetweenDecodingAttempts(){return this._timeBetweenDecodingAttempts}set timeBetweenDecodingAttempts(i){this._timeBetweenDecodingAttempts=i<0?0:i}set hints(i){this._hints=i||null}get hints(){return this._hints}listVideoInputDevices(){return ge(this,void 0,void 0,function*(){if(!this.hasNavigator)throw new Error("Can't enumerate devices, navigator is not present.");if(!this.canEnumerateDevices)throw new Error("Can't enumerate devices, method not supported.");const i=yield navigator.mediaDevices.enumerateDevices(),a=[];for(const l of i){const u=l.kind==="video"?"videoinput":l.kind;if(u!=="videoinput")continue;const d=l.deviceId||l.id,f=l.label||`Video device ${a.length+1}`,m=l.groupId,w={deviceId:d,label:f,kind:u,groupId:m};a.push(w)}return a})}getVideoInputDevices(){return ge(this,void 0,void 0,function*(){return(yield this.listVideoInputDevices()).map(a=>new De(a.deviceId,a.label))})}findDeviceById(i){return ge(this,void 0,void 0,function*(){const a=yield this.listVideoInputDevices();return a?a.find(l=>l.deviceId===i):null})}decodeFromInputVideoDevice(i,a){return ge(this,void 0,void 0,function*(){return yield this.decodeOnceFromVideoDevice(i,a)})}decodeOnceFromVideoDevice(i,a){return ge(this,void 0,void 0,function*(){this.reset();let l;i?l={deviceId:{exact:i}}:l={facingMode:"environment"};const u={video:l};return yield this.decodeOnceFromConstraints(u,a)})}decodeOnceFromConstraints(i,a){return ge(this,void 0,void 0,function*(){const l=yield navigator.mediaDevices.getUserMedia(i);return yield this.decodeOnceFromStream(l,a)})}decodeOnceFromStream(i,a){return ge(this,void 0,void 0,function*(){this.reset();const l=yield this.attachStreamToVideo(i,a);return yield this.decodeOnce(l)})}decodeFromInputVideoDeviceContinuously(i,a,l){return ge(this,void 0,void 0,function*(){return yield this.decodeFromVideoDevice(i,a,l)})}decodeFromVideoDevice(i,a,l){return ge(this,void 0,void 0,function*(){let u;i?u={deviceId:{exact:i}}:u={facingMode:"environment"};const d={video:u};return yield this.decodeFromConstraints(d,a,l)})}decodeFromConstraints(i,a,l){return ge(this,void 0,void 0,function*(){const u=yield navigator.mediaDevices.getUserMedia(i);return yield this.decodeFromStream(u,a,l)})}decodeFromStream(i,a,l){return ge(this,void 0,void 0,function*(){this.reset();const u=yield this.attachStreamToVideo(i,a);return yield this.decodeContinuously(u,l)})}stopAsyncDecode(){this._stopAsyncDecode=!0}stopContinuousDecode(){this._stopContinuousDecode=!0}attachStreamToVideo(i,a){return ge(this,void 0,void 0,function*(){const l=this.prepareVideoElement(a);return this.addVideoSource(l,i),this.videoElement=l,this.stream=i,yield this.playVideoOnLoadAsync(l),l})}playVideoOnLoadAsync(i){return new Promise((a,l)=>this.playVideoOnLoad(i,()=>a()))}playVideoOnLoad(i,a){this.videoEndedListener=()=>this.stopStreams(),this.videoCanPlayListener=()=>this.tryPlayVideo(i),i.addEventListener("ended",this.videoEndedListener),i.addEventListener("canplay",this.videoCanPlayListener),i.addEventListener("playing",a),this.tryPlayVideo(i)}isVideoPlaying(i){return i.currentTime>0&&!i.paused&&!i.ended&&i.readyState>2}tryPlayVideo(i){return ge(this,void 0,void 0,function*(){if(this.isVideoPlaying(i)){console.warn("Trying to play video that is already playing.");return}try{yield i.play()}catch{console.warn("It was not possible to play the video.")}})}getMediaElement(i,a){const l=document.getElementById(i);if(!l)throw new y(`element with id '${i}' not found`);if(l.nodeName.toLowerCase()!==a.toLowerCase())throw new y(`element with id '${i}' must be an ${a} element`);return l}decodeFromImage(i,a){if(!i&&!a)throw new y("either imageElement with a src set or an url must be provided");return a&&!i?this.decodeFromImageUrl(a):this.decodeFromImageElement(i)}decodeFromVideo(i,a){if(!i&&!a)throw new y("Either an element with a src set or an URL must be provided");return a&&!i?this.decodeFromVideoUrl(a):this.decodeFromVideoElement(i)}decodeFromVideoContinuously(i,a,l){if(i===void 0&&a===void 0)throw new y("Either an element with a src set or an URL must be provided");return a&&!i?this.decodeFromVideoUrlContinuously(a,l):this.decodeFromVideoElementContinuously(i,l)}decodeFromImageElement(i){if(!i)throw new y("An image element must be provided.");this.reset();const a=this.prepareImageElement(i);this.imageElement=a;let l;return this.isImageLoaded(a)?l=this.decodeOnce(a,!1,!0):l=this._decodeOnLoadImage(a),l}decodeFromVideoElement(i){const a=this._decodeFromVideoElementSetup(i);return this._decodeOnLoadVideo(a)}decodeFromVideoElementContinuously(i,a){const l=this._decodeFromVideoElementSetup(i);return this._decodeOnLoadVideoContinuously(l,a)}_decodeFromVideoElementSetup(i){if(!i)throw new y("A video element must be provided.");this.reset();const a=this.prepareVideoElement(i);return this.videoElement=a,a}decodeFromImageUrl(i){if(!i)throw new y("An URL must be provided.");this.reset();const a=this.prepareImageElement();this.imageElement=a;const l=this._decodeOnLoadImage(a);return a.src=i,l}decodeFromVideoUrl(i){if(!i)throw new y("An URL must be provided.");this.reset();const a=this.prepareVideoElement(),l=this.decodeFromVideoElement(a);return a.src=i,l}decodeFromVideoUrlContinuously(i,a){if(!i)throw new y("An URL must be provided.");this.reset();const l=this.prepareVideoElement(),u=this.decodeFromVideoElementContinuously(l,a);return l.src=i,u}_decodeOnLoadImage(i){return new Promise((a,l)=>{this.imageLoadedListener=()=>this.decodeOnce(i,!1,!0).then(a,l),i.addEventListener("load",this.imageLoadedListener)})}_decodeOnLoadVideo(i){return ge(this,void 0,void 0,function*(){return yield this.playVideoOnLoadAsync(i),yield this.decodeOnce(i)})}_decodeOnLoadVideoContinuously(i,a){return ge(this,void 0,void 0,function*(){yield this.playVideoOnLoadAsync(i),this.decodeContinuously(i,a)})}isImageLoaded(i){return!(!i.complete||i.naturalWidth===0)}prepareImageElement(i){let a;return typeof i>"u"&&(a=document.createElement("img"),a.width=200,a.height=200),typeof i=="string"&&(a=this.getMediaElement(i,"img")),i instanceof HTMLImageElement&&(a=i),a}prepareVideoElement(i){let a;return!i&&typeof document<"u"&&(a=document.createElement("video"),a.width=200,a.height=200),typeof i=="string"&&(a=this.getMediaElement(i,"video")),i instanceof HTMLVideoElement&&(a=i),a.setAttribute("autoplay","true"),a.setAttribute("muted","true"),a.setAttribute("playsinline","true"),a}decodeOnce(i,a=!0,l=!0){this._stopAsyncDecode=!1;const u=(d,f)=>{if(this._stopAsyncDecode){f(new $("Video stream has ended before any code could be detected.")),this._stopAsyncDecode=void 0;return}try{const m=this.decode(i);d(m)}catch(m){const w=a&&m instanceof $,C=(m instanceof b||m instanceof B)&&l;if(w||C)return setTimeout(u,this._timeBetweenDecodingAttempts,d,f);f(m)}};return new Promise((d,f)=>u(d,f))}decodeContinuously(i,a){this._stopContinuousDecode=!1;const l=()=>{if(this._stopContinuousDecode){this._stopContinuousDecode=void 0;return}try{const u=this.decode(i);a(u,null),setTimeout(l,this.timeBetweenScansMillis)}catch(u){a(null,u);const d=u instanceof b||u instanceof B,f=u instanceof $;(d||f)&&setTimeout(l,this._timeBetweenDecodingAttempts)}};l()}decode(i){const a=this.createBinaryBitmap(i);return this.decodeBitmap(a)}_isHTMLVideoElement(i){return i.videoWidth!==0}drawFrameOnCanvas(i,a,l){a||(a={sx:0,sy:0,sWidth:i.videoWidth,sHeight:i.videoHeight,dx:0,dy:0,dWidth:i.videoWidth,dHeight:i.videoHeight}),l||(l=this.captureCanvasContext),l.drawImage(i,a.sx,a.sy,a.sWidth,a.sHeight,a.dx,a.dy,a.dWidth,a.dHeight)}drawImageOnCanvas(i,a,l=this.captureCanvasContext){a||(a={sx:0,sy:0,sWidth:i.naturalWidth,sHeight:i.naturalHeight,dx:0,dy:0,dWidth:i.naturalWidth,dHeight:i.naturalHeight}),l||(l=this.captureCanvasContext),l.drawImage(i,a.sx,a.sy,a.sWidth,a.sHeight,a.dx,a.dy,a.dWidth,a.dHeight)}createBinaryBitmap(i){this.getCaptureCanvasContext(i),this._isHTMLVideoElement(i)?this.drawFrameOnCanvas(i):this.drawImageOnCanvas(i);const a=this.getCaptureCanvas(i),l=new ue(a),u=new ne(l);return new E(u)}getCaptureCanvasContext(i){if(!this.captureCanvasContext){const l=this.getCaptureCanvas(i).getContext("2d");this.captureCanvasContext=l}return this.captureCanvasContext}getCaptureCanvas(i){if(!this.captureCanvas){const a=this.createCaptureCanvas(i);this.captureCanvas=a}return this.captureCanvas}decodeBitmap(i){return this.reader.decode(i,this._hints)}createCaptureCanvas(i){if(typeof document>"u")return this._destroyCaptureCanvas(),null;const a=document.createElement("canvas");let l,u;return typeof i<"u"&&(i instanceof HTMLVideoElement?(l=i.videoWidth,u=i.videoHeight):i instanceof HTMLImageElement&&(l=i.naturalWidth||i.width,u=i.naturalHeight||i.height)),a.style.width=l+"px",a.style.height=u+"px",a.width=l,a.height=u,a}stopStreams(){this.stream&&(this.stream.getVideoTracks().forEach(i=>i.stop()),this.stream=void 0),this._stopAsyncDecode===!1&&this.stopAsyncDecode(),this._stopContinuousDecode===!1&&this.stopContinuousDecode()}reset(){this.stopStreams(),this._destroyVideoElement(),this._destroyImageElement(),this._destroyCaptureCanvas()}_destroyVideoElement(){this.videoElement&&(typeof this.videoEndedListener<"u"&&this.videoElement.removeEventListener("ended",this.videoEndedListener),typeof this.videoPlayingEventListener<"u"&&this.videoElement.removeEventListener("playing",this.videoPlayingEventListener),typeof this.videoCanPlayListener<"u"&&this.videoElement.removeEventListener("loadedmetadata",this.videoCanPlayListener),this.cleanVideoSource(this.videoElement),this.videoElement=void 0)}_destroyImageElement(){this.imageElement&&(this.imageLoadedListener!==void 0&&this.imageElement.removeEventListener("load",this.imageLoadedListener),this.imageElement.src=void 0,this.imageElement.removeAttribute("src"),this.imageElement=void 0)}_destroyCaptureCanvas(){this.captureCanvasContext=void 0,this.captureCanvas=void 0}addVideoSource(i,a){try{i.srcObject=a}catch{i.src=URL.createObjectURL(a)}}cleanVideoSource(i){try{i.srcObject=null}catch{i.src=""}this.videoElement.removeAttribute("src")}}class Re{constructor(i,a,l=a==null?0:8*a.length,u,d,f=S.currentTimeMillis()){this.text=i,this.rawBytes=a,this.numBits=l,this.resultPoints=u,this.format=d,this.timestamp=f,this.text=i,this.rawBytes=a,l==null?this.numBits=a==null?0:8*a.length:this.numBits=l,this.resultPoints=u,this.format=d,this.resultMetadata=null,f==null?this.timestamp=S.currentTimeMillis():this.timestamp=f}getText(){return this.text}getRawBytes(){return this.rawBytes}getNumBits(){return this.numBits}getResultPoints(){return this.resultPoints}getBarcodeFormat(){return this.format}getResultMetadata(){return this.resultMetadata}putMetadata(i,a){this.resultMetadata===null&&(this.resultMetadata=new Map),this.resultMetadata.set(i,a)}putAllMetadata(i){i!==null&&(this.resultMetadata===null?this.resultMetadata=i:this.resultMetadata=new Map(i))}addResultPoints(i){const a=this.resultPoints;if(a===null)this.resultPoints=i;else if(i!==null&&i.length>0){const l=new Array(a.length+i.length);S.arraycopy(a,0,l,0,a.length),S.arraycopy(i,0,l,a.length,i.length),this.resultPoints=l}}getTimestamp(){return this.timestamp}toString(){return this.text}}var Ct;(function(N){N[N.AZTEC=0]="AZTEC",N[N.CODABAR=1]="CODABAR",N[N.CODE_39=2]="CODE_39",N[N.CODE_93=3]="CODE_93",N[N.CODE_128=4]="CODE_128",N[N.DATA_MATRIX=5]="DATA_MATRIX",N[N.EAN_8=6]="EAN_8",N[N.EAN_13=7]="EAN_13",N[N.ITF=8]="ITF",N[N.MAXICODE=9]="MAXICODE",N[N.PDF_417=10]="PDF_417",N[N.QR_CODE=11]="QR_CODE",N[N.RSS_14=12]="RSS_14",N[N.RSS_EXPANDED=13]="RSS_EXPANDED",N[N.UPC_A=14]="UPC_A",N[N.UPC_E=15]="UPC_E",N[N.UPC_EAN_EXTENSION=16]="UPC_EAN_EXTENSION"})(Ct||(Ct={}));var me=Ct,qe;(function(N){N[N.OTHER=0]="OTHER",N[N.ORIENTATION=1]="ORIENTATION",N[N.BYTE_SEGMENTS=2]="BYTE_SEGMENTS",N[N.ERROR_CORRECTION_LEVEL=3]="ERROR_CORRECTION_LEVEL",N[N.ISSUE_NUMBER=4]="ISSUE_NUMBER",N[N.SUGGESTED_PRICE=5]="SUGGESTED_PRICE",N[N.POSSIBLE_COUNTRY=6]="POSSIBLE_COUNTRY",N[N.UPC_EAN_EXTENSION=7]="UPC_EAN_EXTENSION",N[N.PDF417_EXTRA_METADATA=8]="PDF417_EXTRA_METADATA",N[N.STRUCTURED_APPEND_SEQUENCE=9]="STRUCTURED_APPEND_SEQUENCE",N[N.STRUCTURED_APPEND_PARITY=10]="STRUCTURED_APPEND_PARITY"})(qe||(qe={}));var yt=qe;class Vn{constructor(i,a,l,u,d=-1,f=-1){this.rawBytes=i,this.text=a,this.byteSegments=l,this.ecLevel=u,this.structuredAppendSequenceNumber=d,this.structuredAppendParity=f,this.numBits=i==null?0:8*i.length}getRawBytes(){return this.rawBytes}getNumBits(){return this.numBits}setNumBits(i){this.numBits=i}getText(){return this.text}getByteSegments(){return this.byteSegments}getECLevel(){return this.ecLevel}getErrorsCorrected(){return this.errorsCorrected}setErrorsCorrected(i){this.errorsCorrected=i}getErasures(){return this.erasures}setErasures(i){this.erasures=i}getOther(){return this.other}setOther(i){this.other=i}hasStructuredAppend(){return this.structuredAppendParity>=0&&this.structuredAppendSequenceNumber>=0}getStructuredAppendParity(){return this.structuredAppendParity}getStructuredAppendSequenceNumber(){return this.structuredAppendSequenceNumber}}class nr{exp(i){return this.expTable[i]}log(i){if(i===0)throw new x;return this.logTable[i]}static addOrSubtract(i,a){return i^a}}class Rt{constructor(i,a){if(a.length===0)throw new x;this.field=i;const l=a.length;if(l>1&&a[0]===0){let u=1;for(;u<l&&a[u]===0;)u++;u===l?this.coefficients=Int32Array.from([0]):(this.coefficients=new Int32Array(l-u),S.arraycopy(a,u,this.coefficients,0,this.coefficients.length))}else this.coefficients=a}getCoefficients(){return this.coefficients}getDegree(){return this.coefficients.length-1}isZero(){return this.coefficients[0]===0}getCoefficient(i){return this.coefficients[this.coefficients.length-1-i]}evaluateAt(i){if(i===0)return this.getCoefficient(0);const a=this.coefficients;let l;if(i===1){l=0;for(let f=0,m=a.length;f!==m;f++){const w=a[f];l=nr.addOrSubtract(l,w)}return l}l=a[0];const u=a.length,d=this.field;for(let f=1;f<u;f++)l=nr.addOrSubtract(d.multiply(i,l),a[f]);return l}addOrSubtract(i){if(!this.field.equals(i.field))throw new x("GenericGFPolys do not have same GenericGF field");if(this.isZero())return i;if(i.isZero())return this;let a=this.coefficients,l=i.coefficients;if(a.length>l.length){const f=a;a=l,l=f}let u=new Int32Array(l.length);const d=l.length-a.length;S.arraycopy(l,0,u,0,d);for(let f=d;f<l.length;f++)u[f]=nr.addOrSubtract(a[f-d],l[f]);return new Rt(this.field,u)}multiply(i){if(!this.field.equals(i.field))throw new x("GenericGFPolys do not have same GenericGF field");if(this.isZero()||i.isZero())return this.field.getZero();const a=this.coefficients,l=a.length,u=i.coefficients,d=u.length,f=new Int32Array(l+d-1),m=this.field;for(let w=0;w<l;w++){const v=a[w];for(let C=0;C<d;C++)f[w+C]=nr.addOrSubtract(f[w+C],m.multiply(v,u[C]))}return new Rt(m,f)}multiplyScalar(i){if(i===0)return this.field.getZero();if(i===1)return this;const a=this.coefficients.length,l=this.field,u=new Int32Array(a),d=this.coefficients;for(let f=0;f<a;f++)u[f]=l.multiply(d[f],i);return new Rt(l,u)}multiplyByMonomial(i,a){if(i<0)throw new x;if(a===0)return this.field.getZero();const l=this.coefficients,u=l.length,d=new Int32Array(u+i),f=this.field;for(let m=0;m<u;m++)d[m]=f.multiply(l[m],a);return new Rt(f,d)}divide(i){if(!this.field.equals(i.field))throw new x("GenericGFPolys do not have same GenericGF field");if(i.isZero())throw new x("Divide by 0");const a=this.field;let l=a.getZero(),u=this;const d=i.getCoefficient(i.getDegree()),f=a.inverse(d);for(;u.getDegree()>=i.getDegree()&&!u.isZero();){const m=u.getDegree()-i.getDegree(),w=a.multiply(u.getCoefficient(u.getDegree()),f),v=i.multiplyByMonomial(m,w),C=a.buildMonomial(m,w);l=l.addOrSubtract(C),u=u.addOrSubtract(v)}return[l,u]}toString(){let i="";for(let a=this.getDegree();a>=0;a--){let l=this.getCoefficient(a);if(l!==0){if(l<0?(i+=" - ",l=-l):i.length>0&&(i+=" + "),a===0||l!==1){const u=this.field.log(l);u===0?i+="1":u===1?i+="a":(i+="a^",i+=u)}a!==0&&(a===1?i+="x":(i+="x^",i+=a))}}return i}}class Dr extends p{}Dr.kind="ArithmeticException";class ze extends nr{constructor(i,a,l){super(),this.primitive=i,this.size=a,this.generatorBase=l;const u=new Int32Array(a);let d=1;for(let m=0;m<a;m++)u[m]=d,d*=2,d>=a&&(d^=i,d&=a-1);this.expTable=u;const f=new Int32Array(a);for(let m=0;m<a-1;m++)f[u[m]]=m;this.logTable=f,this.zero=new Rt(this,Int32Array.from([0])),this.one=new Rt(this,Int32Array.from([1]))}getZero(){return this.zero}getOne(){return this.one}buildMonomial(i,a){if(i<0)throw new x;if(a===0)return this.zero;const l=new Int32Array(i+1);return l[0]=a,new Rt(this,l)}inverse(i){if(i===0)throw new Dr;return this.expTable[this.size-this.logTable[i]-1]}multiply(i,a){return i===0||a===0?0:this.expTable[(this.logTable[i]+this.logTable[a])%(this.size-1)]}getSize(){return this.size}getGeneratorBase(){return this.generatorBase}toString(){return"GF(0x"+T.toHexString(this.primitive)+","+this.size+")"}equals(i){return i===this}}ze.AZTEC_DATA_12=new ze(4201,4096,1),ze.AZTEC_DATA_10=new ze(1033,1024,1),ze.AZTEC_DATA_6=new ze(67,64,1),ze.AZTEC_PARAM=new ze(19,16,1),ze.QR_CODE_FIELD_256=new ze(285,256,0),ze.DATA_MATRIX_FIELD_256=new ze(301,256,1),ze.AZTEC_DATA_8=ze.DATA_MATRIX_FIELD_256,ze.MAXICODE_FIELD_64=ze.AZTEC_DATA_6;class Pr extends p{}Pr.kind="ReedSolomonException";class zn extends p{}zn.kind="IllegalStateException";class li{constructor(i){this.field=i}decode(i,a){const l=this.field,u=new Rt(l,i),d=new Int32Array(a);let f=!0;for(let L=0;L<a;L++){const V=u.evaluateAt(l.exp(L+l.getGeneratorBase()));d[d.length-1-L]=V,V!==0&&(f=!1)}if(f)return;const m=new Rt(l,d),w=this.runEuclideanAlgorithm(l.buildMonomial(a,1),m,a),v=w[0],C=w[1],O=this.findErrorLocations(v),k=this.findErrorMagnitudes(C,O);for(let L=0;L<O.length;L++){const V=i.length-1-l.log(O[L]);if(V<0)throw new Pr("Bad error location");i[V]=ze.addOrSubtract(i[V],k[L])}}runEuclideanAlgorithm(i,a,l){if(i.getDegree()<a.getDegree()){const L=i;i=a,a=L}const u=this.field;let d=i,f=a,m=u.getZero(),w=u.getOne();for(;f.getDegree()>=(l/2|0);){let L=d,V=m;if(d=f,m=w,d.isZero())throw new Pr("r_{i-1} was zero");f=L;let z=u.getZero();const G=d.getCoefficient(d.getDegree()),K=u.inverse(G);for(;f.getDegree()>=d.getDegree()&&!f.isZero();){const oe=f.getDegree()-d.getDegree(),ae=u.multiply(f.getCoefficient(f.getDegree()),K);z=z.addOrSubtract(u.buildMonomial(oe,ae)),f=f.addOrSubtract(d.multiplyByMonomial(oe,ae))}if(w=z.multiply(m).addOrSubtract(V),f.getDegree()>=d.getDegree())throw new zn("Division algorithm failed to reduce polynomial?")}const v=w.getCoefficient(0);if(v===0)throw new Pr("sigmaTilde(0) was zero");const C=u.inverse(v),O=w.multiplyScalar(C),k=f.multiplyScalar(C);return[O,k]}findErrorLocations(i){const a=i.getDegree();if(a===1)return Int32Array.from([i.getCoefficient(1)]);const l=new Int32Array(a);let u=0;const d=this.field;for(let f=1;f<d.getSize()&&u<a;f++)i.evaluateAt(f)===0&&(l[u]=d.inverse(f),u++);if(u!==a)throw new Pr("Error locator degree does not match number of roots");return l}findErrorMagnitudes(i,a){const l=a.length,u=new Int32Array(l),d=this.field;for(let f=0;f<l;f++){const m=d.inverse(a[f]);let w=1;for(let v=0;v<l;v++)if(f!==v){const C=d.multiply(a[v],m),O=C&1?C&-2:C|1;w=d.multiply(w,O)}u[f]=d.multiply(i.evaluateAt(m),d.inverse(w)),d.getGeneratorBase()!==0&&(u[f]=d.multiply(u[f],m))}return u}}var Wt;(function(N){N[N.UPPER=0]="UPPER",N[N.LOWER=1]="LOWER",N[N.MIXED=2]="MIXED",N[N.DIGIT=3]="DIGIT",N[N.PUNCT=4]="PUNCT",N[N.BINARY=5]="BINARY"})(Wt||(Wt={}));class nt{decode(i){this.ddata=i;let a=i.getBits(),l=this.extractBits(a),u=this.correctBits(l),d=nt.convertBoolArrayToByteArray(u),f=nt.getEncodedData(u),m=new Vn(d,f,null,null);return m.setNumBits(u.length),m}static highLevelDecode(i){return this.getEncodedData(i)}static getEncodedData(i){let a=i.length,l=Wt.UPPER,u=Wt.UPPER,d="",f=0;for(;f<a;)if(u===Wt.BINARY){if(a-f<5)break;let m=nt.readCode(i,f,5);if(f+=5,m===0){if(a-f<11)break;m=nt.readCode(i,f,11)+31,f+=11}for(let w=0;w<m;w++){if(a-f<8){f=a;break}const v=nt.readCode(i,f,8);d+=Q.castAsNonUtf8Char(v),f+=8}u=l}else{let m=u===Wt.DIGIT?4:5;if(a-f<m)break;let w=nt.readCode(i,f,m);f+=m;let v=nt.getCharacter(u,w);v.startsWith("CTRL_")?(l=u,u=nt.getTable(v.charAt(5)),v.charAt(6)==="L"&&(l=u)):(d+=v,u=l)}return d}static getTable(i){switch(i){case"L":return Wt.LOWER;case"P":return Wt.PUNCT;case"M":return Wt.MIXED;case"D":return Wt.DIGIT;case"B":return Wt.BINARY;case"U":default:return Wt.UPPER}}static getCharacter(i,a){switch(i){case Wt.UPPER:return nt.UPPER_TABLE[a];case Wt.LOWER:return nt.LOWER_TABLE[a];case Wt.MIXED:return nt.MIXED_TABLE[a];case Wt.PUNCT:return nt.PUNCT_TABLE[a];case Wt.DIGIT:return nt.DIGIT_TABLE[a];default:throw new zn("Bad table")}}correctBits(i){let a,l;this.ddata.getNbLayers()<=2?(l=6,a=ze.AZTEC_DATA_6):this.ddata.getNbLayers()<=8?(l=8,a=ze.AZTEC_DATA_8):this.ddata.getNbLayers()<=22?(l=10,a=ze.AZTEC_DATA_10):(l=12,a=ze.AZTEC_DATA_12);let u=this.ddata.getNbDatablocks(),d=i.length/l;if(d<u)throw new B;let f=i.length%l,m=new Int32Array(d);for(let k=0;k<d;k++,f+=l)m[k]=nt.readCode(i,f,l);try{new li(a).decode(m,d-u)}catch(k){throw new B(k)}let w=(1<<l)-1,v=0;for(let k=0;k<u;k++){let L=m[k];if(L===0||L===w)throw new B;(L===1||L===w-1)&&v++}let C=new Array(u*l-v),O=0;for(let k=0;k<u;k++){let L=m[k];if(L===1||L===w-1)C.fill(L>1,O,O+l-1),O+=l-1;else for(let V=l-1;V>=0;--V)C[O++]=(L&1<<V)!==0}return C}extractBits(i){let a=this.ddata.isCompact(),l=this.ddata.getNbLayers(),u=(a?11:14)+l*4,d=new Int32Array(u),f=new Array(this.totalBitsInLayer(l,a));if(a)for(let m=0;m<d.length;m++)d[m]=m;else{let m=u+1+2*T.truncDivision(T.truncDivision(u,2)-1,15),w=u/2,v=T.truncDivision(m,2);for(let C=0;C<w;C++){let O=C+T.truncDivision(C,15);d[w-C-1]=v-O-1,d[w+C]=v+O+1}}for(let m=0,w=0;m<l;m++){let v=(l-m)*4+(a?9:12),C=m*2,O=u-1-C;for(let k=0;k<v;k++){let L=k*2;for(let V=0;V<2;V++)f[w+L+V]=i.get(d[C+V],d[C+k]),f[w+2*v+L+V]=i.get(d[C+k],d[O-V]),f[w+4*v+L+V]=i.get(d[O-V],d[O-k]),f[w+6*v+L+V]=i.get(d[O-k],d[C+V])}w+=v*8}return f}static readCode(i,a,l){let u=0;for(let d=a;d<a+l;d++)u<<=1,i[d]&&(u|=1);return u}static readByte(i,a){let l=i.length-a;return l>=8?nt.readCode(i,a,8):nt.readCode(i,a,l)<<8-l}static convertBoolArrayToByteArray(i){let a=new Uint8Array((i.length+7)/8);for(let l=0;l<a.length;l++)a[l]=nt.readByte(i,8*l);return a}totalBitsInLayer(i,a){return((a?88:112)+16*i)*i}}nt.UPPER_TABLE=["CTRL_PS"," ","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","CTRL_LL","CTRL_ML","CTRL_DL","CTRL_BS"],nt.LOWER_TABLE=["CTRL_PS"," ","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","CTRL_US","CTRL_ML","CTRL_DL","CTRL_BS"],nt.MIXED_TABLE=["CTRL_PS"," ","\\1","\\2","\\3","\\4","\\5","\\6","\\7","\b","	",`
`,"\\13","\f","\r","\\33","\\34","\\35","\\36","\\37","@","\\","^","_","`","|","~","\\177","CTRL_LL","CTRL_UL","CTRL_PL","CTRL_BS"],nt.PUNCT_TABLE=["","\r",`\r
`,". ",", ",": ","!",'"',"#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","[","]","{","}","CTRL_UL"],nt.DIGIT_TABLE=["CTRL_PS"," ","0","1","2","3","4","5","6","7","8","9",",",".","CTRL_UL","CTRL_US"];class He{constructor(){}static round(i){return i===NaN?0:i<=Number.MIN_SAFE_INTEGER?Number.MIN_SAFE_INTEGER:i>=Number.MAX_SAFE_INTEGER?Number.MAX_SAFE_INTEGER:i+(i<0?-.5:.5)|0}static distance(i,a,l,u){const d=i-l,f=a-u;return Math.sqrt(d*d+f*f)}static sum(i){let a=0;for(let l=0,u=i.length;l!==u;l++){const d=i[l];a+=d}return a}}class ro{static floatToIntBits(i){return i}}ro.MAX_VALUE=Number.MAX_SAFE_INTEGER;class ye{constructor(i,a){this.x=i,this.y=a}getX(){return this.x}getY(){return this.y}equals(i){if(i instanceof ye){const a=i;return this.x===a.x&&this.y===a.y}return!1}hashCode(){return 31*ro.floatToIntBits(this.x)+ro.floatToIntBits(this.y)}toString(){return"("+this.x+","+this.y+")"}static orderBestPatterns(i){const a=this.distance(i[0],i[1]),l=this.distance(i[1],i[2]),u=this.distance(i[0],i[2]);let d,f,m;if(l>=a&&l>=u?(f=i[0],d=i[1],m=i[2]):u>=l&&u>=a?(f=i[1],d=i[0],m=i[2]):(f=i[2],d=i[0],m=i[1]),this.crossProductZ(d,f,m)<0){const w=d;d=m,m=w}i[0]=d,i[1]=f,i[2]=m}static distance(i,a){return He.distance(i.x,i.y,a.x,a.y)}static crossProductZ(i,a,l){const u=a.x,d=a.y;return(l.x-u)*(i.y-d)-(l.y-d)*(i.x-u)}}class io{constructor(i,a){this.bits=i,this.points=a}getBits(){return this.bits}getPoints(){return this.points}}class ci extends io{constructor(i,a,l,u,d){super(i,a),this.compact=l,this.nbDatablocks=u,this.nbLayers=d}getNbLayers(){return this.nbLayers}getNbDatablocks(){return this.nbDatablocks}isCompact(){return this.compact}}class Lr{constructor(i,a,l,u){this.image=i,this.height=i.getHeight(),this.width=i.getWidth(),a==null&&(a=Lr.INIT_SIZE),l==null&&(l=i.getWidth()/2|0),u==null&&(u=i.getHeight()/2|0);const d=a/2|0;if(this.leftInit=l-d,this.rightInit=l+d,this.upInit=u-d,this.downInit=u+d,this.upInit<0||this.leftInit<0||this.downInit>=this.height||this.rightInit>=this.width)throw new $}detect(){let i=this.leftInit,a=this.rightInit,l=this.upInit,u=this.downInit,d=!1,f=!0,m=!1,w=!1,v=!1,C=!1,O=!1;const k=this.width,L=this.height;for(;f;){f=!1;let V=!0;for(;(V||!w)&&a<k;)V=this.containsBlackPoint(l,u,a,!1),V?(a++,f=!0,w=!0):w||a++;if(a>=k){d=!0;break}let z=!0;for(;(z||!v)&&u<L;)z=this.containsBlackPoint(i,a,u,!0),z?(u++,f=!0,v=!0):v||u++;if(u>=L){d=!0;break}let G=!0;for(;(G||!C)&&i>=0;)G=this.containsBlackPoint(l,u,i,!1),G?(i--,f=!0,C=!0):C||i--;if(i<0){d=!0;break}let K=!0;for(;(K||!O)&&l>=0;)K=this.containsBlackPoint(i,a,l,!0),K?(l--,f=!0,O=!0):O||l--;if(l<0){d=!0;break}f&&(m=!0)}if(!d&&m){const V=a-i;let z=null;for(let ae=1;z===null&&ae<V;ae++)z=this.getBlackPointOnSegment(i,u-ae,i+ae,u);if(z==null)throw new $;let G=null;for(let ae=1;G===null&&ae<V;ae++)G=this.getBlackPointOnSegment(i,l+ae,i+ae,l);if(G==null)throw new $;let K=null;for(let ae=1;K===null&&ae<V;ae++)K=this.getBlackPointOnSegment(a,l+ae,a-ae,l);if(K==null)throw new $;let oe=null;for(let ae=1;oe===null&&ae<V;ae++)oe=this.getBlackPointOnSegment(a,u-ae,a-ae,u);if(oe==null)throw new $;return this.centerEdges(oe,z,K,G)}else throw new $}getBlackPointOnSegment(i,a,l,u){const d=He.round(He.distance(i,a,l,u)),f=(l-i)/d,m=(u-a)/d,w=this.image;for(let v=0;v<d;v++){const C=He.round(i+v*f),O=He.round(a+v*m);if(w.get(C,O))return new ye(C,O)}return null}centerEdges(i,a,l,u){const d=i.getX(),f=i.getY(),m=a.getX(),w=a.getY(),v=l.getX(),C=l.getY(),O=u.getX(),k=u.getY(),L=Lr.CORR;return d<this.width/2?[new ye(O-L,k+L),new ye(m+L,w+L),new ye(v-L,C-L),new ye(d+L,f-L)]:[new ye(O+L,k+L),new ye(m+L,w-L),new ye(v-L,C+L),new ye(d-L,f-L)]}containsBlackPoint(i,a,l,u){const d=this.image;if(u){for(let f=i;f<=a;f++)if(d.get(f,l))return!0}else for(let f=i;f<=a;f++)if(d.get(l,f))return!0;return!1}}Lr.INIT_SIZE=10,Lr.CORR=1;class _l{static checkAndNudgePoints(i,a){const l=i.getWidth(),u=i.getHeight();let d=!0;for(let f=0;f<a.length&&d;f+=2){const m=Math.floor(a[f]),w=Math.floor(a[f+1]);if(m<-1||m>l||w<-1||w>u)throw new $;d=!1,m===-1?(a[f]=0,d=!0):m===l&&(a[f]=l-1,d=!0),w===-1?(a[f+1]=0,d=!0):w===u&&(a[f+1]=u-1,d=!0)}d=!0;for(let f=a.length-2;f>=0&&d;f-=2){const m=Math.floor(a[f]),w=Math.floor(a[f+1]);if(m<-1||m>l||w<-1||w>u)throw new $;d=!1,m===-1?(a[f]=0,d=!0):m===l&&(a[f]=l-1,d=!0),w===-1?(a[f+1]=0,d=!0):w===u&&(a[f+1]=u-1,d=!0)}}}class St{constructor(i,a,l,u,d,f,m,w,v){this.a11=i,this.a21=a,this.a31=l,this.a12=u,this.a22=d,this.a32=f,this.a13=m,this.a23=w,this.a33=v}static quadrilateralToQuadrilateral(i,a,l,u,d,f,m,w,v,C,O,k,L,V,z,G){const K=St.quadrilateralToSquare(i,a,l,u,d,f,m,w);return St.squareToQuadrilateral(v,C,O,k,L,V,z,G).times(K)}transformPoints(i){const a=i.length,l=this.a11,u=this.a12,d=this.a13,f=this.a21,m=this.a22,w=this.a23,v=this.a31,C=this.a32,O=this.a33;for(let k=0;k<a;k+=2){const L=i[k],V=i[k+1],z=d*L+w*V+O;i[k]=(l*L+f*V+v)/z,i[k+1]=(u*L+m*V+C)/z}}transformPointsWithValues(i,a){const l=this.a11,u=this.a12,d=this.a13,f=this.a21,m=this.a22,w=this.a23,v=this.a31,C=this.a32,O=this.a33,k=i.length;for(let L=0;L<k;L++){const V=i[L],z=a[L],G=d*V+w*z+O;i[L]=(l*V+f*z+v)/G,a[L]=(u*V+m*z+C)/G}}static squareToQuadrilateral(i,a,l,u,d,f,m,w){const v=i-l+d-m,C=a-u+f-w;if(v===0&&C===0)return new St(l-i,d-l,i,u-a,f-u,a,0,0,1);{const O=l-d,k=m-d,L=u-f,V=w-f,z=O*V-k*L,G=(v*V-k*C)/z,K=(O*C-v*L)/z;return new St(l-i+G*l,m-i+K*m,i,u-a+G*u,w-a+K*w,a,G,K,1)}}static quadrilateralToSquare(i,a,l,u,d,f,m,w){return St.squareToQuadrilateral(i,a,l,u,d,f,m,w).buildAdjoint()}buildAdjoint(){return new St(this.a22*this.a33-this.a23*this.a32,this.a23*this.a31-this.a21*this.a33,this.a21*this.a32-this.a22*this.a31,this.a13*this.a32-this.a12*this.a33,this.a11*this.a33-this.a13*this.a31,this.a12*this.a31-this.a11*this.a32,this.a12*this.a23-this.a13*this.a22,this.a13*this.a21-this.a11*this.a23,this.a11*this.a22-this.a12*this.a21)}times(i){return new St(this.a11*i.a11+this.a21*i.a12+this.a31*i.a13,this.a11*i.a21+this.a21*i.a22+this.a31*i.a23,this.a11*i.a31+this.a21*i.a32+this.a31*i.a33,this.a12*i.a11+this.a22*i.a12+this.a32*i.a13,this.a12*i.a21+this.a22*i.a22+this.a32*i.a23,this.a12*i.a31+this.a22*i.a32+this.a32*i.a33,this.a13*i.a11+this.a23*i.a12+this.a33*i.a13,this.a13*i.a21+this.a23*i.a22+this.a33*i.a23,this.a13*i.a31+this.a23*i.a32+this.a33*i.a33)}}class Mi extends _l{sampleGrid(i,a,l,u,d,f,m,w,v,C,O,k,L,V,z,G,K,oe,ae){const re=St.quadrilateralToQuadrilateral(u,d,f,m,w,v,C,O,k,L,V,z,G,K,oe,ae);return this.sampleGridWithTransform(i,a,l,re)}sampleGridWithTransform(i,a,l,u){if(a<=0||l<=0)throw new $;const d=new ie(a,l),f=new Float32Array(2*a);for(let m=0;m<l;m++){const w=f.length,v=m+.5;for(let C=0;C<w;C+=2)f[C]=C/2+.5,f[C+1]=v;u.transformPoints(f),_l.checkAndNudgePoints(i,f);try{for(let C=0;C<w;C+=2)i.get(Math.floor(f[C]),Math.floor(f[C+1]))&&d.set(C/2,m)}catch{throw new $}}return d}}class ui{static setGridSampler(i){ui.gridSampler=i}static getInstance(){return ui.gridSampler}}ui.gridSampler=new Mi;class hn{constructor(i,a){this.x=i,this.y=a}toResultPoint(){return new ye(this.getX(),this.getY())}getX(){return this.x}getY(){return this.y}}class so{constructor(i){this.EXPECTED_CORNER_BITS=new Int32Array([3808,476,2107,1799]),this.image=i}detect(){return this.detectMirror(!1)}detectMirror(i){let a=this.getMatrixCenter(),l=this.getBullsEyeCorners(a);if(i){let f=l[0];l[0]=l[2],l[2]=f}this.extractParameters(l);let u=this.sampleGrid(this.image,l[this.shift%4],l[(this.shift+1)%4],l[(this.shift+2)%4],l[(this.shift+3)%4]),d=this.getMatrixCornerPoints(l);return new ci(u,d,this.compact,this.nbDataBlocks,this.nbLayers)}extractParameters(i){if(!this.isValidPoint(i[0])||!this.isValidPoint(i[1])||!this.isValidPoint(i[2])||!this.isValidPoint(i[3]))throw new $;let a=2*this.nbCenterLayers,l=new Int32Array([this.sampleLine(i[0],i[1],a),this.sampleLine(i[1],i[2],a),this.sampleLine(i[2],i[3],a),this.sampleLine(i[3],i[0],a)]);this.shift=this.getRotation(l,a);let u=0;for(let f=0;f<4;f++){let m=l[(this.shift+f)%4];this.compact?(u<<=7,u+=m>>1&127):(u<<=10,u+=(m>>2&992)+(m>>1&31))}let d=this.getCorrectedParameterData(u,this.compact);this.compact?(this.nbLayers=(d>>6)+1,this.nbDataBlocks=(d&63)+1):(this.nbLayers=(d>>11)+1,this.nbDataBlocks=(d&2047)+1)}getRotation(i,a){let l=0;i.forEach((u,d,f)=>{let m=(u>>a-2<<1)+(u&1);l=(l<<3)+m}),l=((l&1)<<11)+(l>>1);for(let u=0;u<4;u++)if(T.bitCount(l^this.EXPECTED_CORNER_BITS[u])<=2)return u;throw new $}getCorrectedParameterData(i,a){let l,u;a?(l=7,u=2):(l=10,u=4);let d=l-u,f=new Int32Array(l);for(let w=l-1;w>=0;--w)f[w]=i&15,i>>=4;try{new li(ze.AZTEC_PARAM).decode(f,d)}catch{throw new $}let m=0;for(let w=0;w<u;w++)m=(m<<4)+f[w];return m}getBullsEyeCorners(i){let a=i,l=i,u=i,d=i,f=!0;for(this.nbCenterLayers=1;this.nbCenterLayers<9;this.nbCenterLayers++){let O=this.getFirstDifferent(a,f,1,-1),k=this.getFirstDifferent(l,f,1,1),L=this.getFirstDifferent(u,f,-1,1),V=this.getFirstDifferent(d,f,-1,-1);if(this.nbCenterLayers>2){let z=this.distancePoint(V,O)*this.nbCenterLayers/(this.distancePoint(d,a)*(this.nbCenterLayers+2));if(z<.75||z>1.25||!this.isWhiteOrBlackRectangle(O,k,L,V))break}a=O,l=k,u=L,d=V,f=!f}if(this.nbCenterLayers!==5&&this.nbCenterLayers!==7)throw new $;this.compact=this.nbCenterLayers===5;let m=new ye(a.getX()+.5,a.getY()-.5),w=new ye(l.getX()+.5,l.getY()+.5),v=new ye(u.getX()-.5,u.getY()+.5),C=new ye(d.getX()-.5,d.getY()-.5);return this.expandSquare([m,w,v,C],2*this.nbCenterLayers-3,2*this.nbCenterLayers)}getMatrixCenter(){let i,a,l,u;try{let m=new Lr(this.image).detect();i=m[0],a=m[1],l=m[2],u=m[3]}catch{let w=this.image.getWidth()/2,v=this.image.getHeight()/2;i=this.getFirstDifferent(new hn(w+7,v-7),!1,1,-1).toResultPoint(),a=this.getFirstDifferent(new hn(w+7,v+7),!1,1,1).toResultPoint(),l=this.getFirstDifferent(new hn(w-7,v+7),!1,-1,1).toResultPoint(),u=this.getFirstDifferent(new hn(w-7,v-7),!1,-1,-1).toResultPoint()}let d=He.round((i.getX()+u.getX()+a.getX()+l.getX())/4),f=He.round((i.getY()+u.getY()+a.getY()+l.getY())/4);try{let m=new Lr(this.image,15,d,f).detect();i=m[0],a=m[1],l=m[2],u=m[3]}catch{i=this.getFirstDifferent(new hn(d+7,f-7),!1,1,-1).toResultPoint(),a=this.getFirstDifferent(new hn(d+7,f+7),!1,1,1).toResultPoint(),l=this.getFirstDifferent(new hn(d-7,f+7),!1,-1,1).toResultPoint(),u=this.getFirstDifferent(new hn(d-7,f-7),!1,-1,-1).toResultPoint()}return d=He.round((i.getX()+u.getX()+a.getX()+l.getX())/4),f=He.round((i.getY()+u.getY()+a.getY()+l.getY())/4),new hn(d,f)}getMatrixCornerPoints(i){return this.expandSquare(i,2*this.nbCenterLayers,this.getDimension())}sampleGrid(i,a,l,u,d){let f=ui.getInstance(),m=this.getDimension(),w=m/2-this.nbCenterLayers,v=m/2+this.nbCenterLayers;return f.sampleGrid(i,m,m,w,w,v,w,v,v,w,v,a.getX(),a.getY(),l.getX(),l.getY(),u.getX(),u.getY(),d.getX(),d.getY())}sampleLine(i,a,l){let u=0,d=this.distanceResultPoint(i,a),f=d/l,m=i.getX(),w=i.getY(),v=f*(a.getX()-i.getX())/d,C=f*(a.getY()-i.getY())/d;for(let O=0;O<l;O++)this.image.get(He.round(m+O*v),He.round(w+O*C))&&(u|=1<<l-O-1);return u}isWhiteOrBlackRectangle(i,a,l,u){let d=3;i=new hn(i.getX()-d,i.getY()+d),a=new hn(a.getX()-d,a.getY()-d),l=new hn(l.getX()+d,l.getY()-d),u=new hn(u.getX()+d,u.getY()+d);let f=this.getColor(u,i);if(f===0)return!1;let m=this.getColor(i,a);return m!==f||(m=this.getColor(a,l),m!==f)?!1:(m=this.getColor(l,u),m===f)}getColor(i,a){let l=this.distancePoint(i,a),u=(a.getX()-i.getX())/l,d=(a.getY()-i.getY())/l,f=0,m=i.getX(),w=i.getY(),v=this.image.get(i.getX(),i.getY()),C=Math.ceil(l);for(let k=0;k<C;k++)m+=u,w+=d,this.image.get(He.round(m),He.round(w))!==v&&f++;let O=f/l;return O>.1&&O<.9?0:O<=.1===v?1:-1}getFirstDifferent(i,a,l,u){let d=i.getX()+l,f=i.getY()+u;for(;this.isValid(d,f)&&this.image.get(d,f)===a;)d+=l,f+=u;for(d-=l,f-=u;this.isValid(d,f)&&this.image.get(d,f)===a;)d+=l;for(d-=l;this.isValid(d,f)&&this.image.get(d,f)===a;)f+=u;return f-=u,new hn(d,f)}expandSquare(i,a,l){let u=l/(2*a),d=i[0].getX()-i[2].getX(),f=i[0].getY()-i[2].getY(),m=(i[0].getX()+i[2].getX())/2,w=(i[0].getY()+i[2].getY())/2,v=new ye(m+u*d,w+u*f),C=new ye(m-u*d,w-u*f);d=i[1].getX()-i[3].getX(),f=i[1].getY()-i[3].getY(),m=(i[1].getX()+i[3].getX())/2,w=(i[1].getY()+i[3].getY())/2;let O=new ye(m+u*d,w+u*f),k=new ye(m-u*d,w-u*f);return[v,O,C,k]}isValid(i,a){return i>=0&&i<this.image.getWidth()&&a>0&&a<this.image.getHeight()}isValidPoint(i){let a=He.round(i.getX()),l=He.round(i.getY());return this.isValid(a,l)}distancePoint(i,a){return He.distance(i.getX(),i.getY(),a.getX(),a.getY())}distanceResultPoint(i,a){return He.distance(i.getX(),i.getY(),a.getX(),a.getY())}getDimension(){return this.compact?4*this.nbLayers+11:this.nbLayers<=4?4*this.nbLayers+15:4*this.nbLayers+2*(T.truncDivision(this.nbLayers-4,8)+1)+15}}class Xo{decode(i,a=null){let l=null,u=new so(i.getBlackMatrix()),d=null,f=null;try{let C=u.detectMirror(!1);d=C.getPoints(),this.reportFoundResultPoints(a,d),f=new nt().decode(C)}catch(C){l=C}if(f==null)try{let C=u.detectMirror(!0);d=C.getPoints(),this.reportFoundResultPoints(a,d),f=new nt().decode(C)}catch(C){throw l??C}let m=new Re(f.getText(),f.getRawBytes(),f.getNumBits(),d,me.AZTEC,S.currentTimeMillis()),w=f.getByteSegments();w!=null&&m.putMetadata(yt.BYTE_SEGMENTS,w);let v=f.getECLevel();return v!=null&&m.putMetadata(yt.ERROR_CORRECTION_LEVEL,v),m}reportFoundResultPoints(i,a){if(i!=null){let l=i.get(j.NEED_RESULT_POINT_CALLBACK);l!=null&&a.forEach((u,d,f)=>{l.foundPossibleResultPoint(u)})}}reset(){}}class wu extends Pe{constructor(i=500){super(new Xo,i)}}class At{decode(i,a){try{return this.doDecode(i,a)}catch{if(a&&a.get(j.TRY_HARDER)===!0&&i.isRotateSupported()){const d=i.rotateCounterClockwise(),f=this.doDecode(d,a),m=f.getResultMetadata();let w=270;m!==null&&m.get(yt.ORIENTATION)===!0&&(w=w+m.get(yt.ORIENTATION)%360),f.putMetadata(yt.ORIENTATION,w);const v=f.getResultPoints();if(v!==null){const C=d.getHeight();for(let O=0;O<v.length;O++)v[O]=new ye(C-v[O].getY()-1,v[O].getX())}return f}else throw new $}}reset(){}doDecode(i,a){const l=i.getWidth(),u=i.getHeight();let d=new D(l);const f=a&&a.get(j.TRY_HARDER)===!0,m=Math.max(1,u>>(f?8:5));let w;f?w=u:w=15;const v=Math.trunc(u/2);for(let C=0;C<w;C++){const O=Math.trunc((C+1)/2),k=(C&1)===0,L=v+m*(k?O:-O);if(L<0||L>=u)break;try{d=i.getBlackRow(L,d)}catch{continue}for(let V=0;V<2;V++){if(V===1&&(d.reverse(),a&&a.get(j.NEED_RESULT_POINT_CALLBACK)===!0)){const z=new Map;a.forEach((G,K)=>z.set(K,G)),z.delete(j.NEED_RESULT_POINT_CALLBACK),a=z}try{const z=this.decodeRow(L,d,a);if(V===1){z.putMetadata(yt.ORIENTATION,180);const G=z.getResultPoints();G!==null&&(G[0]=new ye(l-G[0].getX()-1,G[0].getY()),G[1]=new ye(l-G[1].getX()-1,G[1].getY()))}return z}catch{}}}throw new $}static recordPattern(i,a,l){const u=l.length;for(let v=0;v<u;v++)l[v]=0;const d=i.getSize();if(a>=d)throw new $;let f=!i.get(a),m=0,w=a;for(;w<d;){if(i.get(w)!==f)l[m]++;else{if(++m===u)break;l[m]=1,f=!f}w++}if(!(m===u||m===u-1&&w===d))throw new $}static recordPatternInReverse(i,a,l){let u=l.length,d=i.get(a);for(;a>0&&u>=0;)i.get(--a)!==d&&(u--,d=!d);if(u>=0)throw new $;At.recordPattern(i,a+1,l)}static patternMatchVariance(i,a,l){const u=i.length;let d=0,f=0;for(let v=0;v<u;v++)d+=i[v],f+=a[v];if(d<f)return Number.POSITIVE_INFINITY;const m=d/f;l*=m;let w=0;for(let v=0;v<u;v++){const C=i[v],O=a[v]*m,k=C>O?C-O:O-C;if(k>l)return Number.POSITIVE_INFINITY;w+=k}return w/d}}class ce extends At{static findStartPattern(i){const a=i.getSize(),l=i.getNextSet(0);let u=0,d=Int32Array.from([0,0,0,0,0,0]),f=l,m=!1;const w=6;for(let v=l;v<a;v++)if(i.get(v)!==m)d[u]++;else{if(u===w-1){let C=ce.MAX_AVG_VARIANCE,O=-1;for(let k=ce.CODE_START_A;k<=ce.CODE_START_C;k++){const L=At.patternMatchVariance(d,ce.CODE_PATTERNS[k],ce.MAX_INDIVIDUAL_VARIANCE);L<C&&(C=L,O=k)}if(O>=0&&i.isRange(Math.max(0,f-(v-f)/2),f,!1))return Int32Array.from([f,v,O]);f+=d[0]+d[1],d=d.slice(2,d.length-1),d[u-1]=0,d[u]=0,u--}else u++;d[u]=1,m=!m}throw new $}static decodeCode(i,a,l){At.recordPattern(i,l,a);let u=ce.MAX_AVG_VARIANCE,d=-1;for(let f=0;f<ce.CODE_PATTERNS.length;f++){const m=ce.CODE_PATTERNS[f],w=this.patternMatchVariance(a,m,ce.MAX_INDIVIDUAL_VARIANCE);w<u&&(u=w,d=f)}if(d>=0)return d;throw new $}decodeRow(i,a,l){const u=l&&l.get(j.ASSUME_GS1)===!0,d=ce.findStartPattern(a),f=d[2];let m=0;const w=new Uint8Array(20);w[m++]=f;let v;switch(f){case ce.CODE_START_A:v=ce.CODE_CODE_A;break;case ce.CODE_START_B:v=ce.CODE_CODE_B;break;case ce.CODE_START_C:v=ce.CODE_CODE_C;break;default:throw new B}let C=!1,O=!1,k="",L=d[0],V=d[1];const z=Int32Array.from([0,0,0,0,0,0]);let G=0,K=0,oe=f,ae=0,re=!0,Xe=!1,je=!1;for(;!C;){const ra=O;switch(O=!1,G=K,K=ce.decodeCode(a,z,V),w[m++]=K,K!==ce.CODE_STOP&&(re=!0),K!==ce.CODE_STOP&&(ae++,oe+=ae*K),L=V,V+=z.reduce((z_,H_)=>z_+H_,0),K){case ce.CODE_START_A:case ce.CODE_START_B:case ce.CODE_START_C:throw new B}switch(v){case ce.CODE_CODE_A:if(K<64)je===Xe?k+=String.fromCharCode(32+K):k+=String.fromCharCode(32+K+128),je=!1;else if(K<96)je===Xe?k+=String.fromCharCode(K-64):k+=String.fromCharCode(K+64),je=!1;else switch(K!==ce.CODE_STOP&&(re=!1),K){case ce.CODE_FNC_1:u&&(k.length===0?k+="]C1":k+="");break;case ce.CODE_FNC_2:case ce.CODE_FNC_3:break;case ce.CODE_FNC_4_A:!Xe&&je?(Xe=!0,je=!1):Xe&&je?(Xe=!1,je=!1):je=!0;break;case ce.CODE_SHIFT:O=!0,v=ce.CODE_CODE_B;break;case ce.CODE_CODE_B:v=ce.CODE_CODE_B;break;case ce.CODE_CODE_C:v=ce.CODE_CODE_C;break;case ce.CODE_STOP:C=!0;break}break;case ce.CODE_CODE_B:if(K<96)je===Xe?k+=String.fromCharCode(32+K):k+=String.fromCharCode(32+K+128),je=!1;else switch(K!==ce.CODE_STOP&&(re=!1),K){case ce.CODE_FNC_1:u&&(k.length===0?k+="]C1":k+="");break;case ce.CODE_FNC_2:case ce.CODE_FNC_3:break;case ce.CODE_FNC_4_B:!Xe&&je?(Xe=!0,je=!1):Xe&&je?(Xe=!1,je=!1):je=!0;break;case ce.CODE_SHIFT:O=!0,v=ce.CODE_CODE_A;break;case ce.CODE_CODE_A:v=ce.CODE_CODE_A;break;case ce.CODE_CODE_C:v=ce.CODE_CODE_C;break;case ce.CODE_STOP:C=!0;break}break;case ce.CODE_CODE_C:if(K<100)K<10&&(k+="0"),k+=K;else switch(K!==ce.CODE_STOP&&(re=!1),K){case ce.CODE_FNC_1:u&&(k.length===0?k+="]C1":k+="");break;case ce.CODE_CODE_A:v=ce.CODE_CODE_A;break;case ce.CODE_CODE_B:v=ce.CODE_CODE_B;break;case ce.CODE_STOP:C=!0;break}break}ra&&(v=v===ce.CODE_CODE_A?ce.CODE_CODE_B:ce.CODE_CODE_A)}const Gn=V-L;if(V=a.getNextUnset(V),!a.isRange(V,Math.min(a.getSize(),V+(V-L)/2),!1))throw new $;if(oe-=ae*G,oe%103!==G)throw new b;const jr=k.length;if(jr===0)throw new $;jr>0&&re&&(v===ce.CODE_CODE_C?k=k.substring(0,jr-2):k=k.substring(0,jr-1));const Yn=(d[1]+d[0])/2,ht=L+Gn/2,gn=w.length,rr=new Uint8Array(gn);for(let ra=0;ra<gn;ra++)rr[ra]=w[ra];const na=[new ye(Yn,i),new ye(ht,i)];return new Re(k,rr,0,na,me.CODE_128,new Date().getTime())}}ce.CODE_PATTERNS=[Int32Array.from([2,1,2,2,2,2]),Int32Array.from([2,2,2,1,2,2]),Int32Array.from([2,2,2,2,2,1]),Int32Array.from([1,2,1,2,2,3]),Int32Array.from([1,2,1,3,2,2]),Int32Array.from([1,3,1,2,2,2]),Int32Array.from([1,2,2,2,1,3]),Int32Array.from([1,2,2,3,1,2]),Int32Array.from([1,3,2,2,1,2]),Int32Array.from([2,2,1,2,1,3]),Int32Array.from([2,2,1,3,1,2]),Int32Array.from([2,3,1,2,1,2]),Int32Array.from([1,1,2,2,3,2]),Int32Array.from([1,2,2,1,3,2]),Int32Array.from([1,2,2,2,3,1]),Int32Array.from([1,1,3,2,2,2]),Int32Array.from([1,2,3,1,2,2]),Int32Array.from([1,2,3,2,2,1]),Int32Array.from([2,2,3,2,1,1]),Int32Array.from([2,2,1,1,3,2]),Int32Array.from([2,2,1,2,3,1]),Int32Array.from([2,1,3,2,1,2]),Int32Array.from([2,2,3,1,1,2]),Int32Array.from([3,1,2,1,3,1]),Int32Array.from([3,1,1,2,2,2]),Int32Array.from([3,2,1,1,2,2]),Int32Array.from([3,2,1,2,2,1]),Int32Array.from([3,1,2,2,1,2]),Int32Array.from([3,2,2,1,1,2]),Int32Array.from([3,2,2,2,1,1]),Int32Array.from([2,1,2,1,2,3]),Int32Array.from([2,1,2,3,2,1]),Int32Array.from([2,3,2,1,2,1]),Int32Array.from([1,1,1,3,2,3]),Int32Array.from([1,3,1,1,2,3]),Int32Array.from([1,3,1,3,2,1]),Int32Array.from([1,1,2,3,1,3]),Int32Array.from([1,3,2,1,1,3]),Int32Array.from([1,3,2,3,1,1]),Int32Array.from([2,1,1,3,1,3]),Int32Array.from([2,3,1,1,1,3]),Int32Array.from([2,3,1,3,1,1]),Int32Array.from([1,1,2,1,3,3]),Int32Array.from([1,1,2,3,3,1]),Int32Array.from([1,3,2,1,3,1]),Int32Array.from([1,1,3,1,2,3]),Int32Array.from([1,1,3,3,2,1]),Int32Array.from([1,3,3,1,2,1]),Int32Array.from([3,1,3,1,2,1]),Int32Array.from([2,1,1,3,3,1]),Int32Array.from([2,3,1,1,3,1]),Int32Array.from([2,1,3,1,1,3]),Int32Array.from([2,1,3,3,1,1]),Int32Array.from([2,1,3,1,3,1]),Int32Array.from([3,1,1,1,2,3]),Int32Array.from([3,1,1,3,2,1]),Int32Array.from([3,3,1,1,2,1]),Int32Array.from([3,1,2,1,1,3]),Int32Array.from([3,1,2,3,1,1]),Int32Array.from([3,3,2,1,1,1]),Int32Array.from([3,1,4,1,1,1]),Int32Array.from([2,2,1,4,1,1]),Int32Array.from([4,3,1,1,1,1]),Int32Array.from([1,1,1,2,2,4]),Int32Array.from([1,1,1,4,2,2]),Int32Array.from([1,2,1,1,2,4]),Int32Array.from([1,2,1,4,2,1]),Int32Array.from([1,4,1,1,2,2]),Int32Array.from([1,4,1,2,2,1]),Int32Array.from([1,1,2,2,1,4]),Int32Array.from([1,1,2,4,1,2]),Int32Array.from([1,2,2,1,1,4]),Int32Array.from([1,2,2,4,1,1]),Int32Array.from([1,4,2,1,1,2]),Int32Array.from([1,4,2,2,1,1]),Int32Array.from([2,4,1,2,1,1]),Int32Array.from([2,2,1,1,1,4]),Int32Array.from([4,1,3,1,1,1]),Int32Array.from([2,4,1,1,1,2]),Int32Array.from([1,3,4,1,1,1]),Int32Array.from([1,1,1,2,4,2]),Int32Array.from([1,2,1,1,4,2]),Int32Array.from([1,2,1,2,4,1]),Int32Array.from([1,1,4,2,1,2]),Int32Array.from([1,2,4,1,1,2]),Int32Array.from([1,2,4,2,1,1]),Int32Array.from([4,1,1,2,1,2]),Int32Array.from([4,2,1,1,1,2]),Int32Array.from([4,2,1,2,1,1]),Int32Array.from([2,1,2,1,4,1]),Int32Array.from([2,1,4,1,2,1]),Int32Array.from([4,1,2,1,2,1]),Int32Array.from([1,1,1,1,4,3]),Int32Array.from([1,1,1,3,4,1]),Int32Array.from([1,3,1,1,4,1]),Int32Array.from([1,1,4,1,1,3]),Int32Array.from([1,1,4,3,1,1]),Int32Array.from([4,1,1,1,1,3]),Int32Array.from([4,1,1,3,1,1]),Int32Array.from([1,1,3,1,4,1]),Int32Array.from([1,1,4,1,3,1]),Int32Array.from([3,1,1,1,4,1]),Int32Array.from([4,1,1,1,3,1]),Int32Array.from([2,1,1,4,1,2]),Int32Array.from([2,1,1,2,1,4]),Int32Array.from([2,1,1,2,3,2]),Int32Array.from([2,3,3,1,1,1,2])],ce.MAX_AVG_VARIANCE=.25,ce.MAX_INDIVIDUAL_VARIANCE=.7,ce.CODE_SHIFT=98,ce.CODE_CODE_C=99,ce.CODE_CODE_B=100,ce.CODE_CODE_A=101,ce.CODE_FNC_1=102,ce.CODE_FNC_2=97,ce.CODE_FNC_3=96,ce.CODE_FNC_4_A=101,ce.CODE_FNC_4_B=100,ce.CODE_START_A=103,ce.CODE_START_B=104,ce.CODE_START_C=105,ce.CODE_STOP=106;class Lt extends At{constructor(i=!1,a=!1){super(),this.usingCheckDigit=i,this.extendedMode=a,this.decodeRowResult="",this.counters=new Int32Array(9)}decodeRow(i,a,l){let u=this.counters;u.fill(0),this.decodeRowResult="";let d=Lt.findAsteriskPattern(a,u),f=a.getNextSet(d[1]),m=a.getSize(),w,v;do{Lt.recordPattern(a,f,u);let z=Lt.toNarrowWidePattern(u);if(z<0)throw new $;w=Lt.patternToChar(z),this.decodeRowResult+=w,v=f;for(let G of u)f+=G;f=a.getNextSet(f)}while(w!=="*");this.decodeRowResult=this.decodeRowResult.substring(0,this.decodeRowResult.length-1);let C=0;for(let z of u)C+=z;let O=f-v-C;if(f!==m&&O*2<C)throw new $;if(this.usingCheckDigit){let z=this.decodeRowResult.length-1,G=0;for(let K=0;K<z;K++)G+=Lt.ALPHABET_STRING.indexOf(this.decodeRowResult.charAt(K));if(this.decodeRowResult.charAt(z)!==Lt.ALPHABET_STRING.charAt(G%43))throw new b;this.decodeRowResult=this.decodeRowResult.substring(0,z)}if(this.decodeRowResult.length===0)throw new $;let k;this.extendedMode?k=Lt.decodeExtended(this.decodeRowResult):k=this.decodeRowResult;let L=(d[1]+d[0])/2,V=v+C/2;return new Re(k,null,0,[new ye(L,i),new ye(V,i)],me.CODE_39,new Date().getTime())}static findAsteriskPattern(i,a){let l=i.getSize(),u=i.getNextSet(0),d=0,f=u,m=!1,w=a.length;for(let v=u;v<l;v++)if(i.get(v)!==m)a[d]++;else{if(d===w-1){if(this.toNarrowWidePattern(a)===Lt.ASTERISK_ENCODING&&i.isRange(Math.max(0,f-Math.floor((v-f)/2)),f,!1))return[f,v];f+=a[0]+a[1],a.copyWithin(0,2,2+d-1),a[d-1]=0,a[d]=0,d--}else d++;a[d]=1,m=!m}throw new $}static toNarrowWidePattern(i){let a=i.length,l=0,u;do{let d=2147483647;for(let w of i)w<d&&w>l&&(d=w);l=d,u=0;let f=0,m=0;for(let w=0;w<a;w++){let v=i[w];v>l&&(m|=1<<a-1-w,u++,f+=v)}if(u===3){for(let w=0;w<a&&u>0;w++){let v=i[w];if(v>l&&(u--,v*2>=f))return-1}return m}}while(u>3);return-1}static patternToChar(i){for(let a=0;a<Lt.CHARACTER_ENCODINGS.length;a++)if(Lt.CHARACTER_ENCODINGS[a]===i)return Lt.ALPHABET_STRING.charAt(a);if(i===Lt.ASTERISK_ENCODING)return"*";throw new $}static decodeExtended(i){let a=i.length,l="";for(let u=0;u<a;u++){let d=i.charAt(u);if(d==="+"||d==="$"||d==="%"||d==="/"){let f=i.charAt(u+1),m="\0";switch(d){case"+":if(f>="A"&&f<="Z")m=String.fromCharCode(f.charCodeAt(0)+32);else throw new B;break;case"$":if(f>="A"&&f<="Z")m=String.fromCharCode(f.charCodeAt(0)-64);else throw new B;break;case"%":if(f>="A"&&f<="E")m=String.fromCharCode(f.charCodeAt(0)-38);else if(f>="F"&&f<="J")m=String.fromCharCode(f.charCodeAt(0)-11);else if(f>="K"&&f<="O")m=String.fromCharCode(f.charCodeAt(0)+16);else if(f>="P"&&f<="T")m=String.fromCharCode(f.charCodeAt(0)+43);else if(f==="U")m="\0";else if(f==="V")m="@";else if(f==="W")m="`";else if(f==="X"||f==="Y"||f==="Z")m="";else throw new B;break;case"/":if(f>="A"&&f<="O")m=String.fromCharCode(f.charCodeAt(0)-32);else if(f==="Z")m=":";else throw new B;break}l+=m,u++}else l+=d}return l}}Lt.ALPHABET_STRING="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ-. $/+%",Lt.CHARACTER_ENCODINGS=[52,289,97,352,49,304,112,37,292,100,265,73,328,25,280,88,13,268,76,28,259,67,322,19,274,82,7,262,70,22,385,193,448,145,400,208,133,388,196,168,162,138,42],Lt.ASTERISK_ENCODING=148;class Ze extends At{constructor(){super(...arguments),this.narrowLineWidth=-1}decodeRow(i,a,l){let u=this.decodeStart(a),d=this.decodeEnd(a),f=new fe;Ze.decodeMiddle(a,u[1],d[0],f);let m=f.toString(),w=null;l!=null&&(w=l.get(j.ALLOWED_LENGTHS)),w==null&&(w=Ze.DEFAULT_ALLOWED_LENGTHS);let v=m.length,C=!1,O=0;for(let V of w){if(v===V){C=!0;break}V>O&&(O=V)}if(!C&&v>O&&(C=!0),!C)throw new B;const k=[new ye(u[1],i),new ye(d[0],i)];return new Re(m,null,0,k,me.ITF,new Date().getTime())}static decodeMiddle(i,a,l,u){let d=new Int32Array(10),f=new Int32Array(5),m=new Int32Array(5);for(d.fill(0),f.fill(0),m.fill(0);a<l;){At.recordPattern(i,a,d);for(let v=0;v<5;v++){let C=2*v;f[v]=d[C],m[v]=d[C+1]}let w=Ze.decodeDigit(f);u.append(w.toString()),w=this.decodeDigit(m),u.append(w.toString()),d.forEach(function(v){a+=v})}}decodeStart(i){let a=Ze.skipWhiteSpace(i),l=Ze.findGuardPattern(i,a,Ze.START_PATTERN);return this.narrowLineWidth=(l[1]-l[0])/4,this.validateQuietZone(i,l[0]),l}validateQuietZone(i,a){let l=this.narrowLineWidth*10;l=l<a?l:a;for(let u=a-1;l>0&&u>=0&&!i.get(u);u--)l--;if(l!==0)throw new $}static skipWhiteSpace(i){const a=i.getSize(),l=i.getNextSet(0);if(l===a)throw new $;return l}decodeEnd(i){i.reverse();try{let a=Ze.skipWhiteSpace(i),l;try{l=Ze.findGuardPattern(i,a,Ze.END_PATTERN_REVERSED[0])}catch(d){d instanceof $&&(l=Ze.findGuardPattern(i,a,Ze.END_PATTERN_REVERSED[1]))}this.validateQuietZone(i,l[0]);let u=l[0];return l[0]=i.getSize()-l[1],l[1]=i.getSize()-u,l}finally{i.reverse()}}static findGuardPattern(i,a,l){let u=l.length,d=new Int32Array(u),f=i.getSize(),m=!1,w=0,v=a;d.fill(0);for(let C=a;C<f;C++)if(i.get(C)!==m)d[w]++;else{if(w===u-1){if(At.patternMatchVariance(d,l,Ze.MAX_INDIVIDUAL_VARIANCE)<Ze.MAX_AVG_VARIANCE)return[v,C];v+=d[0]+d[1],S.arraycopy(d,2,d,0,w-1),d[w-1]=0,d[w]=0,w--}else w++;d[w]=1,m=!m}throw new $}static decodeDigit(i){let a=Ze.MAX_AVG_VARIANCE,l=-1,u=Ze.PATTERNS.length;for(let d=0;d<u;d++){let f=Ze.PATTERNS[d],m=At.patternMatchVariance(i,f,Ze.MAX_INDIVIDUAL_VARIANCE);m<a?(a=m,l=d):m===a&&(l=-1)}if(l>=0)return l%10;throw new $}}Ze.PATTERNS=[Int32Array.from([1,1,2,2,1]),Int32Array.from([2,1,1,1,2]),Int32Array.from([1,2,1,1,2]),Int32Array.from([2,2,1,1,1]),Int32Array.from([1,1,2,1,2]),Int32Array.from([2,1,2,1,1]),Int32Array.from([1,2,2,1,1]),Int32Array.from([1,1,1,2,2]),Int32Array.from([2,1,1,2,1]),Int32Array.from([1,2,1,2,1]),Int32Array.from([1,1,3,3,1]),Int32Array.from([3,1,1,1,3]),Int32Array.from([1,3,1,1,3]),Int32Array.from([3,3,1,1,1]),Int32Array.from([1,1,3,1,3]),Int32Array.from([3,1,3,1,1]),Int32Array.from([1,3,3,1,1]),Int32Array.from([1,1,1,3,3]),Int32Array.from([3,1,1,3,1]),Int32Array.from([1,3,1,3,1])],Ze.MAX_AVG_VARIANCE=.38,Ze.MAX_INDIVIDUAL_VARIANCE=.5,Ze.DEFAULT_ALLOWED_LENGTHS=[6,8,10,12,14],Ze.START_PATTERN=Int32Array.from([1,1,1,1]),Ze.END_PATTERN_REVERSED=[Int32Array.from([1,1,2]),Int32Array.from([1,1,3])];class _t extends At{constructor(){super(...arguments),this.decodeRowStringBuffer=""}static findStartGuardPattern(i){let a=!1,l,u=0,d=Int32Array.from([0,0,0]);for(;!a;){d=Int32Array.from([0,0,0]),l=_t.findGuardPattern(i,u,!1,this.START_END_PATTERN,d);let f=l[0];u=l[1];let m=f-(u-f);m>=0&&(a=i.isRange(m,f,!1))}return l}static checkChecksum(i){return _t.checkStandardUPCEANChecksum(i)}static checkStandardUPCEANChecksum(i){let a=i.length;if(a===0)return!1;let l=parseInt(i.charAt(a-1),10);return _t.getStandardUPCEANChecksum(i.substring(0,a-1))===l}static getStandardUPCEANChecksum(i){let a=i.length,l=0;for(let u=a-1;u>=0;u-=2){let d=i.charAt(u).charCodeAt(0)-48;if(d<0||d>9)throw new B;l+=d}l*=3;for(let u=a-2;u>=0;u-=2){let d=i.charAt(u).charCodeAt(0)-48;if(d<0||d>9)throw new B;l+=d}return(1e3-l)%10}static decodeEnd(i,a){return _t.findGuardPattern(i,a,!1,_t.START_END_PATTERN,new Int32Array(_t.START_END_PATTERN.length).fill(0))}static findGuardPatternWithoutCounters(i,a,l,u){return this.findGuardPattern(i,a,l,u,new Int32Array(u.length))}static findGuardPattern(i,a,l,u,d){let f=i.getSize();a=l?i.getNextUnset(a):i.getNextSet(a);let m=0,w=a,v=u.length,C=l;for(let O=a;O<f;O++)if(i.get(O)!==C)d[m]++;else{if(m===v-1){if(At.patternMatchVariance(d,u,_t.MAX_INDIVIDUAL_VARIANCE)<_t.MAX_AVG_VARIANCE)return Int32Array.from([w,O]);w+=d[0]+d[1];let k=d.slice(2,d.length-1);for(let L=0;L<m-1;L++)d[L]=k[L];d[m-1]=0,d[m]=0,m--}else m++;d[m]=1,C=!C}throw new $}static decodeDigit(i,a,l,u){this.recordPattern(i,l,a);let d=this.MAX_AVG_VARIANCE,f=-1,m=u.length;for(let w=0;w<m;w++){let v=u[w],C=At.patternMatchVariance(a,v,_t.MAX_INDIVIDUAL_VARIANCE);C<d&&(d=C,f=w)}if(f>=0)return f;throw new $}}_t.MAX_AVG_VARIANCE=.48,_t.MAX_INDIVIDUAL_VARIANCE=.7,_t.START_END_PATTERN=Int32Array.from([1,1,1]),_t.MIDDLE_PATTERN=Int32Array.from([1,1,1,1,1]),_t.END_PATTERN=Int32Array.from([1,1,1,1,1,1]),_t.L_PATTERNS=[Int32Array.from([3,2,1,1]),Int32Array.from([2,2,2,1]),Int32Array.from([2,1,2,2]),Int32Array.from([1,4,1,1]),Int32Array.from([1,1,3,2]),Int32Array.from([1,2,3,1]),Int32Array.from([1,1,1,4]),Int32Array.from([1,3,1,2]),Int32Array.from([1,2,1,3]),Int32Array.from([3,1,1,2])];class oo{constructor(){this.CHECK_DIGIT_ENCODINGS=[24,20,18,17,12,6,3,10,9,5],this.decodeMiddleCounters=Int32Array.from([0,0,0,0]),this.decodeRowStringBuffer=""}decodeRow(i,a,l){let u=this.decodeRowStringBuffer,d=this.decodeMiddle(a,l,u),f=u.toString(),m=oo.parseExtensionString(f),w=[new ye((l[0]+l[1])/2,i),new ye(d,i)],v=new Re(f,null,0,w,me.UPC_EAN_EXTENSION,new Date().getTime());return m!=null&&v.putAllMetadata(m),v}decodeMiddle(i,a,l){let u=this.decodeMiddleCounters;u[0]=0,u[1]=0,u[2]=0,u[3]=0;let d=i.getSize(),f=a[1],m=0;for(let v=0;v<5&&f<d;v++){let C=_t.decodeDigit(i,u,f,_t.L_AND_G_PATTERNS);l+=String.fromCharCode(48+C%10);for(let O of u)f+=O;C>=10&&(m|=1<<4-v),v!==4&&(f=i.getNextSet(f),f=i.getNextUnset(f))}if(l.length!==5)throw new $;let w=this.determineCheckDigit(m);if(oo.extensionChecksum(l.toString())!==w)throw new $;return f}static extensionChecksum(i){let a=i.length,l=0;for(let u=a-2;u>=0;u-=2)l+=i.charAt(u).charCodeAt(0)-48;l*=3;for(let u=a-1;u>=0;u-=2)l+=i.charAt(u).charCodeAt(0)-48;return l*=3,l%10}determineCheckDigit(i){for(let a=0;a<10;a++)if(i===this.CHECK_DIGIT_ENCODINGS[a])return a;throw new $}static parseExtensionString(i){if(i.length!==5)return null;let a=oo.parseExtension5String(i);return a==null?null:new Map([[yt.SUGGESTED_PRICE,a]])}static parseExtension5String(i){let a;switch(i.charAt(0)){case"0":a="";break;case"5":a="$";break;case"9":switch(i){case"90000":return null;case"99991":return"0.00";case"99990":return"Used"}a="";break;default:a="";break}let l=parseInt(i.substring(1)),u=(l/100).toString(),d=l%100,f=d<10?"0"+d:d.toString();return a+u+"."+f}}class Ko{constructor(){this.decodeMiddleCounters=Int32Array.from([0,0,0,0]),this.decodeRowStringBuffer=""}decodeRow(i,a,l){let u=this.decodeRowStringBuffer,d=this.decodeMiddle(a,l,u),f=u.toString(),m=Ko.parseExtensionString(f),w=[new ye((l[0]+l[1])/2,i),new ye(d,i)],v=new Re(f,null,0,w,me.UPC_EAN_EXTENSION,new Date().getTime());return m!=null&&v.putAllMetadata(m),v}decodeMiddle(i,a,l){let u=this.decodeMiddleCounters;u[0]=0,u[1]=0,u[2]=0,u[3]=0;let d=i.getSize(),f=a[1],m=0;for(let w=0;w<2&&f<d;w++){let v=_t.decodeDigit(i,u,f,_t.L_AND_G_PATTERNS);l+=String.fromCharCode(48+v%10);for(let C of u)f+=C;v>=10&&(m|=1<<1-w),w!==1&&(f=i.getNextSet(f),f=i.getNextUnset(f))}if(l.length!==2)throw new $;if(parseInt(l.toString())%4!==m)throw new $;return f}static parseExtensionString(i){return i.length!==2?null:new Map([[yt.ISSUE_NUMBER,parseInt(i)]])}}class Tl{static decodeRow(i,a,l){let u=_t.findGuardPattern(a,l,!1,this.EXTENSION_START_PATTERN,new Int32Array(this.EXTENSION_START_PATTERN.length).fill(0));try{return new oo().decodeRow(i,a,u)}catch{return new Ko().decodeRow(i,a,u)}}}Tl.EXTENSION_START_PATTERN=Int32Array.from([1,1,2]);class Qe extends _t{constructor(){super(),this.decodeRowStringBuffer="",Qe.L_AND_G_PATTERNS=Qe.L_PATTERNS.map(i=>Int32Array.from(i));for(let i=10;i<20;i++){let a=Qe.L_PATTERNS[i-10],l=new Int32Array(a.length);for(let u=0;u<a.length;u++)l[u]=a[a.length-u-1];Qe.L_AND_G_PATTERNS[i]=l}}decodeRow(i,a,l){let u=Qe.findStartGuardPattern(a),d=l==null?null:l.get(j.NEED_RESULT_POINT_CALLBACK);if(d!=null){const re=new ye((u[0]+u[1])/2,i);d.foundPossibleResultPoint(re)}let f=this.decodeMiddle(a,u,this.decodeRowStringBuffer),m=f.rowOffset,w=f.resultString;if(d!=null){const re=new ye(m,i);d.foundPossibleResultPoint(re)}let v=this.decodeEnd(a,m);if(d!=null){const re=new ye((v[0]+v[1])/2,i);d.foundPossibleResultPoint(re)}let C=v[1],O=C+(C-v[0]);if(O>=a.getSize()||!a.isRange(C,O,!1))throw new $;let k=w.toString();if(k.length<8)throw new B;if(!Qe.checkChecksum(k))throw new b;let L=(u[1]+u[0])/2,V=(v[1]+v[0])/2,z=this.getBarcodeFormat(),G=[new ye(L,i),new ye(V,i)],K=new Re(k,null,0,G,z,new Date().getTime()),oe=0;try{let re=Tl.decodeRow(i,a,v[1]);K.putMetadata(yt.UPC_EAN_EXTENSION,re.getText()),K.putAllMetadata(re.getResultMetadata()),K.addResultPoints(re.getResultPoints()),oe=re.getText().length}catch{}let ae=l==null?null:l.get(j.ALLOWED_EAN_EXTENSIONS);if(ae!=null){let re=!1;for(let Xe in ae)if(oe.toString()===Xe){re=!0;break}if(!re)throw new $}return K}decodeEnd(i,a){return Qe.findGuardPattern(i,a,!1,Qe.START_END_PATTERN,new Int32Array(Qe.START_END_PATTERN.length).fill(0))}static checkChecksum(i){return Qe.checkStandardUPCEANChecksum(i)}static checkStandardUPCEANChecksum(i){let a=i.length;if(a===0)return!1;let l=parseInt(i.charAt(a-1),10);return Qe.getStandardUPCEANChecksum(i.substring(0,a-1))===l}static getStandardUPCEANChecksum(i){let a=i.length,l=0;for(let u=a-1;u>=0;u-=2){let d=i.charAt(u).charCodeAt(0)-48;if(d<0||d>9)throw new B;l+=d}l*=3;for(let u=a-2;u>=0;u-=2){let d=i.charAt(u).charCodeAt(0)-48;if(d<0||d>9)throw new B;l+=d}return(1e3-l)%10}}class Br extends Qe{constructor(){super(),this.decodeMiddleCounters=Int32Array.from([0,0,0,0])}decodeMiddle(i,a,l){let u=this.decodeMiddleCounters;u[0]=0,u[1]=0,u[2]=0,u[3]=0;let d=i.getSize(),f=a[1],m=0;for(let v=0;v<6&&f<d;v++){let C=Qe.decodeDigit(i,u,f,Qe.L_AND_G_PATTERNS);l+=String.fromCharCode(48+C%10);for(let O of u)f+=O;C>=10&&(m|=1<<5-v)}l=Br.determineFirstDigit(l,m),f=Qe.findGuardPattern(i,f,!0,Qe.MIDDLE_PATTERN,new Int32Array(Qe.MIDDLE_PATTERN.length).fill(0))[1];for(let v=0;v<6&&f<d;v++){let C=Qe.decodeDigit(i,u,f,Qe.L_PATTERNS);l+=String.fromCharCode(48+C);for(let O of u)f+=O}return{rowOffset:f,resultString:l}}getBarcodeFormat(){return me.EAN_13}static determineFirstDigit(i,a){for(let l=0;l<10;l++)if(a===this.FIRST_DIGIT_ENCODINGS[l])return i=String.fromCharCode(48+l)+i,i;throw new $}}Br.FIRST_DIGIT_ENCODINGS=[0,11,13,14,19,25,28,21,22,26];class Fr extends Qe{constructor(){super(),this.decodeMiddleCounters=Int32Array.from([0,0,0,0])}decodeMiddle(i,a,l){const u=this.decodeMiddleCounters;u[0]=0,u[1]=0,u[2]=0,u[3]=0;let d=i.getSize(),f=a[1];for(let w=0;w<4&&f<d;w++){let v=Qe.decodeDigit(i,u,f,Qe.L_PATTERNS);l+=String.fromCharCode(48+v);for(let C of u)f+=C}f=Qe.findGuardPattern(i,f,!0,Qe.MIDDLE_PATTERN,new Int32Array(Qe.MIDDLE_PATTERN.length).fill(0))[1];for(let w=0;w<4&&f<d;w++){let v=Qe.decodeDigit(i,u,f,Qe.L_PATTERNS);l+=String.fromCharCode(48+v);for(let C of u)f+=C}return{rowOffset:f,resultString:l}}getBarcodeFormat(){return me.EAN_8}}class xu extends Qe{constructor(){super(...arguments),this.ean13Reader=new Br}getBarcodeFormat(){return me.UPC_A}decode(i,a){return this.maybeReturnResult(this.ean13Reader.decode(i))}decodeRow(i,a,l){return this.maybeReturnResult(this.ean13Reader.decodeRow(i,a,l))}decodeMiddle(i,a,l){return this.ean13Reader.decodeMiddle(i,a,l)}maybeReturnResult(i){let a=i.getText();if(a.charAt(0)==="0"){let l=new Re(a.substring(1),null,null,i.getResultPoints(),me.UPC_A);return i.getResultMetadata()!=null&&l.putAllMetadata(i.getResultMetadata()),l}else throw new $}reset(){this.ean13Reader.reset()}}class Te extends Qe{constructor(){super(),this.decodeMiddleCounters=new Int32Array(4)}decodeMiddle(i,a,l){const u=this.decodeMiddleCounters.map(v=>v);u[0]=0,u[1]=0,u[2]=0,u[3]=0;const d=i.getSize();let f=a[1],m=0;for(let v=0;v<6&&f<d;v++){const C=Te.decodeDigit(i,u,f,Te.L_AND_G_PATTERNS);l+=String.fromCharCode(48+C%10);for(let O of u)f+=O;C>=10&&(m|=1<<5-v)}let w=Te.determineNumSysAndCheckDigit(l,m);return{rowOffset:f,resultString:w}}decodeEnd(i,a){return Te.findGuardPatternWithoutCounters(i,a,!0,Te.MIDDLE_END_PATTERN)}checkChecksum(i){return Qe.checkChecksum(Te.convertUPCEtoUPCA(i))}static determineNumSysAndCheckDigit(i,a){for(let l=0;l<=1;l++)for(let u=0;u<10;u++)if(a===this.NUMSYS_AND_CHECK_DIGIT_PATTERNS[l][u]){let d=String.fromCharCode(48+l),f=String.fromCharCode(48+u);return d+i+f}throw $.getNotFoundInstance()}getBarcodeFormat(){return me.UPC_E}static convertUPCEtoUPCA(i){const a=i.slice(1,7).split("").map(d=>d.charCodeAt(0)),l=new fe;l.append(i.charAt(0));let u=a[5];switch(u){case 0:case 1:case 2:l.appendChars(a,0,2),l.append(u),l.append("0000"),l.appendChars(a,2,3);break;case 3:l.appendChars(a,0,3),l.append("00000"),l.appendChars(a,3,2);break;case 4:l.appendChars(a,0,4),l.append("00000"),l.append(a[4]);break;default:l.appendChars(a,0,5),l.append("0000"),l.append(u);break}return i.length>=8&&l.append(i.charAt(7)),l.toString()}}Te.MIDDLE_END_PATTERN=Int32Array.from([1,1,1,1,1,1]),Te.NUMSYS_AND_CHECK_DIGIT_PATTERNS=[Int32Array.from([56,52,50,49,44,38,35,42,41,37]),Int32Array.from([7,11,13,14,19,25,28,21,22,26])];class rt extends At{constructor(i){super();let a=i==null?null:i.get(j.POSSIBLE_FORMATS),l=[];r(a)?(l.push(new Br),l.push(new xu),l.push(new Fr),l.push(new Te)):(a.indexOf(me.EAN_13)>-1&&l.push(new Br),a.indexOf(me.UPC_A)>-1&&l.push(new xu),a.indexOf(me.EAN_8)>-1&&l.push(new Fr),a.indexOf(me.UPC_E)>-1&&l.push(new Te)),this.readers=l}decodeRow(i,a,l){for(let u of this.readers)try{const d=u.decodeRow(i,a,l),f=d.getBarcodeFormat()===me.EAN_13&&d.getText().charAt(0)==="0",m=l==null?null:l.get(j.POSSIBLE_FORMATS),w=m==null||m.includes(me.UPC_A);if(f&&w){const v=d.getRawBytes(),C=new Re(d.getText().substring(1),v,v?v.length:null,d.getResultPoints(),me.UPC_A);return C.putAllMetadata(d.getResultMetadata()),C}return d}catch{}throw new $}reset(){for(let i of this.readers)i.reset()}}class Ue extends At{constructor(){super(),this.decodeFinderCounters=new Int32Array(4),this.dataCharacterCounters=new Int32Array(8),this.oddRoundingErrors=new Array(4),this.evenRoundingErrors=new Array(4),this.oddCounts=new Array(this.dataCharacterCounters.length/2),this.evenCounts=new Array(this.dataCharacterCounters.length/2)}getDecodeFinderCounters(){return this.decodeFinderCounters}getDataCharacterCounters(){return this.dataCharacterCounters}getOddRoundingErrors(){return this.oddRoundingErrors}getEvenRoundingErrors(){return this.evenRoundingErrors}getOddCounts(){return this.oddCounts}getEvenCounts(){return this.evenCounts}parseFinderValue(i,a){for(let l=0;l<a.length;l++)if(At.patternMatchVariance(i,a[l],Ue.MAX_INDIVIDUAL_VARIANCE)<Ue.MAX_AVG_VARIANCE)return l;throw new $}static count(i){return He.sum(new Int32Array(i))}static increment(i,a){let l=0,u=a[0];for(let d=1;d<i.length;d++)a[d]>u&&(u=a[d],l=d);i[l]++}static decrement(i,a){let l=0,u=a[0];for(let d=1;d<i.length;d++)a[d]<u&&(u=a[d],l=d);i[l]--}static isFinderPattern(i){let a=i[0]+i[1],l=a+i[2]+i[3],u=a/l;if(u>=Ue.MIN_FINDER_PATTERN_RATIO&&u<=Ue.MAX_FINDER_PATTERN_RATIO){let d=Number.MAX_SAFE_INTEGER,f=Number.MIN_SAFE_INTEGER;for(let m of i)m>f&&(f=m),m<d&&(d=m);return f<10*d}return!1}}Ue.MAX_AVG_VARIANCE=.2,Ue.MAX_INDIVIDUAL_VARIANCE=.45,Ue.MIN_FINDER_PATTERN_RATIO=9.5/12,Ue.MAX_FINDER_PATTERN_RATIO=12.5/14;class an{constructor(i,a){this.value=i,this.checksumPortion=a}getValue(){return this.value}getChecksumPortion(){return this.checksumPortion}toString(){return this.value+"("+this.checksumPortion+")"}equals(i){if(!(i instanceof an))return!1;const a=i;return this.value===a.value&&this.checksumPortion===a.checksumPortion}hashCode(){return this.value^this.checksumPortion}}class bn{constructor(i,a,l,u,d){this.value=i,this.startEnd=a,this.value=i,this.startEnd=a,this.resultPoints=new Array,this.resultPoints.push(new ye(l,d)),this.resultPoints.push(new ye(u,d))}getValue(){return this.value}getStartEnd(){return this.startEnd}getResultPoints(){return this.resultPoints}equals(i){if(!(i instanceof bn))return!1;const a=i;return this.value===a.value}hashCode(){return this.value}}class qt{constructor(){}static getRSSvalue(i,a,l){let u=0;for(let w of i)u+=w;let d=0,f=0,m=i.length;for(let w=0;w<m-1;w++){let v;for(v=1,f|=1<<w;v<i[w];v++,f&=~(1<<w)){let C=qt.combins(u-v-1,m-w-2);if(l&&f===0&&u-v-(m-w-1)>=m-w-1&&(C-=qt.combins(u-v-(m-w),m-w-2)),m-w-1>1){let O=0;for(let k=u-v-(m-w-2);k>a;k--)O+=qt.combins(u-v-k-1,m-w-3);C-=O*(m-1-w)}else u-v>a&&C--;d+=C}u-=v}return d}static combins(i,a){let l,u;i-a>a?(u=a,l=i-a):(u=i-a,l=a);let d=1,f=1;for(let m=i;m>l;m--)d*=m,f<=u&&(d/=f,f++);for(;f<=u;)d/=f,f++;return d}}class Di{static buildBitArray(i){let a=i.length*2-1;i[i.length-1].getRightChar()==null&&(a-=1);let l=12*a,u=new D(l),d=0,m=i[0].getRightChar().getValue();for(let w=11;w>=0;--w)m&1<<w&&u.set(d),d++;for(let w=1;w<i.length;++w){let v=i[w],C=v.getLeftChar().getValue();for(let O=11;O>=0;--O)C&1<<O&&u.set(d),d++;if(v.getRightChar()!=null){let O=v.getRightChar().getValue();for(let k=11;k>=0;--k)O&1<<k&&u.set(d),d++}}return u}}class Zt{constructor(i,a){a?this.decodedInformation=null:(this.finished=i,this.decodedInformation=a)}getDecodedInformation(){return this.decodedInformation}isFinished(){return this.finished}}class wr{constructor(i){this.newPosition=i}getNewPosition(){return this.newPosition}}class Hn extends wr{constructor(i,a){super(i),this.value=a}getValue(){return this.value}isFNC1(){return this.value===Hn.FNC1}}Hn.FNC1="$";class ao extends wr{constructor(i,a,l){super(i),l?(this.remaining=!0,this.remainingValue=this.remainingValue):(this.remaining=!1,this.remainingValue=0),this.newString=a}getNewString(){return this.newString}isRemaining(){return this.remaining}getRemainingValue(){return this.remainingValue}}class xr extends wr{constructor(i,a,l){if(super(i),a<0||a>10||l<0||l>10)throw new B;this.firstDigit=a,this.secondDigit=l}getFirstDigit(){return this.firstDigit}getSecondDigit(){return this.secondDigit}getValue(){return this.firstDigit*10+this.secondDigit}isFirstDigitFNC1(){return this.firstDigit===xr.FNC1}isSecondDigitFNC1(){return this.secondDigit===xr.FNC1}isAnyFNC1(){return this.firstDigit===xr.FNC1||this.secondDigit===xr.FNC1}}xr.FNC1=10;class we{constructor(){}static parseFieldsInGeneralPurpose(i){if(!i)return null;if(i.length<2)throw new $;let a=i.substring(0,2);for(let d of we.TWO_DIGIT_DATA_LENGTH)if(d[0]===a)return d[1]===we.VARIABLE_LENGTH?we.processVariableAI(2,d[2],i):we.processFixedAI(2,d[1],i);if(i.length<3)throw new $;let l=i.substring(0,3);for(let d of we.THREE_DIGIT_DATA_LENGTH)if(d[0]===l)return d[1]===we.VARIABLE_LENGTH?we.processVariableAI(3,d[2],i):we.processFixedAI(3,d[1],i);for(let d of we.THREE_DIGIT_PLUS_DIGIT_DATA_LENGTH)if(d[0]===l)return d[1]===we.VARIABLE_LENGTH?we.processVariableAI(4,d[2],i):we.processFixedAI(4,d[1],i);if(i.length<4)throw new $;let u=i.substring(0,4);for(let d of we.FOUR_DIGIT_DATA_LENGTH)if(d[0]===u)return d[1]===we.VARIABLE_LENGTH?we.processVariableAI(4,d[2],i):we.processFixedAI(4,d[1],i);throw new $}static processFixedAI(i,a,l){if(l.length<i)throw new $;let u=l.substring(0,i);if(l.length<i+a)throw new $;let d=l.substring(i,i+a),f=l.substring(i+a),m="("+u+")"+d,w=we.parseFieldsInGeneralPurpose(f);return w==null?m:m+w}static processVariableAI(i,a,l){let u=l.substring(0,i),d;l.length<i+a?d=l.length:d=i+a;let f=l.substring(i,d),m=l.substring(d),w="("+u+")"+f,v=we.parseFieldsInGeneralPurpose(m);return v==null?w:w+v}}we.VARIABLE_LENGTH=[],we.TWO_DIGIT_DATA_LENGTH=[["00",18],["01",14],["02",14],["10",we.VARIABLE_LENGTH,20],["11",6],["12",6],["13",6],["15",6],["17",6],["20",2],["21",we.VARIABLE_LENGTH,20],["22",we.VARIABLE_LENGTH,29],["30",we.VARIABLE_LENGTH,8],["37",we.VARIABLE_LENGTH,8],["90",we.VARIABLE_LENGTH,30],["91",we.VARIABLE_LENGTH,30],["92",we.VARIABLE_LENGTH,30],["93",we.VARIABLE_LENGTH,30],["94",we.VARIABLE_LENGTH,30],["95",we.VARIABLE_LENGTH,30],["96",we.VARIABLE_LENGTH,30],["97",we.VARIABLE_LENGTH,3],["98",we.VARIABLE_LENGTH,30],["99",we.VARIABLE_LENGTH,30]],we.THREE_DIGIT_DATA_LENGTH=[["240",we.VARIABLE_LENGTH,30],["241",we.VARIABLE_LENGTH,30],["242",we.VARIABLE_LENGTH,6],["250",we.VARIABLE_LENGTH,30],["251",we.VARIABLE_LENGTH,30],["253",we.VARIABLE_LENGTH,17],["254",we.VARIABLE_LENGTH,20],["400",we.VARIABLE_LENGTH,30],["401",we.VARIABLE_LENGTH,30],["402",17],["403",we.VARIABLE_LENGTH,30],["410",13],["411",13],["412",13],["413",13],["414",13],["420",we.VARIABLE_LENGTH,20],["421",we.VARIABLE_LENGTH,15],["422",3],["423",we.VARIABLE_LENGTH,15],["424",3],["425",3],["426",3]],we.THREE_DIGIT_PLUS_DIGIT_DATA_LENGTH=[["310",6],["311",6],["312",6],["313",6],["314",6],["315",6],["316",6],["320",6],["321",6],["322",6],["323",6],["324",6],["325",6],["326",6],["327",6],["328",6],["329",6],["330",6],["331",6],["332",6],["333",6],["334",6],["335",6],["336",6],["340",6],["341",6],["342",6],["343",6],["344",6],["345",6],["346",6],["347",6],["348",6],["349",6],["350",6],["351",6],["352",6],["353",6],["354",6],["355",6],["356",6],["357",6],["360",6],["361",6],["362",6],["363",6],["364",6],["365",6],["366",6],["367",6],["368",6],["369",6],["390",we.VARIABLE_LENGTH,15],["391",we.VARIABLE_LENGTH,18],["392",we.VARIABLE_LENGTH,15],["393",we.VARIABLE_LENGTH,18],["703",we.VARIABLE_LENGTH,30]],we.FOUR_DIGIT_DATA_LENGTH=[["7001",13],["7002",we.VARIABLE_LENGTH,30],["7003",10],["8001",14],["8002",we.VARIABLE_LENGTH,20],["8003",we.VARIABLE_LENGTH,30],["8004",we.VARIABLE_LENGTH,30],["8005",6],["8006",18],["8007",we.VARIABLE_LENGTH,30],["8008",we.VARIABLE_LENGTH,12],["8018",18],["8020",we.VARIABLE_LENGTH,25],["8100",6],["8101",10],["8102",2],["8110",we.VARIABLE_LENGTH,70],["8200",we.VARIABLE_LENGTH,70]];class qo{constructor(i){this.buffer=new fe,this.information=i}decodeAllCodes(i,a){let l=a,u=null;do{let d=this.decodeGeneralPurposeField(l,u),f=we.parseFieldsInGeneralPurpose(d.getNewString());if(f!=null&&i.append(f),d.isRemaining()?u=""+d.getRemainingValue():u=null,l===d.getNewPosition())break;l=d.getNewPosition()}while(!0);return i.toString()}isStillNumeric(i){if(i+7>this.information.getSize())return i+4<=this.information.getSize();for(let a=i;a<i+3;++a)if(this.information.get(a))return!0;return this.information.get(i+3)}decodeNumeric(i){if(i+7>this.information.getSize()){let d=this.extractNumericValueFromBitArray(i,4);return d===0?new xr(this.information.getSize(),xr.FNC1,xr.FNC1):new xr(this.information.getSize(),d-1,xr.FNC1)}let a=this.extractNumericValueFromBitArray(i,7),l=(a-8)/11,u=(a-8)%11;return new xr(i+7,l,u)}extractNumericValueFromBitArray(i,a){return qo.extractNumericValueFromBitArray(this.information,i,a)}static extractNumericValueFromBitArray(i,a,l){let u=0;for(let d=0;d<l;++d)i.get(a+d)&&(u|=1<<l-d-1);return u}decodeGeneralPurposeField(i,a){this.buffer.setLengthToZero(),a!=null&&this.buffer.append(a),this.current.setPosition(i);let l=this.parseBlocks();return l!=null&&l.isRemaining()?new ao(this.current.getPosition(),this.buffer.toString(),l.getRemainingValue()):new ao(this.current.getPosition(),this.buffer.toString())}parseBlocks(){let i,a;do{let l=this.current.getPosition();if(this.current.isAlpha()?(a=this.parseAlphaBlock(),i=a.isFinished()):this.current.isIsoIec646()?(a=this.parseIsoIec646Block(),i=a.isFinished()):(a=this.parseNumericBlock(),i=a.isFinished()),!(l!==this.current.getPosition())&&!i)break}while(!i);return a.getDecodedInformation()}parseNumericBlock(){for(;this.isStillNumeric(this.current.getPosition());){let i=this.decodeNumeric(this.current.getPosition());if(this.current.setPosition(i.getNewPosition()),i.isFirstDigitFNC1()){let a;return i.isSecondDigitFNC1()?a=new ao(this.current.getPosition(),this.buffer.toString()):a=new ao(this.current.getPosition(),this.buffer.toString(),i.getSecondDigit()),new Zt(!0,a)}if(this.buffer.append(i.getFirstDigit()),i.isSecondDigitFNC1()){let a=new ao(this.current.getPosition(),this.buffer.toString());return new Zt(!0,a)}this.buffer.append(i.getSecondDigit())}return this.isNumericToAlphaNumericLatch(this.current.getPosition())&&(this.current.setAlpha(),this.current.incrementPosition(4)),new Zt(!1)}parseIsoIec646Block(){for(;this.isStillIsoIec646(this.current.getPosition());){let i=this.decodeIsoIec646(this.current.getPosition());if(this.current.setPosition(i.getNewPosition()),i.isFNC1()){let a=new ao(this.current.getPosition(),this.buffer.toString());return new Zt(!0,a)}this.buffer.append(i.getValue())}return this.isAlphaOr646ToNumericLatch(this.current.getPosition())?(this.current.incrementPosition(3),this.current.setNumeric()):this.isAlphaTo646ToAlphaLatch(this.current.getPosition())&&(this.current.getPosition()+5<this.information.getSize()?this.current.incrementPosition(5):this.current.setPosition(this.information.getSize()),this.current.setAlpha()),new Zt(!1)}parseAlphaBlock(){for(;this.isStillAlpha(this.current.getPosition());){let i=this.decodeAlphanumeric(this.current.getPosition());if(this.current.setPosition(i.getNewPosition()),i.isFNC1()){let a=new ao(this.current.getPosition(),this.buffer.toString());return new Zt(!0,a)}this.buffer.append(i.getValue())}return this.isAlphaOr646ToNumericLatch(this.current.getPosition())?(this.current.incrementPosition(3),this.current.setNumeric()):this.isAlphaTo646ToAlphaLatch(this.current.getPosition())&&(this.current.getPosition()+5<this.information.getSize()?this.current.incrementPosition(5):this.current.setPosition(this.information.getSize()),this.current.setIsoIec646()),new Zt(!1)}isStillIsoIec646(i){if(i+5>this.information.getSize())return!1;let a=this.extractNumericValueFromBitArray(i,5);if(a>=5&&a<16)return!0;if(i+7>this.information.getSize())return!1;let l=this.extractNumericValueFromBitArray(i,7);if(l>=64&&l<116)return!0;if(i+8>this.information.getSize())return!1;let u=this.extractNumericValueFromBitArray(i,8);return u>=232&&u<253}decodeIsoIec646(i){let a=this.extractNumericValueFromBitArray(i,5);if(a===15)return new Hn(i+5,Hn.FNC1);if(a>=5&&a<15)return new Hn(i+5,"0"+(a-5));let l=this.extractNumericValueFromBitArray(i,7);if(l>=64&&l<90)return new Hn(i+7,""+(l+1));if(l>=90&&l<116)return new Hn(i+7,""+(l+7));let u=this.extractNumericValueFromBitArray(i,8),d;switch(u){case 232:d="!";break;case 233:d='"';break;case 234:d="%";break;case 235:d="&";break;case 236:d="'";break;case 237:d="(";break;case 238:d=")";break;case 239:d="*";break;case 240:d="+";break;case 241:d=",";break;case 242:d="-";break;case 243:d=".";break;case 244:d="/";break;case 245:d=":";break;case 246:d=";";break;case 247:d="<";break;case 248:d="=";break;case 249:d=">";break;case 250:d="?";break;case 251:d="_";break;case 252:d=" ";break;default:throw new B}return new Hn(i+8,d)}isStillAlpha(i){if(i+5>this.information.getSize())return!1;let a=this.extractNumericValueFromBitArray(i,5);if(a>=5&&a<16)return!0;if(i+6>this.information.getSize())return!1;let l=this.extractNumericValueFromBitArray(i,6);return l>=16&&l<63}decodeAlphanumeric(i){let a=this.extractNumericValueFromBitArray(i,5);if(a===15)return new Hn(i+5,Hn.FNC1);if(a>=5&&a<15)return new Hn(i+5,"0"+(a-5));let l=this.extractNumericValueFromBitArray(i,6);if(l>=32&&l<58)return new Hn(i+6,""+(l+33));let u;switch(l){case 58:u="*";break;case 59:u=",";break;case 60:u="-";break;case 61:u=".";break;case 62:u="/";break;default:throw new zn("Decoding invalid alphanumeric value: "+l)}return new Hn(i+6,u)}isAlphaTo646ToAlphaLatch(i){if(i+1>this.information.getSize())return!1;for(let a=0;a<5&&a+i<this.information.getSize();++a)if(a===2){if(!this.information.get(i+2))return!1}else if(this.information.get(i+a))return!1;return!0}isAlphaOr646ToNumericLatch(i){if(i+3>this.information.getSize())return!1;for(let a=i;a<i+3;++a)if(this.information.get(a))return!1;return!0}isNumericToAlphaNumericLatch(i){if(i+1>this.information.getSize())return!1;for(let a=0;a<4&&a+i<this.information.getSize();++a)if(this.information.get(i+a))return!1;return!0}}class hf{constructor(i){this.information=i,this.generalDecoder=new qo(i)}getInformation(){return this.information}getGeneralDecoder(){return this.generalDecoder}}class Wn extends hf{constructor(i){super(i)}encodeCompressedGtin(i,a){i.append("(01)");let l=i.length();i.append("9"),this.encodeCompressedGtinWithoutAI(i,a,l)}encodeCompressedGtinWithoutAI(i,a,l){for(let u=0;u<4;++u){let d=this.getGeneralDecoder().extractNumericValueFromBitArray(a+10*u,10);d/100===0&&i.append("0"),d/10===0&&i.append("0"),i.append(d)}Wn.appendCheckDigit(i,l)}static appendCheckDigit(i,a){let l=0;for(let u=0;u<13;u++){let d=i.charAt(u+a).charCodeAt(0)-48;l+=u&1?d:3*d}l=10-l%10,l===10&&(l=0),i.append(l)}}Wn.GTIN_SIZE=40;class Zo extends Wn{constructor(i){super(i)}parseInformation(){let i=new fe;i.append("(01)");let a=i.length(),l=this.getGeneralDecoder().extractNumericValueFromBitArray(Zo.HEADER_SIZE,4);return i.append(l),this.encodeCompressedGtinWithoutAI(i,Zo.HEADER_SIZE+4,a),this.getGeneralDecoder().decodeAllCodes(i,Zo.HEADER_SIZE+44)}}Zo.HEADER_SIZE=4;class vu extends hf{constructor(i){super(i)}parseInformation(){let i=new fe;return this.getGeneralDecoder().decodeAllCodes(i,vu.HEADER_SIZE)}}vu.HEADER_SIZE=5;class Eu extends Wn{constructor(i){super(i)}encodeCompressedWeight(i,a,l){let u=this.getGeneralDecoder().extractNumericValueFromBitArray(a,l);this.addWeightCode(i,u);let d=this.checkWeight(u),f=1e5;for(let m=0;m<5;++m)d/f===0&&i.append("0"),f/=10;i.append(d)}}class di extends Eu{constructor(i){super(i)}parseInformation(){if(this.getInformation().getSize()!=di.HEADER_SIZE+Eu.GTIN_SIZE+di.WEIGHT_SIZE)throw new $;let i=new fe;return this.encodeCompressedGtin(i,di.HEADER_SIZE),this.encodeCompressedWeight(i,di.HEADER_SIZE+Eu.GTIN_SIZE,di.WEIGHT_SIZE),i.toString()}}di.HEADER_SIZE=5,di.WEIGHT_SIZE=15;class g_ extends di{constructor(i){super(i)}addWeightCode(i,a){i.append("(3103)")}checkWeight(i){return i}}class m_ extends di{constructor(i){super(i)}addWeightCode(i,a){a<1e4?i.append("(3202)"):i.append("(3203)")}checkWeight(i){return i<1e4?i:i-1e4}}class hi extends Wn{constructor(i){super(i)}parseInformation(){if(this.getInformation().getSize()<hi.HEADER_SIZE+Wn.GTIN_SIZE)throw new $;let i=new fe;this.encodeCompressedGtin(i,hi.HEADER_SIZE);let a=this.getGeneralDecoder().extractNumericValueFromBitArray(hi.HEADER_SIZE+Wn.GTIN_SIZE,hi.LAST_DIGIT_SIZE);i.append("(392"),i.append(a),i.append(")");let l=this.getGeneralDecoder().decodeGeneralPurposeField(hi.HEADER_SIZE+Wn.GTIN_SIZE+hi.LAST_DIGIT_SIZE,null);return i.append(l.getNewString()),i.toString()}}hi.HEADER_SIZE=8,hi.LAST_DIGIT_SIZE=2;class On extends Wn{constructor(i){super(i)}parseInformation(){if(this.getInformation().getSize()<On.HEADER_SIZE+Wn.GTIN_SIZE)throw new $;let i=new fe;this.encodeCompressedGtin(i,On.HEADER_SIZE);let a=this.getGeneralDecoder().extractNumericValueFromBitArray(On.HEADER_SIZE+Wn.GTIN_SIZE,On.LAST_DIGIT_SIZE);i.append("(393"),i.append(a),i.append(")");let l=this.getGeneralDecoder().extractNumericValueFromBitArray(On.HEADER_SIZE+Wn.GTIN_SIZE+On.LAST_DIGIT_SIZE,On.FIRST_THREE_DIGITS_SIZE);l/100==0&&i.append("0"),l/10==0&&i.append("0"),i.append(l);let u=this.getGeneralDecoder().decodeGeneralPurposeField(On.HEADER_SIZE+Wn.GTIN_SIZE+On.LAST_DIGIT_SIZE+On.FIRST_THREE_DIGITS_SIZE,null);return i.append(u.getNewString()),i.toString()}}On.HEADER_SIZE=8,On.LAST_DIGIT_SIZE=2,On.FIRST_THREE_DIGITS_SIZE=10;class Tt extends Eu{constructor(i,a,l){super(i),this.dateCode=l,this.firstAIdigits=a}parseInformation(){if(this.getInformation().getSize()!=Tt.HEADER_SIZE+Tt.GTIN_SIZE+Tt.WEIGHT_SIZE+Tt.DATE_SIZE)throw new $;let i=new fe;return this.encodeCompressedGtin(i,Tt.HEADER_SIZE),this.encodeCompressedWeight(i,Tt.HEADER_SIZE+Tt.GTIN_SIZE,Tt.WEIGHT_SIZE),this.encodeCompressedDate(i,Tt.HEADER_SIZE+Tt.GTIN_SIZE+Tt.WEIGHT_SIZE),i.toString()}encodeCompressedDate(i,a){let l=this.getGeneralDecoder().extractNumericValueFromBitArray(a,Tt.DATE_SIZE);if(l==38400)return;i.append("("),i.append(this.dateCode),i.append(")");let u=l%32;l/=32;let d=l%12+1;l/=12;let f=l;f/10==0&&i.append("0"),i.append(f),d/10==0&&i.append("0"),i.append(d),u/10==0&&i.append("0"),i.append(u)}addWeightCode(i,a){i.append("("),i.append(this.firstAIdigits),i.append(a/1e5),i.append(")")}checkWeight(i){return i%1e5}}Tt.HEADER_SIZE=8,Tt.WEIGHT_SIZE=20,Tt.DATE_SIZE=16;function Am(N){try{if(N.get(1))return new Zo(N);if(!N.get(2))return new vu(N);switch(qo.extractNumericValueFromBitArray(N,1,4)){case 4:return new g_(N);case 5:return new m_(N)}switch(qo.extractNumericValueFromBitArray(N,1,5)){case 12:return new hi(N);case 13:return new On(N)}switch(qo.extractNumericValueFromBitArray(N,1,7)){case 56:return new Tt(N,"310","11");case 57:return new Tt(N,"320","11");case 58:return new Tt(N,"310","13");case 59:return new Tt(N,"320","13");case 60:return new Tt(N,"310","15");case 61:return new Tt(N,"320","15");case 62:return new Tt(N,"310","17");case 63:return new Tt(N,"320","17")}}catch(i){throw console.log(i),new zn("unknown decoder: "+N)}}class ns{constructor(i,a,l,u){this.leftchar=i,this.rightchar=a,this.finderpattern=l,this.maybeLast=u}mayBeLast(){return this.maybeLast}getLeftChar(){return this.leftchar}getRightChar(){return this.rightchar}getFinderPattern(){return this.finderpattern}mustBeLast(){return this.rightchar==null}toString(){return"[ "+this.leftchar+", "+this.rightchar+" : "+(this.finderpattern==null?"null":this.finderpattern.getValue())+" ]"}static equals(i,a){return i instanceof ns?ns.equalsOrNull(i.leftchar,a.leftchar)&&ns.equalsOrNull(i.rightchar,a.rightchar)&&ns.equalsOrNull(i.finderpattern,a.finderpattern):!1}static equalsOrNull(i,a){return i===null?a===null:ns.equals(i,a)}hashCode(){return this.leftchar.getValue()^this.rightchar.getValue()^this.finderpattern.getValue()}}class ff{constructor(i,a,l){this.pairs=i,this.rowNumber=a,this.wasReversed=l}getPairs(){return this.pairs}getRowNumber(){return this.rowNumber}isReversed(){return this.wasReversed}isEquivalent(i){return this.checkEqualitity(this,i)}toString(){return"{ "+this.pairs+" }"}equals(i,a){return i instanceof ff?this.checkEqualitity(i,a)&&i.wasReversed===a.wasReversed:!1}checkEqualitity(i,a){if(!i||!a)return;let l;return i.forEach((u,d)=>{a.forEach(f=>{u.getLeftChar().getValue()===f.getLeftChar().getValue()&&u.getRightChar().getValue()===f.getRightChar().getValue()&&u.getFinderPatter().getValue()===f.getFinderPatter().getValue()&&(l=!0)})}),l}}class ee extends Ue{constructor(i){super(...arguments),this.pairs=new Array(ee.MAX_PAIRS),this.rows=new Array,this.startEnd=[2],this.verbose=i===!0}decodeRow(i,a,l){this.pairs.length=0,this.startFromEven=!1;try{return ee.constructResult(this.decodeRow2pairs(i,a))}catch(u){this.verbose&&console.log(u)}return this.pairs.length=0,this.startFromEven=!0,ee.constructResult(this.decodeRow2pairs(i,a))}reset(){this.pairs.length=0,this.rows.length=0}decodeRow2pairs(i,a){let l=!1;for(;!l;)try{this.pairs.push(this.retrieveNextPair(a,this.pairs,i))}catch(d){if(d instanceof $){if(!this.pairs.length)throw new $;l=!0}}if(this.checkChecksum())return this.pairs;let u;if(this.rows.length?u=!0:u=!1,this.storeRow(i,!1),u){let d=this.checkRowsBoolean(!1);if(d!=null||(d=this.checkRowsBoolean(!0),d!=null))return d}throw new $}checkRowsBoolean(i){if(this.rows.length>25)return this.rows.length=0,null;this.pairs.length=0,i&&(this.rows=this.rows.reverse());let a=null;try{a=this.checkRows(new Array,0)}catch(l){this.verbose&&console.log(l)}return i&&(this.rows=this.rows.reverse()),a}checkRows(i,a){for(let l=a;l<this.rows.length;l++){let u=this.rows[l];this.pairs.length=0;for(let f of i)this.pairs.push(f.getPairs());if(this.pairs.push(u.getPairs()),!ee.isValidSequence(this.pairs))continue;if(this.checkChecksum())return this.pairs;let d=new Array(i);d.push(u);try{return this.checkRows(d,l+1)}catch(f){this.verbose&&console.log(f)}}throw new $}static isValidSequence(i){for(let a of ee.FINDER_PATTERN_SEQUENCES){if(i.length>a.length)continue;let l=!0;for(let u=0;u<i.length;u++)if(i[u].getFinderPattern().getValue()!=a[u]){l=!1;break}if(l)return!0}return!1}storeRow(i,a){let l=0,u=!1,d=!1;for(;l<this.rows.length;){let f=this.rows[l];if(f.getRowNumber()>i){d=f.isEquivalent(this.pairs);break}u=f.isEquivalent(this.pairs),l++}d||u||ee.isPartialRow(this.pairs,this.rows)||(this.rows.push(l,new ff(this.pairs,i,a)),this.removePartialRows(this.pairs,this.rows))}removePartialRows(i,a){for(let l of a)if(l.getPairs().length!==i.length){for(let u of l.getPairs())for(let d of i)if(ns.equals(u,d))break}}static isPartialRow(i,a){for(let l of a){let u=!0;for(let d of i){let f=!1;for(let m of l.getPairs())if(d.equals(m)){f=!0;break}if(!f){u=!1;break}}if(u)return!0}return!1}getRows(){return this.rows}static constructResult(i){let a=Di.buildBitArray(i),u=Am(a).parseInformation(),d=i[0].getFinderPattern().getResultPoints(),f=i[i.length-1].getFinderPattern().getResultPoints(),m=[d[0],d[1],f[0],f[1]];return new Re(u,null,null,m,me.RSS_EXPANDED,null)}checkChecksum(){let i=this.pairs.get(0),a=i.getLeftChar(),l=i.getRightChar();if(l==null)return!1;let u=l.getChecksumPortion(),d=2;for(let m=1;m<this.pairs.size();++m){let w=this.pairs.get(m);u+=w.getLeftChar().getChecksumPortion(),d++;let v=w.getRightChar();v!=null&&(u+=v.getChecksumPortion(),d++)}return u%=211,211*(d-4)+u==a.getValue()}static getNextSecondBar(i,a){let l;return i.get(a)?(l=i.getNextUnset(a),l=i.getNextSet(l)):(l=i.getNextSet(a),l=i.getNextUnset(l)),l}retrieveNextPair(i,a,l){let u=a.length%2==0;this.startFromEven&&(u=!u);let d,f=!0,m=-1;do this.findNextPair(i,a,m),d=this.parseFoundFinderPattern(i,l,u),d==null?m=ee.getNextSecondBar(i,this.startEnd[0]):f=!1;while(f);let w=this.decodeDataCharacter(i,d,u,!0);if(!this.isEmptyPair(a)&&a[a.length-1].mustBeLast())throw new $;let v;try{v=this.decodeDataCharacter(i,d,u,!1)}catch(C){v=null,this.verbose&&console.log(C)}return new ns(w,v,d,!0)}isEmptyPair(i){return i.length===0}findNextPair(i,a,l){let u=this.getDecodeFinderCounters();u[0]=0,u[1]=0,u[2]=0,u[3]=0;let d=i.getSize(),f;l>=0?f=l:this.isEmptyPair(a)?f=0:f=a[a.length-1].getFinderPattern().getStartEnd()[1];let m=a.length%2!=0;this.startFromEven&&(m=!m);let w=!1;for(;f<d&&(w=!i.get(f),!!w);)f++;let v=0,C=f;for(let O=f;O<d;O++)if(i.get(O)!=w)u[v]++;else{if(v==3){if(m&&ee.reverseCounters(u),ee.isFinderPattern(u)){this.startEnd[0]=C,this.startEnd[1]=O;return}m&&ee.reverseCounters(u),C+=u[0]+u[1],u[0]=u[2],u[1]=u[3],u[2]=0,u[3]=0,v--}else v++;u[v]=1,w=!w}throw new $}static reverseCounters(i){let a=i.length;for(let l=0;l<a/2;++l){let u=i[l];i[l]=i[a-l-1],i[a-l-1]=u}}parseFoundFinderPattern(i,a,l){let u,d,f;if(l){let v=this.startEnd[0]-1;for(;v>=0&&!i.get(v);)v--;v++,u=this.startEnd[0]-v,d=v,f=this.startEnd[1]}else d=this.startEnd[0],f=i.getNextUnset(this.startEnd[1]+1),u=f-this.startEnd[1];let m=this.getDecodeFinderCounters();S.arraycopy(m,0,m,1,m.length-1),m[0]=u;let w;try{w=this.parseFinderValue(m,ee.FINDER_PATTERNS)}catch{return null}return new bn(w,[d,f],d,f,a)}decodeDataCharacter(i,a,l,u){let d=this.getDataCharacterCounters();for(let ht=0;ht<d.length;ht++)d[ht]=0;if(u)ee.recordPatternInReverse(i,a.getStartEnd()[0],d);else{ee.recordPattern(i,a.getStartEnd()[1],d);for(let ht=0,gn=d.length-1;ht<gn;ht++,gn--){let rr=d[ht];d[ht]=d[gn],d[gn]=rr}}let f=17,m=He.sum(new Int32Array(d))/f,w=(a.getStartEnd()[1]-a.getStartEnd()[0])/15;if(Math.abs(m-w)/w>.3)throw new $;let v=this.getOddCounts(),C=this.getEvenCounts(),O=this.getOddRoundingErrors(),k=this.getEvenRoundingErrors();for(let ht=0;ht<d.length;ht++){let gn=1*d[ht]/m,rr=gn+.5;if(rr<1){if(gn<.3)throw new $;rr=1}else if(rr>8){if(gn>8.7)throw new $;rr=8}let na=ht/2;ht&1?(C[na]=rr,k[na]=gn-rr):(v[na]=rr,O[na]=gn-rr)}this.adjustOddEvenCounts(f);let L=4*a.getValue()+(l?0:2)+(u?0:1)-1,V=0,z=0;for(let ht=v.length-1;ht>=0;ht--){if(ee.isNotA1left(a,l,u)){let gn=ee.WEIGHTS[L][2*ht];z+=v[ht]*gn}V+=v[ht]}let G=0;for(let ht=C.length-1;ht>=0;ht--)if(ee.isNotA1left(a,l,u)){let gn=ee.WEIGHTS[L][2*ht+1];G+=C[ht]*gn}let K=z+G;if(V&1||V>13||V<4)throw new $;let oe=(13-V)/2,ae=ee.SYMBOL_WIDEST[oe],re=9-ae,Xe=qt.getRSSvalue(v,ae,!0),je=qt.getRSSvalue(C,re,!1),Gn=ee.EVEN_TOTAL_SUBSET[oe],jr=ee.GSUM[oe],Yn=Xe*Gn+je+jr;return new an(Yn,K)}static isNotA1left(i,a,l){return!(i.getValue()==0&&a&&l)}adjustOddEvenCounts(i){let a=He.sum(new Int32Array(this.getOddCounts())),l=He.sum(new Int32Array(this.getEvenCounts())),u=!1,d=!1;a>13?d=!0:a<4&&(u=!0);let f=!1,m=!1;l>13?m=!0:l<4&&(f=!0);let w=a+l-i,v=(a&1)==1,C=(l&1)==0;if(w==1)if(v){if(C)throw new $;d=!0}else{if(!C)throw new $;m=!0}else if(w==-1)if(v){if(C)throw new $;u=!0}else{if(!C)throw new $;f=!0}else if(w==0){if(v){if(!C)throw new $;a<l?(u=!0,m=!0):(d=!0,f=!0)}else if(C)throw new $}else throw new $;if(u){if(d)throw new $;ee.increment(this.getOddCounts(),this.getOddRoundingErrors())}if(d&&ee.decrement(this.getOddCounts(),this.getOddRoundingErrors()),f){if(m)throw new $;ee.increment(this.getEvenCounts(),this.getOddRoundingErrors())}m&&ee.decrement(this.getEvenCounts(),this.getEvenRoundingErrors())}}ee.SYMBOL_WIDEST=[7,5,4,3,1],ee.EVEN_TOTAL_SUBSET=[4,20,52,104,204],ee.GSUM=[0,348,1388,2948,3988],ee.FINDER_PATTERNS=[Int32Array.from([1,8,4,1]),Int32Array.from([3,6,4,1]),Int32Array.from([3,4,6,1]),Int32Array.from([3,2,8,1]),Int32Array.from([2,6,5,1]),Int32Array.from([2,2,9,1])],ee.WEIGHTS=[[1,3,9,27,81,32,96,77],[20,60,180,118,143,7,21,63],[189,145,13,39,117,140,209,205],[193,157,49,147,19,57,171,91],[62,186,136,197,169,85,44,132],[185,133,188,142,4,12,36,108],[113,128,173,97,80,29,87,50],[150,28,84,41,123,158,52,156],[46,138,203,187,139,206,196,166],[76,17,51,153,37,111,122,155],[43,129,176,106,107,110,119,146],[16,48,144,10,30,90,59,177],[109,116,137,200,178,112,125,164],[70,210,208,202,184,130,179,115],[134,191,151,31,93,68,204,190],[148,22,66,198,172,94,71,2],[6,18,54,162,64,192,154,40],[120,149,25,75,14,42,126,167],[79,26,78,23,69,207,199,175],[103,98,83,38,114,131,182,124],[161,61,183,127,170,88,53,159],[55,165,73,8,24,72,5,15],[45,135,194,160,58,174,100,89]],ee.FINDER_PAT_A=0,ee.FINDER_PAT_B=1,ee.FINDER_PAT_C=2,ee.FINDER_PAT_D=3,ee.FINDER_PAT_E=4,ee.FINDER_PAT_F=5,ee.FINDER_PATTERN_SEQUENCES=[[ee.FINDER_PAT_A,ee.FINDER_PAT_A],[ee.FINDER_PAT_A,ee.FINDER_PAT_B,ee.FINDER_PAT_B],[ee.FINDER_PAT_A,ee.FINDER_PAT_C,ee.FINDER_PAT_B,ee.FINDER_PAT_D],[ee.FINDER_PAT_A,ee.FINDER_PAT_E,ee.FINDER_PAT_B,ee.FINDER_PAT_D,ee.FINDER_PAT_C],[ee.FINDER_PAT_A,ee.FINDER_PAT_E,ee.FINDER_PAT_B,ee.FINDER_PAT_D,ee.FINDER_PAT_D,ee.FINDER_PAT_F],[ee.FINDER_PAT_A,ee.FINDER_PAT_E,ee.FINDER_PAT_B,ee.FINDER_PAT_D,ee.FINDER_PAT_E,ee.FINDER_PAT_F,ee.FINDER_PAT_F],[ee.FINDER_PAT_A,ee.FINDER_PAT_A,ee.FINDER_PAT_B,ee.FINDER_PAT_B,ee.FINDER_PAT_C,ee.FINDER_PAT_C,ee.FINDER_PAT_D,ee.FINDER_PAT_D],[ee.FINDER_PAT_A,ee.FINDER_PAT_A,ee.FINDER_PAT_B,ee.FINDER_PAT_B,ee.FINDER_PAT_C,ee.FINDER_PAT_C,ee.FINDER_PAT_D,ee.FINDER_PAT_E,ee.FINDER_PAT_E],[ee.FINDER_PAT_A,ee.FINDER_PAT_A,ee.FINDER_PAT_B,ee.FINDER_PAT_B,ee.FINDER_PAT_C,ee.FINDER_PAT_C,ee.FINDER_PAT_D,ee.FINDER_PAT_E,ee.FINDER_PAT_F,ee.FINDER_PAT_F],[ee.FINDER_PAT_A,ee.FINDER_PAT_A,ee.FINDER_PAT_B,ee.FINDER_PAT_B,ee.FINDER_PAT_C,ee.FINDER_PAT_D,ee.FINDER_PAT_D,ee.FINDER_PAT_E,ee.FINDER_PAT_E,ee.FINDER_PAT_F,ee.FINDER_PAT_F]],ee.MAX_PAIRS=11;class y_ extends an{constructor(i,a,l){super(i,a),this.count=0,this.finderPattern=l}getFinderPattern(){return this.finderPattern}getCount(){return this.count}incrementCount(){this.count++}}class Bt extends Ue{constructor(){super(...arguments),this.possibleLeftPairs=[],this.possibleRightPairs=[]}decodeRow(i,a,l){const u=this.decodePair(a,!1,i,l);Bt.addOrTally(this.possibleLeftPairs,u),a.reverse();let d=this.decodePair(a,!0,i,l);Bt.addOrTally(this.possibleRightPairs,d),a.reverse();for(let f of this.possibleLeftPairs)if(f.getCount()>1){for(let m of this.possibleRightPairs)if(m.getCount()>1&&Bt.checkChecksum(f,m))return Bt.constructResult(f,m)}throw new $}static addOrTally(i,a){if(a==null)return;let l=!1;for(let u of i)if(u.getValue()===a.getValue()){u.incrementCount(),l=!0;break}l||i.push(a)}reset(){this.possibleLeftPairs.length=0,this.possibleRightPairs.length=0}static constructResult(i,a){let l=4537077*i.getValue()+a.getValue(),u=new String(l).toString(),d=new fe;for(let v=13-u.length;v>0;v--)d.append("0");d.append(u);let f=0;for(let v=0;v<13;v++){let C=d.charAt(v).charCodeAt(0)-48;f+=v&1?C:3*C}f=10-f%10,f===10&&(f=0),d.append(f.toString());let m=i.getFinderPattern().getResultPoints(),w=a.getFinderPattern().getResultPoints();return new Re(d.toString(),null,0,[m[0],m[1],w[0],w[1]],me.RSS_14,new Date().getTime())}static checkChecksum(i,a){let l=(i.getChecksumPortion()+16*a.getChecksumPortion())%79,u=9*i.getFinderPattern().getValue()+a.getFinderPattern().getValue();return u>72&&u--,u>8&&u--,l===u}decodePair(i,a,l,u){try{let d=this.findFinderPattern(i,a),f=this.parseFoundFinderPattern(i,l,a,d),m=u==null?null:u.get(j.NEED_RESULT_POINT_CALLBACK);if(m!=null){let C=(d[0]+d[1])/2;a&&(C=i.getSize()-1-C),m.foundPossibleResultPoint(new ye(C,l))}let w=this.decodeDataCharacter(i,f,!0),v=this.decodeDataCharacter(i,f,!1);return new y_(1597*w.getValue()+v.getValue(),w.getChecksumPortion()+4*v.getChecksumPortion(),f)}catch{return null}}decodeDataCharacter(i,a,l){let u=this.getDataCharacterCounters();for(let G=0;G<u.length;G++)u[G]=0;if(l)At.recordPatternInReverse(i,a.getStartEnd()[0],u);else{At.recordPattern(i,a.getStartEnd()[1]+1,u);for(let G=0,K=u.length-1;G<K;G++,K--){let oe=u[G];u[G]=u[K],u[K]=oe}}let d=l?16:15,f=He.sum(new Int32Array(u))/d,m=this.getOddCounts(),w=this.getEvenCounts(),v=this.getOddRoundingErrors(),C=this.getEvenRoundingErrors();for(let G=0;G<u.length;G++){let K=u[G]/f,oe=Math.floor(K+.5);oe<1?oe=1:oe>8&&(oe=8);let ae=Math.floor(G/2);G&1?(w[ae]=oe,C[ae]=K-oe):(m[ae]=oe,v[ae]=K-oe)}this.adjustOddEvenCounts(l,d);let O=0,k=0;for(let G=m.length-1;G>=0;G--)k*=9,k+=m[G],O+=m[G];let L=0,V=0;for(let G=w.length-1;G>=0;G--)L*=9,L+=w[G],V+=w[G];let z=k+3*L;if(l){if(O&1||O>12||O<4)throw new $;let G=(12-O)/2,K=Bt.OUTSIDE_ODD_WIDEST[G],oe=9-K,ae=qt.getRSSvalue(m,K,!1),re=qt.getRSSvalue(w,oe,!0),Xe=Bt.OUTSIDE_EVEN_TOTAL_SUBSET[G],je=Bt.OUTSIDE_GSUM[G];return new an(ae*Xe+re+je,z)}else{if(V&1||V>10||V<4)throw new $;let G=(10-V)/2,K=Bt.INSIDE_ODD_WIDEST[G],oe=9-K,ae=qt.getRSSvalue(m,K,!0),re=qt.getRSSvalue(w,oe,!1),Xe=Bt.INSIDE_ODD_TOTAL_SUBSET[G],je=Bt.INSIDE_GSUM[G];return new an(re*Xe+ae+je,z)}}findFinderPattern(i,a){let l=this.getDecodeFinderCounters();l[0]=0,l[1]=0,l[2]=0,l[3]=0;let u=i.getSize(),d=!1,f=0;for(;f<u&&(d=!i.get(f),a!==d);)f++;let m=0,w=f;for(let v=f;v<u;v++)if(i.get(v)!==d)l[m]++;else{if(m===3){if(Ue.isFinderPattern(l))return[w,v];w+=l[0]+l[1],l[0]=l[2],l[1]=l[3],l[2]=0,l[3]=0,m--}else m++;l[m]=1,d=!d}throw new $}parseFoundFinderPattern(i,a,l,u){let d=i.get(u[0]),f=u[0]-1;for(;f>=0&&d!==i.get(f);)f--;f++;const m=u[0]-f,w=this.getDecodeFinderCounters(),v=new Int32Array(w.length);S.arraycopy(w,0,v,1,w.length-1),v[0]=m;const C=this.parseFinderValue(v,Bt.FINDER_PATTERNS);let O=f,k=u[1];return l&&(O=i.getSize()-1-O,k=i.getSize()-1-k),new bn(C,[f,u[1]],O,k,a)}adjustOddEvenCounts(i,a){let l=He.sum(new Int32Array(this.getOddCounts())),u=He.sum(new Int32Array(this.getEvenCounts())),d=!1,f=!1,m=!1,w=!1;i?(l>12?f=!0:l<4&&(d=!0),u>12?w=!0:u<4&&(m=!0)):(l>11?f=!0:l<5&&(d=!0),u>10?w=!0:u<4&&(m=!0));let v=l+u-a,C=(l&1)===(i?1:0),O=(u&1)===1;if(v===1)if(C){if(O)throw new $;f=!0}else{if(!O)throw new $;w=!0}else if(v===-1)if(C){if(O)throw new $;d=!0}else{if(!O)throw new $;m=!0}else if(v===0){if(C){if(!O)throw new $;l<u?(d=!0,w=!0):(f=!0,m=!0)}else if(O)throw new $}else throw new $;if(d){if(f)throw new $;Ue.increment(this.getOddCounts(),this.getOddRoundingErrors())}if(f&&Ue.decrement(this.getOddCounts(),this.getOddRoundingErrors()),m){if(w)throw new $;Ue.increment(this.getEvenCounts(),this.getOddRoundingErrors())}w&&Ue.decrement(this.getEvenCounts(),this.getEvenRoundingErrors())}}Bt.OUTSIDE_EVEN_TOTAL_SUBSET=[1,10,34,70,126],Bt.INSIDE_ODD_TOTAL_SUBSET=[4,20,48,81],Bt.OUTSIDE_GSUM=[0,161,961,2015,2715],Bt.INSIDE_GSUM=[0,336,1036,1516],Bt.OUTSIDE_ODD_WIDEST=[8,6,4,3,1],Bt.INSIDE_ODD_WIDEST=[2,4,6,8],Bt.FINDER_PATTERNS=[Int32Array.from([3,8,2,1]),Int32Array.from([3,5,5,1]),Int32Array.from([3,3,7,1]),Int32Array.from([3,1,9,1]),Int32Array.from([2,7,4,1]),Int32Array.from([2,5,6,1]),Int32Array.from([2,3,8,1]),Int32Array.from([1,5,7,1]),Int32Array.from([1,3,9,1])];class Qo extends At{constructor(i,a){super(),this.readers=[],this.verbose=a===!0;const l=i?i.get(j.POSSIBLE_FORMATS):null,u=i&&i.get(j.ASSUME_CODE_39_CHECK_DIGIT)!==void 0;l?((l.includes(me.EAN_13)||l.includes(me.UPC_A)||l.includes(me.EAN_8)||l.includes(me.UPC_E))&&this.readers.push(new rt(i)),l.includes(me.CODE_39)&&this.readers.push(new Lt(u)),l.includes(me.CODE_128)&&this.readers.push(new ce),l.includes(me.ITF)&&this.readers.push(new Ze),l.includes(me.RSS_14)&&this.readers.push(new Bt),l.includes(me.RSS_EXPANDED)&&this.readers.push(new ee(this.verbose))):(this.readers.push(new rt(i)),this.readers.push(new Lt),this.readers.push(new rt(i)),this.readers.push(new ce),this.readers.push(new Ze),this.readers.push(new Bt),this.readers.push(new ee(this.verbose)))}decodeRow(i,a,l){for(let u=0;u<this.readers.length;u++)try{return this.readers[u].decodeRow(i,a,l)}catch{}throw new $}reset(){this.readers.forEach(i=>i.reset())}}class w_ extends Pe{constructor(i=500,a){super(new Qo(a),i,a)}}class at{constructor(i,a,l){this.ecCodewords=i,this.ecBlocks=[a],l&&this.ecBlocks.push(l)}getECCodewords(){return this.ecCodewords}getECBlocks(){return this.ecBlocks}}class ot{constructor(i,a){this.count=i,this.dataCodewords=a}getCount(){return this.count}getDataCodewords(){return this.dataCodewords}}class Ke{constructor(i,a,l,u,d,f){this.versionNumber=i,this.symbolSizeRows=a,this.symbolSizeColumns=l,this.dataRegionSizeRows=u,this.dataRegionSizeColumns=d,this.ecBlocks=f;let m=0;const w=f.getECCodewords(),v=f.getECBlocks();for(let C of v)m+=C.getCount()*(C.getDataCodewords()+w);this.totalCodewords=m}getVersionNumber(){return this.versionNumber}getSymbolSizeRows(){return this.symbolSizeRows}getSymbolSizeColumns(){return this.symbolSizeColumns}getDataRegionSizeRows(){return this.dataRegionSizeRows}getDataRegionSizeColumns(){return this.dataRegionSizeColumns}getTotalCodewords(){return this.totalCodewords}getECBlocks(){return this.ecBlocks}static getVersionForDimensions(i,a){if(i&1||a&1)throw new B;for(let l of Ke.VERSIONS)if(l.symbolSizeRows===i&&l.symbolSizeColumns===a)return l;throw new B}toString(){return""+this.versionNumber}static buildVersions(){return[new Ke(1,10,10,8,8,new at(5,new ot(1,3))),new Ke(2,12,12,10,10,new at(7,new ot(1,5))),new Ke(3,14,14,12,12,new at(10,new ot(1,8))),new Ke(4,16,16,14,14,new at(12,new ot(1,12))),new Ke(5,18,18,16,16,new at(14,new ot(1,18))),new Ke(6,20,20,18,18,new at(18,new ot(1,22))),new Ke(7,22,22,20,20,new at(20,new ot(1,30))),new Ke(8,24,24,22,22,new at(24,new ot(1,36))),new Ke(9,26,26,24,24,new at(28,new ot(1,44))),new Ke(10,32,32,14,14,new at(36,new ot(1,62))),new Ke(11,36,36,16,16,new at(42,new ot(1,86))),new Ke(12,40,40,18,18,new at(48,new ot(1,114))),new Ke(13,44,44,20,20,new at(56,new ot(1,144))),new Ke(14,48,48,22,22,new at(68,new ot(1,174))),new Ke(15,52,52,24,24,new at(42,new ot(2,102))),new Ke(16,64,64,14,14,new at(56,new ot(2,140))),new Ke(17,72,72,16,16,new at(36,new ot(4,92))),new Ke(18,80,80,18,18,new at(48,new ot(4,114))),new Ke(19,88,88,20,20,new at(56,new ot(4,144))),new Ke(20,96,96,22,22,new at(68,new ot(4,174))),new Ke(21,104,104,24,24,new at(56,new ot(6,136))),new Ke(22,120,120,18,18,new at(68,new ot(6,175))),new Ke(23,132,132,20,20,new at(62,new ot(8,163))),new Ke(24,144,144,22,22,new at(62,new ot(8,156),new ot(2,155))),new Ke(25,8,18,6,16,new at(7,new ot(1,5))),new Ke(26,8,32,6,14,new at(11,new ot(1,10))),new Ke(27,12,26,10,24,new at(14,new ot(1,16))),new Ke(28,12,36,10,16,new at(18,new ot(1,22))),new Ke(29,16,36,14,16,new at(24,new ot(1,32))),new Ke(30,16,48,14,22,new at(28,new ot(1,49)))]}}Ke.VERSIONS=Ke.buildVersions();class pf{constructor(i){const a=i.getHeight();if(a<8||a>144||a&1)throw new B;this.version=pf.readVersion(i),this.mappingBitMatrix=this.extractDataRegion(i),this.readMappingMatrix=new ie(this.mappingBitMatrix.getWidth(),this.mappingBitMatrix.getHeight())}getVersion(){return this.version}static readVersion(i){const a=i.getHeight(),l=i.getWidth();return Ke.getVersionForDimensions(a,l)}readCodewords(){const i=new Int8Array(this.version.getTotalCodewords());let a=0,l=4,u=0;const d=this.mappingBitMatrix.getHeight(),f=this.mappingBitMatrix.getWidth();let m=!1,w=!1,v=!1,C=!1;do if(l===d&&u===0&&!m)i[a++]=this.readCorner1(d,f)&255,l-=2,u+=2,m=!0;else if(l===d-2&&u===0&&f&3&&!w)i[a++]=this.readCorner2(d,f)&255,l-=2,u+=2,w=!0;else if(l===d+4&&u===2&&!(f&7)&&!v)i[a++]=this.readCorner3(d,f)&255,l-=2,u+=2,v=!0;else if(l===d-2&&u===0&&(f&7)===4&&!C)i[a++]=this.readCorner4(d,f)&255,l-=2,u+=2,C=!0;else{do l<d&&u>=0&&!this.readMappingMatrix.get(u,l)&&(i[a++]=this.readUtah(l,u,d,f)&255),l-=2,u+=2;while(l>=0&&u<f);l+=1,u+=3;do l>=0&&u<f&&!this.readMappingMatrix.get(u,l)&&(i[a++]=this.readUtah(l,u,d,f)&255),l+=2,u-=2;while(l<d&&u>=0);l+=3,u+=1}while(l<d||u<f);if(a!==this.version.getTotalCodewords())throw new B;return i}readModule(i,a,l,u){return i<0&&(i+=l,a+=4-(l+4&7)),a<0&&(a+=u,i+=4-(u+4&7)),this.readMappingMatrix.set(a,i),this.mappingBitMatrix.get(a,i)}readUtah(i,a,l,u){let d=0;return this.readModule(i-2,a-2,l,u)&&(d|=1),d<<=1,this.readModule(i-2,a-1,l,u)&&(d|=1),d<<=1,this.readModule(i-1,a-2,l,u)&&(d|=1),d<<=1,this.readModule(i-1,a-1,l,u)&&(d|=1),d<<=1,this.readModule(i-1,a,l,u)&&(d|=1),d<<=1,this.readModule(i,a-2,l,u)&&(d|=1),d<<=1,this.readModule(i,a-1,l,u)&&(d|=1),d<<=1,this.readModule(i,a,l,u)&&(d|=1),d}readCorner1(i,a){let l=0;return this.readModule(i-1,0,i,a)&&(l|=1),l<<=1,this.readModule(i-1,1,i,a)&&(l|=1),l<<=1,this.readModule(i-1,2,i,a)&&(l|=1),l<<=1,this.readModule(0,a-2,i,a)&&(l|=1),l<<=1,this.readModule(0,a-1,i,a)&&(l|=1),l<<=1,this.readModule(1,a-1,i,a)&&(l|=1),l<<=1,this.readModule(2,a-1,i,a)&&(l|=1),l<<=1,this.readModule(3,a-1,i,a)&&(l|=1),l}readCorner2(i,a){let l=0;return this.readModule(i-3,0,i,a)&&(l|=1),l<<=1,this.readModule(i-2,0,i,a)&&(l|=1),l<<=1,this.readModule(i-1,0,i,a)&&(l|=1),l<<=1,this.readModule(0,a-4,i,a)&&(l|=1),l<<=1,this.readModule(0,a-3,i,a)&&(l|=1),l<<=1,this.readModule(0,a-2,i,a)&&(l|=1),l<<=1,this.readModule(0,a-1,i,a)&&(l|=1),l<<=1,this.readModule(1,a-1,i,a)&&(l|=1),l}readCorner3(i,a){let l=0;return this.readModule(i-1,0,i,a)&&(l|=1),l<<=1,this.readModule(i-1,a-1,i,a)&&(l|=1),l<<=1,this.readModule(0,a-3,i,a)&&(l|=1),l<<=1,this.readModule(0,a-2,i,a)&&(l|=1),l<<=1,this.readModule(0,a-1,i,a)&&(l|=1),l<<=1,this.readModule(1,a-3,i,a)&&(l|=1),l<<=1,this.readModule(1,a-2,i,a)&&(l|=1),l<<=1,this.readModule(1,a-1,i,a)&&(l|=1),l}readCorner4(i,a){let l=0;return this.readModule(i-3,0,i,a)&&(l|=1),l<<=1,this.readModule(i-2,0,i,a)&&(l|=1),l<<=1,this.readModule(i-1,0,i,a)&&(l|=1),l<<=1,this.readModule(0,a-2,i,a)&&(l|=1),l<<=1,this.readModule(0,a-1,i,a)&&(l|=1),l<<=1,this.readModule(1,a-1,i,a)&&(l|=1),l<<=1,this.readModule(2,a-1,i,a)&&(l|=1),l<<=1,this.readModule(3,a-1,i,a)&&(l|=1),l}extractDataRegion(i){const a=this.version.getSymbolSizeRows(),l=this.version.getSymbolSizeColumns();if(i.getHeight()!==a)throw new x("Dimension of bitMatrix must match the version size");const u=this.version.getDataRegionSizeRows(),d=this.version.getDataRegionSizeColumns(),f=a/u|0,m=l/d|0,w=f*u,v=m*d,C=new ie(v,w);for(let O=0;O<f;++O){const k=O*u;for(let L=0;L<m;++L){const V=L*d;for(let z=0;z<u;++z){const G=O*(u+2)+1+z,K=k+z;for(let oe=0;oe<d;++oe){const ae=L*(d+2)+1+oe;if(i.get(ae,G)){const re=V+oe;C.set(re,K)}}}}}return C}}class gf{constructor(i,a){this.numDataCodewords=i,this.codewords=a}static getDataBlocks(i,a){const l=a.getECBlocks();let u=0;const d=l.getECBlocks();for(let z of d)u+=z.getCount();const f=new Array(u);let m=0;for(let z of d)for(let G=0;G<z.getCount();G++){const K=z.getDataCodewords(),oe=l.getECCodewords()+K;f[m++]=new gf(K,new Uint8Array(oe))}const v=f[0].codewords.length-l.getECCodewords(),C=v-1;let O=0;for(let z=0;z<C;z++)for(let G=0;G<m;G++)f[G].codewords[z]=i[O++];const k=a.getVersionNumber()===24,L=k?8:m;for(let z=0;z<L;z++)f[z].codewords[v-1]=i[O++];const V=f[0].codewords.length;for(let z=v;z<V;z++)for(let G=0;G<m;G++){const K=k?(G+8)%m:G,oe=k&&K>7?z-1:z;f[K].codewords[oe]=i[O++]}if(O!==i.length)throw new x;return f}getNumDataCodewords(){return this.numDataCodewords}getCodewords(){return this.codewords}}class mf{constructor(i){this.bytes=i,this.byteOffset=0,this.bitOffset=0}getBitOffset(){return this.bitOffset}getByteOffset(){return this.byteOffset}readBits(i){if(i<1||i>32||i>this.available())throw new x(""+i);let a=0,l=this.bitOffset,u=this.byteOffset;const d=this.bytes;if(l>0){const f=8-l,m=i<f?i:f,w=f-m,v=255>>8-m<<w;a=(d[u]&v)>>w,i-=m,l+=m,l===8&&(l=0,u++)}if(i>0){for(;i>=8;)a=a<<8|d[u]&255,u++,i-=8;if(i>0){const f=8-i,m=255>>f<<f;a=a<<i|(d[u]&m)>>f,l+=i}}return this.bitOffset=l,this.byteOffset=u,a}available(){return 8*(this.bytes.length-this.byteOffset)-this.bitOffset}}var Qt;(function(N){N[N.PAD_ENCODE=0]="PAD_ENCODE",N[N.ASCII_ENCODE=1]="ASCII_ENCODE",N[N.C40_ENCODE=2]="C40_ENCODE",N[N.TEXT_ENCODE=3]="TEXT_ENCODE",N[N.ANSIX12_ENCODE=4]="ANSIX12_ENCODE",N[N.EDIFACT_ENCODE=5]="EDIFACT_ENCODE",N[N.BASE256_ENCODE=6]="BASE256_ENCODE"})(Qt||(Qt={}));class rs{static decode(i){const a=new mf(i),l=new fe,u=new fe,d=new Array;let f=Qt.ASCII_ENCODE;do if(f===Qt.ASCII_ENCODE)f=this.decodeAsciiSegment(a,l,u);else{switch(f){case Qt.C40_ENCODE:this.decodeC40Segment(a,l);break;case Qt.TEXT_ENCODE:this.decodeTextSegment(a,l);break;case Qt.ANSIX12_ENCODE:this.decodeAnsiX12Segment(a,l);break;case Qt.EDIFACT_ENCODE:this.decodeEdifactSegment(a,l);break;case Qt.BASE256_ENCODE:this.decodeBase256Segment(a,l,d);break;default:throw new B}f=Qt.ASCII_ENCODE}while(f!==Qt.PAD_ENCODE&&a.available()>0);return u.length()>0&&l.append(u.toString()),new Vn(i,l.toString(),d.length===0?null:d,null)}static decodeAsciiSegment(i,a,l){let u=!1;do{let d=i.readBits(8);if(d===0)throw new B;if(d<=128)return u&&(d+=128),a.append(String.fromCharCode(d-1)),Qt.ASCII_ENCODE;if(d===129)return Qt.PAD_ENCODE;if(d<=229){const f=d-130;f<10&&a.append("0"),a.append(""+f)}else switch(d){case 230:return Qt.C40_ENCODE;case 231:return Qt.BASE256_ENCODE;case 232:a.append("");break;case 233:case 234:break;case 235:u=!0;break;case 236:a.append("[)>05"),l.insert(0,"");break;case 237:a.append("[)>06"),l.insert(0,"");break;case 238:return Qt.ANSIX12_ENCODE;case 239:return Qt.TEXT_ENCODE;case 240:return Qt.EDIFACT_ENCODE;case 241:break;default:if(d!==254||i.available()!==0)throw new B;break}}while(i.available()>0);return Qt.ASCII_ENCODE}static decodeC40Segment(i,a){let l=!1;const u=[];let d=0;do{if(i.available()===8)return;const f=i.readBits(8);if(f===254)return;this.parseTwoBytes(f,i.readBits(8),u);for(let m=0;m<3;m++){const w=u[m];switch(d){case 0:if(w<3)d=w+1;else if(w<this.C40_BASIC_SET_CHARS.length){const v=this.C40_BASIC_SET_CHARS[w];l?(a.append(String.fromCharCode(v.charCodeAt(0)+128)),l=!1):a.append(v)}else throw new B;break;case 1:l?(a.append(String.fromCharCode(w+128)),l=!1):a.append(String.fromCharCode(w)),d=0;break;case 2:if(w<this.C40_SHIFT2_SET_CHARS.length){const v=this.C40_SHIFT2_SET_CHARS[w];l?(a.append(String.fromCharCode(v.charCodeAt(0)+128)),l=!1):a.append(v)}else switch(w){case 27:a.append("");break;case 30:l=!0;break;default:throw new B}d=0;break;case 3:l?(a.append(String.fromCharCode(w+224)),l=!1):a.append(String.fromCharCode(w+96)),d=0;break;default:throw new B}}}while(i.available()>0)}static decodeTextSegment(i,a){let l=!1,u=[],d=0;do{if(i.available()===8)return;const f=i.readBits(8);if(f===254)return;this.parseTwoBytes(f,i.readBits(8),u);for(let m=0;m<3;m++){const w=u[m];switch(d){case 0:if(w<3)d=w+1;else if(w<this.TEXT_BASIC_SET_CHARS.length){const v=this.TEXT_BASIC_SET_CHARS[w];l?(a.append(String.fromCharCode(v.charCodeAt(0)+128)),l=!1):a.append(v)}else throw new B;break;case 1:l?(a.append(String.fromCharCode(w+128)),l=!1):a.append(String.fromCharCode(w)),d=0;break;case 2:if(w<this.TEXT_SHIFT2_SET_CHARS.length){const v=this.TEXT_SHIFT2_SET_CHARS[w];l?(a.append(String.fromCharCode(v.charCodeAt(0)+128)),l=!1):a.append(v)}else switch(w){case 27:a.append("");break;case 30:l=!0;break;default:throw new B}d=0;break;case 3:if(w<this.TEXT_SHIFT3_SET_CHARS.length){const v=this.TEXT_SHIFT3_SET_CHARS[w];l?(a.append(String.fromCharCode(v.charCodeAt(0)+128)),l=!1):a.append(v),d=0}else throw new B;break;default:throw new B}}}while(i.available()>0)}static decodeAnsiX12Segment(i,a){const l=[];do{if(i.available()===8)return;const u=i.readBits(8);if(u===254)return;this.parseTwoBytes(u,i.readBits(8),l);for(let d=0;d<3;d++){const f=l[d];switch(f){case 0:a.append("\r");break;case 1:a.append("*");break;case 2:a.append(">");break;case 3:a.append(" ");break;default:if(f<14)a.append(String.fromCharCode(f+44));else if(f<40)a.append(String.fromCharCode(f+51));else throw new B;break}}}while(i.available()>0)}static parseTwoBytes(i,a,l){let u=(i<<8)+a-1,d=Math.floor(u/1600);l[0]=d,u-=d*1600,d=Math.floor(u/40),l[1]=d,l[2]=u-d*40}static decodeEdifactSegment(i,a){do{if(i.available()<=16)return;for(let l=0;l<4;l++){let u=i.readBits(6);if(u===31){const d=8-i.getBitOffset();d!==8&&i.readBits(d);return}u&32||(u|=64),a.append(String.fromCharCode(u))}}while(i.available()>0)}static decodeBase256Segment(i,a,l){let u=1+i.getByteOffset();const d=this.unrandomize255State(i.readBits(8),u++);let f;if(d===0?f=i.available()/8|0:d<250?f=d:f=250*(d-249)+this.unrandomize255State(i.readBits(8),u++),f<0)throw new B;const m=new Uint8Array(f);for(let w=0;w<f;w++){if(i.available()<8)throw new B;m[w]=this.unrandomize255State(i.readBits(8),u++)}l.push(m);try{a.append(he.decode(m,Q.ISO88591))}catch(w){throw new zn("Platform does not support required encoding: "+w.message)}}static unrandomize255State(i,a){const l=149*a%255+1,u=i-l;return u>=0?u:u+256}}rs.C40_BASIC_SET_CHARS=["*","*","*"," ","0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"],rs.C40_SHIFT2_SET_CHARS=["!",'"',"#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","@","[","\\","]","^","_"],rs.TEXT_BASIC_SET_CHARS=["*","*","*"," ","0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z"],rs.TEXT_SHIFT2_SET_CHARS=rs.C40_SHIFT2_SET_CHARS,rs.TEXT_SHIFT3_SET_CHARS=["`","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","{","|","}","~",""];class x_{constructor(){this.rsDecoder=new li(ze.DATA_MATRIX_FIELD_256)}decode(i){const a=new pf(i),l=a.getVersion(),u=a.readCodewords(),d=gf.getDataBlocks(u,l);let f=0;for(let v of d)f+=v.getNumDataCodewords();const m=new Uint8Array(f),w=d.length;for(let v=0;v<w;v++){const C=d[v],O=C.getCodewords(),k=C.getNumDataCodewords();this.correctErrors(O,k);for(let L=0;L<k;L++)m[L*w+v]=O[L]}return rs.decode(m)}correctErrors(i,a){const l=new Int32Array(i);try{this.rsDecoder.decode(l,i.length-a)}catch{throw new b}for(let u=0;u<a;u++)i[u]=l[u]}}class $t{constructor(i){this.image=i,this.rectangleDetector=new Lr(this.image)}detect(){const i=this.rectangleDetector.detect();let a=this.detectSolid1(i);if(a=this.detectSolid2(a),a[3]=this.correctTopRight(a),!a[3])throw new $;a=this.shiftToModuleCenter(a);const l=a[0],u=a[1],d=a[2],f=a[3];let m=this.transitionsBetween(l,f)+1,w=this.transitionsBetween(d,f)+1;(m&1)===1&&(m+=1),(w&1)===1&&(w+=1),4*m<7*w&&4*w<7*m&&(m=w=Math.max(m,w));let v=$t.sampleGrid(this.image,l,u,d,f,m,w);return new io(v,[l,u,d,f])}static shiftPoint(i,a,l){let u=(a.getX()-i.getX())/(l+1),d=(a.getY()-i.getY())/(l+1);return new ye(i.getX()+u,i.getY()+d)}static moveAway(i,a,l){let u=i.getX(),d=i.getY();return u<a?u-=1:u+=1,d<l?d-=1:d+=1,new ye(u,d)}detectSolid1(i){let a=i[0],l=i[1],u=i[3],d=i[2],f=this.transitionsBetween(a,l),m=this.transitionsBetween(l,u),w=this.transitionsBetween(u,d),v=this.transitionsBetween(d,a),C=f,O=[d,a,l,u];return C>m&&(C=m,O[0]=a,O[1]=l,O[2]=u,O[3]=d),C>w&&(C=w,O[0]=l,O[1]=u,O[2]=d,O[3]=a),C>v&&(O[0]=u,O[1]=d,O[2]=a,O[3]=l),O}detectSolid2(i){let a=i[0],l=i[1],u=i[2],d=i[3],f=this.transitionsBetween(a,d),m=$t.shiftPoint(l,u,(f+1)*4),w=$t.shiftPoint(u,l,(f+1)*4),v=this.transitionsBetween(m,a),C=this.transitionsBetween(w,d);return v<C?(i[0]=a,i[1]=l,i[2]=u,i[3]=d):(i[0]=l,i[1]=u,i[2]=d,i[3]=a),i}correctTopRight(i){let a=i[0],l=i[1],u=i[2],d=i[3],f=this.transitionsBetween(a,d),m=this.transitionsBetween(l,d),w=$t.shiftPoint(a,l,(m+1)*4),v=$t.shiftPoint(u,l,(f+1)*4);f=this.transitionsBetween(w,d),m=this.transitionsBetween(v,d);let C=new ye(d.getX()+(u.getX()-l.getX())/(f+1),d.getY()+(u.getY()-l.getY())/(f+1)),O=new ye(d.getX()+(a.getX()-l.getX())/(m+1),d.getY()+(a.getY()-l.getY())/(m+1));if(!this.isValid(C))return this.isValid(O)?O:null;if(!this.isValid(O))return C;let k=this.transitionsBetween(w,C)+this.transitionsBetween(v,C),L=this.transitionsBetween(w,O)+this.transitionsBetween(v,O);return k>L?C:O}shiftToModuleCenter(i){let a=i[0],l=i[1],u=i[2],d=i[3],f=this.transitionsBetween(a,d)+1,m=this.transitionsBetween(u,d)+1,w=$t.shiftPoint(a,l,m*4),v=$t.shiftPoint(u,l,f*4);f=this.transitionsBetween(w,d)+1,m=this.transitionsBetween(v,d)+1,(f&1)===1&&(f+=1),(m&1)===1&&(m+=1);let C=(a.getX()+l.getX()+u.getX()+d.getX())/4,O=(a.getY()+l.getY()+u.getY()+d.getY())/4;a=$t.moveAway(a,C,O),l=$t.moveAway(l,C,O),u=$t.moveAway(u,C,O),d=$t.moveAway(d,C,O);let k,L;return w=$t.shiftPoint(a,l,m*4),w=$t.shiftPoint(w,d,f*4),k=$t.shiftPoint(l,a,m*4),k=$t.shiftPoint(k,u,f*4),v=$t.shiftPoint(u,d,m*4),v=$t.shiftPoint(v,l,f*4),L=$t.shiftPoint(d,u,m*4),L=$t.shiftPoint(L,a,f*4),[w,k,v,L]}isValid(i){return i.getX()>=0&&i.getX()<this.image.getWidth()&&i.getY()>0&&i.getY()<this.image.getHeight()}static sampleGrid(i,a,l,u,d,f,m){return ui.getInstance().sampleGrid(i,f,m,.5,.5,f-.5,.5,f-.5,m-.5,.5,m-.5,a.getX(),a.getY(),d.getX(),d.getY(),u.getX(),u.getY(),l.getX(),l.getY())}transitionsBetween(i,a){let l=Math.trunc(i.getX()),u=Math.trunc(i.getY()),d=Math.trunc(a.getX()),f=Math.trunc(a.getY()),m=Math.abs(f-u)>Math.abs(d-l);if(m){let z=l;l=u,u=z,z=d,d=f,f=z}let w=Math.abs(d-l),v=Math.abs(f-u),C=-w/2,O=u<f?1:-1,k=l<d?1:-1,L=0,V=this.image.get(m?u:l,m?l:u);for(let z=l,G=u;z!==d;z+=k){let K=this.image.get(m?G:z,m?z:G);if(K!==V&&(L++,V=K),C+=v,C>0){if(G===f)break;G+=O,C-=w}}return L}}class is{constructor(){this.decoder=new x_}decode(i,a=null){let l,u;if(a!=null&&a.has(j.PURE_BARCODE)){const v=is.extractPureBits(i.getBlackMatrix());l=this.decoder.decode(v),u=is.NO_POINTS}else{const v=new $t(i.getBlackMatrix()).detect();l=this.decoder.decode(v.getBits()),u=v.getPoints()}const d=l.getRawBytes(),f=new Re(l.getText(),d,8*d.length,u,me.DATA_MATRIX,S.currentTimeMillis()),m=l.getByteSegments();m!=null&&f.putMetadata(yt.BYTE_SEGMENTS,m);const w=l.getECLevel();return w!=null&&f.putMetadata(yt.ERROR_CORRECTION_LEVEL,w),f}reset(){}static extractPureBits(i){const a=i.getTopLeftOnBit(),l=i.getBottomRightOnBit();if(a==null||l==null)throw new $;const u=this.moduleSize(a,i);let d=a[1];const f=l[1];let m=a[0];const v=(l[0]-m+1)/u,C=(f-d+1)/u;if(v<=0||C<=0)throw new $;const O=u/2;d+=O,m+=O;const k=new ie(v,C);for(let L=0;L<C;L++){const V=d+L*u;for(let z=0;z<v;z++)i.get(m+z*u,V)&&k.set(z,L)}return k}static moduleSize(i,a){const l=a.getWidth();let u=i[0];const d=i[1];for(;u<l&&a.get(u,d);)u++;if(u===l)throw new $;const f=u-i[0];if(f===0)throw new $;return f}}is.NO_POINTS=[];class v_ extends Pe{constructor(i=500){super(new is,i)}}var Jo;(function(N){N[N.L=0]="L",N[N.M=1]="M",N[N.Q=2]="Q",N[N.H=3]="H"})(Jo||(Jo={}));class pt{constructor(i,a,l){this.value=i,this.stringValue=a,this.bits=l,pt.FOR_BITS.set(l,this),pt.FOR_VALUE.set(i,this)}getValue(){return this.value}getBits(){return this.bits}static fromString(i){switch(i){case"L":return pt.L;case"M":return pt.M;case"Q":return pt.Q;case"H":return pt.H;default:throw new y(i+"not available")}}toString(){return this.stringValue}equals(i){if(!(i instanceof pt))return!1;const a=i;return this.value===a.value}static forBits(i){if(i<0||i>=pt.FOR_BITS.size)throw new x;return pt.FOR_BITS.get(i)}}pt.FOR_BITS=new Map,pt.FOR_VALUE=new Map,pt.L=new pt(Jo.L,"L",1),pt.M=new pt(Jo.M,"M",0),pt.Q=new pt(Jo.Q,"Q",3),pt.H=new pt(Jo.H,"H",2);class Cn{constructor(i){this.errorCorrectionLevel=pt.forBits(i>>3&3),this.dataMask=i&7}static numBitsDiffering(i,a){return T.bitCount(i^a)}static decodeFormatInformation(i,a){const l=Cn.doDecodeFormatInformation(i,a);return l!==null?l:Cn.doDecodeFormatInformation(i^Cn.FORMAT_INFO_MASK_QR,a^Cn.FORMAT_INFO_MASK_QR)}static doDecodeFormatInformation(i,a){let l=Number.MAX_SAFE_INTEGER,u=0;for(const d of Cn.FORMAT_INFO_DECODE_LOOKUP){const f=d[0];if(f===i||f===a)return new Cn(d[1]);let m=Cn.numBitsDiffering(i,f);m<l&&(u=d[1],l=m),i!==a&&(m=Cn.numBitsDiffering(a,f),m<l&&(u=d[1],l=m))}return l<=3?new Cn(u):null}getErrorCorrectionLevel(){return this.errorCorrectionLevel}getDataMask(){return this.dataMask}hashCode(){return this.errorCorrectionLevel.getBits()<<3|this.dataMask}equals(i){if(!(i instanceof Cn))return!1;const a=i;return this.errorCorrectionLevel===a.errorCorrectionLevel&&this.dataMask===a.dataMask}}Cn.FORMAT_INFO_MASK_QR=21522,Cn.FORMAT_INFO_DECODE_LOOKUP=[Int32Array.from([21522,0]),Int32Array.from([20773,1]),Int32Array.from([24188,2]),Int32Array.from([23371,3]),Int32Array.from([17913,4]),Int32Array.from([16590,5]),Int32Array.from([20375,6]),Int32Array.from([19104,7]),Int32Array.from([30660,8]),Int32Array.from([29427,9]),Int32Array.from([32170,10]),Int32Array.from([30877,11]),Int32Array.from([26159,12]),Int32Array.from([25368,13]),Int32Array.from([27713,14]),Int32Array.from([26998,15]),Int32Array.from([5769,16]),Int32Array.from([5054,17]),Int32Array.from([7399,18]),Int32Array.from([6608,19]),Int32Array.from([1890,20]),Int32Array.from([597,21]),Int32Array.from([3340,22]),Int32Array.from([2107,23]),Int32Array.from([13663,24]),Int32Array.from([12392,25]),Int32Array.from([16177,26]),Int32Array.from([14854,27]),Int32Array.from([9396,28]),Int32Array.from([8579,29]),Int32Array.from([11994,30]),Int32Array.from([11245,31])];class Y{constructor(i,...a){this.ecCodewordsPerBlock=i,this.ecBlocks=a}getECCodewordsPerBlock(){return this.ecCodewordsPerBlock}getNumBlocks(){let i=0;const a=this.ecBlocks;for(const l of a)i+=l.getCount();return i}getTotalECCodewords(){return this.ecCodewordsPerBlock*this.getNumBlocks()}getECBlocks(){return this.ecBlocks}}class P{constructor(i,a){this.count=i,this.dataCodewords=a}getCount(){return this.count}getDataCodewords(){return this.dataCodewords}}class _e{constructor(i,a,...l){this.versionNumber=i,this.alignmentPatternCenters=a,this.ecBlocks=l;let u=0;const d=l[0].getECCodewordsPerBlock(),f=l[0].getECBlocks();for(const m of f)u+=m.getCount()*(m.getDataCodewords()+d);this.totalCodewords=u}getVersionNumber(){return this.versionNumber}getAlignmentPatternCenters(){return this.alignmentPatternCenters}getTotalCodewords(){return this.totalCodewords}getDimensionForVersion(){return 17+4*this.versionNumber}getECBlocksForLevel(i){return this.ecBlocks[i.getValue()]}static getProvisionalVersionForDimension(i){if(i%4!==1)throw new B;try{return this.getVersionForNumber((i-17)/4)}catch{throw new B}}static getVersionForNumber(i){if(i<1||i>40)throw new x;return _e.VERSIONS[i-1]}static decodeVersionInformation(i){let a=Number.MAX_SAFE_INTEGER,l=0;for(let u=0;u<_e.VERSION_DECODE_INFO.length;u++){const d=_e.VERSION_DECODE_INFO[u];if(d===i)return _e.getVersionForNumber(u+7);const f=Cn.numBitsDiffering(i,d);f<a&&(l=u+7,a=f)}return a<=3?_e.getVersionForNumber(l):null}buildFunctionPattern(){const i=this.getDimensionForVersion(),a=new ie(i);a.setRegion(0,0,9,9),a.setRegion(i-8,0,8,9),a.setRegion(0,i-8,9,8);const l=this.alignmentPatternCenters.length;for(let u=0;u<l;u++){const d=this.alignmentPatternCenters[u]-2;for(let f=0;f<l;f++)u===0&&(f===0||f===l-1)||u===l-1&&f===0||a.setRegion(this.alignmentPatternCenters[f]-2,d,5,5)}return a.setRegion(6,9,1,i-17),a.setRegion(9,6,i-17,1),this.versionNumber>6&&(a.setRegion(i-11,0,3,6),a.setRegion(0,i-11,6,3)),a}toString(){return""+this.versionNumber}}_e.VERSION_DECODE_INFO=Int32Array.from([31892,34236,39577,42195,48118,51042,55367,58893,63784,68472,70749,76311,79154,84390,87683,92361,96236,102084,102881,110507,110734,117786,119615,126325,127568,133589,136944,141498,145311,150283,152622,158308,161089,167017]),_e.VERSIONS=[new _e(1,new Int32Array(0),new Y(7,new P(1,19)),new Y(10,new P(1,16)),new Y(13,new P(1,13)),new Y(17,new P(1,9))),new _e(2,Int32Array.from([6,18]),new Y(10,new P(1,34)),new Y(16,new P(1,28)),new Y(22,new P(1,22)),new Y(28,new P(1,16))),new _e(3,Int32Array.from([6,22]),new Y(15,new P(1,55)),new Y(26,new P(1,44)),new Y(18,new P(2,17)),new Y(22,new P(2,13))),new _e(4,Int32Array.from([6,26]),new Y(20,new P(1,80)),new Y(18,new P(2,32)),new Y(26,new P(2,24)),new Y(16,new P(4,9))),new _e(5,Int32Array.from([6,30]),new Y(26,new P(1,108)),new Y(24,new P(2,43)),new Y(18,new P(2,15),new P(2,16)),new Y(22,new P(2,11),new P(2,12))),new _e(6,Int32Array.from([6,34]),new Y(18,new P(2,68)),new Y(16,new P(4,27)),new Y(24,new P(4,19)),new Y(28,new P(4,15))),new _e(7,Int32Array.from([6,22,38]),new Y(20,new P(2,78)),new Y(18,new P(4,31)),new Y(18,new P(2,14),new P(4,15)),new Y(26,new P(4,13),new P(1,14))),new _e(8,Int32Array.from([6,24,42]),new Y(24,new P(2,97)),new Y(22,new P(2,38),new P(2,39)),new Y(22,new P(4,18),new P(2,19)),new Y(26,new P(4,14),new P(2,15))),new _e(9,Int32Array.from([6,26,46]),new Y(30,new P(2,116)),new Y(22,new P(3,36),new P(2,37)),new Y(20,new P(4,16),new P(4,17)),new Y(24,new P(4,12),new P(4,13))),new _e(10,Int32Array.from([6,28,50]),new Y(18,new P(2,68),new P(2,69)),new Y(26,new P(4,43),new P(1,44)),new Y(24,new P(6,19),new P(2,20)),new Y(28,new P(6,15),new P(2,16))),new _e(11,Int32Array.from([6,30,54]),new Y(20,new P(4,81)),new Y(30,new P(1,50),new P(4,51)),new Y(28,new P(4,22),new P(4,23)),new Y(24,new P(3,12),new P(8,13))),new _e(12,Int32Array.from([6,32,58]),new Y(24,new P(2,92),new P(2,93)),new Y(22,new P(6,36),new P(2,37)),new Y(26,new P(4,20),new P(6,21)),new Y(28,new P(7,14),new P(4,15))),new _e(13,Int32Array.from([6,34,62]),new Y(26,new P(4,107)),new Y(22,new P(8,37),new P(1,38)),new Y(24,new P(8,20),new P(4,21)),new Y(22,new P(12,11),new P(4,12))),new _e(14,Int32Array.from([6,26,46,66]),new Y(30,new P(3,115),new P(1,116)),new Y(24,new P(4,40),new P(5,41)),new Y(20,new P(11,16),new P(5,17)),new Y(24,new P(11,12),new P(5,13))),new _e(15,Int32Array.from([6,26,48,70]),new Y(22,new P(5,87),new P(1,88)),new Y(24,new P(5,41),new P(5,42)),new Y(30,new P(5,24),new P(7,25)),new Y(24,new P(11,12),new P(7,13))),new _e(16,Int32Array.from([6,26,50,74]),new Y(24,new P(5,98),new P(1,99)),new Y(28,new P(7,45),new P(3,46)),new Y(24,new P(15,19),new P(2,20)),new Y(30,new P(3,15),new P(13,16))),new _e(17,Int32Array.from([6,30,54,78]),new Y(28,new P(1,107),new P(5,108)),new Y(28,new P(10,46),new P(1,47)),new Y(28,new P(1,22),new P(15,23)),new Y(28,new P(2,14),new P(17,15))),new _e(18,Int32Array.from([6,30,56,82]),new Y(30,new P(5,120),new P(1,121)),new Y(26,new P(9,43),new P(4,44)),new Y(28,new P(17,22),new P(1,23)),new Y(28,new P(2,14),new P(19,15))),new _e(19,Int32Array.from([6,30,58,86]),new Y(28,new P(3,113),new P(4,114)),new Y(26,new P(3,44),new P(11,45)),new Y(26,new P(17,21),new P(4,22)),new Y(26,new P(9,13),new P(16,14))),new _e(20,Int32Array.from([6,34,62,90]),new Y(28,new P(3,107),new P(5,108)),new Y(26,new P(3,41),new P(13,42)),new Y(30,new P(15,24),new P(5,25)),new Y(28,new P(15,15),new P(10,16))),new _e(21,Int32Array.from([6,28,50,72,94]),new Y(28,new P(4,116),new P(4,117)),new Y(26,new P(17,42)),new Y(28,new P(17,22),new P(6,23)),new Y(30,new P(19,16),new P(6,17))),new _e(22,Int32Array.from([6,26,50,74,98]),new Y(28,new P(2,111),new P(7,112)),new Y(28,new P(17,46)),new Y(30,new P(7,24),new P(16,25)),new Y(24,new P(34,13))),new _e(23,Int32Array.from([6,30,54,78,102]),new Y(30,new P(4,121),new P(5,122)),new Y(28,new P(4,47),new P(14,48)),new Y(30,new P(11,24),new P(14,25)),new Y(30,new P(16,15),new P(14,16))),new _e(24,Int32Array.from([6,28,54,80,106]),new Y(30,new P(6,117),new P(4,118)),new Y(28,new P(6,45),new P(14,46)),new Y(30,new P(11,24),new P(16,25)),new Y(30,new P(30,16),new P(2,17))),new _e(25,Int32Array.from([6,32,58,84,110]),new Y(26,new P(8,106),new P(4,107)),new Y(28,new P(8,47),new P(13,48)),new Y(30,new P(7,24),new P(22,25)),new Y(30,new P(22,15),new P(13,16))),new _e(26,Int32Array.from([6,30,58,86,114]),new Y(28,new P(10,114),new P(2,115)),new Y(28,new P(19,46),new P(4,47)),new Y(28,new P(28,22),new P(6,23)),new Y(30,new P(33,16),new P(4,17))),new _e(27,Int32Array.from([6,34,62,90,118]),new Y(30,new P(8,122),new P(4,123)),new Y(28,new P(22,45),new P(3,46)),new Y(30,new P(8,23),new P(26,24)),new Y(30,new P(12,15),new P(28,16))),new _e(28,Int32Array.from([6,26,50,74,98,122]),new Y(30,new P(3,117),new P(10,118)),new Y(28,new P(3,45),new P(23,46)),new Y(30,new P(4,24),new P(31,25)),new Y(30,new P(11,15),new P(31,16))),new _e(29,Int32Array.from([6,30,54,78,102,126]),new Y(30,new P(7,116),new P(7,117)),new Y(28,new P(21,45),new P(7,46)),new Y(30,new P(1,23),new P(37,24)),new Y(30,new P(19,15),new P(26,16))),new _e(30,Int32Array.from([6,26,52,78,104,130]),new Y(30,new P(5,115),new P(10,116)),new Y(28,new P(19,47),new P(10,48)),new Y(30,new P(15,24),new P(25,25)),new Y(30,new P(23,15),new P(25,16))),new _e(31,Int32Array.from([6,30,56,82,108,134]),new Y(30,new P(13,115),new P(3,116)),new Y(28,new P(2,46),new P(29,47)),new Y(30,new P(42,24),new P(1,25)),new Y(30,new P(23,15),new P(28,16))),new _e(32,Int32Array.from([6,34,60,86,112,138]),new Y(30,new P(17,115)),new Y(28,new P(10,46),new P(23,47)),new Y(30,new P(10,24),new P(35,25)),new Y(30,new P(19,15),new P(35,16))),new _e(33,Int32Array.from([6,30,58,86,114,142]),new Y(30,new P(17,115),new P(1,116)),new Y(28,new P(14,46),new P(21,47)),new Y(30,new P(29,24),new P(19,25)),new Y(30,new P(11,15),new P(46,16))),new _e(34,Int32Array.from([6,34,62,90,118,146]),new Y(30,new P(13,115),new P(6,116)),new Y(28,new P(14,46),new P(23,47)),new Y(30,new P(44,24),new P(7,25)),new Y(30,new P(59,16),new P(1,17))),new _e(35,Int32Array.from([6,30,54,78,102,126,150]),new Y(30,new P(12,121),new P(7,122)),new Y(28,new P(12,47),new P(26,48)),new Y(30,new P(39,24),new P(14,25)),new Y(30,new P(22,15),new P(41,16))),new _e(36,Int32Array.from([6,24,50,76,102,128,154]),new Y(30,new P(6,121),new P(14,122)),new Y(28,new P(6,47),new P(34,48)),new Y(30,new P(46,24),new P(10,25)),new Y(30,new P(2,15),new P(64,16))),new _e(37,Int32Array.from([6,28,54,80,106,132,158]),new Y(30,new P(17,122),new P(4,123)),new Y(28,new P(29,46),new P(14,47)),new Y(30,new P(49,24),new P(10,25)),new Y(30,new P(24,15),new P(46,16))),new _e(38,Int32Array.from([6,32,58,84,110,136,162]),new Y(30,new P(4,122),new P(18,123)),new Y(28,new P(13,46),new P(32,47)),new Y(30,new P(48,24),new P(14,25)),new Y(30,new P(42,15),new P(32,16))),new _e(39,Int32Array.from([6,26,54,82,110,138,166]),new Y(30,new P(20,117),new P(4,118)),new Y(28,new P(40,47),new P(7,48)),new Y(30,new P(43,24),new P(22,25)),new Y(30,new P(10,15),new P(67,16))),new _e(40,Int32Array.from([6,30,58,86,114,142,170]),new Y(30,new P(19,118),new P(6,119)),new Y(28,new P(18,47),new P(31,48)),new Y(30,new P(34,24),new P(34,25)),new Y(30,new P(20,15),new P(61,16)))];var ln;(function(N){N[N.DATA_MASK_000=0]="DATA_MASK_000",N[N.DATA_MASK_001=1]="DATA_MASK_001",N[N.DATA_MASK_010=2]="DATA_MASK_010",N[N.DATA_MASK_011=3]="DATA_MASK_011",N[N.DATA_MASK_100=4]="DATA_MASK_100",N[N.DATA_MASK_101=5]="DATA_MASK_101",N[N.DATA_MASK_110=6]="DATA_MASK_110",N[N.DATA_MASK_111=7]="DATA_MASK_111"})(ln||(ln={}));class vr{constructor(i,a){this.value=i,this.isMasked=a}unmaskBitMatrix(i,a){for(let l=0;l<a;l++)for(let u=0;u<a;u++)this.isMasked(l,u)&&i.flip(u,l)}}vr.values=new Map([[ln.DATA_MASK_000,new vr(ln.DATA_MASK_000,(N,i)=>(N+i&1)===0)],[ln.DATA_MASK_001,new vr(ln.DATA_MASK_001,(N,i)=>(N&1)===0)],[ln.DATA_MASK_010,new vr(ln.DATA_MASK_010,(N,i)=>i%3===0)],[ln.DATA_MASK_011,new vr(ln.DATA_MASK_011,(N,i)=>(N+i)%3===0)],[ln.DATA_MASK_100,new vr(ln.DATA_MASK_100,(N,i)=>(Math.floor(N/2)+Math.floor(i/3)&1)===0)],[ln.DATA_MASK_101,new vr(ln.DATA_MASK_101,(N,i)=>N*i%6===0)],[ln.DATA_MASK_110,new vr(ln.DATA_MASK_110,(N,i)=>N*i%6<3)],[ln.DATA_MASK_111,new vr(ln.DATA_MASK_111,(N,i)=>(N+i+N*i%3&1)===0)]]);class E_{constructor(i){const a=i.getHeight();if(a<21||(a&3)!==1)throw new B;this.bitMatrix=i}readFormatInformation(){if(this.parsedFormatInfo!==null&&this.parsedFormatInfo!==void 0)return this.parsedFormatInfo;let i=0;for(let d=0;d<6;d++)i=this.copyBit(d,8,i);i=this.copyBit(7,8,i),i=this.copyBit(8,8,i),i=this.copyBit(8,7,i);for(let d=5;d>=0;d--)i=this.copyBit(8,d,i);const a=this.bitMatrix.getHeight();let l=0;const u=a-7;for(let d=a-1;d>=u;d--)l=this.copyBit(8,d,l);for(let d=a-8;d<a;d++)l=this.copyBit(d,8,l);if(this.parsedFormatInfo=Cn.decodeFormatInformation(i,l),this.parsedFormatInfo!==null)return this.parsedFormatInfo;throw new B}readVersion(){if(this.parsedVersion!==null&&this.parsedVersion!==void 0)return this.parsedVersion;const i=this.bitMatrix.getHeight(),a=Math.floor((i-17)/4);if(a<=6)return _e.getVersionForNumber(a);let l=0;const u=i-11;for(let f=5;f>=0;f--)for(let m=i-9;m>=u;m--)l=this.copyBit(m,f,l);let d=_e.decodeVersionInformation(l);if(d!==null&&d.getDimensionForVersion()===i)return this.parsedVersion=d,d;l=0;for(let f=5;f>=0;f--)for(let m=i-9;m>=u;m--)l=this.copyBit(f,m,l);if(d=_e.decodeVersionInformation(l),d!==null&&d.getDimensionForVersion()===i)return this.parsedVersion=d,d;throw new B}copyBit(i,a,l){return(this.isMirror?this.bitMatrix.get(a,i):this.bitMatrix.get(i,a))?l<<1|1:l<<1}readCodewords(){const i=this.readFormatInformation(),a=this.readVersion(),l=vr.values.get(i.getDataMask()),u=this.bitMatrix.getHeight();l.unmaskBitMatrix(this.bitMatrix,u);const d=a.buildFunctionPattern();let f=!0;const m=new Uint8Array(a.getTotalCodewords());let w=0,v=0,C=0;for(let O=u-1;O>0;O-=2){O===6&&O--;for(let k=0;k<u;k++){const L=f?u-1-k:k;for(let V=0;V<2;V++)d.get(O-V,L)||(C++,v<<=1,this.bitMatrix.get(O-V,L)&&(v|=1),C===8&&(m[w++]=v,C=0,v=0))}f=!f}if(w!==a.getTotalCodewords())throw new B;return m}remask(){if(this.parsedFormatInfo===null)return;const i=vr.values[this.parsedFormatInfo.getDataMask()],a=this.bitMatrix.getHeight();i.unmaskBitMatrix(this.bitMatrix,a)}setMirror(i){this.parsedVersion=null,this.parsedFormatInfo=null,this.isMirror=i}mirror(){const i=this.bitMatrix;for(let a=0,l=i.getWidth();a<l;a++)for(let u=a+1,d=i.getHeight();u<d;u++)i.get(a,u)!==i.get(u,a)&&(i.flip(u,a),i.flip(a,u))}}class yf{constructor(i,a){this.numDataCodewords=i,this.codewords=a}static getDataBlocks(i,a,l){if(i.length!==a.getTotalCodewords())throw new x;const u=a.getECBlocksForLevel(l);let d=0;const f=u.getECBlocks();for(const V of f)d+=V.getCount();const m=new Array(d);let w=0;for(const V of f)for(let z=0;z<V.getCount();z++){const G=V.getDataCodewords(),K=u.getECCodewordsPerBlock()+G;m[w++]=new yf(G,new Uint8Array(K))}const v=m[0].codewords.length;let C=m.length-1;for(;C>=0&&m[C].codewords.length!==v;)C--;C++;const O=v-u.getECCodewordsPerBlock();let k=0;for(let V=0;V<O;V++)for(let z=0;z<w;z++)m[z].codewords[V]=i[k++];for(let V=C;V<w;V++)m[V].codewords[O]=i[k++];const L=m[0].codewords.length;for(let V=O;V<L;V++)for(let z=0;z<w;z++){const G=z<C?V:V+1;m[z].codewords[G]=i[k++]}return m}getNumDataCodewords(){return this.numDataCodewords}getCodewords(){return this.codewords}}var Er;(function(N){N[N.TERMINATOR=0]="TERMINATOR",N[N.NUMERIC=1]="NUMERIC",N[N.ALPHANUMERIC=2]="ALPHANUMERIC",N[N.STRUCTURED_APPEND=3]="STRUCTURED_APPEND",N[N.BYTE=4]="BYTE",N[N.ECI=5]="ECI",N[N.KANJI=6]="KANJI",N[N.FNC1_FIRST_POSITION=7]="FNC1_FIRST_POSITION",N[N.FNC1_SECOND_POSITION=8]="FNC1_SECOND_POSITION",N[N.HANZI=9]="HANZI"})(Er||(Er={}));class Ie{constructor(i,a,l,u){this.value=i,this.stringValue=a,this.characterCountBitsForVersions=l,this.bits=u,Ie.FOR_BITS.set(u,this),Ie.FOR_VALUE.set(i,this)}static forBits(i){const a=Ie.FOR_BITS.get(i);if(a===void 0)throw new x;return a}getCharacterCountBits(i){const a=i.getVersionNumber();let l;return a<=9?l=0:a<=26?l=1:l=2,this.characterCountBitsForVersions[l]}getValue(){return this.value}getBits(){return this.bits}equals(i){if(!(i instanceof Ie))return!1;const a=i;return this.value===a.value}toString(){return this.stringValue}}Ie.FOR_BITS=new Map,Ie.FOR_VALUE=new Map,Ie.TERMINATOR=new Ie(Er.TERMINATOR,"TERMINATOR",Int32Array.from([0,0,0]),0),Ie.NUMERIC=new Ie(Er.NUMERIC,"NUMERIC",Int32Array.from([10,12,14]),1),Ie.ALPHANUMERIC=new Ie(Er.ALPHANUMERIC,"ALPHANUMERIC",Int32Array.from([9,11,13]),2),Ie.STRUCTURED_APPEND=new Ie(Er.STRUCTURED_APPEND,"STRUCTURED_APPEND",Int32Array.from([0,0,0]),3),Ie.BYTE=new Ie(Er.BYTE,"BYTE",Int32Array.from([8,16,16]),4),Ie.ECI=new Ie(Er.ECI,"ECI",Int32Array.from([0,0,0]),7),Ie.KANJI=new Ie(Er.KANJI,"KANJI",Int32Array.from([8,10,12]),8),Ie.FNC1_FIRST_POSITION=new Ie(Er.FNC1_FIRST_POSITION,"FNC1_FIRST_POSITION",Int32Array.from([0,0,0]),5),Ie.FNC1_SECOND_POSITION=new Ie(Er.FNC1_SECOND_POSITION,"FNC1_SECOND_POSITION",Int32Array.from([0,0,0]),9),Ie.HANZI=new Ie(Er.HANZI,"HANZI",Int32Array.from([8,10,12]),13);class Nt{static decode(i,a,l,u){const d=new mf(i);let f=new fe;const m=new Array;let w=-1,v=-1;try{let C=null,O=!1,k;do{if(d.available()<4)k=Ie.TERMINATOR;else{const L=d.readBits(4);k=Ie.forBits(L)}switch(k){case Ie.TERMINATOR:break;case Ie.FNC1_FIRST_POSITION:case Ie.FNC1_SECOND_POSITION:O=!0;break;case Ie.STRUCTURED_APPEND:if(d.available()<16)throw new B;w=d.readBits(8),v=d.readBits(8);break;case Ie.ECI:const L=Nt.parseECIValue(d);if(C=H.getCharacterSetECIByValue(L),C===null)throw new B;break;case Ie.HANZI:const V=d.readBits(4),z=d.readBits(k.getCharacterCountBits(a));V===Nt.GB2312_SUBSET&&Nt.decodeHanziSegment(d,f,z);break;default:const G=d.readBits(k.getCharacterCountBits(a));switch(k){case Ie.NUMERIC:Nt.decodeNumericSegment(d,f,G);break;case Ie.ALPHANUMERIC:Nt.decodeAlphanumericSegment(d,f,G,O);break;case Ie.BYTE:Nt.decodeByteSegment(d,f,G,C,m,u);break;case Ie.KANJI:Nt.decodeKanjiSegment(d,f,G);break;default:throw new B}break}}while(k!==Ie.TERMINATOR)}catch{throw new B}return new Vn(i,f.toString(),m.length===0?null:m,l===null?null:l.toString(),w,v)}static decodeHanziSegment(i,a,l){if(l*13>i.available())throw new B;const u=new Uint8Array(2*l);let d=0;for(;l>0;){const f=i.readBits(13);let m=f/96<<8&4294967295|f%96;m<959?m+=41377:m+=42657,u[d]=m>>8&255,u[d+1]=m&255,d+=2,l--}try{a.append(he.decode(u,Q.GB2312))}catch(f){throw new B(f)}}static decodeKanjiSegment(i,a,l){if(l*13>i.available())throw new B;const u=new Uint8Array(2*l);let d=0;for(;l>0;){const f=i.readBits(13);let m=f/192<<8&4294967295|f%192;m<7936?m+=33088:m+=49472,u[d]=m>>8,u[d+1]=m,d+=2,l--}try{a.append(he.decode(u,Q.SHIFT_JIS))}catch(f){throw new B(f)}}static decodeByteSegment(i,a,l,u,d,f){if(8*l>i.available())throw new B;const m=new Uint8Array(l);for(let v=0;v<l;v++)m[v]=i.readBits(8);let w;u===null?w=Q.guessEncoding(m,f):w=u.getName();try{a.append(he.decode(m,w))}catch(v){throw new B(v)}d.push(m)}static toAlphaNumericChar(i){if(i>=Nt.ALPHANUMERIC_CHARS.length)throw new B;return Nt.ALPHANUMERIC_CHARS[i]}static decodeAlphanumericSegment(i,a,l,u){const d=a.length();for(;l>1;){if(i.available()<11)throw new B;const f=i.readBits(11);a.append(Nt.toAlphaNumericChar(Math.floor(f/45))),a.append(Nt.toAlphaNumericChar(f%45)),l-=2}if(l===1){if(i.available()<6)throw new B;a.append(Nt.toAlphaNumericChar(i.readBits(6)))}if(u)for(let f=d;f<a.length();f++)a.charAt(f)==="%"&&(f<a.length()-1&&a.charAt(f+1)==="%"?a.deleteCharAt(f+1):a.setCharAt(f,""))}static decodeNumericSegment(i,a,l){for(;l>=3;){if(i.available()<10)throw new B;const u=i.readBits(10);if(u>=1e3)throw new B;a.append(Nt.toAlphaNumericChar(Math.floor(u/100))),a.append(Nt.toAlphaNumericChar(Math.floor(u/10)%10)),a.append(Nt.toAlphaNumericChar(u%10)),l-=3}if(l===2){if(i.available()<7)throw new B;const u=i.readBits(7);if(u>=100)throw new B;a.append(Nt.toAlphaNumericChar(Math.floor(u/10))),a.append(Nt.toAlphaNumericChar(u%10))}else if(l===1){if(i.available()<4)throw new B;const u=i.readBits(4);if(u>=10)throw new B;a.append(Nt.toAlphaNumericChar(u))}}static parseECIValue(i){const a=i.readBits(8);if(!(a&128))return a&127;if((a&192)===128){const l=i.readBits(8);return(a&63)<<8&4294967295|l}if((a&224)===192){const l=i.readBits(16);return(a&31)<<16&4294967295|l}throw new B}}Nt.ALPHANUMERIC_CHARS="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ $%*+-./:",Nt.GB2312_SUBSET=1;class _m{constructor(i){this.mirrored=i}isMirrored(){return this.mirrored}applyMirroredCorrection(i){if(!this.mirrored||i===null||i.length<3)return;const a=i[0];i[0]=i[2],i[2]=a}}class b_{constructor(){this.rsDecoder=new li(ze.QR_CODE_FIELD_256)}decodeBooleanArray(i,a){return this.decodeBitMatrix(ie.parseFromBooleanArray(i),a)}decodeBitMatrix(i,a){const l=new E_(i);let u=null;try{return this.decodeBitMatrixParser(l,a)}catch(d){u=d}try{l.remask(),l.setMirror(!0),l.readVersion(),l.readFormatInformation(),l.mirror();const d=this.decodeBitMatrixParser(l,a);return d.setOther(new _m(!0)),d}catch(d){throw u!==null?u:d}}decodeBitMatrixParser(i,a){const l=i.readVersion(),u=i.readFormatInformation().getErrorCorrectionLevel(),d=i.readCodewords(),f=yf.getDataBlocks(d,l,u);let m=0;for(const C of f)m+=C.getNumDataCodewords();const w=new Uint8Array(m);let v=0;for(const C of f){const O=C.getCodewords(),k=C.getNumDataCodewords();this.correctErrors(O,k);for(let L=0;L<k;L++)w[v++]=O[L]}return Nt.decode(w,l,u,a)}correctErrors(i,a){const l=new Int32Array(i);try{this.rsDecoder.decode(l,i.length-a)}catch{throw new b}for(let u=0;u<a;u++)i[u]=l[u]}}class wf extends ye{constructor(i,a,l){super(i,a),this.estimatedModuleSize=l}aboutEquals(i,a,l){if(Math.abs(a-this.getY())<=i&&Math.abs(l-this.getX())<=i){const u=Math.abs(i-this.estimatedModuleSize);return u<=1||u<=this.estimatedModuleSize}return!1}combineEstimate(i,a,l){const u=(this.getX()+a)/2,d=(this.getY()+i)/2,f=(this.estimatedModuleSize+l)/2;return new wf(u,d,f)}}class bu{constructor(i,a,l,u,d,f,m){this.image=i,this.startX=a,this.startY=l,this.width=u,this.height=d,this.moduleSize=f,this.resultPointCallback=m,this.possibleCenters=[],this.crossCheckStateCount=new Int32Array(3)}find(){const i=this.startX,a=this.height,l=this.width,u=i+l,d=this.startY+a/2,f=new Int32Array(3),m=this.image;for(let w=0;w<a;w++){const v=d+(w&1?-Math.floor((w+1)/2):Math.floor((w+1)/2));f[0]=0,f[1]=0,f[2]=0;let C=i;for(;C<u&&!m.get(C,v);)C++;let O=0;for(;C<u;){if(m.get(C,v))if(O===1)f[1]++;else if(O===2){if(this.foundPatternCross(f)){const k=this.handlePossibleCenter(f,v,C);if(k!==null)return k}f[0]=f[2],f[1]=1,f[2]=0,O=1}else f[++O]++;else O===1&&O++,f[O]++;C++}if(this.foundPatternCross(f)){const k=this.handlePossibleCenter(f,v,u);if(k!==null)return k}}if(this.possibleCenters.length!==0)return this.possibleCenters[0];throw new $}static centerFromEnd(i,a){return a-i[2]-i[1]/2}foundPatternCross(i){const a=this.moduleSize,l=a/2;for(let u=0;u<3;u++)if(Math.abs(a-i[u])>=l)return!1;return!0}crossCheckVertical(i,a,l,u){const d=this.image,f=d.getHeight(),m=this.crossCheckStateCount;m[0]=0,m[1]=0,m[2]=0;let w=i;for(;w>=0&&d.get(a,w)&&m[1]<=l;)m[1]++,w--;if(w<0||m[1]>l)return NaN;for(;w>=0&&!d.get(a,w)&&m[0]<=l;)m[0]++,w--;if(m[0]>l)return NaN;for(w=i+1;w<f&&d.get(a,w)&&m[1]<=l;)m[1]++,w++;if(w===f||m[1]>l)return NaN;for(;w<f&&!d.get(a,w)&&m[2]<=l;)m[2]++,w++;if(m[2]>l)return NaN;const v=m[0]+m[1]+m[2];return 5*Math.abs(v-u)>=2*u?NaN:this.foundPatternCross(m)?bu.centerFromEnd(m,w):NaN}handlePossibleCenter(i,a,l){const u=i[0]+i[1]+i[2],d=bu.centerFromEnd(i,l),f=this.crossCheckVertical(a,d,2*i[1],u);if(!isNaN(f)){const m=(i[0]+i[1]+i[2])/3;for(const v of this.possibleCenters)if(v.aboutEquals(m,f,d))return v.combineEstimate(f,d,m);const w=new wf(d,f,m);this.possibleCenters.push(w),this.resultPointCallback!==null&&this.resultPointCallback!==void 0&&this.resultPointCallback.foundPossibleResultPoint(w)}return null}}class xf extends ye{constructor(i,a,l,u){super(i,a),this.estimatedModuleSize=l,this.count=u,u===void 0&&(this.count=1)}getEstimatedModuleSize(){return this.estimatedModuleSize}getCount(){return this.count}aboutEquals(i,a,l){if(Math.abs(a-this.getY())<=i&&Math.abs(l-this.getX())<=i){const u=Math.abs(i-this.estimatedModuleSize);return u<=1||u<=this.estimatedModuleSize}return!1}combineEstimate(i,a,l){const u=this.count+1,d=(this.count*this.getX()+a)/u,f=(this.count*this.getY()+i)/u,m=(this.count*this.estimatedModuleSize+l)/u;return new xf(d,f,m,u)}}class C_{constructor(i){this.bottomLeft=i[0],this.topLeft=i[1],this.topRight=i[2]}getBottomLeft(){return this.bottomLeft}getTopLeft(){return this.topLeft}getTopRight(){return this.topRight}}class cn{constructor(i,a){this.image=i,this.resultPointCallback=a,this.possibleCenters=[],this.crossCheckStateCount=new Int32Array(5),this.resultPointCallback=a}getImage(){return this.image}getPossibleCenters(){return this.possibleCenters}find(i){const a=i!=null&&i.get(j.TRY_HARDER)!==void 0,l=i!=null&&i.get(j.PURE_BARCODE)!==void 0,u=this.image,d=u.getHeight(),f=u.getWidth();let m=Math.floor(3*d/(4*cn.MAX_MODULES));(m<cn.MIN_SKIP||a)&&(m=cn.MIN_SKIP);let w=!1;const v=new Int32Array(5);for(let O=m-1;O<d&&!w;O+=m){v[0]=0,v[1]=0,v[2]=0,v[3]=0,v[4]=0;let k=0;for(let L=0;L<f;L++)if(u.get(L,O))(k&1)===1&&k++,v[k]++;else if(k&1)v[k]++;else if(k===4)if(cn.foundPatternCross(v)){if(this.handlePossibleCenter(v,O,L,l)===!0)if(m=2,this.hasSkipped===!0)w=this.haveMultiplyConfirmedCenters();else{const z=this.findRowSkip();z>v[2]&&(O+=z-v[2]-m,L=f-1)}else{v[0]=v[2],v[1]=v[3],v[2]=v[4],v[3]=1,v[4]=0,k=3;continue}k=0,v[0]=0,v[1]=0,v[2]=0,v[3]=0,v[4]=0}else v[0]=v[2],v[1]=v[3],v[2]=v[4],v[3]=1,v[4]=0,k=3;else v[++k]++;cn.foundPatternCross(v)&&this.handlePossibleCenter(v,O,f,l)===!0&&(m=v[0],this.hasSkipped&&(w=this.haveMultiplyConfirmedCenters()))}const C=this.selectBestPatterns();return ye.orderBestPatterns(C),new C_(C)}static centerFromEnd(i,a){return a-i[4]-i[3]-i[2]/2}static foundPatternCross(i){let a=0;for(let d=0;d<5;d++){const f=i[d];if(f===0)return!1;a+=f}if(a<7)return!1;const l=a/7,u=l/2;return Math.abs(l-i[0])<u&&Math.abs(l-i[1])<u&&Math.abs(3*l-i[2])<3*u&&Math.abs(l-i[3])<u&&Math.abs(l-i[4])<u}getCrossCheckStateCount(){const i=this.crossCheckStateCount;return i[0]=0,i[1]=0,i[2]=0,i[3]=0,i[4]=0,i}crossCheckDiagonal(i,a,l,u){const d=this.getCrossCheckStateCount();let f=0;const m=this.image;for(;i>=f&&a>=f&&m.get(a-f,i-f);)d[2]++,f++;if(i<f||a<f)return!1;for(;i>=f&&a>=f&&!m.get(a-f,i-f)&&d[1]<=l;)d[1]++,f++;if(i<f||a<f||d[1]>l)return!1;for(;i>=f&&a>=f&&m.get(a-f,i-f)&&d[0]<=l;)d[0]++,f++;if(d[0]>l)return!1;const w=m.getHeight(),v=m.getWidth();for(f=1;i+f<w&&a+f<v&&m.get(a+f,i+f);)d[2]++,f++;if(i+f>=w||a+f>=v)return!1;for(;i+f<w&&a+f<v&&!m.get(a+f,i+f)&&d[3]<l;)d[3]++,f++;if(i+f>=w||a+f>=v||d[3]>=l)return!1;for(;i+f<w&&a+f<v&&m.get(a+f,i+f)&&d[4]<l;)d[4]++,f++;if(d[4]>=l)return!1;const C=d[0]+d[1]+d[2]+d[3]+d[4];return Math.abs(C-u)<2*u&&cn.foundPatternCross(d)}crossCheckVertical(i,a,l,u){const d=this.image,f=d.getHeight(),m=this.getCrossCheckStateCount();let w=i;for(;w>=0&&d.get(a,w);)m[2]++,w--;if(w<0)return NaN;for(;w>=0&&!d.get(a,w)&&m[1]<=l;)m[1]++,w--;if(w<0||m[1]>l)return NaN;for(;w>=0&&d.get(a,w)&&m[0]<=l;)m[0]++,w--;if(m[0]>l)return NaN;for(w=i+1;w<f&&d.get(a,w);)m[2]++,w++;if(w===f)return NaN;for(;w<f&&!d.get(a,w)&&m[3]<l;)m[3]++,w++;if(w===f||m[3]>=l)return NaN;for(;w<f&&d.get(a,w)&&m[4]<l;)m[4]++,w++;if(m[4]>=l)return NaN;const v=m[0]+m[1]+m[2]+m[3]+m[4];return 5*Math.abs(v-u)>=2*u?NaN:cn.foundPatternCross(m)?cn.centerFromEnd(m,w):NaN}crossCheckHorizontal(i,a,l,u){const d=this.image,f=d.getWidth(),m=this.getCrossCheckStateCount();let w=i;for(;w>=0&&d.get(w,a);)m[2]++,w--;if(w<0)return NaN;for(;w>=0&&!d.get(w,a)&&m[1]<=l;)m[1]++,w--;if(w<0||m[1]>l)return NaN;for(;w>=0&&d.get(w,a)&&m[0]<=l;)m[0]++,w--;if(m[0]>l)return NaN;for(w=i+1;w<f&&d.get(w,a);)m[2]++,w++;if(w===f)return NaN;for(;w<f&&!d.get(w,a)&&m[3]<l;)m[3]++,w++;if(w===f||m[3]>=l)return NaN;for(;w<f&&d.get(w,a)&&m[4]<l;)m[4]++,w++;if(m[4]>=l)return NaN;const v=m[0]+m[1]+m[2]+m[3]+m[4];return 5*Math.abs(v-u)>=u?NaN:cn.foundPatternCross(m)?cn.centerFromEnd(m,w):NaN}handlePossibleCenter(i,a,l,u){const d=i[0]+i[1]+i[2]+i[3]+i[4];let f=cn.centerFromEnd(i,l),m=this.crossCheckVertical(a,Math.floor(f),i[2],d);if(!isNaN(m)&&(f=this.crossCheckHorizontal(Math.floor(f),Math.floor(m),i[2],d),!isNaN(f)&&(!u||this.crossCheckDiagonal(Math.floor(m),Math.floor(f),i[2],d)))){const w=d/7;let v=!1;const C=this.possibleCenters;for(let O=0,k=C.length;O<k;O++){const L=C[O];if(L.aboutEquals(w,m,f)){C[O]=L.combineEstimate(m,f,w),v=!0;break}}if(!v){const O=new xf(f,m,w);C.push(O),this.resultPointCallback!==null&&this.resultPointCallback!==void 0&&this.resultPointCallback.foundPossibleResultPoint(O)}return!0}return!1}findRowSkip(){if(this.possibleCenters.length<=1)return 0;let a=null;for(const l of this.possibleCenters)if(l.getCount()>=cn.CENTER_QUORUM)if(a==null)a=l;else return this.hasSkipped=!0,Math.floor((Math.abs(a.getX()-l.getX())-Math.abs(a.getY()-l.getY()))/2);return 0}haveMultiplyConfirmedCenters(){let i=0,a=0;const l=this.possibleCenters.length;for(const f of this.possibleCenters)f.getCount()>=cn.CENTER_QUORUM&&(i++,a+=f.getEstimatedModuleSize());if(i<3)return!1;const u=a/l;let d=0;for(const f of this.possibleCenters)d+=Math.abs(f.getEstimatedModuleSize()-u);return d<=.05*a}selectBestPatterns(){const i=this.possibleCenters.length;if(i<3)throw new $;const a=this.possibleCenters;let l;if(i>3){let u=0,d=0;for(const w of this.possibleCenters){const v=w.getEstimatedModuleSize();u+=v,d+=v*v}l=u/i;let f=Math.sqrt(d/i-l*l);a.sort((w,v)=>{const C=Math.abs(v.getEstimatedModuleSize()-l),O=Math.abs(w.getEstimatedModuleSize()-l);return C<O?-1:C>O?1:0});const m=Math.max(.2*l,f);for(let w=0;w<a.length&&a.length>3;w++){const v=a[w];Math.abs(v.getEstimatedModuleSize()-l)>m&&(a.splice(w,1),w--)}}if(a.length>3){let u=0;for(const d of a)u+=d.getEstimatedModuleSize();l=u/a.length,a.sort((d,f)=>{if(f.getCount()===d.getCount()){const m=Math.abs(f.getEstimatedModuleSize()-l),w=Math.abs(d.getEstimatedModuleSize()-l);return m<w?1:m>w?-1:0}else return f.getCount()-d.getCount()}),a.splice(3)}return[a[0],a[1],a[2]]}}cn.CENTER_QUORUM=2,cn.MIN_SKIP=3,cn.MAX_MODULES=57;class Il{constructor(i){this.image=i}getImage(){return this.image}getResultPointCallback(){return this.resultPointCallback}detect(i){this.resultPointCallback=i==null?null:i.get(j.NEED_RESULT_POINT_CALLBACK);const l=new cn(this.image,this.resultPointCallback).find(i);return this.processFinderPatternInfo(l)}processFinderPatternInfo(i){const a=i.getTopLeft(),l=i.getTopRight(),u=i.getBottomLeft(),d=this.calculateModuleSize(a,l,u);if(d<1)throw new $("No pattern found in proccess finder.");const f=Il.computeDimension(a,l,u,d),m=_e.getProvisionalVersionForDimension(f),w=m.getDimensionForVersion()-7;let v=null;if(m.getAlignmentPatternCenters().length>0){const L=l.getX()-a.getX()+u.getX(),V=l.getY()-a.getY()+u.getY(),z=1-3/w,G=Math.floor(a.getX()+z*(L-a.getX())),K=Math.floor(a.getY()+z*(V-a.getY()));for(let oe=4;oe<=16;oe<<=1)try{v=this.findAlignmentInRegion(d,G,K,oe);break}catch(ae){if(!(ae instanceof $))throw ae}}const C=Il.createTransform(a,l,u,v,f),O=Il.sampleGrid(this.image,C,f);let k;return v===null?k=[u,a,l]:k=[u,a,l,v],new io(O,k)}static createTransform(i,a,l,u,d){const f=d-3.5;let m,w,v,C;return u!==null?(m=u.getX(),w=u.getY(),v=f-3,C=v):(m=a.getX()-i.getX()+l.getX(),w=a.getY()-i.getY()+l.getY(),v=f,C=f),St.quadrilateralToQuadrilateral(3.5,3.5,f,3.5,v,C,3.5,f,i.getX(),i.getY(),a.getX(),a.getY(),m,w,l.getX(),l.getY())}static sampleGrid(i,a,l){return ui.getInstance().sampleGridWithTransform(i,l,l,a)}static computeDimension(i,a,l,u){const d=He.round(ye.distance(i,a)/u),f=He.round(ye.distance(i,l)/u);let m=Math.floor((d+f)/2)+7;switch(m&3){case 0:m++;break;case 2:m--;break;case 3:throw new $("Dimensions could be not found.")}return m}calculateModuleSize(i,a,l){return(this.calculateModuleSizeOneWay(i,a)+this.calculateModuleSizeOneWay(i,l))/2}calculateModuleSizeOneWay(i,a){const l=this.sizeOfBlackWhiteBlackRunBothWays(Math.floor(i.getX()),Math.floor(i.getY()),Math.floor(a.getX()),Math.floor(a.getY())),u=this.sizeOfBlackWhiteBlackRunBothWays(Math.floor(a.getX()),Math.floor(a.getY()),Math.floor(i.getX()),Math.floor(i.getY()));return isNaN(l)?u/7:isNaN(u)?l/7:(l+u)/14}sizeOfBlackWhiteBlackRunBothWays(i,a,l,u){let d=this.sizeOfBlackWhiteBlackRun(i,a,l,u),f=1,m=i-(l-i);m<0?(f=i/(i-m),m=0):m>=this.image.getWidth()&&(f=(this.image.getWidth()-1-i)/(m-i),m=this.image.getWidth()-1);let w=Math.floor(a-(u-a)*f);return f=1,w<0?(f=a/(a-w),w=0):w>=this.image.getHeight()&&(f=(this.image.getHeight()-1-a)/(w-a),w=this.image.getHeight()-1),m=Math.floor(i+(m-i)*f),d+=this.sizeOfBlackWhiteBlackRun(i,a,m,w),d-1}sizeOfBlackWhiteBlackRun(i,a,l,u){const d=Math.abs(u-a)>Math.abs(l-i);if(d){let L=i;i=a,a=L,L=l,l=u,u=L}const f=Math.abs(l-i),m=Math.abs(u-a);let w=-f/2;const v=i<l?1:-1,C=a<u?1:-1;let O=0;const k=l+v;for(let L=i,V=a;L!==k;L+=v){const z=d?V:L,G=d?L:V;if(O===1===this.image.get(z,G)){if(O===2)return He.distance(L,V,i,a);O++}if(w+=m,w>0){if(V===u)break;V+=C,w-=f}}return O===2?He.distance(l+v,u,i,a):NaN}findAlignmentInRegion(i,a,l,u){const d=Math.floor(u*i),f=Math.max(0,a-d),m=Math.min(this.image.getWidth()-1,a+d);if(m-f<i*3)throw new $("Alignment top exceeds estimated module size.");const w=Math.max(0,l-d),v=Math.min(this.image.getHeight()-1,l+d);if(v-w<i*3)throw new $("Alignment bottom exceeds estimated module size.");return new bu(this.image,f,w,m-f,v-w,i,this.resultPointCallback).find()}}class ss{constructor(){this.decoder=new b_}getDecoder(){return this.decoder}decode(i,a){let l,u;if(a!=null&&a.get(j.PURE_BARCODE)!==void 0){const w=ss.extractPureBits(i.getBlackMatrix());l=this.decoder.decodeBitMatrix(w,a),u=ss.NO_POINTS}else{const w=new Il(i.getBlackMatrix()).detect(a);l=this.decoder.decodeBitMatrix(w.getBits(),a),u=w.getPoints()}l.getOther()instanceof _m&&l.getOther().applyMirroredCorrection(u);const d=new Re(l.getText(),l.getRawBytes(),void 0,u,me.QR_CODE,void 0),f=l.getByteSegments();f!==null&&d.putMetadata(yt.BYTE_SEGMENTS,f);const m=l.getECLevel();return m!==null&&d.putMetadata(yt.ERROR_CORRECTION_LEVEL,m),l.hasStructuredAppend()&&(d.putMetadata(yt.STRUCTURED_APPEND_SEQUENCE,l.getStructuredAppendSequenceNumber()),d.putMetadata(yt.STRUCTURED_APPEND_PARITY,l.getStructuredAppendParity())),d}reset(){}static extractPureBits(i){const a=i.getTopLeftOnBit(),l=i.getBottomRightOnBit();if(a===null||l===null)throw new $;const u=this.moduleSize(a,i);let d=a[1],f=l[1],m=a[0],w=l[0];if(m>=w||d>=f)throw new $;if(f-d!==w-m&&(w=m+(f-d),w>=i.getWidth()))throw new $;const v=Math.round((w-m+1)/u),C=Math.round((f-d+1)/u);if(v<=0||C<=0)throw new $;if(C!==v)throw new $;const O=Math.floor(u/2);d+=O,m+=O;const k=m+Math.floor((v-1)*u)-w;if(k>0){if(k>O)throw new $;m-=k}const L=d+Math.floor((C-1)*u)-f;if(L>0){if(L>O)throw new $;d-=L}const V=new ie(v,C);for(let z=0;z<C;z++){const G=d+Math.floor(z*u);for(let K=0;K<v;K++)i.get(m+Math.floor(K*u),G)&&V.set(K,z)}return V}static moduleSize(i,a){const l=a.getHeight(),u=a.getWidth();let d=i[0],f=i[1],m=!0,w=0;for(;d<u&&f<l;){if(m!==a.get(d,f)){if(++w===5)break;m=!m}d++,f++}if(d===u||f===l)throw new $;return(d-i[0])/7}}ss.NO_POINTS=new Array;class ke{PDF417Common(){}static getBitCountSum(i){return He.sum(i)}static toIntArray(i){if(i==null||!i.length)return ke.EMPTY_INT_ARRAY;const a=new Int32Array(i.length);let l=0;for(const u of i)a[l++]=u;return a}static getCodeword(i){const a=_.binarySearch(ke.SYMBOL_TABLE,i&262143);return a<0?-1:(ke.CODEWORD_TABLE[a]-1)%ke.NUMBER_OF_CODEWORDS}}ke.NUMBER_OF_CODEWORDS=929,ke.MAX_CODEWORDS_IN_BARCODE=ke.NUMBER_OF_CODEWORDS-1,ke.MIN_ROWS_IN_BARCODE=3,ke.MAX_ROWS_IN_BARCODE=90,ke.MODULES_IN_CODEWORD=17,ke.MODULES_IN_STOP_PATTERN=18,ke.BARS_IN_MODULE=8,ke.EMPTY_INT_ARRAY=new Int32Array([]),ke.SYMBOL_TABLE=Int32Array.from([66142,66170,66206,66236,66290,66292,66350,66382,66396,66454,66470,66476,66594,66600,66614,66626,66628,66632,66640,66654,66662,66668,66682,66690,66718,66720,66748,66758,66776,66798,66802,66804,66820,66824,66832,66846,66848,66876,66880,66936,66950,66956,66968,66992,67006,67022,67036,67042,67044,67048,67062,67118,67150,67164,67214,67228,67256,67294,67322,67350,67366,67372,67398,67404,67416,67438,67474,67476,67490,67492,67496,67510,67618,67624,67650,67656,67664,67678,67686,67692,67706,67714,67716,67728,67742,67744,67772,67782,67788,67800,67822,67826,67828,67842,67848,67870,67872,67900,67904,67960,67974,67992,68016,68030,68046,68060,68066,68068,68072,68086,68104,68112,68126,68128,68156,68160,68216,68336,68358,68364,68376,68400,68414,68448,68476,68494,68508,68536,68546,68548,68552,68560,68574,68582,68588,68654,68686,68700,68706,68708,68712,68726,68750,68764,68792,68802,68804,68808,68816,68830,68838,68844,68858,68878,68892,68920,68976,68990,68994,68996,69e3,69008,69022,69024,69052,69062,69068,69080,69102,69106,69108,69142,69158,69164,69190,69208,69230,69254,69260,69272,69296,69310,69326,69340,69386,69394,69396,69410,69416,69430,69442,69444,69448,69456,69470,69478,69484,69554,69556,69666,69672,69698,69704,69712,69726,69754,69762,69764,69776,69790,69792,69820,69830,69836,69848,69870,69874,69876,69890,69918,69920,69948,69952,70008,70022,70040,70064,70078,70094,70108,70114,70116,70120,70134,70152,70174,70176,70264,70384,70412,70448,70462,70496,70524,70542,70556,70584,70594,70600,70608,70622,70630,70636,70664,70672,70686,70688,70716,70720,70776,70896,71136,71180,71192,71216,71230,71264,71292,71360,71416,71452,71480,71536,71550,71554,71556,71560,71568,71582,71584,71612,71622,71628,71640,71662,71726,71732,71758,71772,71778,71780,71784,71798,71822,71836,71864,71874,71880,71888,71902,71910,71916,71930,71950,71964,71992,72048,72062,72066,72068,72080,72094,72096,72124,72134,72140,72152,72174,72178,72180,72206,72220,72248,72304,72318,72416,72444,72456,72464,72478,72480,72508,72512,72568,72588,72600,72624,72638,72654,72668,72674,72676,72680,72694,72726,72742,72748,72774,72780,72792,72814,72838,72856,72880,72894,72910,72924,72930,72932,72936,72950,72966,72972,72984,73008,73022,73056,73084,73102,73116,73144,73156,73160,73168,73182,73190,73196,73210,73226,73234,73236,73250,73252,73256,73270,73282,73284,73296,73310,73318,73324,73346,73348,73352,73360,73374,73376,73404,73414,73420,73432,73454,73498,73518,73522,73524,73550,73564,73570,73572,73576,73590,73800,73822,73858,73860,73872,73886,73888,73916,73944,73970,73972,73992,74014,74016,74044,74048,74104,74118,74136,74160,74174,74210,74212,74216,74230,74244,74256,74270,74272,74360,74480,74502,74508,74544,74558,74592,74620,74638,74652,74680,74690,74696,74704,74726,74732,74782,74784,74812,74992,75232,75288,75326,75360,75388,75456,75512,75576,75632,75646,75650,75652,75664,75678,75680,75708,75718,75724,75736,75758,75808,75836,75840,75896,76016,76256,76736,76824,76848,76862,76896,76924,76992,77048,77296,77340,77368,77424,77438,77536,77564,77572,77576,77584,77600,77628,77632,77688,77702,77708,77720,77744,77758,77774,77788,77870,77902,77916,77922,77928,77966,77980,78008,78018,78024,78032,78046,78060,78074,78094,78136,78192,78206,78210,78212,78224,78238,78240,78268,78278,78284,78296,78322,78324,78350,78364,78448,78462,78560,78588,78600,78622,78624,78652,78656,78712,78726,78744,78768,78782,78798,78812,78818,78820,78824,78838,78862,78876,78904,78960,78974,79072,79100,79296,79352,79368,79376,79390,79392,79420,79424,79480,79600,79628,79640,79664,79678,79712,79740,79772,79800,79810,79812,79816,79824,79838,79846,79852,79894,79910,79916,79942,79948,79960,79982,79988,80006,80024,80048,80062,80078,80092,80098,80100,80104,80134,80140,80176,80190,80224,80252,80270,80284,80312,80328,80336,80350,80358,80364,80378,80390,80396,80408,80432,80446,80480,80508,80576,80632,80654,80668,80696,80752,80766,80776,80784,80798,80800,80828,80844,80856,80878,80882,80884,80914,80916,80930,80932,80936,80950,80962,80968,80976,80990,80998,81004,81026,81028,81040,81054,81056,81084,81094,81100,81112,81134,81154,81156,81160,81168,81182,81184,81212,81216,81272,81286,81292,81304,81328,81342,81358,81372,81380,81384,81398,81434,81454,81458,81460,81486,81500,81506,81508,81512,81526,81550,81564,81592,81602,81604,81608,81616,81630,81638,81644,81702,81708,81722,81734,81740,81752,81774,81778,81780,82050,82078,82080,82108,82180,82184,82192,82206,82208,82236,82240,82296,82316,82328,82352,82366,82402,82404,82408,82440,82448,82462,82464,82492,82496,82552,82672,82694,82700,82712,82736,82750,82784,82812,82830,82882,82884,82888,82896,82918,82924,82952,82960,82974,82976,83004,83008,83064,83184,83424,83468,83480,83504,83518,83552,83580,83648,83704,83740,83768,83824,83838,83842,83844,83848,83856,83872,83900,83910,83916,83928,83950,83984,84e3,84028,84032,84088,84208,84448,84928,85040,85054,85088,85116,85184,85240,85488,85560,85616,85630,85728,85756,85764,85768,85776,85790,85792,85820,85824,85880,85894,85900,85912,85936,85966,85980,86048,86080,86136,86256,86496,86976,88160,88188,88256,88312,88560,89056,89200,89214,89312,89340,89536,89592,89608,89616,89632,89664,89720,89840,89868,89880,89904,89952,89980,89998,90012,90040,90190,90204,90254,90268,90296,90306,90308,90312,90334,90382,90396,90424,90480,90494,90500,90504,90512,90526,90528,90556,90566,90572,90584,90610,90612,90638,90652,90680,90736,90750,90848,90876,90884,90888,90896,90910,90912,90940,90944,91e3,91014,91020,91032,91056,91070,91086,91100,91106,91108,91112,91126,91150,91164,91192,91248,91262,91360,91388,91584,91640,91664,91678,91680,91708,91712,91768,91888,91928,91952,91966,92e3,92028,92046,92060,92088,92098,92100,92104,92112,92126,92134,92140,92188,92216,92272,92384,92412,92608,92664,93168,93200,93214,93216,93244,93248,93304,93424,93664,93720,93744,93758,93792,93820,93888,93944,93980,94008,94064,94078,94084,94088,94096,94110,94112,94140,94150,94156,94168,94246,94252,94278,94284,94296,94318,94342,94348,94360,94384,94398,94414,94428,94440,94470,94476,94488,94512,94526,94560,94588,94606,94620,94648,94658,94660,94664,94672,94686,94694,94700,94714,94726,94732,94744,94768,94782,94816,94844,94912,94968,94990,95004,95032,95088,95102,95112,95120,95134,95136,95164,95180,95192,95214,95218,95220,95244,95256,95280,95294,95328,95356,95424,95480,95728,95758,95772,95800,95856,95870,95968,95996,96008,96016,96030,96032,96060,96064,96120,96152,96176,96190,96220,96226,96228,96232,96290,96292,96296,96310,96322,96324,96328,96336,96350,96358,96364,96386,96388,96392,96400,96414,96416,96444,96454,96460,96472,96494,96498,96500,96514,96516,96520,96528,96542,96544,96572,96576,96632,96646,96652,96664,96688,96702,96718,96732,96738,96740,96744,96758,96772,96776,96784,96798,96800,96828,96832,96888,97008,97030,97036,97048,97072,97086,97120,97148,97166,97180,97208,97220,97224,97232,97246,97254,97260,97326,97330,97332,97358,97372,97378,97380,97384,97398,97422,97436,97464,97474,97476,97480,97488,97502,97510,97516,97550,97564,97592,97648,97666,97668,97672,97680,97694,97696,97724,97734,97740,97752,97774,97830,97836,97850,97862,97868,97880,97902,97906,97908,97926,97932,97944,97968,97998,98012,98018,98020,98024,98038,98618,98674,98676,98838,98854,98874,98892,98904,98926,98930,98932,98968,99006,99042,99044,99048,99062,99166,99194,99246,99286,99350,99366,99372,99386,99398,99416,99438,99442,99444,99462,99504,99518,99534,99548,99554,99556,99560,99574,99590,99596,99608,99632,99646,99680,99708,99726,99740,99768,99778,99780,99784,99792,99806,99814,99820,99834,99858,99860,99874,99880,99894,99906,99920,99934,99962,99970,99972,99976,99984,99998,1e5,100028,100038,100044,100056,100078,100082,100084,100142,100174,100188,100246,100262,100268,100306,100308,100390,100396,100410,100422,100428,100440,100462,100466,100468,100486,100504,100528,100542,100558,100572,100578,100580,100584,100598,100620,100656,100670,100704,100732,100750,100792,100802,100808,100816,100830,100838,100844,100858,100888,100912,100926,100960,100988,101056,101112,101148,101176,101232,101246,101250,101252,101256,101264,101278,101280,101308,101318,101324,101336,101358,101362,101364,101410,101412,101416,101430,101442,101448,101456,101470,101478,101498,101506,101508,101520,101534,101536,101564,101580,101618,101620,101636,101640,101648,101662,101664,101692,101696,101752,101766,101784,101838,101858,101860,101864,101934,101938,101940,101966,101980,101986,101988,101992,102030,102044,102072,102082,102084,102088,102096,102138,102166,102182,102188,102214,102220,102232,102254,102282,102290,102292,102306,102308,102312,102326,102444,102458,102470,102476,102488,102514,102516,102534,102552,102576,102590,102606,102620,102626,102632,102646,102662,102668,102704,102718,102752,102780,102798,102812,102840,102850,102856,102864,102878,102886,102892,102906,102936,102974,103008,103036,103104,103160,103224,103280,103294,103298,103300,103312,103326,103328,103356,103366,103372,103384,103406,103410,103412,103472,103486,103520,103548,103616,103672,103920,103992,104048,104062,104160,104188,104194,104196,104200,104208,104224,104252,104256,104312,104326,104332,104344,104368,104382,104398,104412,104418,104420,104424,104482,104484,104514,104520,104528,104542,104550,104570,104578,104580,104592,104606,104608,104636,104652,104690,104692,104706,104712,104734,104736,104764,104768,104824,104838,104856,104910,104930,104932,104936,104968,104976,104990,104992,105020,105024,105080,105200,105240,105278,105312,105372,105410,105412,105416,105424,105446,105518,105524,105550,105564,105570,105572,105576,105614,105628,105656,105666,105672,105680,105702,105722,105742,105756,105784,105840,105854,105858,105860,105864,105872,105888,105932,105970,105972,106006,106022,106028,106054,106060,106072,106100,106118,106124,106136,106160,106174,106190,106210,106212,106216,106250,106258,106260,106274,106276,106280,106306,106308,106312,106320,106334,106348,106394,106414,106418,106420,106566,106572,106610,106612,106630,106636,106648,106672,106686,106722,106724,106728,106742,106758,106764,106776,106800,106814,106848,106876,106894,106908,106936,106946,106948,106952,106960,106974,106982,106988,107032,107056,107070,107104,107132,107200,107256,107292,107320,107376,107390,107394,107396,107400,107408,107422,107424,107452,107462,107468,107480,107502,107506,107508,107544,107568,107582,107616,107644,107712,107768,108016,108060,108088,108144,108158,108256,108284,108290,108292,108296,108304,108318,108320,108348,108352,108408,108422,108428,108440,108464,108478,108494,108508,108514,108516,108520,108592,108640,108668,108736,108792,109040,109536,109680,109694,109792,109820,110016,110072,110084,110088,110096,110112,110140,110144,110200,110320,110342,110348,110360,110384,110398,110432,110460,110478,110492,110520,110532,110536,110544,110558,110658,110686,110714,110722,110724,110728,110736,110750,110752,110780,110796,110834,110836,110850,110852,110856,110864,110878,110880,110908,110912,110968,110982,111e3,111054,111074,111076,111080,111108,111112,111120,111134,111136,111164,111168,111224,111344,111372,111422,111456,111516,111554,111556,111560,111568,111590,111632,111646,111648,111676,111680,111736,111856,112096,112152,112224,112252,112320,112440,112514,112516,112520,112528,112542,112544,112588,112686,112718,112732,112782,112796,112824,112834,112836,112840,112848,112870,112890,112910,112924,112952,113008,113022,113026,113028,113032,113040,113054,113056,113100,113138,113140,113166,113180,113208,113264,113278,113376,113404,113416,113424,113440,113468,113472,113560,113614,113634,113636,113640,113686,113702,113708,113734,113740,113752,113778,113780,113798,113804,113816,113840,113854,113870,113890,113892,113896,113926,113932,113944,113968,113982,114016,114044,114076,114114,114116,114120,114128,114150,114170,114194,114196,114210,114212,114216,114242,114244,114248,114256,114270,114278,114306,114308,114312,114320,114334,114336,114364,114380,114420,114458,114478,114482,114484,114510,114524,114530,114532,114536,114842,114866,114868,114970,114994,114996,115042,115044,115048,115062,115130,115226,115250,115252,115278,115292,115298,115300,115304,115318,115342,115394,115396,115400,115408,115422,115430,115436,115450,115478,115494,115514,115526,115532,115570,115572,115738,115758,115762,115764,115790,115804,115810,115812,115816,115830,115854,115868,115896,115906,115912,115920,115934,115942,115948,115962,115996,116024,116080,116094,116098,116100,116104,116112,116126,116128,116156,116166,116172,116184,116206,116210,116212,116246,116262,116268,116282,116294,116300,116312,116334,116338,116340,116358,116364,116376,116400,116414,116430,116444,116450,116452,116456,116498,116500,116514,116520,116534,116546,116548,116552,116560,116574,116582,116588,116602,116654,116694,116714,116762,116782,116786,116788,116814,116828,116834,116836,116840,116854,116878,116892,116920,116930,116936,116944,116958,116966,116972,116986,117006,117048,117104,117118,117122,117124,117136,117150,117152,117180,117190,117196,117208,117230,117234,117236,117304,117360,117374,117472,117500,117506,117508,117512,117520,117536,117564,117568,117624,117638,117644,117656,117680,117694,117710,117724,117730,117732,117736,117750,117782,117798,117804,117818,117830,117848,117874,117876,117894,117936,117950,117966,117986,117988,117992,118022,118028,118040,118064,118078,118112,118140,118172,118210,118212,118216,118224,118238,118246,118266,118306,118312,118338,118352,118366,118374,118394,118402,118404,118408,118416,118430,118432,118460,118476,118514,118516,118574,118578,118580,118606,118620,118626,118628,118632,118678,118694,118700,118730,118738,118740,118830,118834,118836,118862,118876,118882,118884,118888,118902,118926,118940,118968,118978,118980,118984,118992,119006,119014,119020,119034,119068,119096,119152,119166,119170,119172,119176,119184,119198,119200,119228,119238,119244,119256,119278,119282,119284,119324,119352,119408,119422,119520,119548,119554,119556,119560,119568,119582,119584,119612,119616,119672,119686,119692,119704,119728,119742,119758,119772,119778,119780,119784,119798,119920,119934,120032,120060,120256,120312,120324,120328,120336,120352,120384,120440,120560,120582,120588,120600,120624,120638,120672,120700,120718,120732,120760,120770,120772,120776,120784,120798,120806,120812,120870,120876,120890,120902,120908,120920,120946,120948,120966,120972,120984,121008,121022,121038,121058,121060,121064,121078,121100,121112,121136,121150,121184,121212,121244,121282,121284,121288,121296,121318,121338,121356,121368,121392,121406,121440,121468,121536,121592,121656,121730,121732,121736,121744,121758,121760,121804,121842,121844,121890,121922,121924,121928,121936,121950,121958,121978,121986,121988,121992,122e3,122014,122016,122044,122060,122098,122100,122116,122120,122128,122142,122144,122172,122176,122232,122246,122264,122318,122338,122340,122344,122414,122418,122420,122446,122460,122466,122468,122472,122510,122524,122552,122562,122564,122568,122576,122598,122618,122646,122662,122668,122694,122700,122712,122738,122740,122762,122770,122772,122786,122788,122792,123018,123026,123028,123042,123044,123048,123062,123098,123146,123154,123156,123170,123172,123176,123190,123202,123204,123208,123216,123238,123244,123258,123290,123314,123316,123402,123410,123412,123426,123428,123432,123446,123458,123464,123472,123486,123494,123500,123514,123522,123524,123528,123536,123552,123580,123590,123596,123608,123630,123634,123636,123674,123698,123700,123740,123746,123748,123752,123834,123914,123922,123924,123938,123944,123958,123970,123976,123984,123998,124006,124012,124026,124034,124036,124048,124062,124064,124092,124102,124108,124120,124142,124146,124148,124162,124164,124168,124176,124190,124192,124220,124224,124280,124294,124300,124312,124336,124350,124366,124380,124386,124388,124392,124406,124442,124462,124466,124468,124494,124508,124514,124520,124558,124572,124600,124610,124612,124616,124624,124646,124666,124694,124710,124716,124730,124742,124748,124760,124786,124788,124818,124820,124834,124836,124840,124854,124946,124948,124962,124964,124968,124982,124994,124996,125e3,125008,125022,125030,125036,125050,125058,125060,125064,125072,125086,125088,125116,125126,125132,125144,125166,125170,125172,125186,125188,125192,125200,125216,125244,125248,125304,125318,125324,125336,125360,125374,125390,125404,125410,125412,125416,125430,125444,125448,125456,125472,125504,125560,125680,125702,125708,125720,125744,125758,125792,125820,125838,125852,125880,125890,125892,125896,125904,125918,125926,125932,125978,125998,126002,126004,126030,126044,126050,126052,126056,126094,126108,126136,126146,126148,126152,126160,126182,126202,126222,126236,126264,126320,126334,126338,126340,126344,126352,126366,126368,126412,126450,126452,126486,126502,126508,126522,126534,126540,126552,126574,126578,126580,126598,126604,126616,126640,126654,126670,126684,126690,126692,126696,126738,126754,126756,126760,126774,126786,126788,126792,126800,126814,126822,126828,126842,126894,126898,126900,126934,127126,127142,127148,127162,127178,127186,127188,127254,127270,127276,127290,127302,127308,127320,127342,127346,127348,127370,127378,127380,127394,127396,127400,127450,127510,127526,127532,127546,127558,127576,127598,127602,127604,127622,127628,127640,127664,127678,127694,127708,127714,127716,127720,127734,127754,127762,127764,127778,127784,127810,127812,127816,127824,127838,127846,127866,127898,127918,127922,127924,128022,128038,128044,128058,128070,128076,128088,128110,128114,128116,128134,128140,128152,128176,128190,128206,128220,128226,128228,128232,128246,128262,128268,128280,128304,128318,128352,128380,128398,128412,128440,128450,128452,128456,128464,128478,128486,128492,128506,128522,128530,128532,128546,128548,128552,128566,128578,128580,128584,128592,128606,128614,128634,128642,128644,128648,128656,128670,128672,128700,128716,128754,128756,128794,128814,128818,128820,128846,128860,128866,128868,128872,128886,128918,128934,128940,128954,128978,128980,129178,129198,129202,129204,129238,129258,129306,129326,129330,129332,129358,129372,129378,129380,129384,129398,129430,129446,129452,129466,129482,129490,129492,129562,129582,129586,129588,129614,129628,129634,129636,129640,129654,129678,129692,129720,129730,129732,129736,129744,129758,129766,129772,129814,129830,129836,129850,129862,129868,129880,129902,129906,129908,129930,129938,129940,129954,129956,129960,129974,130010]),ke.CODEWORD_TABLE=Int32Array.from([2627,1819,2622,2621,1813,1812,2729,2724,2723,2779,2774,2773,902,896,908,868,865,861,859,2511,873,871,1780,835,2493,825,2491,842,837,844,1764,1762,811,810,809,2483,807,2482,806,2480,815,814,813,812,2484,817,816,1745,1744,1742,1746,2655,2637,2635,2626,2625,2623,2628,1820,2752,2739,2737,2728,2727,2725,2730,2785,2783,2778,2777,2775,2780,787,781,747,739,736,2413,754,752,1719,692,689,681,2371,678,2369,700,697,694,703,1688,1686,642,638,2343,631,2341,627,2338,651,646,643,2345,654,652,1652,1650,1647,1654,601,599,2322,596,2321,594,2319,2317,611,610,608,606,2324,603,2323,615,614,612,1617,1616,1614,1612,616,1619,1618,2575,2538,2536,905,901,898,909,2509,2507,2504,870,867,864,860,2512,875,872,1781,2490,2489,2487,2485,1748,836,834,832,830,2494,827,2492,843,841,839,845,1765,1763,2701,2676,2674,2653,2648,2656,2634,2633,2631,2629,1821,2638,2636,2770,2763,2761,2750,2745,2753,2736,2735,2733,2731,1848,2740,2738,2786,2784,591,588,576,569,566,2296,1590,537,534,526,2276,522,2274,545,542,539,548,1572,1570,481,2245,466,2242,462,2239,492,485,482,2249,496,494,1534,1531,1528,1538,413,2196,406,2191,2188,425,419,2202,415,2199,432,430,427,1472,1467,1464,433,1476,1474,368,367,2160,365,2159,362,2157,2155,2152,378,377,375,2166,372,2165,369,2162,383,381,379,2168,1419,1418,1416,1414,385,1411,384,1423,1422,1420,1424,2461,802,2441,2439,790,786,783,794,2409,2406,2403,750,742,738,2414,756,753,1720,2367,2365,2362,2359,1663,693,691,684,2373,680,2370,702,699,696,704,1690,1687,2337,2336,2334,2332,1624,2329,1622,640,637,2344,634,2342,630,2340,650,648,645,2346,655,653,1653,1651,1649,1655,2612,2597,2595,2571,2568,2565,2576,2534,2529,2526,1787,2540,2537,907,904,900,910,2503,2502,2500,2498,1768,2495,1767,2510,2508,2506,869,866,863,2513,876,874,1782,2720,2713,2711,2697,2694,2691,2702,2672,2670,2664,1828,2678,2675,2647,2646,2644,2642,1823,2639,1822,2654,2652,2650,2657,2771,1855,2765,2762,1850,1849,2751,2749,2747,2754,353,2148,344,342,336,2142,332,2140,345,1375,1373,306,2130,299,2128,295,2125,319,314,311,2132,1354,1352,1349,1356,262,257,2101,253,2096,2093,274,273,267,2107,263,2104,280,278,275,1316,1311,1308,1320,1318,2052,202,2050,2044,2040,219,2063,212,2060,208,2055,224,221,2066,1260,1258,1252,231,1248,229,1266,1264,1261,1268,155,1998,153,1996,1994,1991,1988,165,164,2007,162,2006,159,2003,2e3,172,171,169,2012,166,2010,1186,1184,1182,1179,175,1176,173,1192,1191,1189,1187,176,1194,1193,2313,2307,2305,592,589,2294,2292,2289,578,572,568,2297,580,1591,2272,2267,2264,1547,538,536,529,2278,525,2275,547,544,541,1574,1571,2237,2235,2229,1493,2225,1489,478,2247,470,2244,465,2241,493,488,484,2250,498,495,1536,1533,1530,1539,2187,2186,2184,2182,1432,2179,1430,2176,1427,414,412,2197,409,2195,405,2193,2190,426,424,421,2203,418,2201,431,429,1473,1471,1469,1466,434,1477,1475,2478,2472,2470,2459,2457,2454,2462,803,2437,2432,2429,1726,2443,2440,792,789,785,2401,2399,2393,1702,2389,1699,2411,2408,2405,745,741,2415,758,755,1721,2358,2357,2355,2353,1661,2350,1660,2347,1657,2368,2366,2364,2361,1666,690,687,2374,683,2372,701,698,705,1691,1689,2619,2617,2610,2608,2605,2613,2593,2588,2585,1803,2599,2596,2563,2561,2555,1797,2551,1795,2573,2570,2567,2577,2525,2524,2522,2520,1786,2517,1785,2514,1783,2535,2533,2531,2528,1788,2541,2539,906,903,911,2721,1844,2715,2712,1838,1836,2699,2696,2693,2703,1827,1826,1824,2673,2671,2669,2666,1829,2679,2677,1858,1857,2772,1854,1853,1851,1856,2766,2764,143,1987,139,1986,135,133,131,1984,128,1983,125,1981,138,137,136,1985,1133,1132,1130,112,110,1974,107,1973,104,1971,1969,122,121,119,117,1977,114,1976,124,1115,1114,1112,1110,1117,1116,84,83,1953,81,1952,78,1950,1948,1945,94,93,91,1959,88,1958,85,1955,99,97,95,1961,1086,1085,1083,1081,1078,100,1090,1089,1087,1091,49,47,1917,44,1915,1913,1910,1907,59,1926,56,1925,53,1922,1919,66,64,1931,61,1929,1042,1040,1038,71,1035,70,1032,68,1048,1047,1045,1043,1050,1049,12,10,1869,1867,1864,1861,21,1880,19,1877,1874,1871,28,1888,25,1886,22,1883,982,980,977,974,32,30,991,989,987,984,34,995,994,992,2151,2150,2147,2146,2144,356,355,354,2149,2139,2138,2136,2134,1359,343,341,338,2143,335,2141,348,347,346,1376,1374,2124,2123,2121,2119,1326,2116,1324,310,308,305,2131,302,2129,298,2127,320,318,316,313,2133,322,321,1355,1353,1351,1357,2092,2091,2089,2087,1276,2084,1274,2081,1271,259,2102,256,2100,252,2098,2095,272,269,2108,266,2106,281,279,277,1317,1315,1313,1310,282,1321,1319,2039,2037,2035,2032,1203,2029,1200,1197,207,2053,205,2051,201,2049,2046,2043,220,218,2064,215,2062,211,2059,228,226,223,2069,1259,1257,1254,232,1251,230,1267,1265,1263,2316,2315,2312,2311,2309,2314,2304,2303,2301,2299,1593,2308,2306,590,2288,2287,2285,2283,1578,2280,1577,2295,2293,2291,579,577,574,571,2298,582,581,1592,2263,2262,2260,2258,1545,2255,1544,2252,1541,2273,2271,2269,2266,1550,535,532,2279,528,2277,546,543,549,1575,1573,2224,2222,2220,1486,2217,1485,2214,1482,1479,2238,2236,2234,2231,1496,2228,1492,480,477,2248,473,2246,469,2243,490,487,2251,497,1537,1535,1532,2477,2476,2474,2479,2469,2468,2466,2464,1730,2473,2471,2453,2452,2450,2448,1729,2445,1728,2460,2458,2456,2463,805,804,2428,2427,2425,2423,1725,2420,1724,2417,1722,2438,2436,2434,2431,1727,2444,2442,793,791,788,795,2388,2386,2384,1697,2381,1696,2378,1694,1692,2402,2400,2398,2395,1703,2392,1701,2412,2410,2407,751,748,744,2416,759,757,1807,2620,2618,1806,1805,2611,2609,2607,2614,1802,1801,1799,2594,2592,2590,2587,1804,2600,2598,1794,1793,1791,1789,2564,2562,2560,2557,1798,2554,1796,2574,2572,2569,2578,1847,1846,2722,1843,1842,1840,1845,2716,2714,1835,1834,1832,1830,1839,1837,2700,2698,2695,2704,1817,1811,1810,897,862,1777,829,826,838,1760,1758,808,2481,1741,1740,1738,1743,2624,1818,2726,2776,782,740,737,1715,686,679,695,1682,1680,639,628,2339,647,644,1645,1643,1640,1648,602,600,597,595,2320,593,2318,609,607,604,1611,1610,1608,1606,613,1615,1613,2328,926,924,892,886,899,857,850,2505,1778,824,823,821,819,2488,818,2486,833,831,828,840,1761,1759,2649,2632,2630,2746,2734,2732,2782,2781,570,567,1587,531,527,523,540,1566,1564,476,467,463,2240,486,483,1524,1521,1518,1529,411,403,2192,399,2189,423,416,1462,1457,1454,428,1468,1465,2210,366,363,2158,360,2156,357,2153,376,373,370,2163,1410,1409,1407,1405,382,1402,380,1417,1415,1412,1421,2175,2174,777,774,771,784,732,725,722,2404,743,1716,676,674,668,2363,665,2360,685,1684,1681,626,624,622,2335,620,2333,617,2330,641,635,649,1646,1644,1642,2566,928,925,2530,2527,894,891,888,2501,2499,2496,858,856,854,851,1779,2692,2668,2665,2645,2643,2640,2651,2768,2759,2757,2744,2743,2741,2748,352,1382,340,337,333,1371,1369,307,300,296,2126,315,312,1347,1342,1350,261,258,250,2097,246,2094,271,268,264,1306,1301,1298,276,1312,1309,2115,203,2048,195,2045,191,2041,213,209,2056,1246,1244,1238,225,1234,222,1256,1253,1249,1262,2080,2079,154,1997,150,1995,147,1992,1989,163,160,2004,156,2001,1175,1174,1172,1170,1167,170,1164,167,1185,1183,1180,1177,174,1190,1188,2025,2024,2022,587,586,564,559,556,2290,573,1588,520,518,512,2268,508,2265,530,1568,1565,461,457,2233,450,2230,446,2226,479,471,489,1526,1523,1520,397,395,2185,392,2183,389,2180,2177,410,2194,402,422,1463,1461,1459,1456,1470,2455,799,2433,2430,779,776,773,2397,2394,2390,734,728,724,746,1717,2356,2354,2351,2348,1658,677,675,673,670,667,688,1685,1683,2606,2589,2586,2559,2556,2552,927,2523,2521,2518,2515,1784,2532,895,893,890,2718,2709,2707,2689,2687,2684,2663,2662,2660,2658,1825,2667,2769,1852,2760,2758,142,141,1139,1138,134,132,129,126,1982,1129,1128,1126,1131,113,111,108,105,1972,101,1970,120,118,115,1109,1108,1106,1104,123,1113,1111,82,79,1951,75,1949,72,1946,92,89,86,1956,1077,1076,1074,1072,98,1069,96,1084,1082,1079,1088,1968,1967,48,45,1916,42,1914,39,1911,1908,60,57,54,1923,50,1920,1031,1030,1028,1026,67,1023,65,1020,62,1041,1039,1036,1033,69,1046,1044,1944,1943,1941,11,9,1868,7,1865,1862,1859,20,1878,16,1875,13,1872,970,968,966,963,29,960,26,23,983,981,978,975,33,971,31,990,988,985,1906,1904,1902,993,351,2145,1383,331,330,328,326,2137,323,2135,339,1372,1370,294,293,291,289,2122,286,2120,283,2117,309,303,317,1348,1346,1344,245,244,242,2090,239,2088,236,2085,2082,260,2099,249,270,1307,1305,1303,1300,1314,189,2038,186,2036,183,2033,2030,2026,206,198,2047,194,216,1247,1245,1243,1240,227,1237,1255,2310,2302,2300,2286,2284,2281,565,563,561,558,575,1589,2261,2259,2256,2253,1542,521,519,517,514,2270,511,533,1569,1567,2223,2221,2218,2215,1483,2211,1480,459,456,453,2232,449,474,491,1527,1525,1522,2475,2467,2465,2451,2449,2446,801,800,2426,2424,2421,2418,1723,2435,780,778,775,2387,2385,2382,2379,1695,2375,1693,2396,735,733,730,727,749,1718,2616,2615,2604,2603,2601,2584,2583,2581,2579,1800,2591,2550,2549,2547,2545,1792,2542,1790,2558,929,2719,1841,2710,2708,1833,1831,2690,2688,2686,1815,1809,1808,1774,1756,1754,1737,1736,1734,1739,1816,1711,1676,1674,633,629,1638,1636,1633,1641,598,1605,1604,1602,1600,605,1609,1607,2327,887,853,1775,822,820,1757,1755,1584,524,1560,1558,468,464,1514,1511,1508,1519,408,404,400,1452,1447,1444,417,1458,1455,2208,364,361,358,2154,1401,1400,1398,1396,374,1393,371,1408,1406,1403,1413,2173,2172,772,726,723,1712,672,669,666,682,1678,1675,625,623,621,618,2331,636,632,1639,1637,1635,920,918,884,880,889,849,848,847,846,2497,855,852,1776,2641,2742,2787,1380,334,1367,1365,301,297,1340,1338,1335,1343,255,251,247,1296,1291,1288,265,1302,1299,2113,204,196,192,2042,1232,1230,1224,214,1220,210,1242,1239,1235,1250,2077,2075,151,148,1993,144,1990,1163,1162,1160,1158,1155,161,1152,157,1173,1171,1168,1165,168,1181,1178,2021,2020,2018,2023,585,560,557,1585,516,509,1562,1559,458,447,2227,472,1516,1513,1510,398,396,393,390,2181,386,2178,407,1453,1451,1449,1446,420,1460,2209,769,764,720,712,2391,729,1713,664,663,661,659,2352,656,2349,671,1679,1677,2553,922,919,2519,2516,885,883,881,2685,2661,2659,2767,2756,2755,140,1137,1136,130,127,1125,1124,1122,1127,109,106,102,1103,1102,1100,1098,116,1107,1105,1980,80,76,73,1947,1068,1067,1065,1063,90,1060,87,1075,1073,1070,1080,1966,1965,46,43,40,1912,36,1909,1019,1018,1016,1014,58,1011,55,1008,51,1029,1027,1024,1021,63,1037,1034,1940,1939,1937,1942,8,1866,4,1863,1,1860,956,954,952,949,946,17,14,969,967,964,961,27,957,24,979,976,972,1901,1900,1898,1896,986,1905,1903,350,349,1381,329,327,324,1368,1366,292,290,287,284,2118,304,1341,1339,1337,1345,243,240,237,2086,233,2083,254,1297,1295,1293,1290,1304,2114,190,187,184,2034,180,2031,177,2027,199,1233,1231,1229,1226,217,1223,1241,2078,2076,584,555,554,552,550,2282,562,1586,507,506,504,502,2257,499,2254,515,1563,1561,445,443,441,2219,438,2216,435,2212,460,454,475,1517,1515,1512,2447,798,797,2422,2419,770,768,766,2383,2380,2376,721,719,717,714,731,1714,2602,2582,2580,2548,2546,2543,923,921,2717,2706,2705,2683,2682,2680,1771,1752,1750,1733,1732,1731,1735,1814,1707,1670,1668,1631,1629,1626,1634,1599,1598,1596,1594,1603,1601,2326,1772,1753,1751,1581,1554,1552,1504,1501,1498,1509,1442,1437,1434,401,1448,1445,2206,1392,1391,1389,1387,1384,359,1399,1397,1394,1404,2171,2170,1708,1672,1669,619,1632,1630,1628,1773,1378,1363,1361,1333,1328,1336,1286,1281,1278,248,1292,1289,2111,1218,1216,1210,197,1206,193,1228,1225,1221,1236,2073,2071,1151,1150,1148,1146,152,1143,149,1140,145,1161,1159,1156,1153,158,1169,1166,2017,2016,2014,2019,1582,510,1556,1553,452,448,1506,1500,394,391,387,1443,1441,1439,1436,1450,2207,765,716,713,1709,662,660,657,1673,1671,916,914,879,878,877,882,1135,1134,1121,1120,1118,1123,1097,1096,1094,1092,103,1101,1099,1979,1059,1058,1056,1054,77,1051,74,1066,1064,1061,1071,1964,1963,1007,1006,1004,1002,999,41,996,37,1017,1015,1012,1009,52,1025,1022,1936,1935,1933,1938,942,940,938,935,932,5,2,955,953,950,947,18,943,15,965,962,958,1895,1894,1892,1890,973,1899,1897,1379,325,1364,1362,288,285,1334,1332,1330,241,238,234,1287,1285,1283,1280,1294,2112,188,185,181,178,2028,1219,1217,1215,1212,200,1209,1227,2074,2072,583,553,551,1583,505,503,500,513,1557,1555,444,442,439,436,2213,455,451,1507,1505,1502,796,763,762,760,767,711,710,708,706,2377,718,715,1710,2544,917,915,2681,1627,1597,1595,2325,1769,1749,1747,1499,1438,1435,2204,1390,1388,1385,1395,2169,2167,1704,1665,1662,1625,1623,1620,1770,1329,1282,1279,2109,1214,1207,1222,2068,2065,1149,1147,1144,1141,146,1157,1154,2013,2011,2008,2015,1579,1549,1546,1495,1487,1433,1431,1428,1425,388,1440,2205,1705,658,1667,1664,1119,1095,1093,1978,1057,1055,1052,1062,1962,1960,1005,1003,1e3,997,38,1013,1010,1932,1930,1927,1934,941,939,936,933,6,930,3,951,948,944,1889,1887,1884,1881,959,1893,1891,35,1377,1360,1358,1327,1325,1322,1331,1277,1275,1272,1269,235,1284,2110,1205,1204,1201,1198,182,1195,179,1213,2070,2067,1580,501,1551,1548,440,437,1497,1494,1490,1503,761,709,707,1706,913,912,2198,1386,2164,2161,1621,1766,2103,1208,2058,2054,1145,1142,2005,2002,1999,2009,1488,1429,1426,2200,1698,1659,1656,1975,1053,1957,1954,1001,998,1924,1921,1918,1928,937,934,931,1879,1876,1873,1870,945,1885,1882,1323,1273,1270,2105,1202,1199,1196,1211,2061,2057,1576,1543,1540,1484,1481,1478,1491,1700]);class S_{constructor(i,a){this.bits=i,this.points=a}getBits(){return this.bits}getPoints(){return this.points}}class We{static detectMultiple(i,a,l){let u=i.getBlackMatrix(),d=We.detect(l,u);return d.length||(u=u.clone(),u.rotate180(),d=We.detect(l,u)),new S_(u,d)}static detect(i,a){const l=new Array;let u=0,d=0,f=!1;for(;u<a.getHeight();){const m=We.findVertices(a,u,d);if(m[0]==null&&m[3]==null){if(!f)break;f=!1,d=0;for(const w of l)w[1]!=null&&(u=Math.trunc(Math.max(u,w[1].getY()))),w[3]!=null&&(u=Math.max(u,Math.trunc(w[3].getY())));u+=We.ROW_STEP;continue}if(f=!0,l.push(m),!i)break;m[2]!=null?(d=Math.trunc(m[2].getX()),u=Math.trunc(m[2].getY())):(d=Math.trunc(m[4].getX()),u=Math.trunc(m[4].getY()))}return l}static findVertices(i,a,l){const u=i.getHeight(),d=i.getWidth(),f=new Array(8);return We.copyToResult(f,We.findRowsWithPattern(i,u,d,a,l,We.START_PATTERN),We.INDEXES_START_PATTERN),f[4]!=null&&(l=Math.trunc(f[4].getX()),a=Math.trunc(f[4].getY())),We.copyToResult(f,We.findRowsWithPattern(i,u,d,a,l,We.STOP_PATTERN),We.INDEXES_STOP_PATTERN),f}static copyToResult(i,a,l){for(let u=0;u<l.length;u++)i[l[u]]=a[u]}static findRowsWithPattern(i,a,l,u,d,f){const m=new Array(4);let w=!1;const v=new Int32Array(f.length);for(;u<a;u+=We.ROW_STEP){let O=We.findGuardPattern(i,d,u,l,!1,f,v);if(O!=null){for(;u>0;){const k=We.findGuardPattern(i,d,--u,l,!1,f,v);if(k!=null)O=k;else{u++;break}}m[0]=new ye(O[0],u),m[1]=new ye(O[1],u),w=!0;break}}let C=u+1;if(w){let O=0,k=Int32Array.from([Math.trunc(m[0].getX()),Math.trunc(m[1].getX())]);for(;C<a;C++){const L=We.findGuardPattern(i,k[0],C,l,!1,f,v);if(L!=null&&Math.abs(k[0]-L[0])<We.MAX_PATTERN_DRIFT&&Math.abs(k[1]-L[1])<We.MAX_PATTERN_DRIFT)k=L,O=0;else{if(O>We.SKIPPED_ROW_COUNT_MAX)break;O++}}C-=O+1,m[2]=new ye(k[0],C),m[3]=new ye(k[1],C)}return C-u<We.BARCODE_MIN_HEIGHT&&_.fill(m,null),m}static findGuardPattern(i,a,l,u,d,f,m){_.fillWithin(m,0,m.length,0);let w=a,v=0;for(;i.get(w,l)&&w>0&&v++<We.MAX_PIXEL_DRIFT;)w--;let C=w,O=0,k=f.length;for(let L=d;C<u;C++)if(i.get(C,l)!==L)m[O]++;else{if(O===k-1){if(We.patternMatchVariance(m,f,We.MAX_INDIVIDUAL_VARIANCE)<We.MAX_AVG_VARIANCE)return new Int32Array([w,C]);w+=m[0]+m[1],S.arraycopy(m,2,m,0,O-1),m[O-1]=0,m[O]=0,O--}else O++;m[O]=1,L=!L}return O===k-1&&We.patternMatchVariance(m,f,We.MAX_INDIVIDUAL_VARIANCE)<We.MAX_AVG_VARIANCE?new Int32Array([w,C-1]):null}static patternMatchVariance(i,a,l){let u=i.length,d=0,f=0;for(let v=0;v<u;v++)d+=i[v],f+=a[v];if(d<f)return 1/0;let m=d/f;l*=m;let w=0;for(let v=0;v<u;v++){let C=i[v],O=a[v]*m,k=C>O?C-O:O-C;if(k>l)return 1/0;w+=k}return w/d}}We.INDEXES_START_PATTERN=Int32Array.from([0,4,1,5]),We.INDEXES_STOP_PATTERN=Int32Array.from([6,2,7,3]),We.MAX_AVG_VARIANCE=.42,We.MAX_INDIVIDUAL_VARIANCE=.8,We.START_PATTERN=Int32Array.from([8,1,1,1,1,1,1,3]),We.STOP_PATTERN=Int32Array.from([7,1,1,3,1,1,1,2,1]),We.MAX_PIXEL_DRIFT=3,We.MAX_PATTERN_DRIFT=5,We.SKIPPED_ROW_COUNT_MAX=25,We.ROW_STEP=5,We.BARCODE_MIN_HEIGHT=10;class fn{constructor(i,a){if(a.length===0)throw new x;this.field=i;let l=a.length;if(l>1&&a[0]===0){let u=1;for(;u<l&&a[u]===0;)u++;u===l?this.coefficients=new Int32Array([0]):(this.coefficients=new Int32Array(l-u),S.arraycopy(a,u,this.coefficients,0,this.coefficients.length))}else this.coefficients=a}getCoefficients(){return this.coefficients}getDegree(){return this.coefficients.length-1}isZero(){return this.coefficients[0]===0}getCoefficient(i){return this.coefficients[this.coefficients.length-1-i]}evaluateAt(i){if(i===0)return this.getCoefficient(0);if(i===1){let u=0;for(let d of this.coefficients)u=this.field.add(u,d);return u}let a=this.coefficients[0],l=this.coefficients.length;for(let u=1;u<l;u++)a=this.field.add(this.field.multiply(i,a),this.coefficients[u]);return a}add(i){if(!this.field.equals(i.field))throw new x("ModulusPolys do not have same ModulusGF field");if(this.isZero())return i;if(i.isZero())return this;let a=this.coefficients,l=i.coefficients;if(a.length>l.length){let f=a;a=l,l=f}let u=new Int32Array(l.length),d=l.length-a.length;S.arraycopy(l,0,u,0,d);for(let f=d;f<l.length;f++)u[f]=this.field.add(a[f-d],l[f]);return new fn(this.field,u)}subtract(i){if(!this.field.equals(i.field))throw new x("ModulusPolys do not have same ModulusGF field");return i.isZero()?this:this.add(i.negative())}multiply(i){return i instanceof fn?this.multiplyOther(i):this.multiplyScalar(i)}multiplyOther(i){if(!this.field.equals(i.field))throw new x("ModulusPolys do not have same ModulusGF field");if(this.isZero()||i.isZero())return new fn(this.field,new Int32Array([0]));let a=this.coefficients,l=a.length,u=i.coefficients,d=u.length,f=new Int32Array(l+d-1);for(let m=0;m<l;m++){let w=a[m];for(let v=0;v<d;v++)f[m+v]=this.field.add(f[m+v],this.field.multiply(w,u[v]))}return new fn(this.field,f)}negative(){let i=this.coefficients.length,a=new Int32Array(i);for(let l=0;l<i;l++)a[l]=this.field.subtract(0,this.coefficients[l]);return new fn(this.field,a)}multiplyScalar(i){if(i===0)return new fn(this.field,new Int32Array([0]));if(i===1)return this;let a=this.coefficients.length,l=new Int32Array(a);for(let u=0;u<a;u++)l[u]=this.field.multiply(this.coefficients[u],i);return new fn(this.field,l)}multiplyByMonomial(i,a){if(i<0)throw new x;if(a===0)return new fn(this.field,new Int32Array([0]));let l=this.coefficients.length,u=new Int32Array(l+i);for(let d=0;d<l;d++)u[d]=this.field.multiply(this.coefficients[d],a);return new fn(this.field,u)}toString(){let i=new fe;for(let a=this.getDegree();a>=0;a--){let l=this.getCoefficient(a);l!==0&&(l<0?(i.append(" - "),l=-l):i.length()>0&&i.append(" + "),(a===0||l!==1)&&i.append(l),a!==0&&(a===1?i.append("x"):(i.append("x^"),i.append(a))))}return i.toString()}}class A_{add(i,a){return(i+a)%this.modulus}subtract(i,a){return(this.modulus+i-a)%this.modulus}exp(i){return this.expTable[i]}log(i){if(i===0)throw new x;return this.logTable[i]}inverse(i){if(i===0)throw new Dr;return this.expTable[this.modulus-this.logTable[i]-1]}multiply(i,a){return i===0||a===0?0:this.expTable[(this.logTable[i]+this.logTable[a])%(this.modulus-1)]}getSize(){return this.modulus}equals(i){return i===this}}class vf extends A_{constructor(i,a){super(),this.modulus=i,this.expTable=new Int32Array(i),this.logTable=new Int32Array(i);let l=1;for(let u=0;u<i;u++)this.expTable[u]=l,l=l*a%i;for(let u=0;u<i-1;u++)this.logTable[this.expTable[u]]=u;this.zero=new fn(this,new Int32Array([0])),this.one=new fn(this,new Int32Array([1]))}getZero(){return this.zero}getOne(){return this.one}buildMonomial(i,a){if(i<0)throw new x;if(a===0)return this.zero;let l=new Int32Array(i+1);return l[0]=a,new fn(this,l)}}vf.PDF417_GF=new vf(ke.NUMBER_OF_CODEWORDS,3);class Tm{constructor(){this.field=vf.PDF417_GF}decode(i,a,l){let u=new fn(this.field,i),d=new Int32Array(a),f=!1;for(let V=a;V>0;V--){let z=u.evaluateAt(this.field.exp(V));d[a-V]=z,z!==0&&(f=!0)}if(!f)return 0;let m=this.field.getOne();if(l!=null)for(const V of l){let z=this.field.exp(i.length-1-V),G=new fn(this.field,new Int32Array([this.field.subtract(0,z),1]));m=m.multiply(G)}let w=new fn(this.field,d),v=this.runEuclideanAlgorithm(this.field.buildMonomial(a,1),w,a),C=v[0],O=v[1],k=this.findErrorLocations(C),L=this.findErrorMagnitudes(O,C,k);for(let V=0;V<k.length;V++){let z=i.length-1-this.field.log(k[V]);if(z<0)throw b.getChecksumInstance();i[z]=this.field.subtract(i[z],L[V])}return k.length}runEuclideanAlgorithm(i,a,l){if(i.getDegree()<a.getDegree()){let k=i;i=a,a=k}let u=i,d=a,f=this.field.getZero(),m=this.field.getOne();for(;d.getDegree()>=Math.round(l/2);){let k=u,L=f;if(u=d,f=m,u.isZero())throw b.getChecksumInstance();d=k;let V=this.field.getZero(),z=u.getCoefficient(u.getDegree()),G=this.field.inverse(z);for(;d.getDegree()>=u.getDegree()&&!d.isZero();){let K=d.getDegree()-u.getDegree(),oe=this.field.multiply(d.getCoefficient(d.getDegree()),G);V=V.add(this.field.buildMonomial(K,oe)),d=d.subtract(u.multiplyByMonomial(K,oe))}m=V.multiply(f).subtract(L).negative()}let w=m.getCoefficient(0);if(w===0)throw b.getChecksumInstance();let v=this.field.inverse(w),C=m.multiply(v),O=d.multiply(v);return[C,O]}findErrorLocations(i){let a=i.getDegree(),l=new Int32Array(a),u=0;for(let d=1;d<this.field.getSize()&&u<a;d++)i.evaluateAt(d)===0&&(l[u]=this.field.inverse(d),u++);if(u!==a)throw b.getChecksumInstance();return l}findErrorMagnitudes(i,a,l){let u=a.getDegree(),d=new Int32Array(u);for(let v=1;v<=u;v++)d[u-v]=this.field.multiply(v,a.getCoefficient(v));let f=new fn(this.field,d),m=l.length,w=new Int32Array(m);for(let v=0;v<m;v++){let C=this.field.inverse(l[v]),O=this.field.subtract(0,i.evaluateAt(C)),k=this.field.inverse(f.evaluateAt(C));w[v]=this.field.multiply(O,k)}return w}}class lo{constructor(i,a,l,u,d){i instanceof lo?this.constructor_2(i):this.constructor_1(i,a,l,u,d)}constructor_1(i,a,l,u,d){const f=a==null||l==null,m=u==null||d==null;if(f&&m)throw new $;f?(a=new ye(0,u.getY()),l=new ye(0,d.getY())):m&&(u=new ye(i.getWidth()-1,a.getY()),d=new ye(i.getWidth()-1,l.getY())),this.image=i,this.topLeft=a,this.bottomLeft=l,this.topRight=u,this.bottomRight=d,this.minX=Math.trunc(Math.min(a.getX(),l.getX())),this.maxX=Math.trunc(Math.max(u.getX(),d.getX())),this.minY=Math.trunc(Math.min(a.getY(),u.getY())),this.maxY=Math.trunc(Math.max(l.getY(),d.getY()))}constructor_2(i){this.image=i.image,this.topLeft=i.getTopLeft(),this.bottomLeft=i.getBottomLeft(),this.topRight=i.getTopRight(),this.bottomRight=i.getBottomRight(),this.minX=i.getMinX(),this.maxX=i.getMaxX(),this.minY=i.getMinY(),this.maxY=i.getMaxY()}static merge(i,a){return i==null?a:a==null?i:new lo(i.image,i.topLeft,i.bottomLeft,a.topRight,a.bottomRight)}addMissingRows(i,a,l){let u=this.topLeft,d=this.bottomLeft,f=this.topRight,m=this.bottomRight;if(i>0){let w=l?this.topLeft:this.topRight,v=Math.trunc(w.getY()-i);v<0&&(v=0);let C=new ye(w.getX(),v);l?u=C:f=C}if(a>0){let w=l?this.bottomLeft:this.bottomRight,v=Math.trunc(w.getY()+a);v>=this.image.getHeight()&&(v=this.image.getHeight()-1);let C=new ye(w.getX(),v);l?d=C:m=C}return new lo(this.image,u,d,f,m)}getMinX(){return this.minX}getMaxX(){return this.maxX}getMinY(){return this.minY}getMaxY(){return this.maxY}getTopLeft(){return this.topLeft}getTopRight(){return this.topRight}getBottomLeft(){return this.bottomLeft}getBottomRight(){return this.bottomRight}}class __{constructor(i,a,l,u){this.columnCount=i,this.errorCorrectionLevel=u,this.rowCountUpperPart=a,this.rowCountLowerPart=l,this.rowCount=a+l}getColumnCount(){return this.columnCount}getErrorCorrectionLevel(){return this.errorCorrectionLevel}getRowCount(){return this.rowCount}getRowCountUpperPart(){return this.rowCountUpperPart}getRowCountLowerPart(){return this.rowCountLowerPart}}class Rl{constructor(){this.buffer=""}static form(i,a){let l=-1;function u(f,m,w,v,C,O){if(f==="%%")return"%";if(a[++l]===void 0)return;f=v?parseInt(v.substr(1)):void 0;let k=C?parseInt(C.substr(1)):void 0,L;switch(O){case"s":L=a[l];break;case"c":L=a[l][0];break;case"f":L=parseFloat(a[l]).toFixed(f);break;case"p":L=parseFloat(a[l]).toPrecision(f);break;case"e":L=parseFloat(a[l]).toExponential(f);break;case"x":L=parseInt(a[l]).toString(k||16);break;case"d":L=parseFloat(parseInt(a[l],k||10).toPrecision(f)).toFixed(0);break}L=typeof L=="object"?JSON.stringify(L):(+L).toString(k);let V=parseInt(w),z=w&&w[0]+""=="0"?"0":" ";for(;L.length<V;)L=m!==void 0?L+z:z+L;return L}let d=/%(-)?(0?[0-9]+)?([.][0-9]+)?([#][0-9]+)?([scfpexd%])/g;return i.replace(d,u)}format(i,...a){this.buffer+=Rl.form(i,a)}toString(){return this.buffer}}class Nl{constructor(i){this.boundingBox=new lo(i),this.codewords=new Array(i.getMaxY()-i.getMinY()+1)}getCodewordNearby(i){let a=this.getCodeword(i);if(a!=null)return a;for(let l=1;l<Nl.MAX_NEARBY_DISTANCE;l++){let u=this.imageRowToCodewordIndex(i)-l;if(u>=0&&(a=this.codewords[u],a!=null)||(u=this.imageRowToCodewordIndex(i)+l,u<this.codewords.length&&(a=this.codewords[u],a!=null)))return a}return null}imageRowToCodewordIndex(i){return i-this.boundingBox.getMinY()}setCodeword(i,a){this.codewords[this.imageRowToCodewordIndex(i)]=a}getCodeword(i){return this.codewords[this.imageRowToCodewordIndex(i)]}getBoundingBox(){return this.boundingBox}getCodewords(){return this.codewords}toString(){const i=new Rl;let a=0;for(const l of this.codewords){if(l==null){i.format("%3d:    |   %n",a++);continue}i.format("%3d: %3d|%3d%n",a++,l.getRowNumber(),l.getValue())}return i.toString()}}Nl.MAX_NEARBY_DISTANCE=5;class Ol{constructor(){this.values=new Map}setValue(i){i=Math.trunc(i);let a=this.values.get(i);a==null&&(a=0),a++,this.values.set(i,a)}getValue(){let i=-1,a=new Array;for(const[l,u]of this.values.entries()){const d={getKey:()=>l,getValue:()=>u};d.getValue()>i?(i=d.getValue(),a=[],a.push(d.getKey())):d.getValue()===i&&a.push(d.getKey())}return ke.toIntArray(a)}getConfidence(i){return this.values.get(i)}}class Im extends Nl{constructor(i,a){super(i),this._isLeft=a}setRowNumbers(){for(let i of this.getCodewords())i!=null&&i.setRowNumberAsRowIndicatorColumn()}adjustCompleteIndicatorColumnRowNumbers(i){let a=this.getCodewords();this.setRowNumbers(),this.removeIncorrectCodewords(a,i);let l=this.getBoundingBox(),u=this._isLeft?l.getTopLeft():l.getTopRight(),d=this._isLeft?l.getBottomLeft():l.getBottomRight(),f=this.imageRowToCodewordIndex(Math.trunc(u.getY())),m=this.imageRowToCodewordIndex(Math.trunc(d.getY())),w=-1,v=1,C=0;for(let O=f;O<m;O++){if(a[O]==null)continue;let k=a[O],L=k.getRowNumber()-w;if(L===0)C++;else if(L===1)v=Math.max(v,C),C=1,w=k.getRowNumber();else if(L<0||k.getRowNumber()>=i.getRowCount()||L>O)a[O]=null;else{let V;v>2?V=(v-2)*L:V=L;let z=V>=O;for(let G=1;G<=V&&!z;G++)z=a[O-G]!=null;z?a[O]=null:(w=k.getRowNumber(),C=1)}}}getRowHeights(){let i=this.getBarcodeMetadata();if(i==null)return null;this.adjustIncompleteIndicatorColumnRowNumbers(i);let a=new Int32Array(i.getRowCount());for(let l of this.getCodewords())if(l!=null){let u=l.getRowNumber();if(u>=a.length)continue;a[u]++}return a}adjustIncompleteIndicatorColumnRowNumbers(i){let a=this.getBoundingBox(),l=this._isLeft?a.getTopLeft():a.getTopRight(),u=this._isLeft?a.getBottomLeft():a.getBottomRight(),d=this.imageRowToCodewordIndex(Math.trunc(l.getY())),f=this.imageRowToCodewordIndex(Math.trunc(u.getY())),m=this.getCodewords(),w=-1;for(let v=d;v<f;v++){if(m[v]==null)continue;let C=m[v];C.setRowNumberAsRowIndicatorColumn();let O=C.getRowNumber()-w;O===0||(O===1?w=C.getRowNumber():C.getRowNumber()>=i.getRowCount()?m[v]=null:w=C.getRowNumber())}}getBarcodeMetadata(){let i=this.getCodewords(),a=new Ol,l=new Ol,u=new Ol,d=new Ol;for(let m of i){if(m==null)continue;m.setRowNumberAsRowIndicatorColumn();let w=m.getValue()%30,v=m.getRowNumber();switch(this._isLeft||(v+=2),v%3){case 0:l.setValue(w*3+1);break;case 1:d.setValue(w/3),u.setValue(w%3);break;case 2:a.setValue(w+1);break}}if(a.getValue().length===0||l.getValue().length===0||u.getValue().length===0||d.getValue().length===0||a.getValue()[0]<1||l.getValue()[0]+u.getValue()[0]<ke.MIN_ROWS_IN_BARCODE||l.getValue()[0]+u.getValue()[0]>ke.MAX_ROWS_IN_BARCODE)return null;let f=new __(a.getValue()[0],l.getValue()[0],u.getValue()[0],d.getValue()[0]);return this.removeIncorrectCodewords(i,f),f}removeIncorrectCodewords(i,a){for(let l=0;l<i.length;l++){let u=i[l];if(i[l]==null)continue;let d=u.getValue()%30,f=u.getRowNumber();if(f>a.getRowCount()){i[l]=null;continue}switch(this._isLeft||(f+=2),f%3){case 0:d*3+1!==a.getRowCountUpperPart()&&(i[l]=null);break;case 1:(Math.trunc(d/3)!==a.getErrorCorrectionLevel()||d%3!==a.getRowCountLowerPart())&&(i[l]=null);break;case 2:d+1!==a.getColumnCount()&&(i[l]=null);break}}}isLeft(){return this._isLeft}toString(){return"IsLeft: "+this._isLeft+`
`+super.toString()}}class kl{constructor(i,a){this.ADJUST_ROW_NUMBER_SKIP=2,this.barcodeMetadata=i,this.barcodeColumnCount=i.getColumnCount(),this.boundingBox=a,this.detectionResultColumns=new Array(this.barcodeColumnCount+2)}getDetectionResultColumns(){this.adjustIndicatorColumnRowNumbers(this.detectionResultColumns[0]),this.adjustIndicatorColumnRowNumbers(this.detectionResultColumns[this.barcodeColumnCount+1]);let i=ke.MAX_CODEWORDS_IN_BARCODE,a;do a=i,i=this.adjustRowNumbersAndGetCount();while(i>0&&i<a);return this.detectionResultColumns}adjustIndicatorColumnRowNumbers(i){i!=null&&i.adjustCompleteIndicatorColumnRowNumbers(this.barcodeMetadata)}adjustRowNumbersAndGetCount(){let i=this.adjustRowNumbersByRow();if(i===0)return 0;for(let a=1;a<this.barcodeColumnCount+1;a++){let l=this.detectionResultColumns[a].getCodewords();for(let u=0;u<l.length;u++)l[u]!=null&&(l[u].hasValidRowNumber()||this.adjustRowNumbers(a,u,l))}return i}adjustRowNumbersByRow(){return this.adjustRowNumbersFromBothRI(),this.adjustRowNumbersFromLRI()+this.adjustRowNumbersFromRRI()}adjustRowNumbersFromBothRI(){if(this.detectionResultColumns[0]==null||this.detectionResultColumns[this.barcodeColumnCount+1]==null)return;let i=this.detectionResultColumns[0].getCodewords(),a=this.detectionResultColumns[this.barcodeColumnCount+1].getCodewords();for(let l=0;l<i.length;l++)if(i[l]!=null&&a[l]!=null&&i[l].getRowNumber()===a[l].getRowNumber())for(let u=1;u<=this.barcodeColumnCount;u++){let d=this.detectionResultColumns[u].getCodewords()[l];d!=null&&(d.setRowNumber(i[l].getRowNumber()),d.hasValidRowNumber()||(this.detectionResultColumns[u].getCodewords()[l]=null))}}adjustRowNumbersFromRRI(){if(this.detectionResultColumns[this.barcodeColumnCount+1]==null)return 0;let i=0,a=this.detectionResultColumns[this.barcodeColumnCount+1].getCodewords();for(let l=0;l<a.length;l++){if(a[l]==null)continue;let u=a[l].getRowNumber(),d=0;for(let f=this.barcodeColumnCount+1;f>0&&d<this.ADJUST_ROW_NUMBER_SKIP;f--){let m=this.detectionResultColumns[f].getCodewords()[l];m!=null&&(d=kl.adjustRowNumberIfValid(u,d,m),m.hasValidRowNumber()||i++)}}return i}adjustRowNumbersFromLRI(){if(this.detectionResultColumns[0]==null)return 0;let i=0,a=this.detectionResultColumns[0].getCodewords();for(let l=0;l<a.length;l++){if(a[l]==null)continue;let u=a[l].getRowNumber(),d=0;for(let f=1;f<this.barcodeColumnCount+1&&d<this.ADJUST_ROW_NUMBER_SKIP;f++){let m=this.detectionResultColumns[f].getCodewords()[l];m!=null&&(d=kl.adjustRowNumberIfValid(u,d,m),m.hasValidRowNumber()||i++)}}return i}static adjustRowNumberIfValid(i,a,l){return l==null||l.hasValidRowNumber()||(l.isValidRowNumber(i)?(l.setRowNumber(i),a=0):++a),a}adjustRowNumbers(i,a,l){if(!this.detectionResultColumns[i-1])return;let u=l[a],d=this.detectionResultColumns[i-1].getCodewords(),f=d;this.detectionResultColumns[i+1]!=null&&(f=this.detectionResultColumns[i+1].getCodewords());let m=new Array(14);m[2]=d[a],m[3]=f[a],a>0&&(m[0]=l[a-1],m[4]=d[a-1],m[5]=f[a-1]),a>1&&(m[8]=l[a-2],m[10]=d[a-2],m[11]=f[a-2]),a<l.length-1&&(m[1]=l[a+1],m[6]=d[a+1],m[7]=f[a+1]),a<l.length-2&&(m[9]=l[a+2],m[12]=d[a+2],m[13]=f[a+2]);for(let w of m)if(kl.adjustRowNumber(u,w))return}static adjustRowNumber(i,a){return a==null?!1:a.hasValidRowNumber()&&a.getBucket()===i.getBucket()?(i.setRowNumber(a.getRowNumber()),!0):!1}getBarcodeColumnCount(){return this.barcodeColumnCount}getBarcodeRowCount(){return this.barcodeMetadata.getRowCount()}getBarcodeECLevel(){return this.barcodeMetadata.getErrorCorrectionLevel()}setBoundingBox(i){this.boundingBox=i}getBoundingBox(){return this.boundingBox}setDetectionResultColumn(i,a){this.detectionResultColumns[i]=a}getDetectionResultColumn(i){return this.detectionResultColumns[i]}toString(){let i=this.detectionResultColumns[0];i==null&&(i=this.detectionResultColumns[this.barcodeColumnCount+1]);let a=new Rl;for(let l=0;l<i.getCodewords().length;l++){a.format("CW %3d:",l);for(let u=0;u<this.barcodeColumnCount+2;u++){if(this.detectionResultColumns[u]==null){a.format("    |   ");continue}let d=this.detectionResultColumns[u].getCodewords()[l];if(d==null){a.format("    |   ");continue}a.format(" %3d|%3d",d.getRowNumber(),d.getValue())}a.format("%n")}return a.toString()}}class Ml{constructor(i,a,l,u){this.rowNumber=Ml.BARCODE_ROW_UNKNOWN,this.startX=Math.trunc(i),this.endX=Math.trunc(a),this.bucket=Math.trunc(l),this.value=Math.trunc(u)}hasValidRowNumber(){return this.isValidRowNumber(this.rowNumber)}isValidRowNumber(i){return i!==Ml.BARCODE_ROW_UNKNOWN&&this.bucket===i%3*3}setRowNumberAsRowIndicatorColumn(){this.rowNumber=Math.trunc(Math.trunc(this.value/30)*3+Math.trunc(this.bucket/3))}getWidth(){return this.endX-this.startX}getStartX(){return this.startX}getEndX(){return this.endX}getBucket(){return this.bucket}getValue(){return this.value}getRowNumber(){return this.rowNumber}setRowNumber(i){this.rowNumber=i}toString(){return this.rowNumber+"|"+this.value}}Ml.BARCODE_ROW_UNKNOWN=-1;class $n{static initialize(){for(let i=0;i<ke.SYMBOL_TABLE.length;i++){let a=ke.SYMBOL_TABLE[i],l=a&1;for(let u=0;u<ke.BARS_IN_MODULE;u++){let d=0;for(;(a&1)===l;)d+=1,a>>=1;l=a&1,$n.RATIOS_TABLE[i]||($n.RATIOS_TABLE[i]=new Array(ke.BARS_IN_MODULE)),$n.RATIOS_TABLE[i][ke.BARS_IN_MODULE-u-1]=Math.fround(d/ke.MODULES_IN_CODEWORD)}}this.bSymbolTableReady=!0}static getDecodedValue(i){let a=$n.getDecodedCodewordValue($n.sampleBitCounts(i));return a!==-1?a:$n.getClosestDecodedValue(i)}static sampleBitCounts(i){let a=He.sum(i),l=new Int32Array(ke.BARS_IN_MODULE),u=0,d=0;for(let f=0;f<ke.MODULES_IN_CODEWORD;f++){let m=a/(2*ke.MODULES_IN_CODEWORD)+f*a/ke.MODULES_IN_CODEWORD;d+i[u]<=m&&(d+=i[u],u++),l[u]++}return l}static getDecodedCodewordValue(i){let a=$n.getBitValue(i);return ke.getCodeword(a)===-1?-1:a}static getBitValue(i){let a=0;for(let l=0;l<i.length;l++)for(let u=0;u<i[l];u++)a=a<<1|(l%2===0?1:0);return Math.trunc(a)}static getClosestDecodedValue(i){let a=He.sum(i),l=new Array(ke.BARS_IN_MODULE);if(a>1)for(let f=0;f<l.length;f++)l[f]=Math.fround(i[f]/a);let u=ro.MAX_VALUE,d=-1;this.bSymbolTableReady||$n.initialize();for(let f=0;f<$n.RATIOS_TABLE.length;f++){let m=0,w=$n.RATIOS_TABLE[f];for(let v=0;v<ke.BARS_IN_MODULE;v++){let C=Math.fround(w[v]-l[v]);if(m+=Math.fround(C*C),m>=u)break}m<u&&(u=m,d=ke.SYMBOL_TABLE[f])}return d}}$n.bSymbolTableReady=!1,$n.RATIOS_TABLE=new Array(ke.SYMBOL_TABLE.length).map(N=>new Array(ke.BARS_IN_MODULE));class Rm{constructor(){this.segmentCount=-1,this.fileSize=-1,this.timestamp=-1,this.checksum=-1}getSegmentIndex(){return this.segmentIndex}setSegmentIndex(i){this.segmentIndex=i}getFileId(){return this.fileId}setFileId(i){this.fileId=i}getOptionalData(){return this.optionalData}setOptionalData(i){this.optionalData=i}isLastSegment(){return this.lastSegment}setLastSegment(i){this.lastSegment=i}getSegmentCount(){return this.segmentCount}setSegmentCount(i){this.segmentCount=i}getSender(){return this.sender||null}setSender(i){this.sender=i}getAddressee(){return this.addressee||null}setAddressee(i){this.addressee=i}getFileName(){return this.fileName}setFileName(i){this.fileName=i}getFileSize(){return this.fileSize}setFileSize(i){this.fileSize=i}getChecksum(){return this.checksum}setChecksum(i){this.checksum=i}getTimestamp(){return this.timestamp}setTimestamp(i){this.timestamp=i}}class Nm{static parseLong(i,a=void 0){return parseInt(i,a)}}class Om extends p{}Om.kind="NullPointerException";class T_{writeBytes(i){this.writeBytesOffset(i,0,i.length)}writeBytesOffset(i,a,l){if(i==null)throw new Om;if(a<0||a>i.length||l<0||a+l>i.length||a+l<0)throw new R;if(l===0)return;for(let u=0;u<l;u++)this.write(i[a+u])}flush(){}close(){}}class I_ extends p{}class R_ extends T_{constructor(i=32){if(super(),this.count=0,i<0)throw new x("Negative initial size: "+i);this.buf=new Uint8Array(i)}ensureCapacity(i){i-this.buf.length>0&&this.grow(i)}grow(i){let l=this.buf.length<<1;if(l-i<0&&(l=i),l<0){if(i<0)throw new I_;l=T.MAX_VALUE}this.buf=_.copyOfUint8Array(this.buf,l)}write(i){this.ensureCapacity(this.count+1),this.buf[this.count]=i,this.count+=1}writeBytesOffset(i,a,l){if(a<0||a>i.length||l<0||a+l-i.length>0)throw new R;this.ensureCapacity(this.count+l),S.arraycopy(i,a,this.buf,this.count,l),this.count+=l}writeTo(i){i.writeBytesOffset(this.buf,0,this.count)}reset(){this.count=0}toByteArray(){return _.copyOfUint8Array(this.buf,this.count)}size(){return this.count}toString(i){return i?typeof i=="string"?this.toString_string(i):this.toString_number(i):this.toString_void()}toString_void(){return new String(this.buf).toString()}toString_string(i){return new String(this.buf).toString()}toString_number(i){return new String(this.buf).toString()}close(){}}var ut;(function(N){N[N.ALPHA=0]="ALPHA",N[N.LOWER=1]="LOWER",N[N.MIXED=2]="MIXED",N[N.PUNCT=3]="PUNCT",N[N.ALPHA_SHIFT=4]="ALPHA_SHIFT",N[N.PUNCT_SHIFT=5]="PUNCT_SHIFT"})(ut||(ut={}));function km(){if(typeof window<"u")return window.BigInt||null;if(typeof Ll<"u")return Ll.BigInt||null;if(typeof self<"u")return self.BigInt||null;throw new Error("Can't search globals for BigInt!")}let Cu;function os(N){if(typeof Cu>"u"&&(Cu=km()),Cu===null)throw new Error("BigInt is not supported!");return Cu(N)}function N_(){let N=[];N[0]=os(1);let i=os(900);N[1]=i;for(let a=2;a<16;a++)N[a]=N[a-1]*i;return N}class X{static decode(i,a){let l=new fe(""),u=H.ISO8859_1;l.enableDecoding(u);let d=1,f=i[d++],m=new Rm;for(;d<i[0];){switch(f){case X.TEXT_COMPACTION_MODE_LATCH:d=X.textCompaction(i,d,l);break;case X.BYTE_COMPACTION_MODE_LATCH:case X.BYTE_COMPACTION_MODE_LATCH_6:d=X.byteCompaction(f,i,u,d,l);break;case X.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:l.append(i[d++]);break;case X.NUMERIC_COMPACTION_MODE_LATCH:d=X.numericCompaction(i,d,l);break;case X.ECI_CHARSET:H.getCharacterSetECIByValue(i[d++]);break;case X.ECI_GENERAL_PURPOSE:d+=2;break;case X.ECI_USER_DEFINED:d++;break;case X.BEGIN_MACRO_PDF417_CONTROL_BLOCK:d=X.decodeMacroBlock(i,d,m);break;case X.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case X.MACRO_PDF417_TERMINATOR:throw new B;default:d--,d=X.textCompaction(i,d,l);break}if(d<i.length)f=i[d++];else throw B.getFormatInstance()}if(l.length()===0)throw B.getFormatInstance();let w=new Vn(null,l.toString(),null,a);return w.setOther(m),w}static decodeMacroBlock(i,a,l){if(a+X.NUMBER_OF_SEQUENCE_CODEWORDS>i[0])throw B.getFormatInstance();let u=new Int32Array(X.NUMBER_OF_SEQUENCE_CODEWORDS);for(let m=0;m<X.NUMBER_OF_SEQUENCE_CODEWORDS;m++,a++)u[m]=i[a];l.setSegmentIndex(T.parseInt(X.decodeBase900toBase10(u,X.NUMBER_OF_SEQUENCE_CODEWORDS)));let d=new fe;a=X.textCompaction(i,a,d),l.setFileId(d.toString());let f=-1;for(i[a]===X.BEGIN_MACRO_PDF417_OPTIONAL_FIELD&&(f=a+1);a<i[0];)switch(i[a]){case X.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:switch(a++,i[a]){case X.MACRO_PDF417_OPTIONAL_FIELD_FILE_NAME:let m=new fe;a=X.textCompaction(i,a+1,m),l.setFileName(m.toString());break;case X.MACRO_PDF417_OPTIONAL_FIELD_SENDER:let w=new fe;a=X.textCompaction(i,a+1,w),l.setSender(w.toString());break;case X.MACRO_PDF417_OPTIONAL_FIELD_ADDRESSEE:let v=new fe;a=X.textCompaction(i,a+1,v),l.setAddressee(v.toString());break;case X.MACRO_PDF417_OPTIONAL_FIELD_SEGMENT_COUNT:let C=new fe;a=X.numericCompaction(i,a+1,C),l.setSegmentCount(T.parseInt(C.toString()));break;case X.MACRO_PDF417_OPTIONAL_FIELD_TIME_STAMP:let O=new fe;a=X.numericCompaction(i,a+1,O),l.setTimestamp(Nm.parseLong(O.toString()));break;case X.MACRO_PDF417_OPTIONAL_FIELD_CHECKSUM:let k=new fe;a=X.numericCompaction(i,a+1,k),l.setChecksum(T.parseInt(k.toString()));break;case X.MACRO_PDF417_OPTIONAL_FIELD_FILE_SIZE:let L=new fe;a=X.numericCompaction(i,a+1,L),l.setFileSize(Nm.parseLong(L.toString()));break;default:throw B.getFormatInstance()}break;case X.MACRO_PDF417_TERMINATOR:a++,l.setLastSegment(!0);break;default:throw B.getFormatInstance()}if(f!==-1){let m=a-f;l.isLastSegment()&&m--,l.setOptionalData(_.copyOfRange(i,f,f+m))}return a}static textCompaction(i,a,l){let u=new Int32Array((i[0]-a)*2),d=new Int32Array((i[0]-a)*2),f=0,m=!1;for(;a<i[0]&&!m;){let w=i[a++];if(w<X.TEXT_COMPACTION_MODE_LATCH)u[f]=w/30,u[f+1]=w%30,f+=2;else switch(w){case X.TEXT_COMPACTION_MODE_LATCH:u[f++]=X.TEXT_COMPACTION_MODE_LATCH;break;case X.BYTE_COMPACTION_MODE_LATCH:case X.BYTE_COMPACTION_MODE_LATCH_6:case X.NUMERIC_COMPACTION_MODE_LATCH:case X.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case X.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case X.MACRO_PDF417_TERMINATOR:a--,m=!0;break;case X.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:u[f]=X.MODE_SHIFT_TO_BYTE_COMPACTION_MODE,w=i[a++],d[f]=w,f++;break}}return X.decodeTextCompaction(u,d,f,l),a}static decodeTextCompaction(i,a,l,u){let d=ut.ALPHA,f=ut.ALPHA,m=0;for(;m<l;){let w=i[m],v="";switch(d){case ut.ALPHA:if(w<26)v=String.fromCharCode(65+w);else switch(w){case 26:v=" ";break;case X.LL:d=ut.LOWER;break;case X.ML:d=ut.MIXED;break;case X.PS:f=d,d=ut.PUNCT_SHIFT;break;case X.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:u.append(a[m]);break;case X.TEXT_COMPACTION_MODE_LATCH:d=ut.ALPHA;break}break;case ut.LOWER:if(w<26)v=String.fromCharCode(97+w);else switch(w){case 26:v=" ";break;case X.AS:f=d,d=ut.ALPHA_SHIFT;break;case X.ML:d=ut.MIXED;break;case X.PS:f=d,d=ut.PUNCT_SHIFT;break;case X.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:u.append(a[m]);break;case X.TEXT_COMPACTION_MODE_LATCH:d=ut.ALPHA;break}break;case ut.MIXED:if(w<X.PL)v=X.MIXED_CHARS[w];else switch(w){case X.PL:d=ut.PUNCT;break;case 26:v=" ";break;case X.LL:d=ut.LOWER;break;case X.AL:d=ut.ALPHA;break;case X.PS:f=d,d=ut.PUNCT_SHIFT;break;case X.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:u.append(a[m]);break;case X.TEXT_COMPACTION_MODE_LATCH:d=ut.ALPHA;break}break;case ut.PUNCT:if(w<X.PAL)v=X.PUNCT_CHARS[w];else switch(w){case X.PAL:d=ut.ALPHA;break;case X.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:u.append(a[m]);break;case X.TEXT_COMPACTION_MODE_LATCH:d=ut.ALPHA;break}break;case ut.ALPHA_SHIFT:if(d=f,w<26)v=String.fromCharCode(65+w);else switch(w){case 26:v=" ";break;case X.TEXT_COMPACTION_MODE_LATCH:d=ut.ALPHA;break}break;case ut.PUNCT_SHIFT:if(d=f,w<X.PAL)v=X.PUNCT_CHARS[w];else switch(w){case X.PAL:d=ut.ALPHA;break;case X.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:u.append(a[m]);break;case X.TEXT_COMPACTION_MODE_LATCH:d=ut.ALPHA;break}break}v!==""&&u.append(v),m++}}static byteCompaction(i,a,l,u,d){let f=new R_,m=0,w=0,v=!1;switch(i){case X.BYTE_COMPACTION_MODE_LATCH:let C=new Int32Array(6),O=a[u++];for(;u<a[0]&&!v;)switch(C[m++]=O,w=900*w+O,O=a[u++],O){case X.TEXT_COMPACTION_MODE_LATCH:case X.BYTE_COMPACTION_MODE_LATCH:case X.NUMERIC_COMPACTION_MODE_LATCH:case X.BYTE_COMPACTION_MODE_LATCH_6:case X.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case X.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case X.MACRO_PDF417_TERMINATOR:u--,v=!0;break;default:if(m%5===0&&m>0){for(let k=0;k<6;++k)f.write(Number(os(w)>>os(8*(5-k))));w=0,m=0}break}u===a[0]&&O<X.TEXT_COMPACTION_MODE_LATCH&&(C[m++]=O);for(let k=0;k<m;k++)f.write(C[k]);break;case X.BYTE_COMPACTION_MODE_LATCH_6:for(;u<a[0]&&!v;){let k=a[u++];if(k<X.TEXT_COMPACTION_MODE_LATCH)m++,w=900*w+k;else switch(k){case X.TEXT_COMPACTION_MODE_LATCH:case X.BYTE_COMPACTION_MODE_LATCH:case X.NUMERIC_COMPACTION_MODE_LATCH:case X.BYTE_COMPACTION_MODE_LATCH_6:case X.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case X.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case X.MACRO_PDF417_TERMINATOR:u--,v=!0;break}if(m%5===0&&m>0){for(let L=0;L<6;++L)f.write(Number(os(w)>>os(8*(5-L))));w=0,m=0}}break}return d.append(he.decode(f.toByteArray(),l)),u}static numericCompaction(i,a,l){let u=0,d=!1,f=new Int32Array(X.MAX_NUMERIC_CODEWORDS);for(;a<i[0]&&!d;){let m=i[a++];if(a===i[0]&&(d=!0),m<X.TEXT_COMPACTION_MODE_LATCH)f[u]=m,u++;else switch(m){case X.TEXT_COMPACTION_MODE_LATCH:case X.BYTE_COMPACTION_MODE_LATCH:case X.BYTE_COMPACTION_MODE_LATCH_6:case X.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case X.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case X.MACRO_PDF417_TERMINATOR:a--,d=!0;break}(u%X.MAX_NUMERIC_CODEWORDS===0||m===X.NUMERIC_COMPACTION_MODE_LATCH||d)&&u>0&&(l.append(X.decodeBase900toBase10(f,u)),u=0)}return a}static decodeBase900toBase10(i,a){let l=os(0);for(let d=0;d<a;d++)l+=X.EXP900[a-d-1]*os(i[d]);let u=l.toString();if(u.charAt(0)!=="1")throw new B;return u.substring(1)}}X.TEXT_COMPACTION_MODE_LATCH=900,X.BYTE_COMPACTION_MODE_LATCH=901,X.NUMERIC_COMPACTION_MODE_LATCH=902,X.BYTE_COMPACTION_MODE_LATCH_6=924,X.ECI_USER_DEFINED=925,X.ECI_GENERAL_PURPOSE=926,X.ECI_CHARSET=927,X.BEGIN_MACRO_PDF417_CONTROL_BLOCK=928,X.BEGIN_MACRO_PDF417_OPTIONAL_FIELD=923,X.MACRO_PDF417_TERMINATOR=922,X.MODE_SHIFT_TO_BYTE_COMPACTION_MODE=913,X.MAX_NUMERIC_CODEWORDS=15,X.MACRO_PDF417_OPTIONAL_FIELD_FILE_NAME=0,X.MACRO_PDF417_OPTIONAL_FIELD_SEGMENT_COUNT=1,X.MACRO_PDF417_OPTIONAL_FIELD_TIME_STAMP=2,X.MACRO_PDF417_OPTIONAL_FIELD_SENDER=3,X.MACRO_PDF417_OPTIONAL_FIELD_ADDRESSEE=4,X.MACRO_PDF417_OPTIONAL_FIELD_FILE_SIZE=5,X.MACRO_PDF417_OPTIONAL_FIELD_CHECKSUM=6,X.PL=25,X.LL=27,X.AS=27,X.ML=28,X.AL=28,X.PS=29,X.PAL=29,X.PUNCT_CHARS=`;<>@[\\]_\`~!\r	,:
-.$/"|*()?{}'`,X.MIXED_CHARS="0123456789&\r	,:#-.$/+%*=^",X.EXP900=km()?N_():[],X.NUMBER_OF_SEQUENCE_CODEWORDS=2;class $e{constructor(){}static decode(i,a,l,u,d,f,m){let w=new lo(i,a,l,u,d),v=null,C=null,O;for(let V=!0;;V=!1){if(a!=null&&(v=$e.getRowIndicatorColumn(i,w,a,!0,f,m)),u!=null&&(C=$e.getRowIndicatorColumn(i,w,u,!1,f,m)),O=$e.merge(v,C),O==null)throw $.getNotFoundInstance();let z=O.getBoundingBox();if(V&&z!=null&&(z.getMinY()<w.getMinY()||z.getMaxY()>w.getMaxY()))w=z;else break}O.setBoundingBox(w);let k=O.getBarcodeColumnCount()+1;O.setDetectionResultColumn(0,v),O.setDetectionResultColumn(k,C);let L=v!=null;for(let V=1;V<=k;V++){let z=L?V:k-V;if(O.getDetectionResultColumn(z)!==void 0)continue;let G;z===0||z===k?G=new Im(w,z===0):G=new Nl(w),O.setDetectionResultColumn(z,G);let K=-1,oe=K;for(let ae=w.getMinY();ae<=w.getMaxY();ae++){if(K=$e.getStartColumn(O,z,ae,L),K<0||K>w.getMaxX()){if(oe===-1)continue;K=oe}let re=$e.detectCodeword(i,w.getMinX(),w.getMaxX(),L,K,ae,f,m);re!=null&&(G.setCodeword(ae,re),oe=K,f=Math.min(f,re.getWidth()),m=Math.max(m,re.getWidth()))}}return $e.createDecoderResult(O)}static merge(i,a){if(i==null&&a==null)return null;let l=$e.getBarcodeMetadata(i,a);if(l==null)return null;let u=lo.merge($e.adjustBoundingBox(i),$e.adjustBoundingBox(a));return new kl(l,u)}static adjustBoundingBox(i){if(i==null)return null;let a=i.getRowHeights();if(a==null)return null;let l=$e.getMax(a),u=0;for(let m of a)if(u+=l-m,m>0)break;let d=i.getCodewords();for(let m=0;u>0&&d[m]==null;m++)u--;let f=0;for(let m=a.length-1;m>=0&&(f+=l-a[m],!(a[m]>0));m--);for(let m=d.length-1;f>0&&d[m]==null;m--)f--;return i.getBoundingBox().addMissingRows(u,f,i.isLeft())}static getMax(i){let a=-1;for(let l of i)a=Math.max(a,l);return a}static getBarcodeMetadata(i,a){let l;if(i==null||(l=i.getBarcodeMetadata())==null)return a==null?null:a.getBarcodeMetadata();let u;return a==null||(u=a.getBarcodeMetadata())==null?l:l.getColumnCount()!==u.getColumnCount()&&l.getErrorCorrectionLevel()!==u.getErrorCorrectionLevel()&&l.getRowCount()!==u.getRowCount()?null:l}static getRowIndicatorColumn(i,a,l,u,d,f){let m=new Im(a,u);for(let w=0;w<2;w++){let v=w===0?1:-1,C=Math.trunc(Math.trunc(l.getX()));for(let O=Math.trunc(Math.trunc(l.getY()));O<=a.getMaxY()&&O>=a.getMinY();O+=v){let k=$e.detectCodeword(i,0,i.getWidth(),u,C,O,d,f);k!=null&&(m.setCodeword(O,k),u?C=k.getStartX():C=k.getEndX())}}return m}static adjustCodewordCount(i,a){let l=a[0][1],u=l.getValue(),d=i.getBarcodeColumnCount()*i.getBarcodeRowCount()-$e.getNumberOfECCodeWords(i.getBarcodeECLevel());if(u.length===0){if(d<1||d>ke.MAX_CODEWORDS_IN_BARCODE)throw $.getNotFoundInstance();l.setValue(d)}else u[0]!==d&&l.setValue(d)}static createDecoderResult(i){let a=$e.createBarcodeMatrix(i);$e.adjustCodewordCount(i,a);let l=new Array,u=new Int32Array(i.getBarcodeRowCount()*i.getBarcodeColumnCount()),d=[],f=new Array;for(let w=0;w<i.getBarcodeRowCount();w++)for(let v=0;v<i.getBarcodeColumnCount();v++){let C=a[w][v+1].getValue(),O=w*i.getBarcodeColumnCount()+v;C.length===0?l.push(O):C.length===1?u[O]=C[0]:(f.push(O),d.push(C))}let m=new Array(d.length);for(let w=0;w<m.length;w++)m[w]=d[w];return $e.createDecoderResultFromAmbiguousValues(i.getBarcodeECLevel(),u,ke.toIntArray(l),ke.toIntArray(f),m)}static createDecoderResultFromAmbiguousValues(i,a,l,u,d){let f=new Int32Array(u.length),m=100;for(;m-- >0;){for(let w=0;w<f.length;w++)a[u[w]]=d[w][f[w]];try{return $e.decodeCodewords(a,i,l)}catch(w){if(!(w instanceof b))throw w}if(f.length===0)throw b.getChecksumInstance();for(let w=0;w<f.length;w++)if(f[w]<d[w].length-1){f[w]++;break}else if(f[w]=0,w===f.length-1)throw b.getChecksumInstance()}throw b.getChecksumInstance()}static createBarcodeMatrix(i){let a=Array.from({length:i.getBarcodeRowCount()},()=>new Array(i.getBarcodeColumnCount()+2));for(let u=0;u<a.length;u++)for(let d=0;d<a[u].length;d++)a[u][d]=new Ol;let l=0;for(let u of i.getDetectionResultColumns()){if(u!=null){for(let d of u.getCodewords())if(d!=null){let f=d.getRowNumber();if(f>=0){if(f>=a.length)continue;a[f][l].setValue(d.getValue())}}}l++}return a}static isValidBarcodeColumn(i,a){return a>=0&&a<=i.getBarcodeColumnCount()+1}static getStartColumn(i,a,l,u){let d=u?1:-1,f=null;if($e.isValidBarcodeColumn(i,a-d)&&(f=i.getDetectionResultColumn(a-d).getCodeword(l)),f!=null)return u?f.getEndX():f.getStartX();if(f=i.getDetectionResultColumn(a).getCodewordNearby(l),f!=null)return u?f.getStartX():f.getEndX();if($e.isValidBarcodeColumn(i,a-d)&&(f=i.getDetectionResultColumn(a-d).getCodewordNearby(l)),f!=null)return u?f.getEndX():f.getStartX();let m=0;for(;$e.isValidBarcodeColumn(i,a-d);){a-=d;for(let w of i.getDetectionResultColumn(a).getCodewords())if(w!=null)return(u?w.getEndX():w.getStartX())+d*m*(w.getEndX()-w.getStartX());m++}return u?i.getBoundingBox().getMinX():i.getBoundingBox().getMaxX()}static detectCodeword(i,a,l,u,d,f,m,w){d=$e.adjustCodewordStartColumn(i,a,l,u,d,f);let v=$e.getModuleBitCount(i,a,l,u,d,f);if(v==null)return null;let C,O=He.sum(v);if(u)C=d+O;else{for(let V=0;V<v.length/2;V++){let z=v[V];v[V]=v[v.length-1-V],v[v.length-1-V]=z}C=d,d=C-O}if(!$e.checkCodewordSkew(O,m,w))return null;let k=$n.getDecodedValue(v),L=ke.getCodeword(k);return L===-1?null:new Ml(d,C,$e.getCodewordBucketNumber(k),L)}static getModuleBitCount(i,a,l,u,d,f){let m=d,w=new Int32Array(8),v=0,C=u?1:-1,O=u;for(;(u?m<l:m>=a)&&v<w.length;)i.get(m,f)===O?(w[v]++,m+=C):(v++,O=!O);return v===w.length||m===(u?l:a)&&v===w.length-1?w:null}static getNumberOfECCodeWords(i){return 2<<i}static adjustCodewordStartColumn(i,a,l,u,d,f){let m=d,w=u?-1:1;for(let v=0;v<2;v++){for(;(u?m>=a:m<l)&&u===i.get(m,f);){if(Math.abs(d-m)>$e.CODEWORD_SKEW_SIZE)return d;m+=w}w=-w,u=!u}return m}static checkCodewordSkew(i,a,l){return a-$e.CODEWORD_SKEW_SIZE<=i&&i<=l+$e.CODEWORD_SKEW_SIZE}static decodeCodewords(i,a,l){if(i.length===0)throw B.getFormatInstance();let u=1<<a+1,d=$e.correctErrors(i,l,u);$e.verifyCodewordCount(i,u);let f=X.decode(i,""+a);return f.setErrorsCorrected(d),f.setErasures(l.length),f}static correctErrors(i,a,l){if(a!=null&&a.length>l/2+$e.MAX_ERRORS||l<0||l>$e.MAX_EC_CODEWORDS)throw b.getChecksumInstance();return $e.errorCorrection.decode(i,l,a)}static verifyCodewordCount(i,a){if(i.length<4)throw B.getFormatInstance();let l=i[0];if(l>i.length)throw B.getFormatInstance();if(l===0)if(a<i.length)i[0]=i.length-a;else throw B.getFormatInstance()}static getBitCountForCodeword(i){let a=new Int32Array(8),l=0,u=a.length-1;for(;!((i&1)!==l&&(l=i&1,u--,u<0));)a[u]++,i>>=1;return a}static getCodewordBucketNumber(i){return i instanceof Int32Array?this.getCodewordBucketNumber_Int32Array(i):this.getCodewordBucketNumber_number(i)}static getCodewordBucketNumber_number(i){return $e.getCodewordBucketNumber($e.getBitCountForCodeword(i))}static getCodewordBucketNumber_Int32Array(i){return(i[0]-i[2]+i[4]-i[6]+9)%9}static toString(i){let a=new Rl;for(let l=0;l<i.length;l++){a.format("Row %2d: ",l);for(let u=0;u<i[l].length;u++){let d=i[l][u];d.getValue().length===0?a.format("        ",null):a.format("%4d(%2d)",d.getValue()[0],d.getConfidence(d.getValue()[0]))}a.format("%n")}return a.toString()}}$e.CODEWORD_SKEW_SIZE=2,$e.MAX_ERRORS=3,$e.MAX_EC_CODEWORDS=512,$e.errorCorrection=new Tm;class pn{decode(i,a=null){let l=pn.decode(i,a,!1);if(l==null||l.length===0||l[0]==null)throw $.getNotFoundInstance();return l[0]}decodeMultiple(i,a=null){try{return pn.decode(i,a,!0)}catch(l){throw l instanceof B||l instanceof b?$.getNotFoundInstance():l}}static decode(i,a,l){const u=new Array,d=We.detectMultiple(i,a,l);for(const f of d.getPoints()){const m=$e.decode(d.getBits(),f[4],f[5],f[6],f[7],pn.getMinCodewordWidth(f),pn.getMaxCodewordWidth(f)),w=new Re(m.getText(),m.getRawBytes(),void 0,f,me.PDF_417);w.putMetadata(yt.ERROR_CORRECTION_LEVEL,m.getECLevel());const v=m.getOther();v!=null&&w.putMetadata(yt.PDF417_EXTRA_METADATA,v),u.push(w)}return u.map(f=>f)}static getMaxWidth(i,a){return i==null||a==null?0:Math.trunc(Math.abs(i.getX()-a.getX()))}static getMinWidth(i,a){return i==null||a==null?T.MAX_VALUE:Math.trunc(Math.abs(i.getX()-a.getX()))}static getMaxCodewordWidth(i){return Math.floor(Math.max(Math.max(pn.getMaxWidth(i[0],i[4]),pn.getMaxWidth(i[6],i[2])*ke.MODULES_IN_CODEWORD/ke.MODULES_IN_STOP_PATTERN),Math.max(pn.getMaxWidth(i[1],i[5]),pn.getMaxWidth(i[7],i[3])*ke.MODULES_IN_CODEWORD/ke.MODULES_IN_STOP_PATTERN)))}static getMinCodewordWidth(i){return Math.floor(Math.min(Math.min(pn.getMinWidth(i[0],i[4]),pn.getMinWidth(i[6],i[2])*ke.MODULES_IN_CODEWORD/ke.MODULES_IN_STOP_PATTERN),Math.min(pn.getMinWidth(i[1],i[5]),pn.getMinWidth(i[7],i[3])*ke.MODULES_IN_CODEWORD/ke.MODULES_IN_STOP_PATTERN)))}reset(){}}class Su extends p{}Su.kind="ReaderException";class Mm{constructor(i,a){this.verbose=i===!0,a&&this.setHints(a)}decode(i,a){return a&&this.setHints(a),this.decodeInternal(i)}decodeWithState(i){return(this.readers===null||this.readers===void 0)&&this.setHints(null),this.decodeInternal(i)}setHints(i){this.hints=i;const a=!r(i)&&i.get(j.TRY_HARDER)===!0,l=r(i)?null:i.get(j.POSSIBLE_FORMATS),u=new Array;if(!r(l)){const d=l.some(f=>f===me.UPC_A||f===me.UPC_E||f===me.EAN_13||f===me.EAN_8||f===me.CODABAR||f===me.CODE_39||f===me.CODE_93||f===me.CODE_128||f===me.ITF||f===me.RSS_14||f===me.RSS_EXPANDED);d&&!a&&u.push(new Qo(i,this.verbose)),l.includes(me.QR_CODE)&&u.push(new ss),l.includes(me.DATA_MATRIX)&&u.push(new is),l.includes(me.AZTEC)&&u.push(new Xo),l.includes(me.PDF_417)&&u.push(new pn),d&&a&&u.push(new Qo(i,this.verbose))}u.length===0&&(a||u.push(new Qo(i,this.verbose)),u.push(new ss),u.push(new is),u.push(new Xo),u.push(new pn),a&&u.push(new Qo(i,this.verbose))),this.readers=u}reset(){if(this.readers!==null)for(const i of this.readers)i.reset()}decodeInternal(i){if(this.readers===null)throw new Su("No readers where selected, nothing can be read.");for(const a of this.readers)try{return a.decode(i,this.hints)}catch(l){if(l instanceof Su)continue}throw new $("No MultiFormat Readers were able to detect the code.")}}class O_ extends Pe{constructor(i=null,a=500){const l=new Mm;l.setHints(i),super(l,a)}decodeBitmap(i){return this.reader.decodeWithState(i)}}class k_ extends Pe{constructor(i=500){super(new pn,i)}}class M_ extends Pe{constructor(i=500){super(new ss,i)}}var Ef;(function(N){N[N.ERROR_CORRECTION=0]="ERROR_CORRECTION",N[N.CHARACTER_SET=1]="CHARACTER_SET",N[N.DATA_MATRIX_SHAPE=2]="DATA_MATRIX_SHAPE",N[N.MIN_SIZE=3]="MIN_SIZE",N[N.MAX_SIZE=4]="MAX_SIZE",N[N.MARGIN=5]="MARGIN",N[N.PDF417_COMPACT=6]="PDF417_COMPACT",N[N.PDF417_COMPACTION=7]="PDF417_COMPACTION",N[N.PDF417_DIMENSIONS=8]="PDF417_DIMENSIONS",N[N.AZTEC_LAYERS=9]="AZTEC_LAYERS",N[N.QR_VERSION=10]="QR_VERSION"})(Ef||(Ef={}));var Jt=Ef;class bf{constructor(i){this.field=i,this.cachedGenerators=[],this.cachedGenerators.push(new Rt(i,Int32Array.from([1])))}buildGenerator(i){const a=this.cachedGenerators;if(i>=a.length){let l=a[a.length-1];const u=this.field;for(let d=a.length;d<=i;d++){const f=l.multiply(new Rt(u,Int32Array.from([1,u.exp(d-1+u.getGeneratorBase())])));a.push(f),l=f}}return a[i]}encode(i,a){if(a===0)throw new x("No error correction bytes");const l=i.length-a;if(l<=0)throw new x("No data bytes provided");const u=this.buildGenerator(a),d=new Int32Array(l);S.arraycopy(i,0,d,0,l);let f=new Rt(this.field,d);f=f.multiplyByMonomial(a,1);const w=f.divide(u)[1].getCoefficients(),v=a-w.length;for(let C=0;C<v;C++)i[l+C]=0;S.arraycopy(w,0,i,l+v,w.length)}}class Ft{constructor(){}static applyMaskPenaltyRule1(i){return Ft.applyMaskPenaltyRule1Internal(i,!0)+Ft.applyMaskPenaltyRule1Internal(i,!1)}static applyMaskPenaltyRule2(i){let a=0;const l=i.getArray(),u=i.getWidth(),d=i.getHeight();for(let f=0;f<d-1;f++){const m=l[f];for(let w=0;w<u-1;w++){const v=m[w];v===m[w+1]&&v===l[f+1][w]&&v===l[f+1][w+1]&&a++}}return Ft.N2*a}static applyMaskPenaltyRule3(i){let a=0;const l=i.getArray(),u=i.getWidth(),d=i.getHeight();for(let f=0;f<d;f++)for(let m=0;m<u;m++){const w=l[f];m+6<u&&w[m]===1&&w[m+1]===0&&w[m+2]===1&&w[m+3]===1&&w[m+4]===1&&w[m+5]===0&&w[m+6]===1&&(Ft.isWhiteHorizontal(w,m-4,m)||Ft.isWhiteHorizontal(w,m+7,m+11))&&a++,f+6<d&&l[f][m]===1&&l[f+1][m]===0&&l[f+2][m]===1&&l[f+3][m]===1&&l[f+4][m]===1&&l[f+5][m]===0&&l[f+6][m]===1&&(Ft.isWhiteVertical(l,m,f-4,f)||Ft.isWhiteVertical(l,m,f+7,f+11))&&a++}return a*Ft.N3}static isWhiteHorizontal(i,a,l){a=Math.max(a,0),l=Math.min(l,i.length);for(let u=a;u<l;u++)if(i[u]===1)return!1;return!0}static isWhiteVertical(i,a,l,u){l=Math.max(l,0),u=Math.min(u,i.length);for(let d=l;d<u;d++)if(i[d][a]===1)return!1;return!0}static applyMaskPenaltyRule4(i){let a=0;const l=i.getArray(),u=i.getWidth(),d=i.getHeight();for(let w=0;w<d;w++){const v=l[w];for(let C=0;C<u;C++)v[C]===1&&a++}const f=i.getHeight()*i.getWidth();return Math.floor(Math.abs(a*2-f)*10/f)*Ft.N4}static getDataMaskBit(i,a,l){let u,d;switch(i){case 0:u=l+a&1;break;case 1:u=l&1;break;case 2:u=a%3;break;case 3:u=(l+a)%3;break;case 4:u=Math.floor(l/2)+Math.floor(a/3)&1;break;case 5:d=l*a,u=(d&1)+d%3;break;case 6:d=l*a,u=(d&1)+d%3&1;break;case 7:d=l*a,u=d%3+(l+a&1)&1;break;default:throw new x("Invalid mask pattern: "+i)}return u===0}static applyMaskPenaltyRule1Internal(i,a){let l=0;const u=a?i.getHeight():i.getWidth(),d=a?i.getWidth():i.getHeight(),f=i.getArray();for(let m=0;m<u;m++){let w=0,v=-1;for(let C=0;C<d;C++){const O=a?f[m][C]:f[C][m];O===v?w++:(w>=5&&(l+=Ft.N1+(w-5)),w=1,v=O)}w>=5&&(l+=Ft.N1+(w-5))}return l}}Ft.N1=3,Ft.N2=3,Ft.N3=40,Ft.N4=10;class Au{constructor(i,a){this.width=i,this.height=a;const l=new Array(a);for(let u=0;u!==a;u++)l[u]=new Uint8Array(i);this.bytes=l}getHeight(){return this.height}getWidth(){return this.width}get(i,a){return this.bytes[a][i]}getArray(){return this.bytes}setNumber(i,a,l){this.bytes[a][i]=l}setBoolean(i,a,l){this.bytes[a][i]=l?1:0}clear(i){for(const a of this.bytes)_.fill(a,i)}equals(i){if(!(i instanceof Au))return!1;const a=i;if(this.width!==a.width||this.height!==a.height)return!1;for(let l=0,u=this.height;l<u;++l){const d=this.bytes[l],f=a.bytes[l];for(let m=0,w=this.width;m<w;++m)if(d[m]!==f[m])return!1}return!0}toString(){const i=new fe;for(let a=0,l=this.height;a<l;++a){const u=this.bytes[a];for(let d=0,f=this.width;d<f;++d)switch(u[d]){case 0:i.append(" 0");break;case 1:i.append(" 1");break;default:i.append("  ");break}i.append(`
`)}return i.toString()}}class co{constructor(){this.maskPattern=-1}getMode(){return this.mode}getECLevel(){return this.ecLevel}getVersion(){return this.version}getMaskPattern(){return this.maskPattern}getMatrix(){return this.matrix}toString(){const i=new fe;return i.append(`<<
`),i.append(" mode: "),i.append(this.mode?this.mode.toString():"null"),i.append(`
 ecLevel: `),i.append(this.ecLevel?this.ecLevel.toString():"null"),i.append(`
 version: `),i.append(this.version?this.version.toString():"null"),i.append(`
 maskPattern: `),i.append(this.maskPattern.toString()),this.matrix?(i.append(`
 matrix:
`),i.append(this.matrix.toString())):i.append(`
 matrix: null
`),i.append(`>>
`),i.toString()}setMode(i){this.mode=i}setECLevel(i){this.ecLevel=i}setVersion(i){this.version=i}setMaskPattern(i){this.maskPattern=i}setMatrix(i){this.matrix=i}static isValidMaskPattern(i){return i>=0&&i<co.NUM_MASK_PATTERNS}}co.NUM_MASK_PATTERNS=8;class dt extends p{}dt.kind="WriterException";class Ne{constructor(){}static clearMatrix(i){i.clear(255)}static buildMatrix(i,a,l,u,d){Ne.clearMatrix(d),Ne.embedBasicPatterns(l,d),Ne.embedTypeInfo(a,u,d),Ne.maybeEmbedVersionInfo(l,d),Ne.embedDataBits(i,u,d)}static embedBasicPatterns(i,a){Ne.embedPositionDetectionPatternsAndSeparators(a),Ne.embedDarkDotAtLeftBottomCorner(a),Ne.maybeEmbedPositionAdjustmentPatterns(i,a),Ne.embedTimingPatterns(a)}static embedTypeInfo(i,a,l){const u=new D;Ne.makeTypeInfoBits(i,a,u);for(let d=0,f=u.getSize();d<f;++d){const m=u.get(u.getSize()-1-d),w=Ne.TYPE_INFO_COORDINATES[d],v=w[0],C=w[1];if(l.setBoolean(v,C,m),d<8){const O=l.getWidth()-d-1;l.setBoolean(O,8,m)}else{const k=l.getHeight()-7+(d-8);l.setBoolean(8,k,m)}}}static maybeEmbedVersionInfo(i,a){if(i.getVersionNumber()<7)return;const l=new D;Ne.makeVersionInfoBits(i,l);let u=6*3-1;for(let d=0;d<6;++d)for(let f=0;f<3;++f){const m=l.get(u);u--,a.setBoolean(d,a.getHeight()-11+f,m),a.setBoolean(a.getHeight()-11+f,d,m)}}static embedDataBits(i,a,l){let u=0,d=-1,f=l.getWidth()-1,m=l.getHeight()-1;for(;f>0;){for(f===6&&(f-=1);m>=0&&m<l.getHeight();){for(let w=0;w<2;++w){const v=f-w;if(!Ne.isEmpty(l.get(v,m)))continue;let C;u<i.getSize()?(C=i.get(u),++u):C=!1,a!==255&&Ft.getDataMaskBit(a,v,m)&&(C=!C),l.setBoolean(v,m,C)}m+=d}d=-d,m+=d,f-=2}if(u!==i.getSize())throw new dt("Not all bits consumed: "+u+"/"+i.getSize())}static findMSBSet(i){return 32-T.numberOfLeadingZeros(i)}static calculateBCHCode(i,a){if(a===0)throw new x("0 polynomial");const l=Ne.findMSBSet(a);for(i<<=l-1;Ne.findMSBSet(i)>=l;)i^=a<<Ne.findMSBSet(i)-l;return i}static makeTypeInfoBits(i,a,l){if(!co.isValidMaskPattern(a))throw new dt("Invalid mask pattern");const u=i.getBits()<<3|a;l.appendBits(u,5);const d=Ne.calculateBCHCode(u,Ne.TYPE_INFO_POLY);l.appendBits(d,10);const f=new D;if(f.appendBits(Ne.TYPE_INFO_MASK_PATTERN,15),l.xor(f),l.getSize()!==15)throw new dt("should not happen but we got: "+l.getSize())}static makeVersionInfoBits(i,a){a.appendBits(i.getVersionNumber(),6);const l=Ne.calculateBCHCode(i.getVersionNumber(),Ne.VERSION_INFO_POLY);if(a.appendBits(l,12),a.getSize()!==18)throw new dt("should not happen but we got: "+a.getSize())}static isEmpty(i){return i===255}static embedTimingPatterns(i){for(let a=8;a<i.getWidth()-8;++a){const l=(a+1)%2;Ne.isEmpty(i.get(a,6))&&i.setNumber(a,6,l),Ne.isEmpty(i.get(6,a))&&i.setNumber(6,a,l)}}static embedDarkDotAtLeftBottomCorner(i){if(i.get(8,i.getHeight()-8)===0)throw new dt;i.setNumber(8,i.getHeight()-8,1)}static embedHorizontalSeparationPattern(i,a,l){for(let u=0;u<8;++u){if(!Ne.isEmpty(l.get(i+u,a)))throw new dt;l.setNumber(i+u,a,0)}}static embedVerticalSeparationPattern(i,a,l){for(let u=0;u<7;++u){if(!Ne.isEmpty(l.get(i,a+u)))throw new dt;l.setNumber(i,a+u,0)}}static embedPositionAdjustmentPattern(i,a,l){for(let u=0;u<5;++u){const d=Ne.POSITION_ADJUSTMENT_PATTERN[u];for(let f=0;f<5;++f)l.setNumber(i+f,a+u,d[f])}}static embedPositionDetectionPattern(i,a,l){for(let u=0;u<7;++u){const d=Ne.POSITION_DETECTION_PATTERN[u];for(let f=0;f<7;++f)l.setNumber(i+f,a+u,d[f])}}static embedPositionDetectionPatternsAndSeparators(i){const a=Ne.POSITION_DETECTION_PATTERN[0].length;Ne.embedPositionDetectionPattern(0,0,i),Ne.embedPositionDetectionPattern(i.getWidth()-a,0,i),Ne.embedPositionDetectionPattern(0,i.getWidth()-a,i);const l=8;Ne.embedHorizontalSeparationPattern(0,l-1,i),Ne.embedHorizontalSeparationPattern(i.getWidth()-l,l-1,i),Ne.embedHorizontalSeparationPattern(0,i.getWidth()-l,i);const u=7;Ne.embedVerticalSeparationPattern(u,0,i),Ne.embedVerticalSeparationPattern(i.getHeight()-u-1,0,i),Ne.embedVerticalSeparationPattern(u,i.getHeight()-u,i)}static maybeEmbedPositionAdjustmentPatterns(i,a){if(i.getVersionNumber()<2)return;const l=i.getVersionNumber()-1,u=Ne.POSITION_ADJUSTMENT_PATTERN_COORDINATE_TABLE[l];for(let d=0,f=u.length;d!==f;d++){const m=u[d];if(m>=0)for(let w=0;w!==f;w++){const v=u[w];v>=0&&Ne.isEmpty(a.get(v,m))&&Ne.embedPositionAdjustmentPattern(v-2,m-2,a)}}}}Ne.POSITION_DETECTION_PATTERN=Array.from([Int32Array.from([1,1,1,1,1,1,1]),Int32Array.from([1,0,0,0,0,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,0,0,0,0,1]),Int32Array.from([1,1,1,1,1,1,1])]),Ne.POSITION_ADJUSTMENT_PATTERN=Array.from([Int32Array.from([1,1,1,1,1]),Int32Array.from([1,0,0,0,1]),Int32Array.from([1,0,1,0,1]),Int32Array.from([1,0,0,0,1]),Int32Array.from([1,1,1,1,1])]),Ne.POSITION_ADJUSTMENT_PATTERN_COORDINATE_TABLE=Array.from([Int32Array.from([-1,-1,-1,-1,-1,-1,-1]),Int32Array.from([6,18,-1,-1,-1,-1,-1]),Int32Array.from([6,22,-1,-1,-1,-1,-1]),Int32Array.from([6,26,-1,-1,-1,-1,-1]),Int32Array.from([6,30,-1,-1,-1,-1,-1]),Int32Array.from([6,34,-1,-1,-1,-1,-1]),Int32Array.from([6,22,38,-1,-1,-1,-1]),Int32Array.from([6,24,42,-1,-1,-1,-1]),Int32Array.from([6,26,46,-1,-1,-1,-1]),Int32Array.from([6,28,50,-1,-1,-1,-1]),Int32Array.from([6,30,54,-1,-1,-1,-1]),Int32Array.from([6,32,58,-1,-1,-1,-1]),Int32Array.from([6,34,62,-1,-1,-1,-1]),Int32Array.from([6,26,46,66,-1,-1,-1]),Int32Array.from([6,26,48,70,-1,-1,-1]),Int32Array.from([6,26,50,74,-1,-1,-1]),Int32Array.from([6,30,54,78,-1,-1,-1]),Int32Array.from([6,30,56,82,-1,-1,-1]),Int32Array.from([6,30,58,86,-1,-1,-1]),Int32Array.from([6,34,62,90,-1,-1,-1]),Int32Array.from([6,28,50,72,94,-1,-1]),Int32Array.from([6,26,50,74,98,-1,-1]),Int32Array.from([6,30,54,78,102,-1,-1]),Int32Array.from([6,28,54,80,106,-1,-1]),Int32Array.from([6,32,58,84,110,-1,-1]),Int32Array.from([6,30,58,86,114,-1,-1]),Int32Array.from([6,34,62,90,118,-1,-1]),Int32Array.from([6,26,50,74,98,122,-1]),Int32Array.from([6,30,54,78,102,126,-1]),Int32Array.from([6,26,52,78,104,130,-1]),Int32Array.from([6,30,56,82,108,134,-1]),Int32Array.from([6,34,60,86,112,138,-1]),Int32Array.from([6,30,58,86,114,142,-1]),Int32Array.from([6,34,62,90,118,146,-1]),Int32Array.from([6,30,54,78,102,126,150]),Int32Array.from([6,24,50,76,102,128,154]),Int32Array.from([6,28,54,80,106,132,158]),Int32Array.from([6,32,58,84,110,136,162]),Int32Array.from([6,26,54,82,110,138,166]),Int32Array.from([6,30,58,86,114,142,170])]),Ne.TYPE_INFO_COORDINATES=Array.from([Int32Array.from([8,0]),Int32Array.from([8,1]),Int32Array.from([8,2]),Int32Array.from([8,3]),Int32Array.from([8,4]),Int32Array.from([8,5]),Int32Array.from([8,7]),Int32Array.from([8,8]),Int32Array.from([7,8]),Int32Array.from([5,8]),Int32Array.from([4,8]),Int32Array.from([3,8]),Int32Array.from([2,8]),Int32Array.from([1,8]),Int32Array.from([0,8])]),Ne.VERSION_INFO_POLY=7973,Ne.TYPE_INFO_POLY=1335,Ne.TYPE_INFO_MASK_PATTERN=21522;class D_{constructor(i,a){this.dataBytes=i,this.errorCorrectionBytes=a}getDataBytes(){return this.dataBytes}getErrorCorrectionBytes(){return this.errorCorrectionBytes}}class wt{constructor(){}static calculateMaskPenalty(i){return Ft.applyMaskPenaltyRule1(i)+Ft.applyMaskPenaltyRule2(i)+Ft.applyMaskPenaltyRule3(i)+Ft.applyMaskPenaltyRule4(i)}static encode(i,a,l=null){let u=wt.DEFAULT_BYTE_MODE_ENCODING;const d=l!==null&&l.get(Jt.CHARACTER_SET)!==void 0;d&&(u=l.get(Jt.CHARACTER_SET).toString());const f=this.chooseMode(i,u),m=new D;if(f===Ie.BYTE&&(d||wt.DEFAULT_BYTE_MODE_ENCODING!==u)){const ae=H.getCharacterSetECIByName(u);ae!==void 0&&this.appendECI(ae,m)}this.appendModeInfo(f,m);const w=new D;this.appendBytes(i,f,w,u);let v;if(l!==null&&l.get(Jt.QR_VERSION)!==void 0){const ae=Number.parseInt(l.get(Jt.QR_VERSION).toString(),10);v=_e.getVersionForNumber(ae);const re=this.calculateBitsNeeded(f,m,w,v);if(!this.willFit(re,v,a))throw new dt("Data too big for requested version")}else v=this.recommendVersion(a,f,m,w);const C=new D;C.appendBitArray(m);const O=f===Ie.BYTE?w.getSizeInBytes():i.length;this.appendLengthInfo(O,v,f,C),C.appendBitArray(w);const k=v.getECBlocksForLevel(a),L=v.getTotalCodewords()-k.getTotalECCodewords();this.terminateBits(L,C);const V=this.interleaveWithECBytes(C,v.getTotalCodewords(),L,k.getNumBlocks()),z=new co;z.setECLevel(a),z.setMode(f),z.setVersion(v);const G=v.getDimensionForVersion(),K=new Au(G,G),oe=this.chooseMaskPattern(V,a,v,K);return z.setMaskPattern(oe),Ne.buildMatrix(V,a,v,oe,K),z.setMatrix(K),z}static recommendVersion(i,a,l,u){const d=this.calculateBitsNeeded(a,l,u,_e.getVersionForNumber(1)),f=this.chooseVersion(d,i),m=this.calculateBitsNeeded(a,l,u,f);return this.chooseVersion(m,i)}static calculateBitsNeeded(i,a,l,u){return a.getSize()+i.getCharacterCountBits(u)+l.getSize()}static getAlphanumericCode(i){return i<wt.ALPHANUMERIC_TABLE.length?wt.ALPHANUMERIC_TABLE[i]:-1}static chooseMode(i,a=null){if(H.SJIS.getName()===a&&this.isOnlyDoubleByteKanji(i))return Ie.KANJI;let l=!1,u=!1;for(let d=0,f=i.length;d<f;++d){const m=i.charAt(d);if(wt.isDigit(m))l=!0;else if(this.getAlphanumericCode(m.charCodeAt(0))!==-1)u=!0;else return Ie.BYTE}return u?Ie.ALPHANUMERIC:l?Ie.NUMERIC:Ie.BYTE}static isOnlyDoubleByteKanji(i){let a;try{a=he.encode(i,H.SJIS)}catch{return!1}const l=a.length;if(l%2!==0)return!1;for(let u=0;u<l;u+=2){const d=a[u]&255;if((d<129||d>159)&&(d<224||d>235))return!1}return!0}static chooseMaskPattern(i,a,l,u){let d=Number.MAX_SAFE_INTEGER,f=-1;for(let m=0;m<co.NUM_MASK_PATTERNS;m++){Ne.buildMatrix(i,a,l,m,u);let w=this.calculateMaskPenalty(u);w<d&&(d=w,f=m)}return f}static chooseVersion(i,a){for(let l=1;l<=40;l++){const u=_e.getVersionForNumber(l);if(wt.willFit(i,u,a))return u}throw new dt("Data too big")}static willFit(i,a,l){const u=a.getTotalCodewords(),f=a.getECBlocksForLevel(l).getTotalECCodewords(),m=u-f,w=(i+7)/8;return m>=w}static terminateBits(i,a){const l=i*8;if(a.getSize()>l)throw new dt("data bits cannot fit in the QR Code"+a.getSize()+" > "+l);for(let f=0;f<4&&a.getSize()<l;++f)a.appendBit(!1);const u=a.getSize()&7;if(u>0)for(let f=u;f<8;f++)a.appendBit(!1);const d=i-a.getSizeInBytes();for(let f=0;f<d;++f)a.appendBits(f&1?17:236,8);if(a.getSize()!==l)throw new dt("Bits size does not equal capacity")}static getNumDataBytesAndNumECBytesForBlockID(i,a,l,u,d,f){if(u>=l)throw new dt("Block ID too large");const m=i%l,w=l-m,v=Math.floor(i/l),C=v+1,O=Math.floor(a/l),k=O+1,L=v-O,V=C-k;if(L!==V)throw new dt("EC bytes mismatch");if(l!==w+m)throw new dt("RS blocks mismatch");if(i!==(O+L)*w+(k+V)*m)throw new dt("Total bytes mismatch");u<w?(d[0]=O,f[0]=L):(d[0]=k,f[0]=V)}static interleaveWithECBytes(i,a,l,u){if(i.getSizeInBytes()!==l)throw new dt("Number of bits and data bytes does not match");let d=0,f=0,m=0;const w=new Array;for(let C=0;C<u;++C){const O=new Int32Array(1),k=new Int32Array(1);wt.getNumDataBytesAndNumECBytesForBlockID(a,l,u,C,O,k);const L=O[0],V=new Uint8Array(L);i.toBytes(8*d,V,0,L);const z=wt.generateECBytes(V,k[0]);w.push(new D_(V,z)),f=Math.max(f,L),m=Math.max(m,z.length),d+=O[0]}if(l!==d)throw new dt("Data bytes does not match offset");const v=new D;for(let C=0;C<f;++C)for(const O of w){const k=O.getDataBytes();C<k.length&&v.appendBits(k[C],8)}for(let C=0;C<m;++C)for(const O of w){const k=O.getErrorCorrectionBytes();C<k.length&&v.appendBits(k[C],8)}if(a!==v.getSizeInBytes())throw new dt("Interleaving error: "+a+" and "+v.getSizeInBytes()+" differ.");return v}static generateECBytes(i,a){const l=i.length,u=new Int32Array(l+a);for(let f=0;f<l;f++)u[f]=i[f]&255;new bf(ze.QR_CODE_FIELD_256).encode(u,a);const d=new Uint8Array(a);for(let f=0;f<a;f++)d[f]=u[l+f];return d}static appendModeInfo(i,a){a.appendBits(i.getBits(),4)}static appendLengthInfo(i,a,l,u){const d=l.getCharacterCountBits(a);if(i>=1<<d)throw new dt(i+" is bigger than "+((1<<d)-1));u.appendBits(i,d)}static appendBytes(i,a,l,u){switch(a){case Ie.NUMERIC:wt.appendNumericBytes(i,l);break;case Ie.ALPHANUMERIC:wt.appendAlphanumericBytes(i,l);break;case Ie.BYTE:wt.append8BitBytes(i,l,u);break;case Ie.KANJI:wt.appendKanjiBytes(i,l);break;default:throw new dt("Invalid mode: "+a)}}static getDigit(i){return i.charCodeAt(0)-48}static isDigit(i){const a=wt.getDigit(i);return a>=0&&a<=9}static appendNumericBytes(i,a){const l=i.length;let u=0;for(;u<l;){const d=wt.getDigit(i.charAt(u));if(u+2<l){const f=wt.getDigit(i.charAt(u+1)),m=wt.getDigit(i.charAt(u+2));a.appendBits(d*100+f*10+m,10),u+=3}else if(u+1<l){const f=wt.getDigit(i.charAt(u+1));a.appendBits(d*10+f,7),u+=2}else a.appendBits(d,4),u++}}static appendAlphanumericBytes(i,a){const l=i.length;let u=0;for(;u<l;){const d=wt.getAlphanumericCode(i.charCodeAt(u));if(d===-1)throw new dt;if(u+1<l){const f=wt.getAlphanumericCode(i.charCodeAt(u+1));if(f===-1)throw new dt;a.appendBits(d*45+f,11),u+=2}else a.appendBits(d,6),u++}}static append8BitBytes(i,a,l){let u;try{u=he.encode(i,l)}catch(d){throw new dt(d)}for(let d=0,f=u.length;d!==f;d++){const m=u[d];a.appendBits(m,8)}}static appendKanjiBytes(i,a){let l;try{l=he.encode(i,H.SJIS)}catch(d){throw new dt(d)}const u=l.length;for(let d=0;d<u;d+=2){const f=l[d]&255,m=l[d+1]&255,w=f<<8&4294967295|m;let v=-1;if(w>=33088&&w<=40956?v=w-33088:w>=57408&&w<=60351&&(v=w-49472),v===-1)throw new dt("Invalid byte sequence");const C=(v>>8)*192+(v&255);a.appendBits(C,13)}}static appendECI(i,a){a.appendBits(Ie.ECI.getBits(),4),a.appendBits(i.getValue(),8)}}wt.ALPHANUMERIC_TABLE=Int32Array.from([-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,36,-1,-1,-1,37,38,-1,-1,-1,-1,39,40,-1,41,42,43,0,1,2,3,4,5,6,7,8,9,44,-1,-1,-1,-1,-1,-1,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,-1,-1,-1,-1,-1]),wt.DEFAULT_BYTE_MODE_ENCODING=H.UTF8.getName();class uo{write(i,a,l,u=null){if(i.length===0)throw new x("Found empty contents");if(a<0||l<0)throw new x("Requested dimensions are too small: "+a+"x"+l);let d=pt.L,f=uo.QUIET_ZONE_SIZE;u!==null&&(u.get(Jt.ERROR_CORRECTION)!==void 0&&(d=pt.fromString(u.get(Jt.ERROR_CORRECTION).toString())),u.get(Jt.MARGIN)!==void 0&&(f=Number.parseInt(u.get(Jt.MARGIN).toString(),10)));const m=wt.encode(i,d,u);return this.renderResult(m,a,l,f)}writeToDom(i,a,l,u,d=null){typeof i=="string"&&(i=document.querySelector(i));const f=this.write(a,l,u,d);i&&i.appendChild(f)}renderResult(i,a,l,u){const d=i.getMatrix();if(d===null)throw new zn;const f=d.getWidth(),m=d.getHeight(),w=f+u*2,v=m+u*2,C=Math.max(a,w),O=Math.max(l,v),k=Math.min(Math.floor(C/w),Math.floor(O/v)),L=Math.floor((C-f*k)/2),V=Math.floor((O-m*k)/2),z=this.createSVGElement(C,O);for(let G=0,K=V;G<m;G++,K+=k)for(let oe=0,ae=L;oe<f;oe++,ae+=k)if(d.get(oe,G)===1){const re=this.createSvgRectElement(ae,K,k,k);z.appendChild(re)}return z}createSVGElement(i,a){const l=document.createElementNS(uo.SVG_NS,"svg");return l.setAttributeNS(null,"height",i.toString()),l.setAttributeNS(null,"width",a.toString()),l}createSvgRectElement(i,a,l,u){const d=document.createElementNS(uo.SVG_NS,"rect");return d.setAttributeNS(null,"x",i.toString()),d.setAttributeNS(null,"y",a.toString()),d.setAttributeNS(null,"height",l.toString()),d.setAttributeNS(null,"width",u.toString()),d.setAttributeNS(null,"fill","#000000"),d}}uo.QUIET_ZONE_SIZE=4,uo.SVG_NS="http://www.w3.org/2000/svg";class ea{encode(i,a,l,u,d){if(i.length===0)throw new x("Found empty contents");if(a!==me.QR_CODE)throw new x("Can only encode QR_CODE, but got "+a);if(l<0||u<0)throw new x(`Requested dimensions are too small: ${l}x${u}`);let f=pt.L,m=ea.QUIET_ZONE_SIZE;d!==null&&(d.get(Jt.ERROR_CORRECTION)!==void 0&&(f=pt.fromString(d.get(Jt.ERROR_CORRECTION).toString())),d.get(Jt.MARGIN)!==void 0&&(m=Number.parseInt(d.get(Jt.MARGIN).toString(),10)));const w=wt.encode(i,f,d);return ea.renderResult(w,l,u,m)}static renderResult(i,a,l,u){const d=i.getMatrix();if(d===null)throw new zn;const f=d.getWidth(),m=d.getHeight(),w=f+u*2,v=m+u*2,C=Math.max(a,w),O=Math.max(l,v),k=Math.min(Math.floor(C/w),Math.floor(O/v)),L=Math.floor((C-f*k)/2),V=Math.floor((O-m*k)/2),z=new ie(C,O);for(let G=0,K=V;G<m;G++,K+=k)for(let oe=0,ae=L;oe<f;oe++,ae+=k)d.get(oe,G)===1&&z.setRegion(ae,K,k,k);return z}}ea.QUIET_ZONE_SIZE=4;class P_{encode(i,a,l,u,d){let f;switch(a){case me.QR_CODE:f=new ea;break;default:throw new x("No encoder available for format "+a)}return f.encode(i,a,l,u,d)}}class fi extends q{constructor(i,a,l,u,d,f,m,w){if(super(f,m),this.yuvData=i,this.dataWidth=a,this.dataHeight=l,this.left=u,this.top=d,u+f>a||d+m>l)throw new x("Crop rectangle does not fit within image data.");w&&this.reverseHorizontal(f,m)}getRow(i,a){if(i<0||i>=this.getHeight())throw new x("Requested row is outside the image: "+i);const l=this.getWidth();(a==null||a.length<l)&&(a=new Uint8ClampedArray(l));const u=(i+this.top)*this.dataWidth+this.left;return S.arraycopy(this.yuvData,u,a,0,l),a}getMatrix(){const i=this.getWidth(),a=this.getHeight();if(i===this.dataWidth&&a===this.dataHeight)return this.yuvData;const l=i*a,u=new Uint8ClampedArray(l);let d=this.top*this.dataWidth+this.left;if(i===this.dataWidth)return S.arraycopy(this.yuvData,d,u,0,l),u;for(let f=0;f<a;f++){const m=f*i;S.arraycopy(this.yuvData,d,u,m,i),d+=this.dataWidth}return u}isCropSupported(){return!0}crop(i,a,l,u){return new fi(this.yuvData,this.dataWidth,this.dataHeight,this.left+i,this.top+a,l,u,!1)}renderThumbnail(){const i=this.getWidth()/fi.THUMBNAIL_SCALE_FACTOR,a=this.getHeight()/fi.THUMBNAIL_SCALE_FACTOR,l=new Int32Array(i*a),u=this.yuvData;let d=this.top*this.dataWidth+this.left;for(let f=0;f<a;f++){const m=f*i;for(let w=0;w<i;w++){const v=u[d+w*fi.THUMBNAIL_SCALE_FACTOR]&255;l[m+w]=4278190080|v*65793}d+=this.dataWidth*fi.THUMBNAIL_SCALE_FACTOR}return l}getThumbnailWidth(){return this.getWidth()/fi.THUMBNAIL_SCALE_FACTOR}getThumbnailHeight(){return this.getHeight()/fi.THUMBNAIL_SCALE_FACTOR}reverseHorizontal(i,a){const l=this.yuvData;for(let u=0,d=this.top*this.dataWidth+this.left;u<a;u++,d+=this.dataWidth){const f=d+i/2;for(let m=d,w=d+i-1;m<f;m++,w--){const v=l[m];l[m]=l[w],l[w]=v}}}invert(){return new Z(this)}}fi.THUMBNAIL_SCALE_FACTOR=2;class Cf extends q{constructor(i,a,l,u,d,f,m){if(super(a,l),this.dataWidth=u,this.dataHeight=d,this.left=f,this.top=m,i.BYTES_PER_ELEMENT===4){const w=a*l,v=new Uint8ClampedArray(w);for(let C=0;C<w;C++){const O=i[C],k=O>>16&255,L=O>>7&510,V=O&255;v[C]=(k+L+V)/4&255}this.luminances=v}else this.luminances=i;if(u===void 0&&(this.dataWidth=a),d===void 0&&(this.dataHeight=l),f===void 0&&(this.left=0),m===void 0&&(this.top=0),this.left+a>this.dataWidth||this.top+l>this.dataHeight)throw new x("Crop rectangle does not fit within image data.")}getRow(i,a){if(i<0||i>=this.getHeight())throw new x("Requested row is outside the image: "+i);const l=this.getWidth();(a==null||a.length<l)&&(a=new Uint8ClampedArray(l));const u=(i+this.top)*this.dataWidth+this.left;return S.arraycopy(this.luminances,u,a,0,l),a}getMatrix(){const i=this.getWidth(),a=this.getHeight();if(i===this.dataWidth&&a===this.dataHeight)return this.luminances;const l=i*a,u=new Uint8ClampedArray(l);let d=this.top*this.dataWidth+this.left;if(i===this.dataWidth)return S.arraycopy(this.luminances,d,u,0,l),u;for(let f=0;f<a;f++){const m=f*i;S.arraycopy(this.luminances,d,u,m,i),d+=this.dataWidth}return u}isCropSupported(){return!0}crop(i,a,l,u){return new Cf(this.luminances,l,u,this.dataWidth,this.dataHeight,this.left+i,this.top+a)}invert(){return new Z(this)}}class Dm extends H{static forName(i){return this.getCharacterSetECIByName(i)}}class Sf{}Sf.ISO_8859_1=H.ISO8859_1;class Pm{isCompact(){return this.compact}setCompact(i){this.compact=i}getSize(){return this.size}setSize(i){this.size=i}getLayers(){return this.layers}setLayers(i){this.layers=i}getCodeWords(){return this.codeWords}setCodeWords(i){this.codeWords=i}getMatrix(){return this.matrix}setMatrix(i){this.matrix=i}}class Lm{static singletonList(i){return[i]}static min(i,a){return i.sort(a)[0]}}class L_{constructor(i){this.previous=i}getPrevious(){return this.previous}}class ta extends L_{constructor(i,a,l){super(i),this.value=a,this.bitCount=l}appendTo(i,a){i.appendBits(this.value,this.bitCount)}add(i,a){return new ta(this,i,a)}addBinaryShift(i,a){return console.warn("addBinaryShift on SimpleToken, this simply returns a copy of this token"),new ta(this,i,a)}toString(){let i=this.value&(1<<this.bitCount)-1;return i|=1<<this.bitCount,"<"+T.toBinaryString(i|1<<this.bitCount).substring(1)+">"}}class Af extends ta{constructor(i,a,l){super(i,0,0),this.binaryShiftStart=a,this.binaryShiftByteCount=l}appendTo(i,a){for(let l=0;l<this.binaryShiftByteCount;l++)(l===0||l===31&&this.binaryShiftByteCount<=62)&&(i.appendBits(31,5),this.binaryShiftByteCount>62?i.appendBits(this.binaryShiftByteCount-31,16):l===0?i.appendBits(Math.min(this.binaryShiftByteCount,31),5):i.appendBits(this.binaryShiftByteCount-31,5)),i.appendBits(a[this.binaryShiftStart+l],8)}addBinaryShift(i,a){return new Af(this,i,a)}toString(){return"<"+this.binaryShiftStart+"::"+(this.binaryShiftStart+this.binaryShiftByteCount-1)+">"}}function B_(N,i,a){return new Af(N,i,a)}function Dl(N,i,a){return new ta(N,i,a)}const F_=["UPPER","LOWER","DIGIT","MIXED","PUNCT"],as=0,_u=1,br=2,Bm=3,pi=4,j_=new ta(null,0,0),_f=[Int32Array.from([0,(5<<16)+28,(5<<16)+30,(5<<16)+29,656318]),Int32Array.from([(9<<16)+480+14,0,(5<<16)+30,(5<<16)+29,656318]),Int32Array.from([(4<<16)+14,(9<<16)+448+28,0,(9<<16)+448+29,932798]),Int32Array.from([(5<<16)+29,(5<<16)+28,656318,0,(5<<16)+30]),Int32Array.from([(5<<16)+31,656380,656382,656381,0])];function U_(N){for(let i of N)_.fill(i,-1);return N[as][pi]=0,N[_u][pi]=0,N[_u][as]=28,N[Bm][pi]=0,N[br][pi]=0,N[br][as]=15,N}const Fm=U_(_.createInt32Array(6,6));class gi{constructor(i,a,l,u){this.token=i,this.mode=a,this.binaryShiftByteCount=l,this.bitCount=u}getMode(){return this.mode}getToken(){return this.token}getBinaryShiftByteCount(){return this.binaryShiftByteCount}getBitCount(){return this.bitCount}latchAndAppend(i,a){let l=this.bitCount,u=this.token;if(i!==this.mode){let f=_f[this.mode][i];u=Dl(u,f&65535,f>>16),l+=f>>16}let d=i===br?4:5;return u=Dl(u,a,d),new gi(u,i,0,l+d)}shiftAndAppend(i,a){let l=this.token,u=this.mode===br?4:5;return l=Dl(l,Fm[this.mode][i],u),l=Dl(l,a,5),new gi(l,this.mode,0,this.bitCount+u+5)}addBinaryShiftChar(i){let a=this.token,l=this.mode,u=this.bitCount;if(this.mode===pi||this.mode===br){let m=_f[l][as];a=Dl(a,m&65535,m>>16),u+=m>>16,l=as}let d=this.binaryShiftByteCount===0||this.binaryShiftByteCount===31?18:this.binaryShiftByteCount===62?9:8,f=new gi(a,l,this.binaryShiftByteCount+1,u+d);return f.binaryShiftByteCount===2078&&(f=f.endBinaryShift(i+1)),f}endBinaryShift(i){if(this.binaryShiftByteCount===0)return this;let a=this.token;return a=B_(a,i-this.binaryShiftByteCount,this.binaryShiftByteCount),new gi(a,this.mode,0,this.bitCount)}isBetterThanOrEqualTo(i){let a=this.bitCount+(_f[this.mode][i.mode]>>16);return this.binaryShiftByteCount<i.binaryShiftByteCount?a+=gi.calculateBinaryShiftCost(i)-gi.calculateBinaryShiftCost(this):this.binaryShiftByteCount>i.binaryShiftByteCount&&i.binaryShiftByteCount>0&&(a+=10),a<=i.bitCount}toBitArray(i){let a=[];for(let u=this.endBinaryShift(i.length).token;u!==null;u=u.getPrevious())a.unshift(u);let l=new D;for(const u of a)u.appendTo(l,i);return l}toString(){return Q.format("%s bits=%d bytes=%d",F_[this.mode],this.bitCount,this.binaryShiftByteCount)}static calculateBinaryShiftCost(i){return i.binaryShiftByteCount>62?21:i.binaryShiftByteCount>31?20:i.binaryShiftByteCount>0?10:0}}gi.INITIAL_STATE=new gi(j_,as,0,0);function V_(N){const i=Q.getCharCode(" "),a=Q.getCharCode("."),l=Q.getCharCode(",");N[as][i]=1;const u=Q.getCharCode("Z"),d=Q.getCharCode("A");for(let k=d;k<=u;k++)N[as][k]=k-d+2;N[_u][i]=1;const f=Q.getCharCode("z"),m=Q.getCharCode("a");for(let k=m;k<=f;k++)N[_u][k]=k-m+2;N[br][i]=1;const w=Q.getCharCode("9"),v=Q.getCharCode("0");for(let k=v;k<=w;k++)N[br][k]=k-v+2;N[br][l]=12,N[br][a]=13;const C=["\0"," ","","","","","","","\x07","\b","	",`
`,"\v","\f","\r","\x1B","","","","","@","\\","^","_","`","|","~",""];for(let k=0;k<C.length;k++)N[Bm][Q.getCharCode(C[k])]=k;const O=["\0","\r","\0","\0","\0","\0","!","'","#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","[","]","{","}"];for(let k=0;k<O.length;k++)Q.getCharCode(O[k])>0&&(N[pi][Q.getCharCode(O[k])]=k);return N}const Tf=V_(_.createInt32Array(5,256));class Pl{constructor(i){this.text=i}encode(){const i=Q.getCharCode(" "),a=Q.getCharCode(`
`);let l=Lm.singletonList(gi.INITIAL_STATE);for(let d=0;d<this.text.length;d++){let f,m=d+1<this.text.length?this.text[d+1]:0;switch(this.text[d]){case Q.getCharCode("\r"):f=m===a?2:0;break;case Q.getCharCode("."):f=m===i?3:0;break;case Q.getCharCode(","):f=m===i?4:0;break;case Q.getCharCode(":"):f=m===i?5:0;break;default:f=0}f>0?(l=Pl.updateStateListForPair(l,d,f),d++):l=this.updateStateListForChar(l,d)}return Lm.min(l,(d,f)=>d.getBitCount()-f.getBitCount()).toBitArray(this.text)}updateStateListForChar(i,a){const l=[];for(let u of i)this.updateStateForChar(u,a,l);return Pl.simplifyStates(l)}updateStateForChar(i,a,l){let u=this.text[a]&255,d=Tf[i.getMode()][u]>0,f=null;for(let m=0;m<=pi;m++){let w=Tf[m][u];if(w>0){if(f==null&&(f=i.endBinaryShift(a)),!d||m===i.getMode()||m===br){const v=f.latchAndAppend(m,w);l.push(v)}if(!d&&Fm[i.getMode()][m]>=0){const v=f.shiftAndAppend(m,w);l.push(v)}}}if(i.getBinaryShiftByteCount()>0||Tf[i.getMode()][u]===0){let m=i.addBinaryShiftChar(a);l.push(m)}}static updateStateListForPair(i,a,l){const u=[];for(let d of i)this.updateStateForPair(d,a,l,u);return this.simplifyStates(u)}static updateStateForPair(i,a,l,u){let d=i.endBinaryShift(a);if(u.push(d.latchAndAppend(pi,l)),i.getMode()!==pi&&u.push(d.shiftAndAppend(pi,l)),l===3||l===4){let f=d.latchAndAppend(br,16-l).latchAndAppend(br,1);u.push(f)}if(i.getBinaryShiftByteCount()>0){let f=i.addBinaryShiftChar(a).addBinaryShiftChar(a+1);u.push(f)}}static simplifyStates(i){let a=[];for(const l of i){let u=!0;for(const d of a){if(d.isBetterThanOrEqualTo(l)){u=!1;break}l.isBetterThanOrEqualTo(d)&&(a=a.filter(f=>f!==d))}u&&a.push(l)}return a}}class Je{constructor(){}static encodeBytes(i){return Je.encode(i,Je.DEFAULT_EC_PERCENT,Je.DEFAULT_AZTEC_LAYERS)}static encode(i,a,l){let u=new Pl(i).encode(),d=T.truncDivision(u.getSize()*a,100)+11,f=u.getSize()+d,m,w,v,C,O;if(l!==Je.DEFAULT_AZTEC_LAYERS){if(m=l<0,w=Math.abs(l),w>(m?Je.MAX_NB_BITS_COMPACT:Je.MAX_NB_BITS))throw new x(Q.format("Illegal value %s for layers",l));v=Je.totalBitsInLayer(w,m),C=Je.WORD_SIZE[w];let re=v-v%C;if(O=Je.stuffBits(u,C),O.getSize()+d>re)throw new x("Data to large for user specified layer");if(m&&O.getSize()>C*64)throw new x("Data to large for user specified layer")}else{C=0,O=null;for(let re=0;;re++){if(re>Je.MAX_NB_BITS)throw new x("Data too large for an Aztec code");if(m=re<=3,w=m?re+1:re,v=Je.totalBitsInLayer(w,m),f>v)continue;(O==null||C!==Je.WORD_SIZE[w])&&(C=Je.WORD_SIZE[w],O=Je.stuffBits(u,C));let Xe=v-v%C;if(!(m&&O.getSize()>C*64)&&O.getSize()+d<=Xe)break}}let k=Je.generateCheckWords(O,v,C),L=O.getSize()/C,V=Je.generateModeMessage(m,w,L),z=(m?11:14)+w*4,G=new Int32Array(z),K;if(m){K=z;for(let re=0;re<G.length;re++)G[re]=re}else{K=z+1+2*T.truncDivision(T.truncDivision(z,2)-1,15);let re=T.truncDivision(z,2),Xe=T.truncDivision(K,2);for(let je=0;je<re;je++){let Gn=je+T.truncDivision(je,15);G[re-je-1]=Xe-Gn-1,G[re+je]=Xe+Gn+1}}let oe=new ie(K);for(let re=0,Xe=0;re<w;re++){let je=(w-re)*4+(m?9:12);for(let Gn=0;Gn<je;Gn++){let jr=Gn*2;for(let Yn=0;Yn<2;Yn++)k.get(Xe+jr+Yn)&&oe.set(G[re*2+Yn],G[re*2+Gn]),k.get(Xe+je*2+jr+Yn)&&oe.set(G[re*2+Gn],G[z-1-re*2-Yn]),k.get(Xe+je*4+jr+Yn)&&oe.set(G[z-1-re*2-Yn],G[z-1-re*2-Gn]),k.get(Xe+je*6+jr+Yn)&&oe.set(G[z-1-re*2-Gn],G[re*2+Yn])}Xe+=je*8}if(Je.drawModeMessage(oe,m,K,V),m)Je.drawBullsEye(oe,T.truncDivision(K,2),5);else{Je.drawBullsEye(oe,T.truncDivision(K,2),7);for(let re=0,Xe=0;re<T.truncDivision(z,2)-1;re+=15,Xe+=16)for(let je=T.truncDivision(K,2)&1;je<K;je+=2)oe.set(T.truncDivision(K,2)-Xe,je),oe.set(T.truncDivision(K,2)+Xe,je),oe.set(je,T.truncDivision(K,2)-Xe),oe.set(je,T.truncDivision(K,2)+Xe)}let ae=new Pm;return ae.setCompact(m),ae.setSize(K),ae.setLayers(w),ae.setCodeWords(L),ae.setMatrix(oe),ae}static drawBullsEye(i,a,l){for(let u=0;u<l;u+=2)for(let d=a-u;d<=a+u;d++)i.set(d,a-u),i.set(d,a+u),i.set(a-u,d),i.set(a+u,d);i.set(a-l,a-l),i.set(a-l+1,a-l),i.set(a-l,a-l+1),i.set(a+l,a-l),i.set(a+l,a-l+1),i.set(a+l,a+l-1)}static generateModeMessage(i,a,l){let u=new D;return i?(u.appendBits(a-1,2),u.appendBits(l-1,6),u=Je.generateCheckWords(u,28,4)):(u.appendBits(a-1,5),u.appendBits(l-1,11),u=Je.generateCheckWords(u,40,4)),u}static drawModeMessage(i,a,l,u){let d=T.truncDivision(l,2);if(a)for(let f=0;f<7;f++){let m=d-3+f;u.get(f)&&i.set(m,d-5),u.get(f+7)&&i.set(d+5,m),u.get(20-f)&&i.set(m,d+5),u.get(27-f)&&i.set(d-5,m)}else for(let f=0;f<10;f++){let m=d-5+f+T.truncDivision(f,5);u.get(f)&&i.set(m,d-7),u.get(f+10)&&i.set(d+7,m),u.get(29-f)&&i.set(m,d+7),u.get(39-f)&&i.set(d-7,m)}}static generateCheckWords(i,a,l){let u=i.getSize()/l,d=new bf(Je.getGF(l)),f=T.truncDivision(a,l),m=Je.bitsToWords(i,l,f);d.encode(m,f-u);let w=a%l,v=new D;v.appendBits(0,w);for(const C of Array.from(m))v.appendBits(C,l);return v}static bitsToWords(i,a,l){let u=new Int32Array(l),d,f;for(d=0,f=i.getSize()/a;d<f;d++){let m=0;for(let w=0;w<a;w++)m|=i.get(d*a+w)?1<<a-w-1:0;u[d]=m}return u}static getGF(i){switch(i){case 4:return ze.AZTEC_PARAM;case 6:return ze.AZTEC_DATA_6;case 8:return ze.AZTEC_DATA_8;case 10:return ze.AZTEC_DATA_10;case 12:return ze.AZTEC_DATA_12;default:throw new x("Unsupported word size "+i)}}static stuffBits(i,a){let l=new D,u=i.getSize(),d=(1<<a)-2;for(let f=0;f<u;f+=a){let m=0;for(let w=0;w<a;w++)(f+w>=u||i.get(f+w))&&(m|=1<<a-1-w);(m&d)===d?(l.appendBits(m&d,a),f--):m&d?l.appendBits(m,a):(l.appendBits(m|1,a),f--)}return l}static totalBitsInLayer(i,a){return((a?88:112)+16*i)*i}}Je.DEFAULT_EC_PERCENT=33,Je.DEFAULT_AZTEC_LAYERS=0,Je.MAX_NB_BITS=32,Je.MAX_NB_BITS_COMPACT=4,Je.WORD_SIZE=Int32Array.from([4,6,6,8,8,8,8,8,8,10,10,10,10,10,10,10,10,10,10,10,10,10,10,12,12,12,12,12,12,12,12,12,12]);class Tu{encode(i,a,l,u){return this.encodeWithHints(i,a,l,u,null)}encodeWithHints(i,a,l,u,d){let f=Sf.ISO_8859_1,m=Je.DEFAULT_EC_PERCENT,w=Je.DEFAULT_AZTEC_LAYERS;return d!=null&&(d.has(Jt.CHARACTER_SET)&&(f=Dm.forName(d.get(Jt.CHARACTER_SET).toString())),d.has(Jt.ERROR_CORRECTION)&&(m=T.parseInt(d.get(Jt.ERROR_CORRECTION).toString())),d.has(Jt.AZTEC_LAYERS)&&(w=T.parseInt(d.get(Jt.AZTEC_LAYERS).toString()))),Tu.encodeLayers(i,a,l,u,f,m,w)}static encodeLayers(i,a,l,u,d,f,m){if(a!==me.AZTEC)throw new x("Can only encode AZTEC, but got "+a);let w=Je.encode(Q.getBytes(i,d),f,m);return Tu.renderResult(w,l,u)}static renderResult(i,a,l){let u=i.getMatrix();if(u==null)throw new zn;let d=u.getWidth(),f=u.getHeight(),m=Math.max(a,d),w=Math.max(l,f),v=Math.min(m/d,w/f),C=(m-d*v)/2,O=(w-f*v)/2,k=new ie(m,w);for(let L=0,V=O;L<f;L++,V+=v)for(let z=0,G=C;z<d;z++,G+=v)u.get(z,L)&&k.setRegion(G,V,v,v);return k}}n.AbstractExpandedDecoder=hf,n.ArgumentException=y,n.ArithmeticException=Dr,n.AztecCode=Pm,n.AztecCodeReader=Xo,n.AztecCodeWriter=Tu,n.AztecDecoder=nt,n.AztecDetector=so,n.AztecDetectorResult=ci,n.AztecEncoder=Je,n.AztecHighLevelEncoder=Pl,n.AztecPoint=hn,n.BarcodeFormat=me,n.Binarizer=I,n.BinaryBitmap=E,n.BitArray=D,n.BitMatrix=ie,n.BitSource=mf,n.BrowserAztecCodeReader=wu,n.BrowserBarcodeReader=w_,n.BrowserCodeReader=Pe,n.BrowserDatamatrixCodeReader=v_,n.BrowserMultiFormatReader=O_,n.BrowserPDF417Reader=k_,n.BrowserQRCodeReader=M_,n.BrowserQRCodeSvgWriter=uo,n.CharacterSetECI=H,n.ChecksumException=b,n.Code128Reader=ce,n.Code39Reader=Lt,n.DataMatrixDecodedBitStreamParser=rs,n.DataMatrixReader=is,n.DecodeHintType=j,n.DecoderResult=Vn,n.DefaultGridSampler=Mi,n.DetectorResult=io,n.EAN13Reader=Br,n.EncodeHintType=Jt,n.Exception=p,n.FormatException=B,n.GenericGF=ze,n.GenericGFPoly=Rt,n.GlobalHistogramBinarizer=Ee,n.GridSampler=_l,n.GridSamplerInstance=ui,n.HTMLCanvasElementLuminanceSource=ue,n.HybridBinarizer=ne,n.ITFReader=Ze,n.IllegalArgumentException=x,n.IllegalStateException=zn,n.InvertedLuminanceSource=Z,n.LuminanceSource=q,n.MathUtils=He,n.MultiFormatOneDReader=Qo,n.MultiFormatReader=Mm,n.MultiFormatWriter=P_,n.NotFoundException=$,n.OneDReader=At,n.PDF417DecodedBitStreamParser=X,n.PDF417DecoderErrorCorrection=Tm,n.PDF417Reader=pn,n.PDF417ResultMetadata=Rm,n.PerspectiveTransform=St,n.PlanarYUVLuminanceSource=fi,n.QRCodeByteMatrix=Au,n.QRCodeDataMask=vr,n.QRCodeDecodedBitStreamParser=Nt,n.QRCodeDecoderErrorCorrectionLevel=pt,n.QRCodeDecoderFormatInformation=Cn,n.QRCodeEncoder=wt,n.QRCodeEncoderQRCode=co,n.QRCodeMaskUtil=Ft,n.QRCodeMatrixUtil=Ne,n.QRCodeMode=Ie,n.QRCodeReader=ss,n.QRCodeVersion=_e,n.QRCodeWriter=ea,n.RGBLuminanceSource=Cf,n.RSS14Reader=Bt,n.RSSExpandedReader=ee,n.ReaderException=Su,n.ReedSolomonDecoder=li,n.ReedSolomonEncoder=bf,n.ReedSolomonException=Pr,n.Result=Re,n.ResultMetadataType=yt,n.ResultPoint=ye,n.StringUtils=Q,n.UnsupportedOperationException=te,n.VideoInputDevice=De,n.WhiteRectangleDetector=Lr,n.WriterException=dt,n.ZXingArrays=_,n.ZXingCharset=Dm,n.ZXingInteger=T,n.ZXingStandardCharsets=Sf,n.ZXingStringBuilder=fe,n.ZXingStringEncoding=he,n.ZXingSystem=S,n.createAbstractExpandedDecoder=Am,Object.defineProperty(n,"__esModule",{value:!0})})})(Z1,Z1.exports);var Et=Z1.exports;const T6=_p(Et),I6=o2({__proto__:null,default:T6},[Et]);var ox=function(){function t(e,n,r){if(this.formatMap=new Map([[xe.QR_CODE,Et.BarcodeFormat.QR_CODE],[xe.AZTEC,Et.BarcodeFormat.AZTEC],[xe.CODABAR,Et.BarcodeFormat.CODABAR],[xe.CODE_39,Et.BarcodeFormat.CODE_39],[xe.CODE_93,Et.BarcodeFormat.CODE_93],[xe.CODE_128,Et.BarcodeFormat.CODE_128],[xe.DATA_MATRIX,Et.BarcodeFormat.DATA_MATRIX],[xe.MAXICODE,Et.BarcodeFormat.MAXICODE],[xe.ITF,Et.BarcodeFormat.ITF],[xe.EAN_13,Et.BarcodeFormat.EAN_13],[xe.EAN_8,Et.BarcodeFormat.EAN_8],[xe.PDF_417,Et.BarcodeFormat.PDF_417],[xe.RSS_14,Et.BarcodeFormat.RSS_14],[xe.RSS_EXPANDED,Et.BarcodeFormat.RSS_EXPANDED],[xe.UPC_A,Et.BarcodeFormat.UPC_A],[xe.UPC_E,Et.BarcodeFormat.UPC_E],[xe.UPC_EAN_EXTENSION,Et.BarcodeFormat.UPC_EAN_EXTENSION]]),this.reverseFormatMap=this.createReverseFormatMap(),!I6)throw"Use html5qrcode.min.js without edit, ZXing not found.";this.verbose=n,this.logger=r;var s=this.createZXingFormats(e),o=new Map;o.set(Et.DecodeHintType.POSSIBLE_FORMATS,s),o.set(Et.DecodeHintType.TRY_HARDER,!1),this.hints=o}return t.prototype.decodeAsync=function(e){var n=this;return new Promise(function(r,s){try{r(n.decode(e))}catch(o){s(o)}})},t.prototype.decode=function(e){var n=new Et.MultiFormatReader(this.verbose,this.hints),r=new Et.HTMLCanvasElementLuminanceSource(e),s=new Et.BinaryBitmap(new Et.HybridBinarizer(r)),o=n.decode(s);return{text:o.text,format:xS.create(this.toHtml5QrcodeSupportedFormats(o.format)),debugData:this.createDebugData()}},t.prototype.createReverseFormatMap=function(){var e=new Map;return this.formatMap.forEach(function(n,r,s){e.set(n,r)}),e},t.prototype.toHtml5QrcodeSupportedFormats=function(e){if(!this.reverseFormatMap.has(e))throw"reverseFormatMap doesn't have ".concat(e);return this.reverseFormatMap.get(e)},t.prototype.createZXingFormats=function(e){for(var n=[],r=0,s=e;r<s.length;r++){var o=s[r];this.formatMap.has(o)?n.push(this.formatMap.get(o)):this.logger.logError("".concat(o," is not supported by")+"ZXingHtml5QrcodeShim")}return n},t.prototype.createDebugData=function(){return{decoderName:"zxing-js"}},t}(),R6=function(t,e,n,r){function s(o){return o instanceof n?o:new n(function(c){c(o)})}return new(n||(n=Promise))(function(o,c){function h(y){try{p(r.next(y))}catch(x){c(x)}}function g(y){try{p(r.throw(y))}catch(x){c(x)}}function p(y){y.done?o(y.value):s(y.value).then(h,g)}p((r=r.apply(t,e||[])).next())})},N6=function(t,e){var n={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},r,s,o,c;return c={next:h(0),throw:h(1),return:h(2)},typeof Symbol=="function"&&(c[Symbol.iterator]=function(){return this}),c;function h(p){return function(y){return g([p,y])}}function g(p){if(r)throw new TypeError("Generator is already executing.");for(;c&&(c=0,p[0]&&(n=0)),n;)try{if(r=1,s&&(o=p[0]&2?s.return:p[0]?s.throw||((o=s.return)&&o.call(s),0):s.next)&&!(o=o.call(s,p[1])).done)return o;switch(s=0,o&&(p=[p[0]&2,o.value]),p[0]){case 0:case 1:o=p;break;case 4:return n.label++,{value:p[1],done:!1};case 5:n.label++,s=p[1],p=[0];continue;case 7:p=n.ops.pop(),n.trys.pop();continue;default:if(o=n.trys,!(o=o.length>0&&o[o.length-1])&&(p[0]===6||p[0]===2)){n=0;continue}if(p[0]===3&&(!o||p[1]>o[0]&&p[1]<o[3])){n.label=p[1];break}if(p[0]===6&&n.label<o[1]){n.label=o[1],o=p;break}if(o&&n.label<o[2]){n.label=o[2],n.ops.push(p);break}o[2]&&n.ops.pop(),n.trys.pop();continue}p=e.call(t,n)}catch(y){p=[6,y],s=0}finally{r=o=0}if(p[0]&5)throw p[1];return{value:p[0]?p[1]:void 0,done:!0}}},ax=function(){function t(e,n,r){if(this.formatMap=new Map([[xe.QR_CODE,"qr_code"],[xe.AZTEC,"aztec"],[xe.CODABAR,"codabar"],[xe.CODE_39,"code_39"],[xe.CODE_93,"code_93"],[xe.CODE_128,"code_128"],[xe.DATA_MATRIX,"data_matrix"],[xe.ITF,"itf"],[xe.EAN_13,"ean_13"],[xe.EAN_8,"ean_8"],[xe.PDF_417,"pdf417"],[xe.UPC_A,"upc_a"],[xe.UPC_E,"upc_e"]]),this.reverseFormatMap=this.createReverseFormatMap(),!t.isSupported())throw"Use html5qrcode.min.js without edit, Use BarcodeDetectorDelegate only if it isSupported();";this.verbose=n,this.logger=r;var s=this.createBarcodeDetectorFormats(e);if(this.detector=new BarcodeDetector(s),!this.detector)throw"BarcodeDetector detector not supported"}return t.isSupported=function(){if(!("BarcodeDetector"in window))return!1;var e=new BarcodeDetector({formats:["qr_code"]});return typeof e<"u"},t.prototype.decodeAsync=function(e){return R6(this,void 0,void 0,function(){var n,r;return N6(this,function(s){switch(s.label){case 0:return[4,this.detector.detect(e)];case 1:if(n=s.sent(),!n||n.length===0)throw"No barcode or QR code detected.";return r=this.selectLargestBarcode(n),[2,{text:r.rawValue,format:xS.create(this.toHtml5QrcodeSupportedFormats(r.format)),debugData:this.createDebugData()}]}})})},t.prototype.selectLargestBarcode=function(e){for(var n=null,r=0,s=0,o=e;s<o.length;s++){var c=o[s],h=c.boundingBox.width*c.boundingBox.height;h>r&&(r=h,n=c)}if(!n)throw"No largest barcode found";return n},t.prototype.createBarcodeDetectorFormats=function(e){for(var n=[],r=0,s=e;r<s.length;r++){var o=s[r];this.formatMap.has(o)?n.push(this.formatMap.get(o)):this.logger.warn("".concat(o," is not supported by")+"BarcodeDetectorDelegate")}return{formats:n}},t.prototype.toHtml5QrcodeSupportedFormats=function(e){if(!this.reverseFormatMap.has(e))throw"reverseFormatMap doesn't have ".concat(e);return this.reverseFormatMap.get(e)},t.prototype.createReverseFormatMap=function(){var e=new Map;return this.formatMap.forEach(function(n,r,s){e.set(n,r)}),e},t.prototype.createDebugData=function(){return{decoderName:"BarcodeDetector"}},t}(),lx=function(t,e,n,r){function s(o){return o instanceof n?o:new n(function(c){c(o)})}return new(n||(n=Promise))(function(o,c){function h(y){try{p(r.next(y))}catch(x){c(x)}}function g(y){try{p(r.throw(y))}catch(x){c(x)}}function p(y){y.done?o(y.value):s(y.value).then(h,g)}p((r=r.apply(t,e||[])).next())})},cx=function(t,e){var n={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},r,s,o,c;return c={next:h(0),throw:h(1),return:h(2)},typeof Symbol=="function"&&(c[Symbol.iterator]=function(){return this}),c;function h(p){return function(y){return g([p,y])}}function g(p){if(r)throw new TypeError("Generator is already executing.");for(;c&&(c=0,p[0]&&(n=0)),n;)try{if(r=1,s&&(o=p[0]&2?s.return:p[0]?s.throw||((o=s.return)&&o.call(s),0):s.next)&&!(o=o.call(s,p[1])).done)return o;switch(s=0,o&&(p=[p[0]&2,o.value]),p[0]){case 0:case 1:o=p;break;case 4:return n.label++,{value:p[1],done:!1};case 5:n.label++,s=p[1],p=[0];continue;case 7:p=n.ops.pop(),n.trys.pop();continue;default:if(o=n.trys,!(o=o.length>0&&o[o.length-1])&&(p[0]===6||p[0]===2)){n=0;continue}if(p[0]===3&&(!o||p[1]>o[0]&&p[1]<o[3])){n.label=p[1];break}if(p[0]===6&&n.label<o[1]){n.label=o[1],o=p;break}if(o&&n.label<o[2]){n.label=o[2],n.ops.push(p);break}o[2]&&n.ops.pop(),n.trys.pop();continue}p=e.call(t,n)}catch(y){p=[6,y],s=0}finally{r=o=0}if(p[0]&5)throw p[1];return{value:p[0]?p[1]:void 0,done:!0}}},O6=function(){function t(e,n,r,s){this.EXECUTIONS_TO_REPORT_PERFORMANCE=100,this.executions=0,this.executionResults=[],this.wasPrimaryDecoderUsedInLastDecode=!1,this.verbose=r,n&&ax.isSupported()?(this.primaryDecoder=new ax(e,r,s),this.secondaryDecoder=new ox(e,r,s)):this.primaryDecoder=new ox(e,r,s)}return t.prototype.decodeAsync=function(e){return lx(this,void 0,void 0,function(){var n;return cx(this,function(r){switch(r.label){case 0:n=performance.now(),r.label=1;case 1:return r.trys.push([1,,3,4]),[4,this.getDecoder().decodeAsync(e)];case 2:return[2,r.sent()];case 3:return this.possiblyLogPerformance(n),[7];case 4:return[2]}})})},t.prototype.decodeRobustlyAsync=function(e){return lx(this,void 0,void 0,function(){var n,r;return cx(this,function(s){switch(s.label){case 0:n=performance.now(),s.label=1;case 1:return s.trys.push([1,3,4,5]),[4,this.primaryDecoder.decodeAsync(e)];case 2:return[2,s.sent()];case 3:if(r=s.sent(),this.secondaryDecoder)return[2,this.secondaryDecoder.decodeAsync(e)];throw r;case 4:return this.possiblyLogPerformance(n),[7];case 5:return[2]}})})},t.prototype.getDecoder=function(){return this.secondaryDecoder?this.wasPrimaryDecoderUsedInLastDecode===!1?(this.wasPrimaryDecoderUsedInLastDecode=!0,this.primaryDecoder):(this.wasPrimaryDecoderUsedInLastDecode=!1,this.secondaryDecoder):this.primaryDecoder},t.prototype.possiblyLogPerformance=function(e){if(this.verbose){var n=performance.now()-e;this.executionResults.push(n),this.executions++,this.possiblyFlushPerformanceReport()}},t.prototype.possiblyFlushPerformanceReport=function(){if(!(this.executions<this.EXECUTIONS_TO_REPORT_PERFORMANCE)){for(var e=0,n=0,r=this.executionResults;n<r.length;n++){var s=r[n];e+=s}var o=e/this.executionResults.length;console.log("".concat(o," ms for ").concat(this.executionResults.length," last runs.")),this.executions=0,this.executionResults=[]}},t}(),Wg=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,s){r.__proto__=s}||function(r,s){for(var o in s)Object.prototype.hasOwnProperty.call(s,o)&&(r[o]=s[o])},t(e,n)};return function(e,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),hh=function(t,e,n,r){function s(o){return o instanceof n?o:new n(function(c){c(o)})}return new(n||(n=Promise))(function(o,c){function h(y){try{p(r.next(y))}catch(x){c(x)}}function g(y){try{p(r.throw(y))}catch(x){c(x)}}function p(y){y.done?o(y.value):s(y.value).then(h,g)}p((r=r.apply(t,e||[])).next())})},fh=function(t,e){var n={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},r,s,o,c;return c={next:h(0),throw:h(1),return:h(2)},typeof Symbol=="function"&&(c[Symbol.iterator]=function(){return this}),c;function h(p){return function(y){return g([p,y])}}function g(p){if(r)throw new TypeError("Generator is already executing.");for(;c&&(c=0,p[0]&&(n=0)),n;)try{if(r=1,s&&(o=p[0]&2?s.return:p[0]?s.throw||((o=s.return)&&o.call(s),0):s.next)&&!(o=o.call(s,p[1])).done)return o;switch(s=0,o&&(p=[p[0]&2,o.value]),p[0]){case 0:case 1:o=p;break;case 4:return n.label++,{value:p[1],done:!1};case 5:n.label++,s=p[1],p=[0];continue;case 7:p=n.ops.pop(),n.trys.pop();continue;default:if(o=n.trys,!(o=o.length>0&&o[o.length-1])&&(p[0]===6||p[0]===2)){n=0;continue}if(p[0]===3&&(!o||p[1]>o[0]&&p[1]<o[3])){n.label=p[1];break}if(p[0]===6&&n.label<o[1]){n.label=o[1],o=p;break}if(o&&n.label<o[2]){n.label=o[2],n.ops.push(p);break}o[2]&&n.ops.pop(),n.trys.pop();continue}p=e.call(t,n)}catch(y){p=[6,y],s=0}finally{r=o=0}if(p[0]&5)throw p[1];return{value:p[0]?p[1]:void 0,done:!0}}},CS=function(){function t(e,n){this.name=e,this.track=n}return t.prototype.isSupported=function(){return this.track.getCapabilities?this.name in this.track.getCapabilities():!1},t.prototype.apply=function(e){var n={};n[this.name]=e;var r={advanced:[n]};return this.track.applyConstraints(r)},t.prototype.value=function(){var e=this.track.getSettings();if(this.name in e){var n=e[this.name];return n}return null},t}(),k6=function(t){Wg(e,t);function e(n,r){return t.call(this,n,r)||this}return e.prototype.min=function(){return this.getCapabilities().min},e.prototype.max=function(){return this.getCapabilities().max},e.prototype.step=function(){return this.getCapabilities().step},e.prototype.apply=function(n){var r={};r[this.name]=n;var s={advanced:[r]};return this.track.applyConstraints(s)},e.prototype.getCapabilities=function(){this.failIfNotSupported();var n=this.track.getCapabilities(),r=n[this.name];return{min:r.min,max:r.max,step:r.step}},e.prototype.failIfNotSupported=function(){if(!this.isSupported())throw new Error("".concat(this.name," capability not supported"))},e}(CS),M6=function(t){Wg(e,t);function e(n){return t.call(this,"zoom",n)||this}return e}(k6),D6=function(t){Wg(e,t);function e(n){return t.call(this,"torch",n)||this}return e}(CS),P6=function(){function t(e){this.track=e}return t.prototype.zoomFeature=function(){return new M6(this.track)},t.prototype.torchFeature=function(){return new D6(this.track)},t}(),L6=function(){function t(e,n,r){this.isClosed=!1,this.parentElement=e,this.mediaStream=n,this.callbacks=r,this.surface=this.createVideoElement(this.parentElement.clientWidth),e.append(this.surface)}return t.prototype.createVideoElement=function(e){var n=document.createElement("video");return n.style.width="".concat(e,"px"),n.style.display="block",n.muted=!0,n.setAttribute("muted","true"),n.playsInline=!0,n},t.prototype.setupSurface=function(){var e=this;this.surface.onabort=function(){throw"RenderedCameraImpl video surface onabort() called"},this.surface.onerror=function(){throw"RenderedCameraImpl video surface onerror() called"};var n=function(){var r=e.surface.clientWidth,s=e.surface.clientHeight;e.callbacks.onRenderSurfaceReady(r,s),e.surface.removeEventListener("playing",n)};this.surface.addEventListener("playing",n),this.surface.srcObject=this.mediaStream,this.surface.play()},t.create=function(e,n,r,s){return hh(this,void 0,void 0,function(){var o,c;return fh(this,function(h){switch(h.label){case 0:return o=new t(e,n,s),r.aspectRatio?(c={aspectRatio:r.aspectRatio},[4,o.getFirstTrackOrFail().applyConstraints(c)]):[3,2];case 1:h.sent(),h.label=2;case 2:return o.setupSurface(),[2,o]}})})},t.prototype.failIfClosed=function(){if(this.isClosed)throw"The RenderedCamera has already been closed."},t.prototype.getFirstTrackOrFail=function(){if(this.failIfClosed(),this.mediaStream.getVideoTracks().length===0)throw"No video tracks found";return this.mediaStream.getVideoTracks()[0]},t.prototype.pause=function(){this.failIfClosed(),this.surface.pause()},t.prototype.resume=function(e){this.failIfClosed();var n=this,r=function(){setTimeout(e,200),n.surface.removeEventListener("playing",r)};this.surface.addEventListener("playing",r),this.surface.play()},t.prototype.isPaused=function(){return this.failIfClosed(),this.surface.paused},t.prototype.getSurface=function(){return this.failIfClosed(),this.surface},t.prototype.getRunningTrackCapabilities=function(){return this.getFirstTrackOrFail().getCapabilities()},t.prototype.getRunningTrackSettings=function(){return this.getFirstTrackOrFail().getSettings()},t.prototype.applyVideoConstraints=function(e){return hh(this,void 0,void 0,function(){return fh(this,function(n){if("aspectRatio"in e)throw"Changing 'aspectRatio' in run-time is not yet supported.";return[2,this.getFirstTrackOrFail().applyConstraints(e)]})})},t.prototype.close=function(){if(this.isClosed)return Promise.resolve();var e=this;return new Promise(function(n,r){var s=e.mediaStream.getVideoTracks(),o=s.length,c=0;e.mediaStream.getVideoTracks().forEach(function(h){e.mediaStream.removeTrack(h),h.stop(),++c,c>=o&&(e.isClosed=!0,e.parentElement.removeChild(e.surface),n())})})},t.prototype.getCapabilities=function(){return new P6(this.getFirstTrackOrFail())},t}(),B6=function(){function t(e){this.mediaStream=e}return t.prototype.render=function(e,n,r){return hh(this,void 0,void 0,function(){return fh(this,function(s){return[2,L6.create(e,this.mediaStream,n,r)]})})},t.create=function(e){return hh(this,void 0,void 0,function(){var n,r;return fh(this,function(s){switch(s.label){case 0:if(!navigator.mediaDevices)throw"navigator.mediaDevices not supported";return n={audio:!1,video:e},[4,navigator.mediaDevices.getUserMedia(n)];case 1:return r=s.sent(),[2,new t(r)]}})})},t}(),ux=function(t,e,n,r){function s(o){return o instanceof n?o:new n(function(c){c(o)})}return new(n||(n=Promise))(function(o,c){function h(y){try{p(r.next(y))}catch(x){c(x)}}function g(y){try{p(r.throw(y))}catch(x){c(x)}}function p(y){y.done?o(y.value):s(y.value).then(h,g)}p((r=r.apply(t,e||[])).next())})},dx=function(t,e){var n={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},r,s,o,c;return c={next:h(0),throw:h(1),return:h(2)},typeof Symbol=="function"&&(c[Symbol.iterator]=function(){return this}),c;function h(p){return function(y){return g([p,y])}}function g(p){if(r)throw new TypeError("Generator is already executing.");for(;c&&(c=0,p[0]&&(n=0)),n;)try{if(r=1,s&&(o=p[0]&2?s.return:p[0]?s.throw||((o=s.return)&&o.call(s),0):s.next)&&!(o=o.call(s,p[1])).done)return o;switch(s=0,o&&(p=[p[0]&2,o.value]),p[0]){case 0:case 1:o=p;break;case 4:return n.label++,{value:p[1],done:!1};case 5:n.label++,s=p[1],p=[0];continue;case 7:p=n.ops.pop(),n.trys.pop();continue;default:if(o=n.trys,!(o=o.length>0&&o[o.length-1])&&(p[0]===6||p[0]===2)){n=0;continue}if(p[0]===3&&(!o||p[1]>o[0]&&p[1]<o[3])){n.label=p[1];break}if(p[0]===6&&n.label<o[1]){n.label=o[1],o=p;break}if(o&&n.label<o[2]){n.label=o[2],n.ops.push(p);break}o[2]&&n.ops.pop(),n.trys.pop();continue}p=e.call(t,n)}catch(y){p=[6,y],s=0}finally{r=o=0}if(p[0]&5)throw p[1];return{value:p[0]?p[1]:void 0,done:!0}}},F6=function(){function t(){}return t.failIfNotSupported=function(){return ux(this,void 0,void 0,function(){return dx(this,function(e){if(!navigator.mediaDevices)throw"navigator.mediaDevices not supported";return[2,new t]})})},t.prototype.create=function(e){return ux(this,void 0,void 0,function(){return dx(this,function(n){return[2,B6.create(e)]})})},t}(),j6=function(t,e,n,r){function s(o){return o instanceof n?o:new n(function(c){c(o)})}return new(n||(n=Promise))(function(o,c){function h(y){try{p(r.next(y))}catch(x){c(x)}}function g(y){try{p(r.throw(y))}catch(x){c(x)}}function p(y){y.done?o(y.value):s(y.value).then(h,g)}p((r=r.apply(t,e||[])).next())})},U6=function(t,e){var n={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},r,s,o,c;return c={next:h(0),throw:h(1),return:h(2)},typeof Symbol=="function"&&(c[Symbol.iterator]=function(){return this}),c;function h(p){return function(y){return g([p,y])}}function g(p){if(r)throw new TypeError("Generator is already executing.");for(;c&&(c=0,p[0]&&(n=0)),n;)try{if(r=1,s&&(o=p[0]&2?s.return:p[0]?s.throw||((o=s.return)&&o.call(s),0):s.next)&&!(o=o.call(s,p[1])).done)return o;switch(s=0,o&&(p=[p[0]&2,o.value]),p[0]){case 0:case 1:o=p;break;case 4:return n.label++,{value:p[1],done:!1};case 5:n.label++,s=p[1],p=[0];continue;case 7:p=n.ops.pop(),n.trys.pop();continue;default:if(o=n.trys,!(o=o.length>0&&o[o.length-1])&&(p[0]===6||p[0]===2)){n=0;continue}if(p[0]===3&&(!o||p[1]>o[0]&&p[1]<o[3])){n.label=p[1];break}if(p[0]===6&&n.label<o[1]){n.label=o[1],o=p;break}if(o&&n.label<o[2]){n.label=o[2],n.ops.push(p);break}o[2]&&n.ops.pop(),n.trys.pop();continue}p=e.call(t,n)}catch(y){p=[6,y],s=0}finally{r=o=0}if(p[0]&5)throw p[1];return{value:p[0]?p[1]:void 0,done:!0}}},V6=function(){function t(){}return t.retrieve=function(){if(navigator.mediaDevices)return t.getCamerasFromMediaDevices();var e=MediaStreamTrack;return MediaStreamTrack&&e.getSources?t.getCamerasFromMediaStreamTrack():t.rejectWithError()},t.rejectWithError=function(){var e=Ra.unableToQuerySupportedDevices();return t.isHttpsOrLocalhost()||(e=Ra.insecureContextCameraQueryError()),Promise.reject(e)},t.isHttpsOrLocalhost=function(){if(location.protocol==="https:")return!0;var e=location.host.split(":")[0];return e==="127.0.0.1"||e==="localhost"},t.getCamerasFromMediaDevices=function(){return j6(this,void 0,void 0,function(){var e,n,r,s,o,c,h;return U6(this,function(g){switch(g.label){case 0:return e=function(p){for(var y=p.getVideoTracks(),x=0,E=y;x<E.length;x++){var b=E[x];b.enabled=!1,b.stop(),p.removeTrack(b)}},[4,navigator.mediaDevices.getUserMedia({audio:!1,video:!0})];case 1:return n=g.sent(),[4,navigator.mediaDevices.enumerateDevices()];case 2:for(r=g.sent(),s=[],o=0,c=r;o<c.length;o++)h=c[o],h.kind==="videoinput"&&s.push({id:h.deviceId,label:h.label});return e(n),[2,s]}})})},t.getCamerasFromMediaStreamTrack=function(){return new Promise(function(e,n){var r=function(o){for(var c=[],h=0,g=o;h<g.length;h++){var p=g[h];p.kind==="video"&&c.push({id:p.id,label:p.label})}e(c)},s=MediaStreamTrack;s.getSources(r)})},t}(),Ut;(function(t){t[t.UNKNOWN=0]="UNKNOWN",t[t.NOT_STARTED=1]="NOT_STARTED",t[t.SCANNING=2]="SCANNING",t[t.PAUSED=3]="PAUSED"})(Ut||(Ut={}));var z6=function(){function t(){this.state=Ut.NOT_STARTED,this.onGoingTransactionNewState=Ut.UNKNOWN}return t.prototype.directTransition=function(e){this.failIfTransitionOngoing(),this.validateTransition(e),this.state=e},t.prototype.startTransition=function(e){return this.failIfTransitionOngoing(),this.validateTransition(e),this.onGoingTransactionNewState=e,this},t.prototype.execute=function(){if(this.onGoingTransactionNewState===Ut.UNKNOWN)throw"Transaction is already cancelled, cannot execute().";var e=this.onGoingTransactionNewState;this.onGoingTransactionNewState=Ut.UNKNOWN,this.directTransition(e)},t.prototype.cancel=function(){if(this.onGoingTransactionNewState===Ut.UNKNOWN)throw"Transaction is already cancelled, cannot cancel().";this.onGoingTransactionNewState=Ut.UNKNOWN},t.prototype.getState=function(){return this.state},t.prototype.failIfTransitionOngoing=function(){if(this.onGoingTransactionNewState!==Ut.UNKNOWN)throw"Cannot transition to a new state, already under transition"},t.prototype.validateTransition=function(e){switch(this.state){case Ut.UNKNOWN:throw"Transition from unknown is not allowed";case Ut.NOT_STARTED:this.failIfNewStateIs(e,[Ut.PAUSED]);break;case Ut.SCANNING:break;case Ut.PAUSED:break}},t.prototype.failIfNewStateIs=function(e,n){for(var r=0,s=n;r<s.length;r++){var o=s[r];if(e===o)throw"Cannot transition from ".concat(this.state," to ").concat(e)}},t}(),H6=function(){function t(e){this.stateManager=e}return t.prototype.startTransition=function(e){return this.stateManager.startTransition(e)},t.prototype.directTransition=function(e){this.stateManager.directTransition(e)},t.prototype.getState=function(){return this.stateManager.getState()},t.prototype.canScanFile=function(){return this.stateManager.getState()===Ut.NOT_STARTED},t.prototype.isScanning=function(){return this.stateManager.getState()!==Ut.NOT_STARTED},t.prototype.isStrictlyScanning=function(){return this.stateManager.getState()===Ut.SCANNING},t.prototype.isPaused=function(){return this.stateManager.getState()===Ut.PAUSED},t}(),W6=function(){function t(){}return t.create=function(){return new H6(new z6)},t}(),$6=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,s){r.__proto__=s}||function(r,s){for(var o in s)Object.prototype.hasOwnProperty.call(s,o)&&(r[o]=s[o])},t(e,n)};return function(e,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),sr=function(t){$6(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.DEFAULT_WIDTH=300,e.DEFAULT_WIDTH_OFFSET=2,e.FILE_SCAN_MIN_HEIGHT=300,e.FILE_SCAN_HIDDEN_CANVAS_PADDING=100,e.MIN_QR_BOX_SIZE=50,e.SHADED_LEFT=1,e.SHADED_RIGHT=2,e.SHADED_TOP=3,e.SHADED_BOTTOM=4,e.SHADED_REGION_ELEMENT_ID="qr-shaded-region",e.VERBOSE=!1,e.BORDER_SHADER_DEFAULT_COLOR="#ffffff",e.BORDER_SHADER_MATCH_COLOR="rgb(90, 193, 56)",e}(Qr),G6=function(){function t(e,n){this.logger=n,this.fps=sr.SCAN_DEFAULT_FPS,e?(e.fps&&(this.fps=e.fps),this.disableFlip=e.disableFlip===!0,this.qrbox=e.qrbox,this.aspectRatio=e.aspectRatio,this.videoConstraints=e.videoConstraints):this.disableFlip=sr.DEFAULT_DISABLE_FLIP}return t.prototype.isMediaStreamConstraintsValid=function(){return this.videoConstraints?bS.isMediaStreamConstraintsValid(this.videoConstraints,this.logger):(this.logger.logError("Empty videoConstraints",!0),!1)},t.prototype.isShadedBoxEnabled=function(){return!wi(this.qrbox)},t.create=function(e,n){return new t(e,n)},t}(),hx=function(){function t(e,n){if(this.element=null,this.canvasElement=null,this.scannerPausedUiElement=null,this.hasBorderShaders=null,this.borderShaders=null,this.qrMatch=null,this.renderedCamera=null,this.qrRegion=null,this.context=null,this.lastScanImageFile=null,this.isScanning=!1,!document.getElementById(e))throw"HTML Element with id=".concat(e," not found");this.elementId=e,this.verbose=!1;var r;typeof n=="boolean"?this.verbose=n===!0:n&&(r=n,this.verbose=r.verbose===!0,r.experimentalFeatures),this.logger=new ES(this.verbose),this.qrcode=new O6(this.getSupportedFormats(n),this.getUseBarCodeDetectorIfSupported(r),this.verbose,this.logger),this.foreverScanTimeout,this.shouldScan=!0,this.stateManagerProxy=W6.create()}return t.prototype.start=function(e,n,r,s){var o=this;if(!e)throw"cameraIdOrConfig is required";if(!r||typeof r!="function")throw"qrCodeSuccessCallback is required and should be a function.";var c;s?c=s:c=this.verbose?this.logger.log:function(){};var h=G6.create(n,this.logger);this.clearElement();var g=!1;h.videoConstraints&&(h.isMediaStreamConstraintsValid()?g=!0:this.logger.logError("'videoConstraints' is not valid 'MediaStreamConstraints, it will be ignored.'",!0));var p=g,y=document.getElementById(this.elementId);y.clientWidth?y.clientWidth:sr.DEFAULT_WIDTH,y.style.position="relative",this.shouldScan=!0,this.element=y;var x=this,E=this.stateManagerProxy.startTransition(Ut.SCANNING);return new Promise(function(b,I){var S=p?h.videoConstraints:x.createVideoConstraints(e);if(!S){E.cancel(),I("videoConstraints should be defined");return}var R={};(!p||h.aspectRatio)&&(R.aspectRatio=h.aspectRatio);var A={onRenderSurfaceReady:function(_,T){x.setupUi(_,T,h),x.isScanning=!0,x.foreverScan(h,r,c)}};F6.failIfNotSupported().then(function(_){_.create(S).then(function(T){return T.render(o.element,R,A).then(function(D){x.renderedCamera=D,E.execute(),b(null)}).catch(function(D){E.cancel(),I(D)})}).catch(function(T){E.cancel(),I(Ra.errorGettingUserMedia(T))})}).catch(function(_){E.cancel(),I(Ra.cameraStreamingNotSupported())})})},t.prototype.pause=function(e){if(!this.stateManagerProxy.isStrictlyScanning())throw"Cannot pause, scanner is not scanning.";this.stateManagerProxy.directTransition(Ut.PAUSED),this.showPausedState(),(wi(e)||e!==!0)&&(e=!1),e&&this.renderedCamera&&this.renderedCamera.pause()},t.prototype.resume=function(){if(!this.stateManagerProxy.isPaused())throw"Cannot result, scanner is not paused.";if(!this.renderedCamera)throw"renderedCamera doesn't exist while trying resume()";var e=this,n=function(){e.stateManagerProxy.directTransition(Ut.SCANNING),e.hidePausedState()};if(!this.renderedCamera.isPaused()){n();return}this.renderedCamera.resume(function(){n()})},t.prototype.getState=function(){return this.stateManagerProxy.getState()},t.prototype.stop=function(){var e=this;if(!this.stateManagerProxy.isScanning())throw"Cannot stop, scanner is not running or paused.";var n=this.stateManagerProxy.startTransition(Ut.NOT_STARTED);this.shouldScan=!1,this.foreverScanTimeout&&clearTimeout(this.foreverScanTimeout);var r=function(){if(e.element){var o=document.getElementById(sr.SHADED_REGION_ELEMENT_ID);o&&e.element.removeChild(o)}},s=this;return this.renderedCamera.close().then(function(){return s.renderedCamera=null,s.element&&(s.element.removeChild(s.canvasElement),s.canvasElement=null),r(),s.qrRegion&&(s.qrRegion=null),s.context&&(s.context=null),n.execute(),s.hidePausedState(),s.isScanning=!1,Promise.resolve()})},t.prototype.scanFile=function(e,n){return this.scanFileV2(e,n).then(function(r){return r.decodedText})},t.prototype.scanFileV2=function(e,n){var r=this;if(!e||!(e instanceof File))throw"imageFile argument is mandatory and should be instance of File. Use 'event.target.files[0]'.";if(wi(n)&&(n=!0),!this.stateManagerProxy.canScanFile())throw"Cannot start file scan - ongoing camera scan";return new Promise(function(s,o){r.possiblyCloseLastScanImageFile(),r.clearElement(),r.lastScanImageFile=URL.createObjectURL(e);var c=new Image;c.onload=function(){var h=c.width,g=c.height,p=document.getElementById(r.elementId),y=p.clientWidth?p.clientWidth:sr.DEFAULT_WIDTH,x=Math.max(p.clientHeight?p.clientHeight:g,sr.FILE_SCAN_MIN_HEIGHT),E=r.computeCanvasDrawConfig(h,g,y,x);if(n){var b=r.createCanvasElement(y,x,"qr-canvas-visible");b.style.display="inline-block",p.appendChild(b);var I=b.getContext("2d");if(!I)throw"Unable to get 2d context from canvas";I.canvas.width=y,I.canvas.height=x,I.drawImage(c,0,0,h,g,E.x,E.y,E.width,E.height)}var S=sr.FILE_SCAN_HIDDEN_CANVAS_PADDING,R=Math.max(c.width,E.width),A=Math.max(c.height,E.height),_=R+2*S,T=A+2*S,D=r.createCanvasElement(_,T);p.appendChild(D);var F=D.getContext("2d");if(!F)throw"Unable to get 2d context from canvas";F.canvas.width=_,F.canvas.height=T,F.drawImage(c,0,0,h,g,S,S,R,A);try{r.qrcode.decodeRobustlyAsync(D).then(function(j){s(ix.createFromQrcodeResult(j))}).catch(o)}catch(j){o("QR code parse error, error = ".concat(j))}},c.onerror=o,c.onabort=o,c.onstalled=o,c.onsuspend=o,c.src=URL.createObjectURL(e)})},t.prototype.clear=function(){this.clearElement()},t.getCameras=function(){return V6.retrieve()},t.prototype.getRunningTrackCapabilities=function(){return this.getRenderedCameraOrFail().getRunningTrackCapabilities()},t.prototype.getRunningTrackSettings=function(){return this.getRenderedCameraOrFail().getRunningTrackSettings()},t.prototype.getRunningTrackCameraCapabilities=function(){return this.getRenderedCameraOrFail().getCapabilities()},t.prototype.applyVideoConstraints=function(e){if(e){if(!bS.isMediaStreamConstraintsValid(e,this.logger))throw"invalid videoConstaints passed, check logs for more details"}else throw"videoConstaints is required argument.";return this.getRenderedCameraOrFail().applyVideoConstraints(e)},t.prototype.getRenderedCameraOrFail=function(){if(this.renderedCamera==null)throw"Scanning is not in running state, call this API only when QR code scanning using camera is in running state.";return this.renderedCamera},t.prototype.getSupportedFormats=function(e){var n=[xe.QR_CODE,xe.AZTEC,xe.CODABAR,xe.CODE_39,xe.CODE_93,xe.CODE_128,xe.DATA_MATRIX,xe.MAXICODE,xe.ITF,xe.EAN_13,xe.EAN_8,xe.PDF_417,xe.RSS_14,xe.RSS_EXPANDED,xe.UPC_A,xe.UPC_E,xe.UPC_EAN_EXTENSION];if(!e||typeof e=="boolean"||!e.formatsToSupport)return n;if(!Array.isArray(e.formatsToSupport))throw"configOrVerbosityFlag.formatsToSupport should be undefined or an array.";if(e.formatsToSupport.length===0)throw"Atleast 1 formatsToSupport is needed.";for(var r=[],s=0,o=e.formatsToSupport;s<o.length;s++){var c=o[s];A6(c)?r.push(c):this.logger.warn("Invalid format: ".concat(c," passed in config, ignoring."))}if(r.length===0)throw"None of formatsToSupport match supported values.";return r},t.prototype.getUseBarCodeDetectorIfSupported=function(e){if(wi(e))return!0;if(!wi(e.useBarCodeDetectorIfSupported))return e.useBarCodeDetectorIfSupported!==!1;if(wi(e.experimentalFeatures))return!0;var n=e.experimentalFeatures;return wi(n.useBarCodeDetectorIfSupported)?!0:n.useBarCodeDetectorIfSupported!==!1},t.prototype.validateQrboxSize=function(e,n,r){var s=this,o=r.qrbox;this.validateQrboxConfig(o);var c=this.toQrdimensions(e,n,o),h=function(p){if(p<sr.MIN_QR_BOX_SIZE)throw"minimum size of 'config.qrbox' dimension value is"+" ".concat(sr.MIN_QR_BOX_SIZE,"px.")},g=function(p){return p>e&&(s.logger.warn("`qrbox.width` or `qrbox` is larger than the width of the root element. The width will be truncated to the width of root element."),p=e),p};h(c.width),h(c.height),c.width=g(c.width)},t.prototype.validateQrboxConfig=function(e){if(typeof e!="number"&&typeof e!="function"&&(e.width===void 0||e.height===void 0))throw"Invalid instance of QrDimensions passed for 'config.qrbox'. Both 'width' and 'height' should be set."},t.prototype.toQrdimensions=function(e,n,r){if(typeof r=="number")return{width:r,height:r};if(typeof r=="function")try{return r(e,n)}catch(s){throw new Error("qrbox config was passed as a function but it failed with unknown error"+s)}return r},t.prototype.setupUi=function(e,n,r){r.isShadedBoxEnabled()&&this.validateQrboxSize(e,n,r);var s=wi(r.qrbox)?{width:e,height:n}:r.qrbox;this.validateQrboxConfig(s);var o=this.toQrdimensions(e,n,s);o.height>n&&this.logger.warn("[Html5Qrcode] config.qrbox has height that isgreater than the height of the video stream. Shading will be ignored");var c=r.isShadedBoxEnabled()&&o.height<=n,h={x:0,y:0,width:e,height:n},g=c?this.getShadedRegionBounds(e,n,o):h,p=this.createCanvasElement(g.width,g.height),y={willReadFrequently:!0},x=p.getContext("2d",y);x.canvas.width=g.width,x.canvas.height=g.height,this.element.append(p),c&&this.possiblyInsertShadingElement(this.element,e,n,o),this.createScannerPausedUiElement(this.element),this.qrRegion=g,this.context=x,this.canvasElement=p},t.prototype.createScannerPausedUiElement=function(e){var n=document.createElement("div");n.innerText=Ra.scannerPaused(),n.style.display="none",n.style.position="absolute",n.style.top="0px",n.style.zIndex="1",n.style.background="rgba(9, 9, 9, 0.46)",n.style.color="#FFECEC",n.style.textAlign="center",n.style.width="100%",e.appendChild(n),this.scannerPausedUiElement=n},t.prototype.scanContext=function(e,n){var r=this;return this.stateManagerProxy.isPaused()?Promise.resolve(!1):this.qrcode.decodeAsync(this.canvasElement).then(function(s){return e(s.text,ix.createFromQrcodeResult(s)),r.possiblyUpdateShaders(!0),!0}).catch(function(s){r.possiblyUpdateShaders(!1);var o=Ra.codeParseError(s);return n(o,vS.createFrom(o)),!1})},t.prototype.foreverScan=function(e,n,r){var s=this;if(this.shouldScan&&this.renderedCamera){var o=this.renderedCamera.getSurface(),c=o.videoWidth/o.clientWidth,h=o.videoHeight/o.clientHeight;if(!this.qrRegion)throw"qrRegion undefined when localMediaStream is ready.";var g=this.qrRegion.width*c,p=this.qrRegion.height*h,y=this.qrRegion.x*c,x=this.qrRegion.y*h;this.context.drawImage(o,y,x,g,p,0,0,this.qrRegion.width,this.qrRegion.height);var E=function(){s.foreverScanTimeout=setTimeout(function(){s.foreverScan(e,n,r)},s.getTimeoutFps(e.fps))};this.scanContext(n,r).then(function(b){!b&&e.disableFlip!==!0?(s.context.translate(s.context.canvas.width,0),s.context.scale(-1,1),s.scanContext(n,r).finally(function(){E()})):E()}).catch(function(b){s.logger.logError("Error happend while scanning context",b),E()})}},t.prototype.createVideoConstraints=function(e){if(typeof e=="string")return{deviceId:{exact:e}};if(typeof e=="object"){var n="facingMode",r="deviceId",s={user:!0,environment:!0},o="exact",c=function(I){if(I in s)return!0;throw"config has invalid 'facingMode' value = "+"'".concat(I,"'")},h=Object.keys(e);if(h.length!==1)throw"'cameraIdOrConfig' object should have exactly 1 key,"+" if passed as an object, found ".concat(h.length," keys");var g=Object.keys(e)[0];if(g!==n&&g!==r)throw"Only '".concat(n,"' and '").concat(r,"' ")+" are supported for 'cameraIdOrConfig'";if(g===n){var p=e.facingMode;if(typeof p=="string"){if(c(p))return{facingMode:p}}else if(typeof p=="object")if(o in p){if(c(p["".concat(o)]))return{facingMode:{exact:p["".concat(o)]}}}else throw"'facingMode' should be string or object with"+" ".concat(o," as key.");else{var y=typeof p;throw"Invalid type of 'facingMode' = ".concat(y)}}else{var x=e.deviceId;if(typeof x=="string")return{deviceId:x};if(typeof x=="object"){if(o in x)return{deviceId:{exact:x["".concat(o)]}};throw"'deviceId' should be string or object with"+" ".concat(o," as key.")}else{var E=typeof x;throw"Invalid type of 'deviceId' = ".concat(E)}}}var b=typeof e;throw"Invalid type of 'cameraIdOrConfig' = ".concat(b)},t.prototype.computeCanvasDrawConfig=function(e,n,r,s){if(e<=r&&n<=s){var o=(r-e)/2,c=(s-n)/2;return{x:o,y:c,width:e,height:n}}else{var h=e,g=n;return e>r&&(n=r/e*n,e=r),n>s&&(e=s/n*e,n=s),this.logger.log("Image downsampled from "+"".concat(h,"X").concat(g)+" to ".concat(e,"X").concat(n,".")),this.computeCanvasDrawConfig(e,n,r,s)}},t.prototype.clearElement=function(){if(this.stateManagerProxy.isScanning())throw"Cannot clear while scan is ongoing, close it first.";var e=document.getElementById(this.elementId);e&&(e.innerHTML="")},t.prototype.possiblyUpdateShaders=function(e){this.qrMatch!==e&&(this.hasBorderShaders&&this.borderShaders&&this.borderShaders.length&&this.borderShaders.forEach(function(n){n.style.backgroundColor=e?sr.BORDER_SHADER_MATCH_COLOR:sr.BORDER_SHADER_DEFAULT_COLOR}),this.qrMatch=e)},t.prototype.possiblyCloseLastScanImageFile=function(){this.lastScanImageFile&&(URL.revokeObjectURL(this.lastScanImageFile),this.lastScanImageFile=null)},t.prototype.createCanvasElement=function(e,n,r){var s=e,o=n,c=document.createElement("canvas");return c.style.width="".concat(s,"px"),c.style.height="".concat(o,"px"),c.style.display="none",c.id=wi(r)?"qr-canvas":r,c},t.prototype.getShadedRegionBounds=function(e,n,r){if(r.width>e||r.height>n)throw"'config.qrbox' dimensions should not be greater than the dimensions of the root HTML element.";return{x:(e-r.width)/2,y:(n-r.height)/2,width:r.width,height:r.height}},t.prototype.possiblyInsertShadingElement=function(e,n,r,s){if(!(n-s.width<1||r-s.height<1)){var o=document.createElement("div");o.style.position="absolute";var c=(n-s.width)/2,h=(r-s.height)/2;if(o.style.borderLeft="".concat(c,"px solid rgba(0, 0, 0, 0.48)"),o.style.borderRight="".concat(c,"px solid rgba(0, 0, 0, 0.48)"),o.style.borderTop="".concat(h,"px solid rgba(0, 0, 0, 0.48)"),o.style.borderBottom="".concat(h,"px solid rgba(0, 0, 0, 0.48)"),o.style.boxSizing="border-box",o.style.top="0px",o.style.bottom="0px",o.style.left="0px",o.style.right="0px",o.id="".concat(sr.SHADED_REGION_ELEMENT_ID),n-s.width<11||r-s.height<11)this.hasBorderShaders=!1;else{var g=5,p=40;this.insertShaderBorders(o,p,g,-g,null,0,!0),this.insertShaderBorders(o,p,g,-g,null,0,!1),this.insertShaderBorders(o,p,g,null,-g,0,!0),this.insertShaderBorders(o,p,g,null,-g,0,!1),this.insertShaderBorders(o,g,p+g,-g,null,-g,!0),this.insertShaderBorders(o,g,p+g,null,-g,-g,!0),this.insertShaderBorders(o,g,p+g,-g,null,-g,!1),this.insertShaderBorders(o,g,p+g,null,-g,-g,!1),this.hasBorderShaders=!0}e.append(o)}},t.prototype.insertShaderBorders=function(e,n,r,s,o,c,h){var g=document.createElement("div");g.style.position="absolute",g.style.backgroundColor=sr.BORDER_SHADER_DEFAULT_COLOR,g.style.width="".concat(n,"px"),g.style.height="".concat(r,"px"),s!==null&&(g.style.top="".concat(s,"px")),o!==null&&(g.style.bottom="".concat(o,"px")),h?g.style.left="".concat(c,"px"):g.style.right="".concat(c,"px"),this.borderShaders||(this.borderShaders=[]),this.borderShaders.push(g),e.appendChild(g)},t.prototype.showPausedState=function(){if(!this.scannerPausedUiElement)throw"[internal error] scanner paused UI element not found";this.scannerPausedUiElement.style.display="block"},t.prototype.hidePausedState=function(){if(!this.scannerPausedUiElement)throw"[internal error] scanner paused UI element not found";this.scannerPausedUiElement.style.display="none"},t.prototype.getTimeoutFps=function(e){return 1e3/e},t}(),$g="data:image/svg+xml;base64,",Y6=$g+"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCAzNzEuNjQzIDM3MS42NDMiIHN0eWxlPSJlbmFibGUtYmFja2dyb3VuZDpuZXcgMCAwIDM3MS42NDMgMzcxLjY0MyIgeG1sOnNwYWNlPSJwcmVzZXJ2ZSI+PHBhdGggZD0iTTEwNS4wODQgMzguMjcxaDE2My43Njh2MjBIMTA1LjA4NHoiLz48cGF0aCBkPSJNMzExLjU5NiAxOTAuMTg5Yy03LjQ0MS05LjM0Ny0xOC40MDMtMTYuMjA2LTMyLjc0My0yMC41MjJWMzBjMC0xNi41NDItMTMuNDU4LTMwLTMwLTMwSDEyNS4wODRjLTE2LjU0MiAwLTMwIDEzLjQ1OC0zMCAzMHYxMjAuMTQzaC04LjI5NmMtMTYuNTQyIDAtMzAgMTMuNDU4LTMwIDMwdjEuMzMzYTI5LjgwNCAyOS44MDQgMCAwIDAgNC42MDMgMTUuOTM5Yy03LjM0IDUuNDc0LTEyLjEwMyAxNC4yMjEtMTIuMTAzIDI0LjA2MXYxLjMzM2MwIDkuODQgNC43NjMgMTguNTg3IDEyLjEwMyAyNC4wNjJhMjkuODEgMjkuODEgMCAwIDAtNC42MDMgMTUuOTM4djEuMzMzYzAgMTYuNTQyIDEzLjQ1OCAzMCAzMCAzMGg4LjMyNGMuNDI3IDExLjYzMSA3LjUwMyAyMS41ODcgMTcuNTM0IDI2LjE3Ny45MzEgMTAuNTAzIDQuMDg0IDMwLjE4NyAxNC43NjggNDUuNTM3YTkuOTg4IDkuOTg4IDAgMCAwIDguMjE2IDQuMjg4IDkuOTU4IDkuOTU4IDAgMCAwIDUuNzA0LTEuNzkzYzQuNTMzLTMuMTU1IDUuNjUtOS4zODggMi40OTUtMTMuOTIxLTYuNzk4LTkuNzY3LTkuNjAyLTIyLjYwOC0xMC43Ni0zMS40aDgyLjY4NWMuMjcyLjQxNC41NDUuODE4LjgxNSAxLjIxIDMuMTQyIDQuNTQxIDkuMzcyIDUuNjc5IDEzLjkxMyAyLjUzNCA0LjU0Mi0zLjE0MiA1LjY3Ny05LjM3MSAyLjUzNS0xMy45MTMtMTEuOTE5LTE3LjIyOS04Ljc4Ny0zNS44ODQgOS41ODEtNTcuMDEyIDMuMDY3LTIuNjUyIDEyLjMwNy0xMS43MzIgMTEuMjE3LTI0LjAzMy0uODI4LTkuMzQzLTcuMTA5LTE3LjE5NC0xOC42NjktMjMuMzM3YTkuODU3IDkuODU3IDAgMCAwLTEuMDYxLS40ODZjLS40NjYtLjE4Mi0xMS40MDMtNC41NzktOS43NDEtMTUuNzA2IDEuMDA3LTYuNzM3IDE0Ljc2OC04LjI3MyAyMy43NjYtNy42NjYgMjMuMTU2IDEuNTY5IDM5LjY5OCA3LjgwMyA0Ny44MzYgMTguMDI2IDUuNzUyIDcuMjI1IDcuNjA3IDE2LjYyMyA1LjY3MyAyOC43MzMtLjQxMyAyLjU4NS0uODI0IDUuMjQxLTEuMjQ1IDcuOTU5LTUuNzU2IDM3LjE5NC0xMi45MTkgODMuNDgzLTQ5Ljg3IDExNC42NjEtNC4yMjEgMy41NjEtNC43NTYgOS44Ny0xLjE5NCAxNC4wOTJhOS45OCA5Ljk4IDAgMCAwIDcuNjQ4IDMuNTUxIDkuOTU1IDkuOTU1IDAgMCAwIDYuNDQ0LTIuMzU4YzQyLjY3Mi0zNi4wMDUgNTAuODAyLTg4LjUzMyA1Ni43MzctMTI2Ljg4OC40MTUtMi42ODQuODIxLTUuMzA5IDEuMjI5LTcuODYzIDIuODM0LTE3LjcyMS0uNDU1LTMyLjY0MS05Ljc3Mi00NC4zNDV6bS0yMzIuMzA4IDQyLjYyYy01LjUxNCAwLTEwLTQuNDg2LTEwLTEwdi0xLjMzM2MwLTUuNTE0IDQuNDg2LTEwIDEwLTEwaDE1djIxLjMzM2gtMTV6bS0yLjUtNTIuNjY2YzAtNS41MTQgNC40ODYtMTAgMTAtMTBoNy41djIxLjMzM2gtNy41Yy01LjUxNCAwLTEwLTQuNDg2LTEwLTEwdi0xLjMzM3ptMTcuNSA5My45OTloLTcuNWMtNS41MTQgMC0xMC00LjQ4Ni0xMC0xMHYtMS4zMzNjMC01LjUxNCA0LjQ4Ni0xMCAxMC0xMGg3LjV2MjEuMzMzem0zMC43OTYgMjguODg3Yy01LjUxNCAwLTEwLTQuNDg2LTEwLTEwdi04LjI3MWg5MS40NTdjLS44NTEgNi42NjgtLjQzNyAxMi43ODcuNzMxIDE4LjI3MWgtODIuMTg4em03OS40ODItMTEzLjY5OGMtMy4xMjQgMjAuOTA2IDEyLjQyNyAzMy4xODQgMjEuNjI1IDM3LjA0IDUuNDQxIDIuOTY4IDcuNTUxIDUuNjQ3IDcuNzAxIDcuMTg4LjIxIDIuMTUtMi41NTMgNS42ODQtNC40NzcgNy4yNTEtLjQ4Mi4zNzgtLjkyOS44LTEuMzM1IDEuMjYxLTYuOTg3IDcuOTM2LTExLjk4MiAxNS41Mi0xNS40MzIgMjIuNjg4aC05Ny41NjRWMzBjMC01LjUxNCA0LjQ4Ni0xMCAxMC0xMGgxMjMuNzY5YzUuNTE0IDAgMTAgNC40ODYgMTAgMTB2MTM1LjU3OWMtMy4wMzItLjM4MS02LjE1LS42OTQtOS4zODktLjkxNC0yNS4xNTktMS42OTQtNDIuMzcgNy43NDgtNDQuODk4IDI0LjY2NnoiLz48cGF0aCBkPSJNMTc5LjEyOSA4My4xNjdoLTI0LjA2YTUgNSAwIDAgMC01IDV2MjQuMDYxYTUgNSAwIDAgMCA1IDVoMjQuMDZhNSA1IDAgMCAwIDUtNVY4OC4xNjdhNSA1IDAgMCAwLTUtNXpNMTcyLjYyOSAxNDIuODZoLTEyLjU2VjEzMC44YTUgNSAwIDEgMC0xMCAwdjE3LjA2MWE1IDUgMCAwIDAgNSA1aDE3LjU2YTUgNSAwIDEgMCAwLTEwLjAwMXpNMjE2LjU2OCA4My4xNjdoLTI0LjA2YTUgNSAwIDAgMC01IDV2MjQuMDYxYTUgNSAwIDAgMCA1IDVoMjQuMDZhNSA1IDAgMCAwIDUtNVY4OC4xNjdhNSA1IDAgMCAwLTUtNXptLTUgMjQuMDYxaC0xNC4wNlY5My4xNjdoMTQuMDZ2MTQuMDYxek0yMTEuNjY5IDEyNS45MzZIMTk3LjQxYTUgNSAwIDAgMC01IDV2MTQuMjU3YTUgNSAwIDAgMCA1IDVoMTQuMjU5YTUgNSAwIDAgMCA1LTV2LTE0LjI1N2E1IDUgMCAwIDAtNS01eiIvPjwvc3ZnPg==",X6=$g+"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCA1OS4wMTggNTkuMDE4IiBzdHlsZT0iZW5hYmxlLWJhY2tncm91bmQ6bmV3IDAgMCA1OS4wMTggNTkuMDE4IiB4bWw6c3BhY2U9InByZXNlcnZlIj48cGF0aCBkPSJtNTguNzQxIDU0LjgwOS01Ljk2OS02LjI0NGExMC43NCAxMC43NCAwIDAgMCAyLjgyLTcuMjVjMC01Ljk1My00Ljg0My0xMC43OTYtMTAuNzk2LTEwLjc5NlMzNCAzNS4zNjEgMzQgNDEuMzE0IDM4Ljg0MyA1Mi4xMSA0NC43OTYgNTIuMTFjMi40NDEgMCA0LjY4OC0uODI0IDYuNDk5LTIuMTk2bDYuMDAxIDYuMjc3YS45OTguOTk4IDAgMCAwIDEuNDE0LjAzMiAxIDEgMCAwIDAgLjAzMS0xLjQxNHpNMzYgNDEuMzE0YzAtNC44NSAzLjk0Ni04Ljc5NiA4Ljc5Ni04Ljc5NnM4Ljc5NiAzLjk0NiA4Ljc5NiA4Ljc5Ni0zLjk0NiA4Ljc5Ni04Ljc5NiA4Ljc5NlMzNiA0Ni4xNjQgMzYgNDEuMzE0ek0xMC40MzEgMTYuMDg4YzAgMy4wNyAyLjQ5OCA1LjU2OCA1LjU2OSA1LjU2OHM1LjU2OS0yLjQ5OCA1LjU2OS01LjU2OGMwLTMuMDcxLTIuNDk4LTUuNTY5LTUuNTY5LTUuNTY5cy01LjU2OSAyLjQ5OC01LjU2OSA1LjU2OXptOS4xMzggMGMwIDEuOTY4LTEuNjAyIDMuNTY4LTMuNTY5IDMuNTY4cy0zLjU2OS0xLjYwMS0zLjU2OS0zLjU2OCAxLjYwMi0zLjU2OSAzLjU2OS0zLjU2OSAzLjU2OSAxLjYwMSAzLjU2OSAzLjU2OXoiLz48cGF0aCBkPSJtMzAuODgyIDI4Ljk4NyA5LjE4LTEwLjA1NCAxMS4yNjIgMTAuMzIzYTEgMSAwIDAgMCAxLjM1MS0xLjQ3NWwtMTItMTFhMSAxIDAgMCAwLTEuNDE0LjA2M2wtOS43OTQgMTAuNzI3LTQuNzQzLTQuNzQzYTEuMDAzIDEuMDAzIDAgMCAwLTEuMzY4LS4wNDRMNi4zMzkgMzcuNzY4YTEgMSAwIDEgMCAxLjMyMiAxLjUwMWwxNi4zMTMtMTQuMzYyIDcuMzE5IDcuMzE4YS45OTkuOTk5IDAgMSAwIDEuNDE0LTEuNDE0bC0xLjgyNS0xLjgyNHoiLz48cGF0aCBkPSJNMzAgNDYuNTE4SDJ2LTQyaDU0djI4YTEgMSAwIDEgMCAyIDB2LTI5YTEgMSAwIDAgMC0xLTFIMWExIDEgMCAwIDAtMSAxdjQ0YTEgMSAwIDAgMCAxIDFoMjlhMSAxIDAgMSAwIDAtMnoiLz48L3N2Zz4=",fx=$g+"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCA0NjAgNDYwIiBzdHlsZT0iZW5hYmxlLWJhY2tncm91bmQ6bmV3IDAgMCA0NjAgNDYwIiB4bWw6c3BhY2U9InByZXNlcnZlIj48cGF0aCBkPSJNMjMwIDBDMTAyLjk3NSAwIDAgMTAyLjk3NSAwIDIzMHMxMDIuOTc1IDIzMCAyMzAgMjMwIDIzMC0xMDIuOTc0IDIzMC0yMzBTMzU3LjAyNSAwIDIzMCAwem0zOC4zMzMgMzc3LjM2YzAgOC42NzYtNy4wMzQgMTUuNzEtMTUuNzEgMTUuNzFoLTQzLjEwMWMtOC42NzYgMC0xNS43MS03LjAzNC0xNS43MS0xNS43MVYyMDIuNDc3YzAtOC42NzYgNy4wMzMtMTUuNzEgMTUuNzEtMTUuNzFoNDMuMTAxYzguNjc2IDAgMTUuNzEgNy4wMzMgMTUuNzEgMTUuNzFWMzc3LjM2ek0yMzAgMTU3Yy0yMS41MzkgMC0zOS0xNy40NjEtMzktMzlzMTcuNDYxLTM5IDM5LTM5IDM5IDE3LjQ2MSAzOSAzOS0xNy40NjEgMzktMzkgMzl6Ii8+PC9zdmc+",K6="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAABHNCSVQICAgIfAhkiAAAAAlwSFlzAAAAQgAAAEIBarqQRAAAABl0RVh0U29mdHdhcmUAd3d3Lmlua3NjYXBlLm9yZ5vuPBoAAAE1SURBVDiNfdI7S0NBEAXgLya1otFgpbYSbISAgpXYi6CmiH9KCAiChaVga6OiWPgfRDQ+0itaGVNosXtluWwcuMzePfM4M3sq8lbHBubwg1dc4m1E/J/N4ghDPOIsfk/4xiEao5KX0McFljN4C9d4QTPXuY99jP3DsIoDPGM6BY5i5yI5R7O4q+ImFkJY2DCh3cAH2klyB+9J1xUMMAG7eCh1a+Mr+k48b5diXrFVwwLuS+BJ9MfR7+G0FHOHhTHhnXNWS87VDF4pcnfQK4Ep7XScNLmPTZgURNKKYENYWDpzW1BhscS1WHS8CDgURFJQrWcoF3c13KKbgg1BYQfy8xZWEzTTw1QZbAoKu8FqJnktdu5hcVSHmchiILzzuaDQvjBzV2m8yohCE1jHfPx/xhU+y4G/D75ELlRJsSYAAAAASUVORK5CYII=",px=function(){function t(){}return t.createDefault=function(){return{hasPermission:!1,lastUsedCameraId:null}},t}(),q6=function(){function t(){this.data=px.createDefault();var e=localStorage.getItem(t.LOCAL_STORAGE_KEY);e?this.data=JSON.parse(e):this.reset()}return t.prototype.hasCameraPermissions=function(){return this.data.hasPermission},t.prototype.getLastUsedCameraId=function(){return this.data.lastUsedCameraId},t.prototype.setHasPermission=function(e){this.data.hasPermission=e,this.flush()},t.prototype.setLastUsedCameraId=function(e){this.data.lastUsedCameraId=e,this.flush()},t.prototype.resetLastUsedCameraId=function(){this.data.lastUsedCameraId=null,this.flush()},t.prototype.reset=function(){this.data=px.createDefault(),this.flush()},t.prototype.flush=function(){localStorage.setItem(t.LOCAL_STORAGE_KEY,JSON.stringify(this.data))},t.LOCAL_STORAGE_KEY="HTML5_QRCODE_DATA",t}(),Z6=function(){function t(){this.infoDiv=document.createElement("div")}return t.prototype.renderInto=function(e){this.infoDiv.style.position="absolute",this.infoDiv.style.top="10px",this.infoDiv.style.right="10px",this.infoDiv.style.zIndex="2",this.infoDiv.style.display="none",this.infoDiv.style.padding="5pt",this.infoDiv.style.border="1px solid #171717",this.infoDiv.style.fontSize="10pt",this.infoDiv.style.background="rgb(0 0 0 / 69%)",this.infoDiv.style.borderRadius="5px",this.infoDiv.style.textAlign="center",this.infoDiv.style.fontWeight="400",this.infoDiv.style.color="white",this.infoDiv.innerText=sx.poweredBy();var n=document.createElement("a");n.innerText="ScanApp",n.href="https://scanapp.org",n.target="new",n.style.color="white",this.infoDiv.appendChild(n);var r=document.createElement("br"),s=document.createElement("br");this.infoDiv.appendChild(r),this.infoDiv.appendChild(s);var o=document.createElement("a");o.innerText=sx.reportIssues(),o.href="https://github.com/mebjas/html5-qrcode/issues",o.target="new",o.style.color="white",this.infoDiv.appendChild(o),e.appendChild(this.infoDiv)},t.prototype.show=function(){this.infoDiv.style.display="block"},t.prototype.hide=function(){this.infoDiv.style.display="none"},t}(),Q6=function(){function t(e,n){this.isShowingInfoIcon=!0,this.onTapIn=e,this.onTapOut=n,this.infoIcon=document.createElement("img")}return t.prototype.renderInto=function(e){var n=this;this.infoIcon.alt="Info icon",this.infoIcon.src=fx,this.infoIcon.style.position="absolute",this.infoIcon.style.top="4px",this.infoIcon.style.right="4px",this.infoIcon.style.opacity="0.6",this.infoIcon.style.cursor="pointer",this.infoIcon.style.zIndex="2",this.infoIcon.style.width="16px",this.infoIcon.style.height="16px",this.infoIcon.onmouseover=function(r){return n.onHoverIn()},this.infoIcon.onmouseout=function(r){return n.onHoverOut()},this.infoIcon.onclick=function(r){return n.onClick()},e.appendChild(this.infoIcon)},t.prototype.onHoverIn=function(){this.isShowingInfoIcon&&(this.infoIcon.style.opacity="1")},t.prototype.onHoverOut=function(){this.isShowingInfoIcon&&(this.infoIcon.style.opacity="0.6")},t.prototype.onClick=function(){this.isShowingInfoIcon?(this.isShowingInfoIcon=!1,this.onTapIn(),this.infoIcon.src=K6,this.infoIcon.style.opacity="1"):(this.isShowingInfoIcon=!0,this.onTapOut(),this.infoIcon.src=fx,this.infoIcon.style.opacity="0.6")},t}(),J6=function(){function t(){var e=this;this.infoDiv=new Z6,this.infoIcon=new Q6(function(){e.infoDiv.show()},function(){e.infoDiv.hide()})}return t.prototype.renderInto=function(e){this.infoDiv.renderInto(e),this.infoIcon.renderInto(e)},t}(),eD=function(t,e,n,r){function s(o){return o instanceof n?o:new n(function(c){c(o)})}return new(n||(n=Promise))(function(o,c){function h(y){try{p(r.next(y))}catch(x){c(x)}}function g(y){try{p(r.throw(y))}catch(x){c(x)}}function p(y){y.done?o(y.value):s(y.value).then(h,g)}p((r=r.apply(t,e||[])).next())})},tD=function(t,e){var n={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},r,s,o,c;return c={next:h(0),throw:h(1),return:h(2)},typeof Symbol=="function"&&(c[Symbol.iterator]=function(){return this}),c;function h(p){return function(y){return g([p,y])}}function g(p){if(r)throw new TypeError("Generator is already executing.");for(;c&&(c=0,p[0]&&(n=0)),n;)try{if(r=1,s&&(o=p[0]&2?s.return:p[0]?s.throw||((o=s.return)&&o.call(s),0):s.next)&&!(o=o.call(s,p[1])).done)return o;switch(s=0,o&&(p=[p[0]&2,o.value]),p[0]){case 0:case 1:o=p;break;case 4:return n.label++,{value:p[1],done:!1};case 5:n.label++,s=p[1],p=[0];continue;case 7:p=n.ops.pop(),n.trys.pop();continue;default:if(o=n.trys,!(o=o.length>0&&o[o.length-1])&&(p[0]===6||p[0]===2)){n=0;continue}if(p[0]===3&&(!o||p[1]>o[0]&&p[1]<o[3])){n.label=p[1];break}if(p[0]===6&&n.label<o[1]){n.label=o[1],o=p;break}if(o&&n.label<o[2]){n.label=o[2],n.ops.push(p);break}o[2]&&n.ops.pop(),n.trys.pop();continue}p=e.call(t,n)}catch(y){p=[6,y],s=0}finally{r=o=0}if(p[0]&5)throw p[1];return{value:p[0]?p[1]:void 0,done:!0}}},gx=function(){function t(){}return t.hasPermissions=function(){return eD(this,void 0,void 0,function(){var e,n,r,s;return tD(this,function(o){switch(o.label){case 0:return[4,navigator.mediaDevices.enumerateDevices()];case 1:for(e=o.sent(),n=0,r=e;n<r.length;n++)if(s=r[n],s.kind==="videoinput"&&s.label)return[2,!0];return[2,!1]}})})},t}(),ds=function(){function t(e){this.supportedScanTypes=this.validateAndReturnScanTypes(e)}return t.prototype.getDefaultScanType=function(){return this.supportedScanTypes[0]},t.prototype.hasMoreThanOneScanType=function(){return this.supportedScanTypes.length>1},t.prototype.isCameraScanRequired=function(){for(var e=0,n=this.supportedScanTypes;e<n.length;e++){var r=n[e];if(t.isCameraScanType(r))return!0}return!1},t.isCameraScanType=function(e){return e===Ks.SCAN_TYPE_CAMERA},t.isFileScanType=function(e){return e===Ks.SCAN_TYPE_FILE},t.prototype.validateAndReturnScanTypes=function(e){if(!e||e.length===0)return Qr.DEFAULT_SUPPORTED_SCAN_TYPE;var n=Qr.DEFAULT_SUPPORTED_SCAN_TYPE.length;if(e.length>n)throw"Max ".concat(n," values expected for ")+"supportedScanTypes";for(var r=0,s=e;r<s.length;r++){var o=s[r];if(!Qr.DEFAULT_SUPPORTED_SCAN_TYPE.includes(o))throw"Unsupported scan type ".concat(o)}return e},t}(),ur=function(){function t(){}return t.ALL_ELEMENT_CLASS="html5-qrcode-element",t.CAMERA_PERMISSION_BUTTON_ID="html5-qrcode-button-camera-permission",t.CAMERA_START_BUTTON_ID="html5-qrcode-button-camera-start",t.CAMERA_STOP_BUTTON_ID="html5-qrcode-button-camera-stop",t.TORCH_BUTTON_ID="html5-qrcode-button-torch",t.CAMERA_SELECTION_SELECT_ID="html5-qrcode-select-camera",t.FILE_SELECTION_BUTTON_ID="html5-qrcode-button-file-selection",t.ZOOM_SLIDER_ID="html5-qrcode-input-range-zoom",t.SCAN_TYPE_CHANGE_ANCHOR_ID="html5-qrcode-anchor-scan-type-change",t.TORCH_BUTTON_CLASS_TORCH_ON="html5-qrcode-button-torch-on",t.TORCH_BUTTON_CLASS_TORCH_OFF="html5-qrcode-button-torch-off",t}(),Hi=function(){function t(){}return t.createElement=function(e,n){var r=document.createElement(e);return r.id=n,r.classList.add(ur.ALL_ELEMENT_CLASS),e==="button"&&r.setAttribute("type","button"),r},t}(),SS=function(t,e,n,r){function s(o){return o instanceof n?o:new n(function(c){c(o)})}return new(n||(n=Promise))(function(o,c){function h(y){try{p(r.next(y))}catch(x){c(x)}}function g(y){try{p(r.throw(y))}catch(x){c(x)}}function p(y){y.done?o(y.value):s(y.value).then(h,g)}p((r=r.apply(t,e||[])).next())})},AS=function(t,e){var n={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},r,s,o,c;return c={next:h(0),throw:h(1),return:h(2)},typeof Symbol=="function"&&(c[Symbol.iterator]=function(){return this}),c;function h(p){return function(y){return g([p,y])}}function g(p){if(r)throw new TypeError("Generator is already executing.");for(;c&&(c=0,p[0]&&(n=0)),n;)try{if(r=1,s&&(o=p[0]&2?s.return:p[0]?s.throw||((o=s.return)&&o.call(s),0):s.next)&&!(o=o.call(s,p[1])).done)return o;switch(s=0,o&&(p=[p[0]&2,o.value]),p[0]){case 0:case 1:o=p;break;case 4:return n.label++,{value:p[1],done:!1};case 5:n.label++,s=p[1],p=[0];continue;case 7:p=n.ops.pop(),n.trys.pop();continue;default:if(o=n.trys,!(o=o.length>0&&o[o.length-1])&&(p[0]===6||p[0]===2)){n=0;continue}if(p[0]===3&&(!o||p[1]>o[0]&&p[1]<o[3])){n.label=p[1];break}if(p[0]===6&&n.label<o[1]){n.label=o[1],o=p;break}if(o&&n.label<o[2]){n.label=o[2],n.ops.push(p);break}o[2]&&n.ops.pop(),n.trys.pop();continue}p=e.call(t,n)}catch(y){p=[6,y],s=0}finally{r=o=0}if(p[0]&5)throw p[1];return{value:p[0]?p[1]:void 0,done:!0}}},mx=function(){function t(e,n,r){this.isTorchOn=!1,this.torchCapability=e,this.buttonController=n,this.onTorchActionFailureCallback=r}return t.prototype.isTorchEnabled=function(){return this.isTorchOn},t.prototype.flipState=function(){return SS(this,void 0,void 0,function(){var e,n;return AS(this,function(r){switch(r.label){case 0:this.buttonController.disable(),e=!this.isTorchOn,r.label=1;case 1:return r.trys.push([1,3,,4]),[4,this.torchCapability.apply(e)];case 2:return r.sent(),this.updateUiBasedOnLatestSettings(this.torchCapability.value(),e),[3,4];case 3:return n=r.sent(),this.propagateFailure(e,n),this.buttonController.enable(),[3,4];case 4:return[2]}})})},t.prototype.updateUiBasedOnLatestSettings=function(e,n){e===n?(this.buttonController.setText(n?lt.torchOffButton():lt.torchOnButton()),this.isTorchOn=n):this.propagateFailure(n),this.buttonController.enable()},t.prototype.propagateFailure=function(e,n){var r=e?lt.torchOnFailedMessage():lt.torchOffFailedMessage();n&&(r+="; Error = "+n),this.onTorchActionFailureCallback(r)},t.prototype.reset=function(){this.isTorchOn=!1},t}(),nD=function(){function t(e,n){this.onTorchActionFailureCallback=n,this.torchButton=Hi.createElement("button",ur.TORCH_BUTTON_ID),this.torchController=new mx(e,this,n)}return t.prototype.render=function(e,n){var r=this;this.torchButton.innerText=lt.torchOnButton(),this.torchButton.style.display=n.display,this.torchButton.style.marginLeft=n.marginLeft;var s=this;this.torchButton.addEventListener("click",function(o){return SS(r,void 0,void 0,function(){return AS(this,function(c){switch(c.label){case 0:return[4,s.torchController.flipState()];case 1:return c.sent(),s.torchController.isTorchEnabled()?(s.torchButton.classList.remove(ur.TORCH_BUTTON_CLASS_TORCH_OFF),s.torchButton.classList.add(ur.TORCH_BUTTON_CLASS_TORCH_ON)):(s.torchButton.classList.remove(ur.TORCH_BUTTON_CLASS_TORCH_ON),s.torchButton.classList.add(ur.TORCH_BUTTON_CLASS_TORCH_OFF)),[2]}})})}),e.appendChild(this.torchButton)},t.prototype.updateTorchCapability=function(e){this.torchController=new mx(e,this,this.onTorchActionFailureCallback)},t.prototype.getTorchButton=function(){return this.torchButton},t.prototype.hide=function(){this.torchButton.style.display="none"},t.prototype.show=function(){this.torchButton.style.display="inline-block"},t.prototype.disable=function(){this.torchButton.disabled=!0},t.prototype.enable=function(){this.torchButton.disabled=!1},t.prototype.setText=function(e){this.torchButton.innerText=e},t.prototype.reset=function(){this.torchButton.innerText=lt.torchOnButton(),this.torchController.reset()},t.create=function(e,n,r,s){var o=new t(n,s);return o.render(e,r),o},t}(),rD=function(){function t(e,n,r){this.fileBasedScanRegion=this.createFileBasedScanRegion(),this.fileBasedScanRegion.style.display=n?"block":"none",e.appendChild(this.fileBasedScanRegion);var s=document.createElement("label");s.setAttribute("for",this.getFileScanInputId()),s.style.display="inline-block",this.fileBasedScanRegion.appendChild(s),this.fileSelectionButton=Hi.createElement("button",ur.FILE_SELECTION_BUTTON_ID),this.setInitialValueToButton(),this.fileSelectionButton.addEventListener("click",function(h){s.click()}),s.append(this.fileSelectionButton),this.fileScanInput=Hi.createElement("input",this.getFileScanInputId()),this.fileScanInput.type="file",this.fileScanInput.accept="image/*",this.fileScanInput.style.display="none",s.appendChild(this.fileScanInput);var o=this;this.fileScanInput.addEventListener("change",function(h){if(!(h==null||h.target==null)){var g=h.target;if(!(g.files&&g.files.length===0)){var p=g.files,y=p[0],x=y.name;o.setImageNameToButton(x),r(y)}}});var c=this.createDragAndDropMessage();this.fileBasedScanRegion.appendChild(c),this.fileBasedScanRegion.addEventListener("dragenter",function(h){o.fileBasedScanRegion.style.border=o.fileBasedScanRegionActiveBorder(),h.stopPropagation(),h.preventDefault()}),this.fileBasedScanRegion.addEventListener("dragleave",function(h){o.fileBasedScanRegion.style.border=o.fileBasedScanRegionDefaultBorder(),h.stopPropagation(),h.preventDefault()}),this.fileBasedScanRegion.addEventListener("dragover",function(h){o.fileBasedScanRegion.style.border=o.fileBasedScanRegionActiveBorder(),h.stopPropagation(),h.preventDefault()}),this.fileBasedScanRegion.addEventListener("drop",function(h){h.stopPropagation(),h.preventDefault(),o.fileBasedScanRegion.style.border=o.fileBasedScanRegionDefaultBorder();var g=h.dataTransfer;if(g){var p=g.files;if(!p||p.length===0)return;for(var y=!1,x=0;x<p.length;++x){var E=p.item(x);if(E){var b=/image.*/;if(E.type.match(b)){y=!0;var I=E.name;o.setImageNameToButton(I),r(E),c.innerText=lt.dragAndDropMessage();break}}}y||(c.innerText=lt.dragAndDropMessageOnlyImages())}})}return t.prototype.hide=function(){this.fileBasedScanRegion.style.display="none",this.fileScanInput.disabled=!0},t.prototype.show=function(){this.fileBasedScanRegion.style.display="block",this.fileScanInput.disabled=!1},t.prototype.isShowing=function(){return this.fileBasedScanRegion.style.display==="block"},t.prototype.resetValue=function(){this.fileScanInput.value="",this.setInitialValueToButton()},t.prototype.createFileBasedScanRegion=function(){var e=document.createElement("div");return e.style.textAlign="center",e.style.margin="auto",e.style.width="80%",e.style.maxWidth="600px",e.style.border=this.fileBasedScanRegionDefaultBorder(),e.style.padding="10px",e.style.marginBottom="10px",e},t.prototype.fileBasedScanRegionDefaultBorder=function(){return"6px dashed #ebebeb"},t.prototype.fileBasedScanRegionActiveBorder=function(){return"6px dashed rgb(153 151 151)"},t.prototype.createDragAndDropMessage=function(){var e=document.createElement("div");return e.innerText=lt.dragAndDropMessage(),e.style.fontWeight="400",e},t.prototype.setImageNameToButton=function(e){var n=20;if(e.length>n){var r=e.substring(0,8),s=e.length,o=e.substring(s-8,s);e="".concat(r,"....").concat(o)}var c=lt.fileSelectionChooseAnother()+" - "+e;this.fileSelectionButton.innerText=c},t.prototype.setInitialValueToButton=function(){var e=lt.fileSelectionChooseImage()+" - "+lt.fileSelectionNoImageSelected();this.fileSelectionButton.innerText=e},t.prototype.getFileScanInputId=function(){return"html5-qrcode-private-filescan-input"},t.create=function(e,n,r){var s=new t(e,n,r);return s},t}(),iD=function(){function t(e){this.selectElement=Hi.createElement("select",ur.CAMERA_SELECTION_SELECT_ID),this.cameras=e,this.options=[]}return t.prototype.render=function(e){var n=document.createElement("span");n.style.marginRight="10px";var r=this.cameras.length;if(r===0)throw new Error("No cameras found");if(r===1)n.style.display="none";else{var s=lt.selectCamera();n.innerText="".concat(s," (").concat(this.cameras.length,")  ")}for(var o=1,c=0,h=this.cameras;c<h.length;c++){var g=h[c],p=g.id,y=g.label==null?p:g.label;(!y||y==="")&&(y=[lt.anonymousCameraPrefix(),o++].join(" "));var x=document.createElement("option");x.value=p,x.innerText=y,this.options.push(x),this.selectElement.appendChild(x)}n.appendChild(this.selectElement),e.appendChild(n)},t.prototype.disable=function(){this.selectElement.disabled=!0},t.prototype.isDisabled=function(){return this.selectElement.disabled===!0},t.prototype.enable=function(){this.selectElement.disabled=!1},t.prototype.getValue=function(){return this.selectElement.value},t.prototype.hasValue=function(e){for(var n=0,r=this.options;n<r.length;n++){var s=r[n];if(s.value===e)return!0}return!1},t.prototype.setValue=function(e){if(!this.hasValue(e))throw new Error("".concat(e," is not present in the camera list."));this.selectElement.value=e},t.prototype.hasSingleItem=function(){return this.cameras.length===1},t.prototype.numCameras=function(){return this.cameras.length},t.create=function(e,n){var r=new t(n);return r.render(e),r},t}(),sD=function(){function t(){this.onChangeCallback=null,this.zoomElementContainer=document.createElement("div"),this.rangeInput=Hi.createElement("input",ur.ZOOM_SLIDER_ID),this.rangeInput.type="range",this.rangeText=document.createElement("span"),this.rangeInput.min="1",this.rangeInput.max="5",this.rangeInput.value="1",this.rangeInput.step="0.1"}return t.prototype.render=function(e,n){this.zoomElementContainer.style.display=n?"block":"none",this.zoomElementContainer.style.padding="5px 10px",this.zoomElementContainer.style.textAlign="center",e.appendChild(this.zoomElementContainer),this.rangeInput.style.display="inline-block",this.rangeInput.style.width="50%",this.rangeInput.style.height="5px",this.rangeInput.style.background="#d3d3d3",this.rangeInput.style.outline="none",this.rangeInput.style.opacity="0.7";var r=lt.zoom();this.rangeText.innerText="".concat(this.rangeInput.value,"x ").concat(r),this.rangeText.style.marginRight="10px";var s=this;this.rangeInput.addEventListener("input",function(){return s.onValueChange()}),this.rangeInput.addEventListener("change",function(){return s.onValueChange()}),this.zoomElementContainer.appendChild(this.rangeInput),this.zoomElementContainer.appendChild(this.rangeText)},t.prototype.onValueChange=function(){var e=lt.zoom();this.rangeText.innerText="".concat(this.rangeInput.value,"x ").concat(e),this.onChangeCallback&&this.onChangeCallback(parseFloat(this.rangeInput.value))},t.prototype.setValues=function(e,n,r,s){this.rangeInput.min=e.toString(),this.rangeInput.max=n.toString(),this.rangeInput.step=s.toString(),this.rangeInput.value=r.toString(),this.onValueChange()},t.prototype.show=function(){this.zoomElementContainer.style.display="block"},t.prototype.hide=function(){this.zoomElementContainer.style.display="none"},t.prototype.setOnCameraZoomValueChangeCallback=function(e){this.onChangeCallback=e},t.prototype.removeOnCameraZoomValueChangeCallback=function(){this.onChangeCallback=null},t.create=function(e,n){var r=new t;return r.render(e,n),r},t}(),or;(function(t){t[t.STATUS_DEFAULT=0]="STATUS_DEFAULT",t[t.STATUS_SUCCESS=1]="STATUS_SUCCESS",t[t.STATUS_WARNING=2]="STATUS_WARNING",t[t.STATUS_REQUESTING_PERMISSION=3]="STATUS_REQUESTING_PERMISSION"})(or||(or={}));function oD(t){return{fps:t.fps,qrbox:t.qrbox,aspectRatio:t.aspectRatio,disableFlip:t.disableFlip,videoConstraints:t.videoConstraints}}function aD(t,e){return{formatsToSupport:t.formatsToSupport,useBarCodeDetectorIfSupported:t.useBarCodeDetectorIfSupported,experimentalFeatures:t.experimentalFeatures,verbose:e}}var lD=function(){function t(e,n,r){if(this.lastMatchFound=null,this.cameraScanImage=null,this.fileScanImage=null,this.fileSelectionUi=null,this.elementId=e,this.config=this.createConfig(n),this.verbose=r===!0,!document.getElementById(e))throw"HTML Element with id=".concat(e," not found");this.scanTypeSelector=new ds(this.config.supportedScanTypes),this.currentScanType=this.scanTypeSelector.getDefaultScanType(),this.sectionSwapAllowed=!0,this.logger=new ES(this.verbose),this.persistedDataManager=new q6,n.rememberLastUsedCamera!==!0&&this.persistedDataManager.reset()}return t.prototype.render=function(e,n){var r=this;this.lastMatchFound=null,this.qrCodeSuccessCallback=function(o,c){if(e)e(o,c);else{if(r.lastMatchFound===o)return;r.lastMatchFound=o,r.setHeaderMessage(lt.lastMatch(o),or.STATUS_SUCCESS)}},this.qrCodeErrorCallback=function(o,c){n&&n(o,c)};var s=document.getElementById(this.elementId);if(!s)throw"HTML Element with id=".concat(this.elementId," not found");s.innerHTML="",this.createBasicLayout(s),this.html5Qrcode=new hx(this.getScanRegionId(),aD(this.config,this.verbose))},t.prototype.pause=function(e){(wi(e)||e!==!0)&&(e=!1),this.getHtml5QrcodeOrFail().pause(e)},t.prototype.resume=function(){this.getHtml5QrcodeOrFail().resume()},t.prototype.getState=function(){return this.getHtml5QrcodeOrFail().getState()},t.prototype.clear=function(){var e=this,n=function(){var r=document.getElementById(e.elementId);r&&(r.innerHTML="",e.resetBasicLayout(r))};return this.html5Qrcode?new Promise(function(r,s){if(!e.html5Qrcode){r();return}e.html5Qrcode.isScanning?e.html5Qrcode.stop().then(function(o){if(!e.html5Qrcode){r();return}e.html5Qrcode.clear(),n(),r()}).catch(function(o){e.verbose&&e.logger.logError("Unable to stop qrcode scanner",o),s(o)}):(e.html5Qrcode.clear(),n(),r())}):Promise.resolve()},t.prototype.getRunningTrackCapabilities=function(){return this.getHtml5QrcodeOrFail().getRunningTrackCapabilities()},t.prototype.getRunningTrackSettings=function(){return this.getHtml5QrcodeOrFail().getRunningTrackSettings()},t.prototype.applyVideoConstraints=function(e){return this.getHtml5QrcodeOrFail().applyVideoConstraints(e)},t.prototype.getHtml5QrcodeOrFail=function(){if(!this.html5Qrcode)throw"Code scanner not initialized.";return this.html5Qrcode},t.prototype.createConfig=function(e){return e?(e.fps||(e.fps=Qr.SCAN_DEFAULT_FPS),e.rememberLastUsedCamera!==!Qr.DEFAULT_REMEMBER_LAST_CAMERA_USED&&(e.rememberLastUsedCamera=Qr.DEFAULT_REMEMBER_LAST_CAMERA_USED),e.supportedScanTypes||(e.supportedScanTypes=Qr.DEFAULT_SUPPORTED_SCAN_TYPE),e):{fps:Qr.SCAN_DEFAULT_FPS,rememberLastUsedCamera:Qr.DEFAULT_REMEMBER_LAST_CAMERA_USED,supportedScanTypes:Qr.DEFAULT_SUPPORTED_SCAN_TYPE}},t.prototype.createBasicLayout=function(e){e.style.position="relative",e.style.padding="0px",e.style.border="1px solid silver",this.createHeader(e);var n=document.createElement("div"),r=this.getScanRegionId();n.id=r,n.style.width="100%",n.style.minHeight="100px",n.style.textAlign="center",e.appendChild(n),ds.isCameraScanType(this.currentScanType)?this.insertCameraScanImageToScanRegion():this.insertFileScanImageToScanRegion();var s=document.createElement("div"),o=this.getDashboardId();s.id=o,s.style.width="100%",e.appendChild(s),this.setupInitialDashboard(s)},t.prototype.resetBasicLayout=function(e){e.style.border="none"},t.prototype.setupInitialDashboard=function(e){this.createSection(e),this.createSectionControlPanel(),this.scanTypeSelector.hasMoreThanOneScanType()&&this.createSectionSwap()},t.prototype.createHeader=function(e){var n=document.createElement("div");n.style.textAlign="left",n.style.margin="0px",e.appendChild(n);var r=new J6;r.renderInto(n);var s=document.createElement("div");s.id=this.getHeaderMessageContainerId(),s.style.display="none",s.style.textAlign="center",s.style.fontSize="14px",s.style.padding="2px 10px",s.style.margin="4px",s.style.borderTop="1px solid #f6f6f6",n.appendChild(s)},t.prototype.createSection=function(e){var n=document.createElement("div");n.id=this.getDashboardSectionId(),n.style.width="100%",n.style.padding="10px 0px 10px 0px",n.style.textAlign="left",e.appendChild(n)},t.prototype.createCameraListUi=function(e,n,r){var s=this;s.showHideScanTypeSwapLink(!1),s.setHeaderMessage(lt.cameraPermissionRequesting());var o=function(){r||s.createPermissionButton(e,n)};hx.getCameras().then(function(c){s.persistedDataManager.setHasPermission(!0),s.showHideScanTypeSwapLink(!0),s.resetHeaderMessage(),c&&c.length>0?(e.removeChild(n),s.renderCameraSelection(c)):(s.setHeaderMessage(lt.noCameraFound(),or.STATUS_WARNING),o())}).catch(function(c){s.persistedDataManager.setHasPermission(!1),r?r.disabled=!1:o(),s.setHeaderMessage(c,or.STATUS_WARNING),s.showHideScanTypeSwapLink(!0)})},t.prototype.createPermissionButton=function(e,n){var r=this,s=Hi.createElement("button",this.getCameraPermissionButtonId());s.innerText=lt.cameraPermissionTitle(),s.addEventListener("click",function(){s.disabled=!0,r.createCameraListUi(e,n,s)}),n.appendChild(s)},t.prototype.createPermissionsUi=function(e,n){var r=this;if(ds.isCameraScanType(this.currentScanType)&&this.persistedDataManager.hasCameraPermissions()){gx.hasPermissions().then(function(s){s?r.createCameraListUi(e,n):(r.persistedDataManager.setHasPermission(!1),r.createPermissionButton(e,n))}).catch(function(s){r.persistedDataManager.setHasPermission(!1),r.createPermissionButton(e,n)});return}this.createPermissionButton(e,n)},t.prototype.createSectionControlPanel=function(){var e=document.getElementById(this.getDashboardSectionId()),n=document.createElement("div");e.appendChild(n);var r=document.createElement("div");r.id=this.getDashboardSectionCameraScanRegionId(),r.style.display=ds.isCameraScanType(this.currentScanType)?"block":"none",n.appendChild(r);var s=document.createElement("div");s.style.textAlign="center",r.appendChild(s),this.scanTypeSelector.isCameraScanRequired()&&this.createPermissionsUi(r,s),this.renderFileScanUi(n)},t.prototype.renderFileScanUi=function(e){var n=ds.isFileScanType(this.currentScanType),r=this,s=function(o){if(!r.html5Qrcode)throw"html5Qrcode not defined";ds.isFileScanType(r.currentScanType)&&(r.setHeaderMessage(lt.loadingImage()),r.html5Qrcode.scanFileV2(o,!0).then(function(c){r.resetHeaderMessage(),r.qrCodeSuccessCallback(c.decodedText,c)}).catch(function(c){r.setHeaderMessage(c,or.STATUS_WARNING),r.qrCodeErrorCallback(c,vS.createFrom(c))}))};this.fileSelectionUi=rD.create(e,n,s)},t.prototype.renderCameraSelection=function(e){var n=this,r=this,s=document.getElementById(this.getDashboardSectionCameraScanRegionId());s.style.textAlign="center";var o=sD.create(s,!1),c=function(S){var R=S.zoomFeature();if(R.isSupported()){o.setOnCameraZoomValueChangeCallback(function(_){R.apply(_)});var A=1;n.config.defaultZoomValueIfSupported&&(A=n.config.defaultZoomValueIfSupported),A=_6(A,R.min(),R.max()),o.setValues(R.min(),R.max(),A,R.step()),o.show()}},h=iD.create(s,e),g=document.createElement("span"),p=Hi.createElement("button",ur.CAMERA_START_BUTTON_ID);p.innerText=lt.scanButtonStartScanningText(),g.appendChild(p);var y=Hi.createElement("button",ur.CAMERA_STOP_BUTTON_ID);y.innerText=lt.scanButtonStopScanningText(),y.style.display="none",y.disabled=!0,g.appendChild(y);var x,E=function(S){if(!S.torchFeature().isSupported()){x&&x.hide();return}x?x.updateTorchCapability(S.torchFeature()):x=nD.create(g,S.torchFeature(),{display:"none",marginLeft:"5px"},function(R){r.setHeaderMessage(R,or.STATUS_WARNING)}),x.show()};s.appendChild(g);var b=function(S){S||(p.style.display="none"),p.innerText=lt.scanButtonStartScanningText(),p.style.opacity="1",p.disabled=!1,S&&(p.style.display="inline-block")};if(p.addEventListener("click",function(S){p.innerText=lt.scanButtonScanningStarting(),h.disable(),p.disabled=!0,p.style.opacity="0.5",n.scanTypeSelector.hasMoreThanOneScanType()&&r.showHideScanTypeSwapLink(!1),r.resetHeaderMessage();var R=h.getValue();r.persistedDataManager.setLastUsedCameraId(R),r.html5Qrcode.start(R,oD(r.config),r.qrCodeSuccessCallback,r.qrCodeErrorCallback).then(function(A){y.disabled=!1,y.style.display="inline-block",b(!1);var _=r.html5Qrcode.getRunningTrackCameraCapabilities();n.config.showTorchButtonIfSupported===!0&&E(_),n.config.showZoomSliderIfSupported===!0&&c(_)}).catch(function(A){r.showHideScanTypeSwapLink(!0),h.enable(),b(!0),r.setHeaderMessage(A,or.STATUS_WARNING)})}),h.hasSingleItem()&&p.click(),y.addEventListener("click",function(S){if(!r.html5Qrcode)throw"html5Qrcode not defined";y.disabled=!0,r.html5Qrcode.stop().then(function(R){n.scanTypeSelector.hasMoreThanOneScanType()&&r.showHideScanTypeSwapLink(!0),h.enable(),p.disabled=!1,y.style.display="none",p.style.display="inline-block",x&&(x.reset(),x.hide()),o.removeOnCameraZoomValueChangeCallback(),o.hide(),r.insertCameraScanImageToScanRegion()}).catch(function(R){y.disabled=!1,r.setHeaderMessage(R,or.STATUS_WARNING)})}),r.persistedDataManager.getLastUsedCameraId()){var I=r.persistedDataManager.getLastUsedCameraId();h.hasValue(I)?(h.setValue(I),p.click()):r.persistedDataManager.resetLastUsedCameraId()}},t.prototype.createSectionSwap=function(){var e=this,n=lt.textIfCameraScanSelected(),r=lt.textIfFileScanSelected(),s=document.getElementById(this.getDashboardSectionId()),o=document.createElement("div");o.style.textAlign="center";var c=Hi.createElement("span",this.getDashboardSectionSwapLinkId());c.style.textDecoration="underline",c.style.cursor="pointer",c.innerText=ds.isCameraScanType(this.currentScanType)?n:r,c.addEventListener("click",function(){if(!e.sectionSwapAllowed){e.verbose&&e.logger.logError("Section swap called when not allowed");return}e.resetHeaderMessage(),e.fileSelectionUi.resetValue(),e.sectionSwapAllowed=!1,ds.isCameraScanType(e.currentScanType)?(e.clearScanRegion(),e.getCameraScanRegion().style.display="none",e.fileSelectionUi.show(),c.innerText=r,e.currentScanType=Ks.SCAN_TYPE_FILE,e.insertFileScanImageToScanRegion()):(e.clearScanRegion(),e.getCameraScanRegion().style.display="block",e.fileSelectionUi.hide(),c.innerText=n,e.currentScanType=Ks.SCAN_TYPE_CAMERA,e.insertCameraScanImageToScanRegion(),e.startCameraScanIfPermissionExistsOnSwap()),e.sectionSwapAllowed=!0}),o.appendChild(c),s.appendChild(o)},t.prototype.startCameraScanIfPermissionExistsOnSwap=function(){var e=this,n=this;if(this.persistedDataManager.hasCameraPermissions()){gx.hasPermissions().then(function(r){if(r){var s=document.getElementById(n.getCameraPermissionButtonId());if(!s)throw e.logger.logError("Permission button not found, fail;"),"Permission button not found";s.click()}else n.persistedDataManager.setHasPermission(!1)}).catch(function(r){n.persistedDataManager.setHasPermission(!1)});return}},t.prototype.resetHeaderMessage=function(){var e=document.getElementById(this.getHeaderMessageContainerId());e.style.display="none"},t.prototype.setHeaderMessage=function(e,n){n||(n=or.STATUS_DEFAULT);var r=this.getHeaderMessageDiv();switch(r.innerText=e,r.style.display="block",n){case or.STATUS_SUCCESS:r.style.background="rgba(106, 175, 80, 0.26)",r.style.color="#477735";break;case or.STATUS_WARNING:r.style.background="rgba(203, 36, 49, 0.14)",r.style.color="#cb2431";break;case or.STATUS_DEFAULT:default:r.style.background="rgba(0, 0, 0, 0)",r.style.color="rgb(17, 17, 17)";break}},t.prototype.showHideScanTypeSwapLink=function(e){this.scanTypeSelector.hasMoreThanOneScanType()&&(e!==!0&&(e=!1),this.sectionSwapAllowed=e,this.getDashboardSectionSwapLink().style.display=e?"inline-block":"none")},t.prototype.insertCameraScanImageToScanRegion=function(){var e=this,n=document.getElementById(this.getScanRegionId());if(this.cameraScanImage){n.innerHTML="<br>",n.appendChild(this.cameraScanImage);return}this.cameraScanImage=new Image,this.cameraScanImage.onload=function(r){n.innerHTML="<br>",n.appendChild(e.cameraScanImage)},this.cameraScanImage.width=64,this.cameraScanImage.style.opacity="0.8",this.cameraScanImage.src=Y6,this.cameraScanImage.alt=lt.cameraScanAltText()},t.prototype.insertFileScanImageToScanRegion=function(){var e=this,n=document.getElementById(this.getScanRegionId());if(this.fileScanImage){n.innerHTML="<br>",n.appendChild(this.fileScanImage);return}this.fileScanImage=new Image,this.fileScanImage.onload=function(r){n.innerHTML="<br>",n.appendChild(e.fileScanImage)},this.fileScanImage.width=64,this.fileScanImage.style.opacity="0.8",this.fileScanImage.src=X6,this.fileScanImage.alt=lt.fileScanAltText()},t.prototype.clearScanRegion=function(){var e=document.getElementById(this.getScanRegionId());e.innerHTML=""},t.prototype.getDashboardSectionId=function(){return"".concat(this.elementId,"__dashboard_section")},t.prototype.getDashboardSectionCameraScanRegionId=function(){return"".concat(this.elementId,"__dashboard_section_csr")},t.prototype.getDashboardSectionSwapLinkId=function(){return ur.SCAN_TYPE_CHANGE_ANCHOR_ID},t.prototype.getScanRegionId=function(){return"".concat(this.elementId,"__scan_region")},t.prototype.getDashboardId=function(){return"".concat(this.elementId,"__dashboard")},t.prototype.getHeaderMessageContainerId=function(){return"".concat(this.elementId,"__header_message")},t.prototype.getCameraPermissionButtonId=function(){return ur.CAMERA_PERMISSION_BUTTON_ID},t.prototype.getCameraScanRegion=function(){return document.getElementById(this.getDashboardSectionCameraScanRegionId())},t.prototype.getDashboardSectionSwapLink=function(){return document.getElementById(this.getDashboardSectionSwapLinkId())},t.prototype.getHeaderMessageDiv=function(){return document.getElementById(this.getHeaderMessageContainerId())},t}();function cD({onScanResult:t,onClose:e}){const n=M.useRef(null),r="isbn-scanner-region";return M.useEffect(()=>(n.current||(n.current=new lD(r,{fps:10,qrbox:{width:250,height:150},formatsToSupport:[0]},!1),n.current.render(s=>{t(s)},s=>{})),()=>{n.current&&(n.current.clear().catch(s=>{console.error("Failed to clear scanner",s)}),n.current=null)}),[t]),U.jsx("div",{className:"fixed inset-0 z-50 flex flex-col items-center justify-center bg-black/80 p-4",children:U.jsxs("div",{className:"relative w-full max-w-md overflow-hidden rounded-2xl bg-white p-4",children:[U.jsx("h3",{className:"mb-4 text-center text-lg font-bold",children:"ISBN Scannen"}),U.jsx("div",{id:r,className:"w-full"}),U.jsx("button",{onClick:e,className:"mt-4 w-full rounded-xl bg-gray-100 py-3 font-semibold text-gray-800 hover:bg-gray-200",children:"Schlieen"})]})})}const Gg=M.createContext({});function Ho(t){const e=M.useRef(null);return e.current===null&&(e.current=t()),e.current}const _S=typeof window<"u",Yg=_S?M.useLayoutEffect:M.useEffect,of=M.createContext(null);function Xg(t,e){t.indexOf(e)===-1&&t.push(e)}function Kg(t,e){const n=t.indexOf(e);n>-1&&t.splice(n,1)}const Oi=(t,e,n)=>n>e?e:n<t?t:n;let af=()=>{},cl=()=>{};const Zi={},TS=t=>/^-?(?:\d+(?:\.\d+)?|\.\d+)$/u.test(t);function IS(t){return typeof t=="object"&&t!==null}const RS=t=>/^0[^.\s]+$/u.test(t);function qg(t){let e;return()=>(e===void 0&&(e=t()),e)}const Rr=t=>t,uD=(t,e)=>n=>e(t(n)),pu=(...t)=>t.reduce(uD),Kc=(t,e,n)=>{const r=e-t;return r===0?1:(n-t)/r};class Zg{constructor(){this.subscriptions=[]}add(e){return Xg(this.subscriptions,e),()=>Kg(this.subscriptions,e)}notify(e,n,r){const s=this.subscriptions.length;if(s)if(s===1)this.subscriptions[0](e,n,r);else for(let o=0;o<s;o++){const c=this.subscriptions[o];c&&c(e,n,r)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}const ni=t=>t*1e3,Tr=t=>t/1e3;function NS(t,e){return e?t*(1e3/e):0}const OS=(t,e,n)=>(((1-3*n+3*e)*t+(3*n-6*e))*t+3*e)*t,dD=1e-7,hD=12;function fD(t,e,n,r,s){let o,c,h=0;do c=e+(n-e)/2,o=OS(c,r,s)-t,o>0?n=c:e=c;while(Math.abs(o)>dD&&++h<hD);return c}function gu(t,e,n,r){if(t===e&&n===r)return Rr;const s=o=>fD(o,0,1,t,n);return o=>o===0||o===1?o:OS(s(o),e,r)}const kS=t=>e=>e<=.5?t(2*e)/2:(2-t(2*(1-e)))/2,MS=t=>e=>1-t(1-e),DS=gu(.33,1.53,.69,.99),Qg=MS(DS),PS=kS(Qg),LS=t=>(t*=2)<1?.5*Qg(t):.5*(2-Math.pow(2,-10*(t-1))),Jg=t=>1-Math.sin(Math.acos(t)),BS=MS(Jg),FS=kS(Jg),pD=gu(.42,0,1,1),gD=gu(0,0,.58,1),jS=gu(.42,0,.58,1),mD=t=>Array.isArray(t)&&typeof t[0]!="number",US=t=>Array.isArray(t)&&typeof t[0]=="number",yx={linear:Rr,easeIn:pD,easeInOut:jS,easeOut:gD,circIn:Jg,circInOut:FS,circOut:BS,backIn:Qg,backInOut:PS,backOut:DS,anticipate:LS},yD=t=>typeof t=="string",wx=t=>{if(US(t)){cl(t.length===4,"Cubic bezier arrays must contain four numerical values.","cubic-bezier-length");const[e,n,r,s]=t;return gu(e,n,r,s)}else if(yD(t))return cl(yx[t]!==void 0,`Invalid easing type '${t}'`,"invalid-easing-type"),yx[t];return t},id=["setup","read","resolveKeyframes","preUpdate","update","preRender","render","postRender"],xx={value:null,addProjectionMetrics:null};function wD(t,e){let n=new Set,r=new Set,s=!1,o=!1;const c=new WeakSet;let h={delta:0,timestamp:0,isProcessing:!1},g=0;function p(x){c.has(x)&&(y.schedule(x),t()),g++,x(h)}const y={schedule:(x,E=!1,b=!1)=>{const S=b&&s?n:r;return E&&c.add(x),S.has(x)||S.add(x),x},cancel:x=>{r.delete(x),c.delete(x)},process:x=>{if(h=x,s){o=!0;return}s=!0,[n,r]=[r,n],n.forEach(p),e&&xx.value&&xx.value.frameloop[e].push(g),g=0,n.clear(),s=!1,o&&(o=!1,y.process(x))}};return y}const xD=40;function VS(t,e){let n=!1,r=!0;const s={delta:0,timestamp:0,isProcessing:!1},o=()=>n=!0,c=id.reduce((T,D)=>(T[D]=wD(o,e?D:void 0),T),{}),{setup:h,read:g,resolveKeyframes:p,preUpdate:y,update:x,preRender:E,render:b,postRender:I}=c,S=()=>{const T=Zi.useManualTiming?s.timestamp:performance.now();n=!1,Zi.useManualTiming||(s.delta=r?1e3/60:Math.max(Math.min(T-s.timestamp,xD),1)),s.timestamp=T,s.isProcessing=!0,h.process(s),g.process(s),p.process(s),y.process(s),x.process(s),E.process(s),b.process(s),I.process(s),s.isProcessing=!1,n&&e&&(r=!1,t(S))},R=()=>{n=!0,r=!0,s.isProcessing||t(S)};return{schedule:id.reduce((T,D)=>{const F=c[D];return T[D]=(j,B=!1,W=!1)=>(n||R(),F.schedule(j,B,W)),T},{}),cancel:T=>{for(let D=0;D<id.length;D++)c[id[D]].cancel(T)},state:s,steps:c}}const{schedule:ft,cancel:Qi,state:xn,steps:m0}=VS(typeof requestAnimationFrame<"u"?requestAnimationFrame:Rr,!0);let Sd;function vD(){Sd=void 0}const Ln={now:()=>(Sd===void 0&&Ln.set(xn.isProcessing||Zi.useManualTiming?xn.timestamp:performance.now()),Sd),set:t=>{Sd=t,queueMicrotask(vD)}},zS=t=>e=>typeof e=="string"&&e.startsWith(t),HS=zS("--"),ED=zS("var(--"),em=t=>ED(t)?bD.test(t.split("/*")[0].trim()):!1,bD=/var\(--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)$/iu;function vx(t){return typeof t!="string"?!1:t.split("/*")[0].includes("var(--")}const Cl={test:t=>typeof t=="number",parse:parseFloat,transform:t=>t},qc={...Cl,transform:t=>Oi(0,1,t)},sd={...Cl,default:1},pc=t=>Math.round(t*1e5)/1e5,tm=/-?(?:\d+(?:\.\d+)?|\.\d+)/gu;function CD(t){return t==null}const SD=/^(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))$/iu,nm=(t,e)=>n=>!!(typeof n=="string"&&SD.test(n)&&n.startsWith(t)||e&&!CD(n)&&Object.prototype.hasOwnProperty.call(n,e)),WS=(t,e,n)=>r=>{if(typeof r!="string")return r;const[s,o,c,h]=r.match(tm);return{[t]:parseFloat(s),[e]:parseFloat(o),[n]:parseFloat(c),alpha:h!==void 0?parseFloat(h):1}},AD=t=>Oi(0,255,t),y0={...Cl,transform:t=>Math.round(AD(t))},Ao={test:nm("rgb","red"),parse:WS("red","green","blue"),transform:({red:t,green:e,blue:n,alpha:r=1})=>"rgba("+y0.transform(t)+", "+y0.transform(e)+", "+y0.transform(n)+", "+pc(qc.transform(r))+")"};function _D(t){let e="",n="",r="",s="";return t.length>5?(e=t.substring(1,3),n=t.substring(3,5),r=t.substring(5,7),s=t.substring(7,9)):(e=t.substring(1,2),n=t.substring(2,3),r=t.substring(3,4),s=t.substring(4,5),e+=e,n+=n,r+=r,s+=s),{red:parseInt(e,16),green:parseInt(n,16),blue:parseInt(r,16),alpha:s?parseInt(s,16)/255:1}}const Q1={test:nm("#"),parse:_D,transform:Ao.transform},mu=t=>({test:e=>typeof e=="string"&&e.endsWith(t)&&e.split(" ").length===1,parse:parseFloat,transform:e=>`${e}${t}`}),fs=mu("deg"),Ii=mu("%"),be=mu("px"),TD=mu("vh"),ID=mu("vw"),Ex={...Ii,parse:t=>Ii.parse(t)/100,transform:t=>Ii.transform(t*100)},Na={test:nm("hsl","hue"),parse:WS("hue","saturation","lightness"),transform:({hue:t,saturation:e,lightness:n,alpha:r=1})=>"hsla("+Math.round(t)+", "+Ii.transform(pc(e))+", "+Ii.transform(pc(n))+", "+pc(qc.transform(r))+")"},Xt={test:t=>Ao.test(t)||Q1.test(t)||Na.test(t),parse:t=>Ao.test(t)?Ao.parse(t):Na.test(t)?Na.parse(t):Q1.parse(t),transform:t=>typeof t=="string"?t:t.hasOwnProperty("red")?Ao.transform(t):Na.transform(t),getAnimatableNone:t=>{const e=Xt.parse(t);return e.alpha=0,Xt.transform(e)}},RD=/(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))/giu;function ND(t){var e,n;return isNaN(t)&&typeof t=="string"&&(((e=t.match(tm))==null?void 0:e.length)||0)+(((n=t.match(RD))==null?void 0:n.length)||0)>0}const $S="number",GS="color",OD="var",kD="var(",bx="${}",MD=/var\s*\(\s*--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)|#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\)|-?(?:\d+(?:\.\d+)?|\.\d+)/giu;function Zc(t){const e=t.toString(),n=[],r={color:[],number:[],var:[]},s=[];let o=0;const h=e.replace(MD,g=>(Xt.test(g)?(r.color.push(o),s.push(GS),n.push(Xt.parse(g))):g.startsWith(kD)?(r.var.push(o),s.push(OD),n.push(g)):(r.number.push(o),s.push($S),n.push(parseFloat(g))),++o,bx)).split(bx);return{values:n,split:h,indexes:r,types:s}}function YS(t){return Zc(t).values}function XS(t){const{split:e,types:n}=Zc(t),r=e.length;return s=>{let o="";for(let c=0;c<r;c++)if(o+=e[c],s[c]!==void 0){const h=n[c];h===$S?o+=pc(s[c]):h===GS?o+=Xt.transform(s[c]):o+=s[c]}return o}}const DD=t=>typeof t=="number"?0:Xt.test(t)?Xt.getAnimatableNone(t):t;function PD(t){const e=YS(t);return XS(t)(e.map(DD))}const qs={test:ND,parse:YS,createTransformer:XS,getAnimatableNone:PD};function w0(t,e,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?t+(e-t)*6*n:n<1/2?e:n<2/3?t+(e-t)*(2/3-n)*6:t}function LD({hue:t,saturation:e,lightness:n,alpha:r}){t/=360,e/=100,n/=100;let s=0,o=0,c=0;if(!e)s=o=c=n;else{const h=n<.5?n*(1+e):n+e-n*e,g=2*n-h;s=w0(g,h,t+1/3),o=w0(g,h,t),c=w0(g,h,t-1/3)}return{red:Math.round(s*255),green:Math.round(o*255),blue:Math.round(c*255),alpha:r}}function ph(t,e){return n=>n>0?e:t}const Mt=(t,e,n)=>t+(e-t)*n,x0=(t,e,n)=>{const r=t*t,s=n*(e*e-r)+r;return s<0?0:Math.sqrt(s)},BD=[Q1,Ao,Na],FD=t=>BD.find(e=>e.test(t));function Cx(t){const e=FD(t);if(af(!!e,`'${t}' is not an animatable color. Use the equivalent color code instead.`,"color-not-animatable"),!e)return!1;let n=e.parse(t);return e===Na&&(n=LD(n)),n}const Sx=(t,e)=>{const n=Cx(t),r=Cx(e);if(!n||!r)return ph(t,e);const s={...n};return o=>(s.red=x0(n.red,r.red,o),s.green=x0(n.green,r.green,o),s.blue=x0(n.blue,r.blue,o),s.alpha=Mt(n.alpha,r.alpha,o),Ao.transform(s))},J1=new Set(["none","hidden"]);function jD(t,e){return J1.has(t)?n=>n<=0?t:e:n=>n>=1?e:t}function UD(t,e){return n=>Mt(t,e,n)}function rm(t){return typeof t=="number"?UD:typeof t=="string"?em(t)?ph:Xt.test(t)?Sx:HD:Array.isArray(t)?KS:typeof t=="object"?Xt.test(t)?Sx:VD:ph}function KS(t,e){const n=[...t],r=n.length,s=t.map((o,c)=>rm(o)(o,e[c]));return o=>{for(let c=0;c<r;c++)n[c]=s[c](o);return n}}function VD(t,e){const n={...t,...e},r={};for(const s in n)t[s]!==void 0&&e[s]!==void 0&&(r[s]=rm(t[s])(t[s],e[s]));return s=>{for(const o in r)n[o]=r[o](s);return n}}function zD(t,e){const n=[],r={color:0,var:0,number:0};for(let s=0;s<e.values.length;s++){const o=e.types[s],c=t.indexes[o][r[o]],h=t.values[c]??0;n[s]=h,r[o]++}return n}const HD=(t,e)=>{const n=qs.createTransformer(e),r=Zc(t),s=Zc(e);return r.indexes.var.length===s.indexes.var.length&&r.indexes.color.length===s.indexes.color.length&&r.indexes.number.length>=s.indexes.number.length?J1.has(t)&&!s.values.length||J1.has(e)&&!r.values.length?jD(t,e):pu(KS(zD(r,s),s.values),n):(af(!0,`Complex values '${t}' and '${e}' too different to mix. Ensure all colors are of the same type, and that each contains the same quantity of number and color values. Falling back to instant transition.`,"complex-values-different"),ph(t,e))};function qS(t,e,n){return typeof t=="number"&&typeof e=="number"&&typeof n=="number"?Mt(t,e,n):rm(t)(t,e)}const WD=t=>{const e=({timestamp:n})=>t(n);return{start:(n=!0)=>ft.update(e,n),stop:()=>Qi(e),now:()=>xn.isProcessing?xn.timestamp:Ln.now()}},ZS=(t,e,n=10)=>{let r="";const s=Math.max(Math.round(e/n),2);for(let o=0;o<s;o++)r+=Math.round(t(o/(s-1))*1e4)/1e4+", ";return`linear(${r.substring(0,r.length-2)})`},gh=2e4;function im(t){let e=0;const n=50;let r=t.next(e);for(;!r.done&&e<gh;)e+=n,r=t.next(e);return e>=gh?1/0:e}function $D(t,e=100,n){const r=n({...t,keyframes:[0,e]}),s=Math.min(im(r),gh);return{type:"keyframes",ease:o=>r.next(s*o).value/e,duration:Tr(s)}}const GD=5;function QS(t,e,n){const r=Math.max(e-GD,0);return NS(n-t(r),e-r)}const Ot={stiffness:100,damping:10,mass:1,velocity:0,duration:800,bounce:.3,visualDuration:.3,restSpeed:{granular:.01,default:2},restDelta:{granular:.005,default:.5},minDuration:.01,maxDuration:10,minDamping:.05,maxDamping:1},v0=.001;function YD({duration:t=Ot.duration,bounce:e=Ot.bounce,velocity:n=Ot.velocity,mass:r=Ot.mass}){let s,o;af(t<=ni(Ot.maxDuration),"Spring duration must be 10 seconds or less","spring-duration-limit");let c=1-e;c=Oi(Ot.minDamping,Ot.maxDamping,c),t=Oi(Ot.minDuration,Ot.maxDuration,Tr(t)),c<1?(s=p=>{const y=p*c,x=y*t,E=y-n,b=ep(p,c),I=Math.exp(-x);return v0-E/b*I},o=p=>{const x=p*c*t,E=x*n+n,b=Math.pow(c,2)*Math.pow(p,2)*t,I=Math.exp(-x),S=ep(Math.pow(p,2),c);return(-s(p)+v0>0?-1:1)*((E-b)*I)/S}):(s=p=>{const y=Math.exp(-p*t),x=(p-n)*t+1;return-v0+y*x},o=p=>{const y=Math.exp(-p*t),x=(n-p)*(t*t);return y*x});const h=5/t,g=KD(s,o,h);if(t=ni(t),isNaN(g))return{stiffness:Ot.stiffness,damping:Ot.damping,duration:t};{const p=Math.pow(g,2)*r;return{stiffness:p,damping:c*2*Math.sqrt(r*p),duration:t}}}const XD=12;function KD(t,e,n){let r=n;for(let s=1;s<XD;s++)r=r-t(r)/e(r);return r}function ep(t,e){return t*Math.sqrt(1-e*e)}const qD=["duration","bounce"],ZD=["stiffness","damping","mass"];function Ax(t,e){return e.some(n=>t[n]!==void 0)}function QD(t){let e={velocity:Ot.velocity,stiffness:Ot.stiffness,damping:Ot.damping,mass:Ot.mass,isResolvedFromDuration:!1,...t};if(!Ax(t,ZD)&&Ax(t,qD))if(t.visualDuration){const n=t.visualDuration,r=2*Math.PI/(n*1.2),s=r*r,o=2*Oi(.05,1,1-(t.bounce||0))*Math.sqrt(s);e={...e,mass:Ot.mass,stiffness:s,damping:o}}else{const n=YD(t);e={...e,...n,mass:Ot.mass},e.isResolvedFromDuration=!0}return e}function mh(t=Ot.visualDuration,e=Ot.bounce){const n=typeof t!="object"?{visualDuration:t,keyframes:[0,1],bounce:e}:t;let{restSpeed:r,restDelta:s}=n;const o=n.keyframes[0],c=n.keyframes[n.keyframes.length-1],h={done:!1,value:o},{stiffness:g,damping:p,mass:y,duration:x,velocity:E,isResolvedFromDuration:b}=QD({...n,velocity:-Tr(n.velocity||0)}),I=E||0,S=p/(2*Math.sqrt(g*y)),R=c-o,A=Tr(Math.sqrt(g/y)),_=Math.abs(R)<5;r||(r=_?Ot.restSpeed.granular:Ot.restSpeed.default),s||(s=_?Ot.restDelta.granular:Ot.restDelta.default);let T;if(S<1){const F=ep(A,S);T=j=>{const B=Math.exp(-S*A*j);return c-B*((I+S*A*R)/F*Math.sin(F*j)+R*Math.cos(F*j))}}else if(S===1)T=F=>c-Math.exp(-A*F)*(R+(I+A*R)*F);else{const F=A*Math.sqrt(S*S-1);T=j=>{const B=Math.exp(-S*A*j),W=Math.min(F*j,300);return c-B*((I+S*A*R)*Math.sinh(W)+F*R*Math.cosh(W))/F}}const D={calculatedDuration:b&&x||null,next:F=>{const j=T(F);if(b)h.done=F>=x;else{let B=F===0?I:0;S<1&&(B=F===0?ni(I):QS(T,F,j));const W=Math.abs(B)<=r,H=Math.abs(c-j)<=s;h.done=W&&H}return h.value=h.done?c:j,h},toString:()=>{const F=Math.min(im(D),gh),j=ZS(B=>D.next(F*B).value,F,30);return F+"ms "+j},toTransition:()=>{}};return D}mh.applyToOptions=t=>{const e=$D(t,100,mh);return t.ease=e.ease,t.duration=ni(e.duration),t.type="keyframes",t};function tp({keyframes:t,velocity:e=0,power:n=.8,timeConstant:r=325,bounceDamping:s=10,bounceStiffness:o=500,modifyTarget:c,min:h,max:g,restDelta:p=.5,restSpeed:y}){const x=t[0],E={done:!1,value:x},b=W=>h!==void 0&&W<h||g!==void 0&&W>g,I=W=>h===void 0?g:g===void 0||Math.abs(h-W)<Math.abs(g-W)?h:g;let S=n*e;const R=x+S,A=c===void 0?R:c(R);A!==R&&(S=A-x);const _=W=>-S*Math.exp(-W/r),T=W=>A+_(W),D=W=>{const H=_(W),te=T(W);E.done=Math.abs(H)<=p,E.value=E.done?A:te};let F,j;const B=W=>{b(E.value)&&(F=W,j=mh({keyframes:[E.value,I(E.value)],velocity:QS(T,W,E.value),damping:s,stiffness:o,restDelta:p,restSpeed:y}))};return B(0),{calculatedDuration:null,next:W=>{let H=!1;return!j&&F===void 0&&(H=!0,D(W),B(W)),F!==void 0&&W>=F?j.next(W-F):(!H&&D(W),E)}}}function JD(t,e,n){const r=[],s=n||Zi.mix||qS,o=t.length-1;for(let c=0;c<o;c++){let h=s(t[c],t[c+1]);if(e){const g=Array.isArray(e)?e[c]||Rr:e;h=pu(g,h)}r.push(h)}return r}function JS(t,e,{clamp:n=!0,ease:r,mixer:s}={}){const o=t.length;if(cl(o===e.length,"Both input and output ranges must be the same length","range-length"),o===1)return()=>e[0];if(o===2&&e[0]===e[1])return()=>e[1];const c=t[0]===t[1];t[0]>t[o-1]&&(t=[...t].reverse(),e=[...e].reverse());const h=JD(e,r,s),g=h.length,p=y=>{if(c&&y<t[0])return e[0];let x=0;if(g>1)for(;x<t.length-2&&!(y<t[x+1]);x++);const E=Kc(t[x],t[x+1],y);return h[x](E)};return n?y=>p(Oi(t[0],t[o-1],y)):p}function eP(t,e){const n=t[t.length-1];for(let r=1;r<=e;r++){const s=Kc(0,e,r);t.push(Mt(n,1,s))}}function tP(t){const e=[0];return eP(e,t.length-1),e}function nP(t,e){return t.map(n=>n*e)}function rP(t,e){return t.map(()=>e||jS).splice(0,t.length-1)}function gc({duration:t=300,keyframes:e,times:n,ease:r="easeInOut"}){const s=mD(r)?r.map(wx):wx(r),o={done:!1,value:e[0]},c=nP(n&&n.length===e.length?n:tP(e),t),h=JS(c,e,{ease:Array.isArray(s)?s:rP(e,s)});return{calculatedDuration:t,next:g=>(o.value=h(g),o.done=g>=t,o)}}const iP=t=>t!==null;function sm(t,{repeat:e,repeatType:n="loop"},r,s=1){const o=t.filter(iP),h=s<0||e&&n!=="loop"&&e%2===1?0:o.length-1;return!h||r===void 0?o[h]:r}const sP={decay:tp,inertia:tp,tween:gc,keyframes:gc,spring:mh};function eA(t){typeof t.type=="string"&&(t.type=sP[t.type])}class om{constructor(){this.updateFinished()}get finished(){return this._finished}updateFinished(){this._finished=new Promise(e=>{this.resolve=e})}notifyFinished(){this.resolve()}then(e,n){return this.finished.then(e,n)}}const oP=t=>t/100;class am extends om{constructor(e){super(),this.state="idle",this.startTime=null,this.isStopped=!1,this.currentTime=0,this.holdTime=null,this.playbackSpeed=1,this.stop=()=>{var r,s;const{motionValue:n}=this.options;n&&n.updatedAt!==Ln.now()&&this.tick(Ln.now()),this.isStopped=!0,this.state!=="idle"&&(this.teardown(),(s=(r=this.options).onStop)==null||s.call(r))},this.options=e,this.initAnimation(),this.play(),e.autoplay===!1&&this.pause()}initAnimation(){const{options:e}=this;eA(e);const{type:n=gc,repeat:r=0,repeatDelay:s=0,repeatType:o,velocity:c=0}=e;let{keyframes:h}=e;const g=n||gc;g!==gc&&typeof h[0]!="number"&&(this.mixKeyframes=pu(oP,qS(h[0],h[1])),h=[0,100]);const p=g({...e,keyframes:h});o==="mirror"&&(this.mirroredGenerator=g({...e,keyframes:[...h].reverse(),velocity:-c})),p.calculatedDuration===null&&(p.calculatedDuration=im(p));const{calculatedDuration:y}=p;this.calculatedDuration=y,this.resolvedDuration=y+s,this.totalDuration=this.resolvedDuration*(r+1)-s,this.generator=p}updateTime(e){const n=Math.round(e-this.startTime)*this.playbackSpeed;this.holdTime!==null?this.currentTime=this.holdTime:this.currentTime=n}tick(e,n=!1){const{generator:r,totalDuration:s,mixKeyframes:o,mirroredGenerator:c,resolvedDuration:h,calculatedDuration:g}=this;if(this.startTime===null)return r.next(0);const{delay:p=0,keyframes:y,repeat:x,repeatType:E,repeatDelay:b,type:I,onUpdate:S,finalKeyframe:R}=this.options;this.speed>0?this.startTime=Math.min(this.startTime,e):this.speed<0&&(this.startTime=Math.min(e-s/this.speed,this.startTime)),n?this.currentTime=e:this.updateTime(e);const A=this.currentTime-p*(this.playbackSpeed>=0?1:-1),_=this.playbackSpeed>=0?A<0:A>s;this.currentTime=Math.max(A,0),this.state==="finished"&&this.holdTime===null&&(this.currentTime=s);let T=this.currentTime,D=r;if(x){const W=Math.min(this.currentTime,s)/h;let H=Math.floor(W),te=W%1;!te&&W>=1&&(te=1),te===1&&H--,H=Math.min(H,x+1),!!(H%2)&&(E==="reverse"?(te=1-te,b&&(te-=b/h)):E==="mirror"&&(D=c)),T=Oi(0,1,te)*h}const F=_?{done:!1,value:y[0]}:D.next(T);o&&(F.value=o(F.value));let{done:j}=F;!_&&g!==null&&(j=this.playbackSpeed>=0?this.currentTime>=s:this.currentTime<=0);const B=this.holdTime===null&&(this.state==="finished"||this.state==="running"&&j);return B&&I!==tp&&(F.value=sm(y,this.options,R,this.speed)),S&&S(F.value),B&&this.finish(),F}then(e,n){return this.finished.then(e,n)}get duration(){return Tr(this.calculatedDuration)}get iterationDuration(){const{delay:e=0}=this.options||{};return this.duration+Tr(e)}get time(){return Tr(this.currentTime)}set time(e){var n;e=ni(e),this.currentTime=e,this.startTime===null||this.holdTime!==null||this.playbackSpeed===0?this.holdTime=e:this.driver&&(this.startTime=this.driver.now()-e/this.playbackSpeed),(n=this.driver)==null||n.start(!1)}get speed(){return this.playbackSpeed}set speed(e){this.updateTime(Ln.now());const n=this.playbackSpeed!==e;this.playbackSpeed=e,n&&(this.time=Tr(this.currentTime))}play(){var s,o;if(this.isStopped)return;const{driver:e=WD,startTime:n}=this.options;this.driver||(this.driver=e(c=>this.tick(c))),(o=(s=this.options).onPlay)==null||o.call(s);const r=this.driver.now();this.state==="finished"?(this.updateFinished(),this.startTime=r):this.holdTime!==null?this.startTime=r-this.holdTime:this.startTime||(this.startTime=n??r),this.state==="finished"&&this.speed<0&&(this.startTime+=this.calculatedDuration),this.holdTime=null,this.state="running",this.driver.start()}pause(){this.state="paused",this.updateTime(Ln.now()),this.holdTime=this.currentTime}complete(){this.state!=="running"&&this.play(),this.state="finished",this.holdTime=null}finish(){var e,n;this.notifyFinished(),this.teardown(),this.state="finished",(n=(e=this.options).onComplete)==null||n.call(e)}cancel(){var e,n;this.holdTime=null,this.startTime=0,this.tick(0),this.teardown(),(n=(e=this.options).onCancel)==null||n.call(e)}teardown(){this.state="idle",this.stopDriver(),this.startTime=this.holdTime=null}stopDriver(){this.driver&&(this.driver.stop(),this.driver=void 0)}sample(e){return this.startTime=0,this.tick(e,!0)}attachTimeline(e){var n;return this.options.allowFlatten&&(this.options.type="keyframes",this.options.ease="linear",this.initAnimation()),(n=this.driver)==null||n.stop(),e.observe(this)}}function aP(t){for(let e=1;e<t.length;e++)t[e]??(t[e]=t[e-1])}const _o=t=>t*180/Math.PI,np=t=>{const e=_o(Math.atan2(t[1],t[0]));return rp(e)},lP={x:4,y:5,translateX:4,translateY:5,scaleX:0,scaleY:3,scale:t=>(Math.abs(t[0])+Math.abs(t[3]))/2,rotate:np,rotateZ:np,skewX:t=>_o(Math.atan(t[1])),skewY:t=>_o(Math.atan(t[2])),skew:t=>(Math.abs(t[1])+Math.abs(t[2]))/2},rp=t=>(t=t%360,t<0&&(t+=360),t),_x=np,Tx=t=>Math.sqrt(t[0]*t[0]+t[1]*t[1]),Ix=t=>Math.sqrt(t[4]*t[4]+t[5]*t[5]),cP={x:12,y:13,z:14,translateX:12,translateY:13,translateZ:14,scaleX:Tx,scaleY:Ix,scale:t=>(Tx(t)+Ix(t))/2,rotateX:t=>rp(_o(Math.atan2(t[6],t[5]))),rotateY:t=>rp(_o(Math.atan2(-t[2],t[0]))),rotateZ:_x,rotate:_x,skewX:t=>_o(Math.atan(t[4])),skewY:t=>_o(Math.atan(t[1])),skew:t=>(Math.abs(t[1])+Math.abs(t[4]))/2};function ip(t){return t.includes("scale")?1:0}function sp(t,e){if(!t||t==="none")return ip(e);const n=t.match(/^matrix3d\(([-\d.e\s,]+)\)$/u);let r,s;if(n)r=cP,s=n;else{const h=t.match(/^matrix\(([-\d.e\s,]+)\)$/u);r=lP,s=h}if(!s)return ip(e);const o=r[e],c=s[1].split(",").map(dP);return typeof o=="function"?o(c):c[o]}const uP=(t,e)=>{const{transform:n="none"}=getComputedStyle(t);return sp(n,e)};function dP(t){return parseFloat(t.trim())}const Sl=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],Al=new Set(Sl),Rx=t=>t===Cl||t===be,hP=new Set(["x","y","z"]),fP=Sl.filter(t=>!hP.has(t));function pP(t){const e=[];return fP.forEach(n=>{const r=t.getValue(n);r!==void 0&&(e.push([n,r.get()]),r.set(n.startsWith("scale")?1:0))}),e}const Ns={width:({x:t},{paddingLeft:e="0",paddingRight:n="0"})=>t.max-t.min-parseFloat(e)-parseFloat(n),height:({y:t},{paddingTop:e="0",paddingBottom:n="0"})=>t.max-t.min-parseFloat(e)-parseFloat(n),top:(t,{top:e})=>parseFloat(e),left:(t,{left:e})=>parseFloat(e),bottom:({y:t},{top:e})=>parseFloat(e)+(t.max-t.min),right:({x:t},{left:e})=>parseFloat(e)+(t.max-t.min),x:(t,{transform:e})=>sp(e,"x"),y:(t,{transform:e})=>sp(e,"y")};Ns.translateX=Ns.x;Ns.translateY=Ns.y;const Lo=new Set;let op=!1,ap=!1,lp=!1;function tA(){if(ap){const t=Array.from(Lo).filter(r=>r.needsMeasurement),e=new Set(t.map(r=>r.element)),n=new Map;e.forEach(r=>{const s=pP(r);s.length&&(n.set(r,s),r.render())}),t.forEach(r=>r.measureInitialState()),e.forEach(r=>{r.render();const s=n.get(r);s&&s.forEach(([o,c])=>{var h;(h=r.getValue(o))==null||h.set(c)})}),t.forEach(r=>r.measureEndState()),t.forEach(r=>{r.suspendedScrollY!==void 0&&window.scrollTo(0,r.suspendedScrollY)})}ap=!1,op=!1,Lo.forEach(t=>t.complete(lp)),Lo.clear()}function nA(){Lo.forEach(t=>{t.readKeyframes(),t.needsMeasurement&&(ap=!0)})}function gP(){lp=!0,nA(),tA(),lp=!1}class lm{constructor(e,n,r,s,o,c=!1){this.state="pending",this.isAsync=!1,this.needsMeasurement=!1,this.unresolvedKeyframes=[...e],this.onComplete=n,this.name=r,this.motionValue=s,this.element=o,this.isAsync=c}scheduleResolve(){this.state="scheduled",this.isAsync?(Lo.add(this),op||(op=!0,ft.read(nA),ft.resolveKeyframes(tA))):(this.readKeyframes(),this.complete())}readKeyframes(){const{unresolvedKeyframes:e,name:n,element:r,motionValue:s}=this;if(e[0]===null){const o=s==null?void 0:s.get(),c=e[e.length-1];if(o!==void 0)e[0]=o;else if(r&&n){const h=r.readValue(n,c);h!=null&&(e[0]=h)}e[0]===void 0&&(e[0]=c),s&&o===void 0&&s.set(e[0])}aP(e)}setFinalKeyframe(){}measureInitialState(){}renderEndStyles(){}measureEndState(){}complete(e=!1){this.state="complete",this.onComplete(this.unresolvedKeyframes,this.finalKeyframe,e),Lo.delete(this)}cancel(){this.state==="scheduled"&&(Lo.delete(this),this.state="pending")}resume(){this.state==="pending"&&this.scheduleResolve()}}const mP=t=>t.startsWith("--");function yP(t,e,n){mP(e)?t.style.setProperty(e,n):t.style[e]=n}const wP=qg(()=>window.ScrollTimeline!==void 0),xP={};function vP(t,e){const n=qg(t);return()=>xP[e]??n()}const rA=vP(()=>{try{document.createElement("div").animate({opacity:0},{easing:"linear(0, 1)"})}catch{return!1}return!0},"linearEasing"),ec=([t,e,n,r])=>`cubic-bezier(${t}, ${e}, ${n}, ${r})`,Nx={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:ec([0,.65,.55,1]),circOut:ec([.55,0,1,.45]),backIn:ec([.31,.01,.66,-.59]),backOut:ec([.33,1.53,.69,.99])};function iA(t,e){if(t)return typeof t=="function"?rA()?ZS(t,e):"ease-out":US(t)?ec(t):Array.isArray(t)?t.map(n=>iA(n,e)||Nx.easeOut):Nx[t]}function EP(t,e,n,{delay:r=0,duration:s=300,repeat:o=0,repeatType:c="loop",ease:h="easeOut",times:g}={},p=void 0){const y={[e]:n};g&&(y.offset=g);const x=iA(h,s);Array.isArray(x)&&(y.easing=x);const E={delay:r,duration:s,easing:Array.isArray(x)?"linear":x,fill:"both",iterations:o+1,direction:c==="reverse"?"alternate":"normal"};return p&&(E.pseudoElement=p),t.animate(y,E)}function sA(t){return typeof t=="function"&&"applyToOptions"in t}function bP({type:t,...e}){return sA(t)&&rA()?t.applyToOptions(e):(e.duration??(e.duration=300),e.ease??(e.ease="easeOut"),e)}class CP extends om{constructor(e){if(super(),this.finishedTime=null,this.isStopped=!1,this.manualStartTime=null,!e)return;const{element:n,name:r,keyframes:s,pseudoElement:o,allowFlatten:c=!1,finalKeyframe:h,onComplete:g}=e;this.isPseudoElement=!!o,this.allowFlatten=c,this.options=e,cl(typeof e.type!="string",`Mini animate() doesn't support "type" as a string.`,"mini-spring");const p=bP(e);this.animation=EP(n,r,s,p,o),p.autoplay===!1&&this.animation.pause(),this.animation.onfinish=()=>{if(this.finishedTime=this.time,!o){const y=sm(s,this.options,h,this.speed);this.updateMotionValue?this.updateMotionValue(y):yP(n,r,y),this.animation.cancel()}g==null||g(),this.notifyFinished()}}play(){this.isStopped||(this.manualStartTime=null,this.animation.play(),this.state==="finished"&&this.updateFinished())}pause(){this.animation.pause()}complete(){var e,n;(n=(e=this.animation).finish)==null||n.call(e)}cancel(){try{this.animation.cancel()}catch{}}stop(){if(this.isStopped)return;this.isStopped=!0;const{state:e}=this;e==="idle"||e==="finished"||(this.updateMotionValue?this.updateMotionValue():this.commitStyles(),this.isPseudoElement||this.cancel())}commitStyles(){var n,r,s;const e=(n=this.options)==null?void 0:n.element;!this.isPseudoElement&&(e!=null&&e.isConnected)&&((s=(r=this.animation).commitStyles)==null||s.call(r))}get duration(){var n,r;const e=((r=(n=this.animation.effect)==null?void 0:n.getComputedTiming)==null?void 0:r.call(n).duration)||0;return Tr(Number(e))}get iterationDuration(){const{delay:e=0}=this.options||{};return this.duration+Tr(e)}get time(){return Tr(Number(this.animation.currentTime)||0)}set time(e){this.manualStartTime=null,this.finishedTime=null,this.animation.currentTime=ni(e)}get speed(){return this.animation.playbackRate}set speed(e){e<0&&(this.finishedTime=null),this.animation.playbackRate=e}get state(){return this.finishedTime!==null?"finished":this.animation.playState}get startTime(){return this.manualStartTime??Number(this.animation.startTime)}set startTime(e){this.manualStartTime=this.animation.startTime=e}attachTimeline({timeline:e,observe:n}){var r;return this.allowFlatten&&((r=this.animation.effect)==null||r.updateTiming({easing:"linear"})),this.animation.onfinish=null,e&&wP()?(this.animation.timeline=e,Rr):n(this)}}const oA={anticipate:LS,backInOut:PS,circInOut:FS};function SP(t){return t in oA}function AP(t){typeof t.ease=="string"&&SP(t.ease)&&(t.ease=oA[t.ease])}const E0=10;class _P extends CP{constructor(e){AP(e),eA(e),super(e),e.startTime!==void 0&&(this.startTime=e.startTime),this.options=e}updateMotionValue(e){const{motionValue:n,onUpdate:r,onComplete:s,element:o,...c}=this.options;if(!n)return;if(e!==void 0){n.set(e);return}const h=new am({...c,autoplay:!1}),g=Math.max(E0,Ln.now()-this.startTime),p=Oi(0,E0,g-E0);n.setWithVelocity(h.sample(Math.max(0,g-p)).value,h.sample(g).value,p),h.stop()}}const Ox=(t,e)=>e==="zIndex"?!1:!!(typeof t=="number"||Array.isArray(t)||typeof t=="string"&&(qs.test(t)||t==="0")&&!t.startsWith("url("));function TP(t){const e=t[0];if(t.length===1)return!0;for(let n=0;n<t.length;n++)if(t[n]!==e)return!0}function IP(t,e,n,r){const s=t[0];if(s===null)return!1;if(e==="display"||e==="visibility")return!0;const o=t[t.length-1],c=Ox(s,e),h=Ox(o,e);return af(c===h,`You are trying to animate ${e} from "${s}" to "${o}". "${c?o:s}" is not an animatable value.`,"value-not-animatable"),!c||!h?!1:TP(t)||(n==="spring"||sA(n))&&r}function cp(t){t.duration=0,t.type="keyframes"}const RP=new Set(["opacity","clipPath","filter","transform"]),NP=qg(()=>Object.hasOwnProperty.call(Element.prototype,"animate"));function OP(t){var y;const{motionValue:e,name:n,repeatDelay:r,repeatType:s,damping:o,type:c}=t;if(!(((y=e==null?void 0:e.owner)==null?void 0:y.current)instanceof HTMLElement))return!1;const{onUpdate:g,transformTemplate:p}=e.owner.getProps();return NP()&&n&&RP.has(n)&&(n!=="transform"||!p)&&!g&&!r&&s!=="mirror"&&o!==0&&c!=="inertia"}const kP=40;class MP extends om{constructor({autoplay:e=!0,delay:n=0,type:r="keyframes",repeat:s=0,repeatDelay:o=0,repeatType:c="loop",keyframes:h,name:g,motionValue:p,element:y,...x}){var I;super(),this.stop=()=>{var S,R;this._animation&&(this._animation.stop(),(S=this.stopTimeline)==null||S.call(this)),(R=this.keyframeResolver)==null||R.cancel()},this.createdAt=Ln.now();const E={autoplay:e,delay:n,type:r,repeat:s,repeatDelay:o,repeatType:c,name:g,motionValue:p,element:y,...x},b=(y==null?void 0:y.KeyframeResolver)||lm;this.keyframeResolver=new b(h,(S,R,A)=>this.onKeyframesResolved(S,R,E,!A),g,p,y),(I=this.keyframeResolver)==null||I.scheduleResolve()}onKeyframesResolved(e,n,r,s){var R,A;this.keyframeResolver=void 0;const{name:o,type:c,velocity:h,delay:g,isHandoff:p,onUpdate:y}=r;this.resolvedAt=Ln.now(),IP(e,o,c,h)||((Zi.instantAnimations||!g)&&(y==null||y(sm(e,r,n))),e[0]=e[e.length-1],cp(r),r.repeat=0);const E={startTime:s?this.resolvedAt?this.resolvedAt-this.createdAt>kP?this.resolvedAt:this.createdAt:this.createdAt:void 0,finalKeyframe:n,...r,keyframes:e},b=!p&&OP(E),I=(A=(R=E.motionValue)==null?void 0:R.owner)==null?void 0:A.current,S=b?new _P({...E,element:I}):new am(E);S.finished.then(()=>{this.notifyFinished()}).catch(Rr),this.pendingTimeline&&(this.stopTimeline=S.attachTimeline(this.pendingTimeline),this.pendingTimeline=void 0),this._animation=S}get finished(){return this._animation?this.animation.finished:this._finished}then(e,n){return this.finished.finally(e).then(()=>{})}get animation(){var e;return this._animation||((e=this.keyframeResolver)==null||e.resume(),gP()),this._animation}get duration(){return this.animation.duration}get iterationDuration(){return this.animation.iterationDuration}get time(){return this.animation.time}set time(e){this.animation.time=e}get speed(){return this.animation.speed}get state(){return this.animation.state}set speed(e){this.animation.speed=e}get startTime(){return this.animation.startTime}attachTimeline(e){return this._animation?this.stopTimeline=this.animation.attachTimeline(e):this.pendingTimeline=e,()=>this.stop()}play(){this.animation.play()}pause(){this.animation.pause()}complete(){this.animation.complete()}cancel(){var e;this._animation&&this.animation.cancel(),(e=this.keyframeResolver)==null||e.cancel()}}function aA(t,e,n,r=0,s=1){const o=Array.from(t).sort((p,y)=>p.sortNodePosition(y)).indexOf(e),c=t.size,h=(c-1)*r;return typeof n=="function"?n(o,c):s===1?o*r:h-o*r}const DP=/^var\(--(?:([\w-]+)|([\w-]+), ?([a-zA-Z\d ()%#.,-]+))\)/u;function PP(t){const e=DP.exec(t);if(!e)return[,];const[,n,r,s]=e;return[`--${n??r}`,s]}const LP=4;function lA(t,e,n=1){cl(n<=LP,`Max CSS variable fallback depth detected in property "${t}". This may indicate a circular fallback dependency.`,"max-css-var-depth");const[r,s]=PP(t);if(!r)return;const o=window.getComputedStyle(e).getPropertyValue(r);if(o){const c=o.trim();return TS(c)?parseFloat(c):c}return em(s)?lA(s,e,n+1):s}const BP={type:"spring",stiffness:500,damping:25,restSpeed:10},FP=t=>({type:"spring",stiffness:550,damping:t===0?2*Math.sqrt(550):30,restSpeed:10}),jP={type:"keyframes",duration:.8},UP={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},VP=(t,{keyframes:e})=>e.length>2?jP:Al.has(t)?t.startsWith("scale")?FP(e[1]):BP:UP,zP=t=>t!==null;function HP(t,{repeat:e,repeatType:n="loop"},r){const s=t.filter(zP),o=e&&n!=="loop"&&e%2===1?0:s.length-1;return!o||r===void 0?s[o]:r}function cA(t,e){if(t!=null&&t.inherit&&e){const{inherit:n,...r}=t;return{...e,...r}}return t}function cm(t,e){const n=(t==null?void 0:t[e])??(t==null?void 0:t.default)??t;return n!==t?cA(n,t):n}function WP({when:t,delay:e,delayChildren:n,staggerChildren:r,staggerDirection:s,repeat:o,repeatType:c,repeatDelay:h,from:g,elapsed:p,...y}){return!!Object.keys(y).length}const um=(t,e,n,r={},s,o)=>c=>{const h=cm(r,t)||{},g=h.delay||r.delay||0;let{elapsed:p=0}=r;p=p-ni(g);const y={keyframes:Array.isArray(n)?n:[null,n],ease:"easeOut",velocity:e.getVelocity(),...h,delay:-p,onUpdate:E=>{e.set(E),h.onUpdate&&h.onUpdate(E)},onComplete:()=>{c(),h.onComplete&&h.onComplete()},name:t,motionValue:e,element:o?void 0:s};WP(h)||Object.assign(y,VP(t,y)),y.duration&&(y.duration=ni(y.duration)),y.repeatDelay&&(y.repeatDelay=ni(y.repeatDelay)),y.from!==void 0&&(y.keyframes[0]=y.from);let x=!1;if((y.type===!1||y.duration===0&&!y.repeatDelay)&&(cp(y),y.delay===0&&(x=!0)),(Zi.instantAnimations||Zi.skipAnimations||s!=null&&s.shouldSkipAnimations)&&(x=!0,cp(y),y.delay=0),y.allowFlatten=!h.type&&!h.ease,x&&!o&&e.get()!==void 0){const E=HP(y.keyframes,h);if(E!==void 0){ft.update(()=>{y.onUpdate(E),y.onComplete()});return}}return h.isSync?new am(y):new MP(y)};function kx(t){const e=[{},{}];return t==null||t.values.forEach((n,r)=>{e[0][r]=n.get(),e[1][r]=n.getVelocity()}),e}function dm(t,e,n,r){if(typeof e=="function"){const[s,o]=kx(r);e=e(n!==void 0?n:t.custom,s,o)}if(typeof e=="string"&&(e=t.variants&&t.variants[e]),typeof e=="function"){const[s,o]=kx(r);e=e(n!==void 0?n:t.custom,s,o)}return e}function Wa(t,e,n){const r=t.getProps();return dm(r,e,n!==void 0?n:r.custom,t)}const uA=new Set(["width","height","top","left","right","bottom",...Sl]),Mx=30,$P=t=>!isNaN(parseFloat(t)),mc={current:void 0};class GP{constructor(e,n={}){this.canTrackVelocity=null,this.events={},this.updateAndNotify=r=>{var o;const s=Ln.now();if(this.updatedAt!==s&&this.setPrevFrameValue(),this.prev=this.current,this.setCurrent(r),this.current!==this.prev&&((o=this.events.change)==null||o.notify(this.current),this.dependents))for(const c of this.dependents)c.dirty()},this.hasAnimated=!1,this.setCurrent(e),this.owner=n.owner}setCurrent(e){this.current=e,this.updatedAt=Ln.now(),this.canTrackVelocity===null&&e!==void 0&&(this.canTrackVelocity=$P(this.current))}setPrevFrameValue(e=this.current){this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt}onChange(e){return this.on("change",e)}on(e,n){this.events[e]||(this.events[e]=new Zg);const r=this.events[e].add(n);return e==="change"?()=>{r(),ft.read(()=>{this.events.change.getSize()||this.stop()})}:r}clearListeners(){for(const e in this.events)this.events[e].clear()}attach(e,n){this.passiveEffect=e,this.stopPassiveEffect=n}set(e){this.passiveEffect?this.passiveEffect(e,this.updateAndNotify):this.updateAndNotify(e)}setWithVelocity(e,n,r){this.set(n),this.prev=void 0,this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt-r}jump(e,n=!0){this.updateAndNotify(e),this.prev=e,this.prevUpdatedAt=this.prevFrameValue=void 0,n&&this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}dirty(){var e;(e=this.events.change)==null||e.notify(this.current)}addDependent(e){this.dependents||(this.dependents=new Set),this.dependents.add(e)}removeDependent(e){this.dependents&&this.dependents.delete(e)}get(){return mc.current&&mc.current.push(this),this.current}getPrevious(){return this.prev}getVelocity(){const e=Ln.now();if(!this.canTrackVelocity||this.prevFrameValue===void 0||e-this.updatedAt>Mx)return 0;const n=Math.min(this.updatedAt-this.prevUpdatedAt,Mx);return NS(parseFloat(this.current)-parseFloat(this.prevFrameValue),n)}start(e){return this.stop(),new Promise(n=>{this.hasAnimated=!0,this.animation=e(n),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){var e,n;(e=this.dependents)==null||e.clear(),(n=this.events.destroy)==null||n.notify(),this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function Wo(t,e){return new GP(t,e)}const up=t=>Array.isArray(t);function YP(t,e,n){t.hasValue(e)?t.getValue(e).set(n):t.addValue(e,Wo(n))}function XP(t){return up(t)?t[t.length-1]||0:t}function KP(t,e){const n=Wa(t,e);let{transitionEnd:r={},transition:s={},...o}=n||{};o={...o,...r};for(const c in o){const h=XP(o[c]);YP(t,c,h)}}const Rn=t=>!!(t&&t.getVelocity);function qP(t){return!!(Rn(t)&&t.add)}function dp(t,e){const n=t.getValue("willChange");if(qP(n))return n.add(e);if(!n&&Zi.WillChange){const r=new Zi.WillChange("auto");t.addValue("willChange",r),r.add(e)}}function hm(t){return t.replace(/([A-Z])/g,e=>`-${e.toLowerCase()}`)}const ZP="framerAppearId",dA="data-"+hm(ZP);function hA(t){return t.props[dA]}function QP({protectedKeys:t,needsAnimating:e},n){const r=t.hasOwnProperty(n)&&e[n]!==!0;return e[n]=!1,r}function fA(t,e,{delay:n=0,transitionOverride:r,type:s}={}){let{transition:o,transitionEnd:c,...h}=e;const g=t.getDefaultTransition();o=o?cA(o,g):g;const p=o==null?void 0:o.reduceMotion;r&&(o=r);const y=[],x=s&&t.animationState&&t.animationState.getState()[s];for(const E in h){const b=t.getValue(E,t.latestValues[E]??null),I=h[E];if(I===void 0||x&&QP(x,E))continue;const S={delay:n,...cm(o||{},E)},R=b.get();if(R!==void 0&&!b.isAnimating&&!Array.isArray(I)&&I===R&&!S.velocity)continue;let A=!1;if(window.MotionHandoffAnimation){const D=hA(t);if(D){const F=window.MotionHandoffAnimation(D,E,ft);F!==null&&(S.startTime=F,A=!0)}}dp(t,E);const _=p??t.shouldReduceMotion;b.start(um(E,b,I,_&&uA.has(E)?{type:!1}:S,t,A));const T=b.animation;T&&y.push(T)}if(c){const E=()=>ft.update(()=>{c&&KP(t,c)});y.length?Promise.all(y).then(E):E()}return y}function hp(t,e,n={}){var g;const r=Wa(t,e,n.type==="exit"?(g=t.presenceContext)==null?void 0:g.custom:void 0);let{transition:s=t.getDefaultTransition()||{}}=r||{};n.transitionOverride&&(s=n.transitionOverride);const o=r?()=>Promise.all(fA(t,r,n)):()=>Promise.resolve(),c=t.variantChildren&&t.variantChildren.size?(p=0)=>{const{delayChildren:y=0,staggerChildren:x,staggerDirection:E}=s;return JP(t,e,p,y,x,E,n)}:()=>Promise.resolve(),{when:h}=s;if(h){const[p,y]=h==="beforeChildren"?[o,c]:[c,o];return p().then(()=>y())}else return Promise.all([o(),c(n.delay)])}function JP(t,e,n=0,r=0,s=0,o=1,c){const h=[];for(const g of t.variantChildren)g.notify("AnimationStart",e),h.push(hp(g,e,{...c,delay:n+(typeof r=="function"?0:r)+aA(t.variantChildren,g,r,s,o)}).then(()=>g.notify("AnimationComplete",e)));return Promise.all(h)}function e5(t,e,n={}){t.notify("AnimationStart",e);let r;if(Array.isArray(e)){const s=e.map(o=>hp(t,o,n));r=Promise.all(s)}else if(typeof e=="string")r=hp(t,e,n);else{const s=typeof e=="function"?Wa(t,e,n.custom):e;r=Promise.all(fA(t,s,n))}return r.then(()=>{t.notify("AnimationComplete",e)})}const t5={test:t=>t==="auto",parse:t=>t},pA=t=>e=>e.test(t),gA=[Cl,be,Ii,fs,ID,TD,t5],Dx=t=>gA.find(pA(t));function n5(t){return typeof t=="number"?t===0:t!==null?t==="none"||t==="0"||RS(t):!0}const r5=new Set(["brightness","contrast","saturate","opacity"]);function i5(t){const[e,n]=t.slice(0,-1).split("(");if(e==="drop-shadow")return t;const[r]=n.match(tm)||[];if(!r)return t;const s=n.replace(r,"");let o=r5.has(e)?1:0;return r!==n&&(o*=100),e+"("+o+s+")"}const s5=/\b([a-z-]*)\(.*?\)/gu,fp={...qs,getAnimatableNone:t=>{const e=t.match(s5);return e?e.map(i5).join(" "):t}},Px={...Cl,transform:Math.round},o5={rotate:fs,rotateX:fs,rotateY:fs,rotateZ:fs,scale:sd,scaleX:sd,scaleY:sd,scaleZ:sd,skew:fs,skewX:fs,skewY:fs,distance:be,translateX:be,translateY:be,translateZ:be,x:be,y:be,z:be,perspective:be,transformPerspective:be,opacity:qc,originX:Ex,originY:Ex,originZ:be},fm={borderWidth:be,borderTopWidth:be,borderRightWidth:be,borderBottomWidth:be,borderLeftWidth:be,borderRadius:be,borderTopLeftRadius:be,borderTopRightRadius:be,borderBottomRightRadius:be,borderBottomLeftRadius:be,width:be,maxWidth:be,height:be,maxHeight:be,top:be,right:be,bottom:be,left:be,inset:be,insetBlock:be,insetBlockStart:be,insetBlockEnd:be,insetInline:be,insetInlineStart:be,insetInlineEnd:be,padding:be,paddingTop:be,paddingRight:be,paddingBottom:be,paddingLeft:be,paddingBlock:be,paddingBlockStart:be,paddingBlockEnd:be,paddingInline:be,paddingInlineStart:be,paddingInlineEnd:be,margin:be,marginTop:be,marginRight:be,marginBottom:be,marginLeft:be,marginBlock:be,marginBlockStart:be,marginBlockEnd:be,marginInline:be,marginInlineStart:be,marginInlineEnd:be,fontSize:be,backgroundPositionX:be,backgroundPositionY:be,...o5,zIndex:Px,fillOpacity:qc,strokeOpacity:qc,numOctaves:Px},a5={...fm,color:Xt,backgroundColor:Xt,outlineColor:Xt,fill:Xt,stroke:Xt,borderColor:Xt,borderTopColor:Xt,borderRightColor:Xt,borderBottomColor:Xt,borderLeftColor:Xt,filter:fp,WebkitFilter:fp},mA=t=>a5[t];function yA(t,e){let n=mA(t);return n!==fp&&(n=qs),n.getAnimatableNone?n.getAnimatableNone(e):void 0}const l5=new Set(["auto","none","0"]);function c5(t,e,n){let r=0,s;for(;r<t.length&&!s;){const o=t[r];typeof o=="string"&&!l5.has(o)&&Zc(o).values.length&&(s=t[r]),r++}if(s&&n)for(const o of e)t[o]=yA(n,s)}class u5 extends lm{constructor(e,n,r,s,o){super(e,n,r,s,o,!0)}readKeyframes(){const{unresolvedKeyframes:e,element:n,name:r}=this;if(!n||!n.current)return;super.readKeyframes();for(let y=0;y<e.length;y++){let x=e[y];if(typeof x=="string"&&(x=x.trim(),em(x))){const E=lA(x,n.current);E!==void 0&&(e[y]=E),y===e.length-1&&(this.finalKeyframe=x)}}if(this.resolveNoneKeyframes(),!uA.has(r)||e.length!==2)return;const[s,o]=e,c=Dx(s),h=Dx(o),g=vx(s),p=vx(o);if(g!==p&&Ns[r]){this.needsMeasurement=!0;return}if(c!==h)if(Rx(c)&&Rx(h))for(let y=0;y<e.length;y++){const x=e[y];typeof x=="string"&&(e[y]=parseFloat(x))}else Ns[r]&&(this.needsMeasurement=!0)}resolveNoneKeyframes(){const{unresolvedKeyframes:e,name:n}=this,r=[];for(let s=0;s<e.length;s++)(e[s]===null||n5(e[s]))&&r.push(s);r.length&&c5(e,r,n)}measureInitialState(){const{element:e,unresolvedKeyframes:n,name:r}=this;if(!e||!e.current)return;r==="height"&&(this.suspendedScrollY=window.pageYOffset),this.measuredOrigin=Ns[r](e.measureViewportBox(),window.getComputedStyle(e.current)),n[0]=this.measuredOrigin;const s=n[n.length-1];s!==void 0&&e.getValue(r,s).jump(s,!1)}measureEndState(){var h;const{element:e,name:n,unresolvedKeyframes:r}=this;if(!e||!e.current)return;const s=e.getValue(n);s&&s.jump(this.measuredOrigin,!1);const o=r.length-1,c=r[o];r[o]=Ns[n](e.measureViewportBox(),window.getComputedStyle(e.current)),c!==null&&this.finalKeyframe===void 0&&(this.finalKeyframe=c),(h=this.removedTransforms)!=null&&h.length&&this.removedTransforms.forEach(([g,p])=>{e.getValue(g).set(p)}),this.resolveNoneKeyframes()}}function wA(t,e,n){if(t==null)return[];if(t instanceof EventTarget)return[t];if(typeof t=="string"){const s=document.querySelectorAll(t);return s?Array.from(s):[]}return Array.from(t).filter(r=>r!=null)}const xA=(t,e)=>e&&typeof t=="number"?e.transform(t):t;function pp(t){return IS(t)&&"offsetHeight"in t}const{schedule:pm,cancel:Z9}=VS(queueMicrotask,!1),Wr={x:!1,y:!1};function vA(){return Wr.x||Wr.y}function d5(t){return t==="x"||t==="y"?Wr[t]?null:(Wr[t]=!0,()=>{Wr[t]=!1}):Wr.x||Wr.y?null:(Wr.x=Wr.y=!0,()=>{Wr.x=Wr.y=!1})}function EA(t,e){const n=wA(t),r=new AbortController,s={passive:!0,...e,signal:r.signal};return[n,s,()=>r.abort()]}function h5(t){return!(t.pointerType==="touch"||vA())}function f5(t,e,n={}){const[r,s,o]=EA(t,n);return r.forEach(c=>{let h=!1,g=!1,p;const y=()=>{c.removeEventListener("pointerleave",I)},x=R=>{p&&(p(R),p=void 0),y()},E=R=>{h=!1,window.removeEventListener("pointerup",E),window.removeEventListener("pointercancel",E),g&&(g=!1,x(R))},b=()=>{h=!0,window.addEventListener("pointerup",E,s),window.addEventListener("pointercancel",E,s)},I=R=>{if(R.pointerType!=="touch"){if(h){g=!0;return}x(R)}},S=R=>{if(!h5(R))return;g=!1;const A=e(c,R);typeof A=="function"&&(p=A,c.addEventListener("pointerleave",I,s))};c.addEventListener("pointerenter",S,s),c.addEventListener("pointerdown",b,s)}),o}const bA=(t,e)=>e?t===e?!0:bA(t,e.parentElement):!1,gm=t=>t.pointerType==="mouse"?typeof t.button!="number"||t.button<=0:t.isPrimary!==!1,p5=new Set(["BUTTON","INPUT","SELECT","TEXTAREA","A"]);function g5(t){return p5.has(t.tagName)||t.isContentEditable===!0}const m5=new Set(["INPUT","SELECT","TEXTAREA"]);function y5(t){return m5.has(t.tagName)||t.isContentEditable===!0}const Ad=new WeakSet;function Lx(t){return e=>{e.key==="Enter"&&t(e)}}function b0(t,e){t.dispatchEvent(new PointerEvent("pointer"+e,{isPrimary:!0,bubbles:!0}))}const w5=(t,e)=>{const n=t.currentTarget;if(!n)return;const r=Lx(()=>{if(Ad.has(n))return;b0(n,"down");const s=Lx(()=>{b0(n,"up")}),o=()=>b0(n,"cancel");n.addEventListener("keyup",s,e),n.addEventListener("blur",o,e)});n.addEventListener("keydown",r,e),n.addEventListener("blur",()=>n.removeEventListener("keydown",r),e)};function Bx(t){return gm(t)&&!vA()}const Fx=new WeakSet;function x5(t,e,n={}){const[r,s,o]=EA(t,n),c=h=>{const g=h.currentTarget;if(!Bx(h)||Fx.has(h))return;Ad.add(g),n.stopPropagation&&Fx.add(h);const p=e(g,h),y=(b,I)=>{window.removeEventListener("pointerup",x),window.removeEventListener("pointercancel",E),Ad.has(g)&&Ad.delete(g),Bx(b)&&typeof p=="function"&&p(b,{success:I})},x=b=>{y(b,g===window||g===document||n.useGlobalTarget||bA(g,b.target))},E=b=>{y(b,!1)};window.addEventListener("pointerup",x,s),window.addEventListener("pointercancel",E,s)};return r.forEach(h=>{(n.useGlobalTarget?window:h).addEventListener("pointerdown",c,s),pp(h)&&(h.addEventListener("focus",p=>w5(p,s)),!g5(h)&&!h.hasAttribute("tabindex")&&(h.tabIndex=0))}),o}function mm(t){return IS(t)&&"ownerSVGElement"in t}const _d=new WeakMap;let ps;const CA=(t,e,n)=>(r,s)=>s&&s[0]?s[0][t+"Size"]:mm(r)&&"getBBox"in r?r.getBBox()[e]:r[n],v5=CA("inline","width","offsetWidth"),E5=CA("block","height","offsetHeight");function b5({target:t,borderBoxSize:e}){var n;(n=_d.get(t))==null||n.forEach(r=>{r(t,{get width(){return v5(t,e)},get height(){return E5(t,e)}})})}function C5(t){t.forEach(b5)}function S5(){typeof ResizeObserver>"u"||(ps=new ResizeObserver(C5))}function A5(t,e){ps||S5();const n=wA(t);return n.forEach(r=>{let s=_d.get(r);s||(s=new Set,_d.set(r,s)),s.add(e),ps==null||ps.observe(r)}),()=>{n.forEach(r=>{const s=_d.get(r);s==null||s.delete(e),s!=null&&s.size||ps==null||ps.unobserve(r)})}}const Td=new Set;let Oa;function _5(){Oa=()=>{const t={get width(){return window.innerWidth},get height(){return window.innerHeight}};Td.forEach(e=>e(t))},window.addEventListener("resize",Oa)}function T5(t){return Td.add(t),Oa||_5(),()=>{Td.delete(t),!Td.size&&typeof Oa=="function"&&(window.removeEventListener("resize",Oa),Oa=void 0)}}function jx(t,e){return typeof t=="function"?T5(t):A5(t,e)}function I5(t){return mm(t)&&t.tagName==="svg"}function R5(...t){const e=!Array.isArray(t[0]),n=e?0:-1,r=t[0+n],s=t[1+n],o=t[2+n],c=t[3+n],h=JS(s,o,c);return e?h(r):h}const N5=[...gA,Xt,qs],O5=t=>N5.find(pA(t)),Ux=()=>({translate:0,scale:1,origin:0,originPoint:0}),ka=()=>({x:Ux(),y:Ux()}),Vx=()=>({min:0,max:0}),tn=()=>({x:Vx(),y:Vx()}),gp={current:null},SA={current:!1},k5=typeof window<"u";function M5(){if(SA.current=!0,!!k5)if(window.matchMedia){const t=window.matchMedia("(prefers-reduced-motion)"),e=()=>gp.current=t.matches;t.addEventListener("change",e),e()}else gp.current=!1}const D5=new WeakMap;function lf(t){return t!==null&&typeof t=="object"&&typeof t.start=="function"}function Qc(t){return typeof t=="string"||Array.isArray(t)}const ym=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],wm=["initial",...ym];function cf(t){return lf(t.animate)||wm.some(e=>Qc(t[e]))}function AA(t){return!!(cf(t)||t.variants)}function P5(t,e,n){for(const r in e){const s=e[r],o=n[r];if(Rn(s))t.addValue(r,s);else if(Rn(o))t.addValue(r,Wo(s,{owner:t}));else if(o!==s)if(t.hasValue(r)){const c=t.getValue(r);c.liveStyle===!0?c.jump(s):c.hasAnimated||c.set(s)}else{const c=t.getStaticValue(r);t.addValue(r,Wo(c!==void 0?c:s,{owner:t}))}}for(const r in n)e[r]===void 0&&t.removeValue(r);return e}const zx=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"];let yh={};function _A(t){yh=t}function L5(){return yh}class B5{scrapeMotionValuesFromProps(e,n,r){return{}}constructor({parent:e,props:n,presenceContext:r,reducedMotionConfig:s,skipAnimations:o,blockInitialAnimation:c,visualState:h},g={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.shouldSkipAnimations=!1,this.values=new Map,this.KeyframeResolver=lm,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.hasBeenMounted=!1,this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.renderScheduledAt=0,this.scheduleRender=()=>{const b=Ln.now();this.renderScheduledAt<b&&(this.renderScheduledAt=b,ft.render(this.render,!1,!0))};const{latestValues:p,renderState:y}=h;this.latestValues=p,this.baseTarget={...p},this.initialValues=n.initial?{...p}:{},this.renderState=y,this.parent=e,this.props=n,this.presenceContext=r,this.depth=e?e.depth+1:0,this.reducedMotionConfig=s,this.skipAnimationsConfig=o,this.options=g,this.blockInitialAnimation=!!c,this.isControllingVariants=cf(n),this.isVariantNode=AA(n),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(e&&e.current);const{willChange:x,...E}=this.scrapeMotionValuesFromProps(n,{},this);for(const b in E){const I=E[b];p[b]!==void 0&&Rn(I)&&I.set(p[b])}}mount(e){var n,r;if(this.hasBeenMounted)for(const s in this.initialValues)(n=this.values.get(s))==null||n.jump(this.initialValues[s]),this.latestValues[s]=this.initialValues[s];this.current=e,D5.set(e,this),this.projection&&!this.projection.instance&&this.projection.mount(e),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((s,o)=>this.bindToMotionValue(o,s)),this.reducedMotionConfig==="never"?this.shouldReduceMotion=!1:this.reducedMotionConfig==="always"?this.shouldReduceMotion=!0:(SA.current||M5(),this.shouldReduceMotion=gp.current),this.shouldSkipAnimations=this.skipAnimationsConfig??!1,(r=this.parent)==null||r.addChild(this),this.update(this.props,this.presenceContext),this.hasBeenMounted=!0}unmount(){var e;this.projection&&this.projection.unmount(),Qi(this.notifyUpdate),Qi(this.render),this.valueSubscriptions.forEach(n=>n()),this.valueSubscriptions.clear(),this.removeFromVariantTree&&this.removeFromVariantTree(),(e=this.parent)==null||e.removeChild(this);for(const n in this.events)this.events[n].clear();for(const n in this.features){const r=this.features[n];r&&(r.unmount(),r.isMounted=!1)}this.current=null}addChild(e){this.children.add(e),this.enteringChildren??(this.enteringChildren=new Set),this.enteringChildren.add(e)}removeChild(e){this.children.delete(e),this.enteringChildren&&this.enteringChildren.delete(e)}bindToMotionValue(e,n){this.valueSubscriptions.has(e)&&this.valueSubscriptions.get(e)();const r=Al.has(e);r&&this.onBindTransform&&this.onBindTransform();const s=n.on("change",c=>{this.latestValues[e]=c,this.props.onUpdate&&ft.preRender(this.notifyUpdate),r&&this.projection&&(this.projection.isTransformDirty=!0),this.scheduleRender()});let o;typeof window<"u"&&window.MotionCheckAppearSync&&(o=window.MotionCheckAppearSync(this,e,n)),this.valueSubscriptions.set(e,()=>{s(),o&&o(),n.owner&&n.stop()})}sortNodePosition(e){return!this.current||!this.sortInstanceNodePosition||this.type!==e.type?0:this.sortInstanceNodePosition(this.current,e.current)}updateFeatures(){let e="animation";for(e in yh){const n=yh[e];if(!n)continue;const{isEnabled:r,Feature:s}=n;if(!this.features[e]&&s&&r(this.props)&&(this.features[e]=new s(this)),this.features[e]){const o=this.features[e];o.isMounted?o.update():(o.mount(),o.isMounted=!0)}}}triggerBuild(){this.build(this.renderState,this.latestValues,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):tn()}getStaticValue(e){return this.latestValues[e]}setStaticValue(e,n){this.latestValues[e]=n}update(e,n){(e.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=e,this.prevPresenceContext=this.presenceContext,this.presenceContext=n;for(let r=0;r<zx.length;r++){const s=zx[r];this.propEventSubscriptions[s]&&(this.propEventSubscriptions[s](),delete this.propEventSubscriptions[s]);const o="on"+s,c=e[o];c&&(this.propEventSubscriptions[s]=this.on(s,c))}this.prevMotionValues=P5(this,this.scrapeMotionValuesFromProps(e,this.prevProps||{},this),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue()}getProps(){return this.props}getVariant(e){return this.props.variants?this.props.variants[e]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}addVariantChild(e){const n=this.getClosestVariantNode();if(n)return n.variantChildren&&n.variantChildren.add(e),()=>n.variantChildren.delete(e)}addValue(e,n){const r=this.values.get(e);n!==r&&(r&&this.removeValue(e),this.bindToMotionValue(e,n),this.values.set(e,n),this.latestValues[e]=n.get())}removeValue(e){this.values.delete(e);const n=this.valueSubscriptions.get(e);n&&(n(),this.valueSubscriptions.delete(e)),delete this.latestValues[e],this.removeValueFromRenderState(e,this.renderState)}hasValue(e){return this.values.has(e)}getValue(e,n){if(this.props.values&&this.props.values[e])return this.props.values[e];let r=this.values.get(e);return r===void 0&&n!==void 0&&(r=Wo(n===null?void 0:n,{owner:this}),this.addValue(e,r)),r}readValue(e,n){let r=this.latestValues[e]!==void 0||!this.current?this.latestValues[e]:this.getBaseTargetFromProps(this.props,e)??this.readValueFromInstance(this.current,e,this.options);return r!=null&&(typeof r=="string"&&(TS(r)||RS(r))?r=parseFloat(r):!O5(r)&&qs.test(n)&&(r=yA(e,n)),this.setBaseTarget(e,Rn(r)?r.get():r)),Rn(r)?r.get():r}setBaseTarget(e,n){this.baseTarget[e]=n}getBaseTarget(e){var o;const{initial:n}=this.props;let r;if(typeof n=="string"||typeof n=="object"){const c=dm(this.props,n,(o=this.presenceContext)==null?void 0:o.custom);c&&(r=c[e])}if(n&&r!==void 0)return r;const s=this.getBaseTargetFromProps(this.props,e);return s!==void 0&&!Rn(s)?s:this.initialValues[e]!==void 0&&r===void 0?void 0:this.baseTarget[e]}on(e,n){return this.events[e]||(this.events[e]=new Zg),this.events[e].add(n)}notify(e,...n){this.events[e]&&this.events[e].notify(...n)}scheduleRenderMicrotask(){pm.render(this.render)}}class TA extends B5{constructor(){super(...arguments),this.KeyframeResolver=u5}sortInstanceNodePosition(e,n){return e.compareDocumentPosition(n)&2?1:-1}getBaseTargetFromProps(e,n){const r=e.style;return r?r[n]:void 0}removeValueFromRenderState(e,{vars:n,style:r}){delete n[e],delete r[e]}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:e}=this.props;Rn(e)&&(this.childSubscription=e.on("change",n=>{this.current&&(this.current.textContent=`${n}`)}))}}class no{constructor(e){this.isMounted=!1,this.node=e}update(){}}function IA({top:t,left:e,right:n,bottom:r}){return{x:{min:e,max:n},y:{min:t,max:r}}}function F5({x:t,y:e}){return{top:e.min,right:t.max,bottom:e.max,left:t.min}}function j5(t,e){if(!e)return t;const n=e({x:t.left,y:t.top}),r=e({x:t.right,y:t.bottom});return{top:n.y,left:n.x,bottom:r.y,right:r.x}}function C0(t){return t===void 0||t===1}function mp({scale:t,scaleX:e,scaleY:n}){return!C0(t)||!C0(e)||!C0(n)}function wo(t){return mp(t)||RA(t)||t.z||t.rotate||t.rotateX||t.rotateY||t.skewX||t.skewY}function RA(t){return Hx(t.x)||Hx(t.y)}function Hx(t){return t&&t!=="0%"}function wh(t,e,n){const r=t-n,s=e*r;return n+s}function Wx(t,e,n,r,s){return s!==void 0&&(t=wh(t,s,r)),wh(t,n,r)+e}function yp(t,e=0,n=1,r,s){t.min=Wx(t.min,e,n,r,s),t.max=Wx(t.max,e,n,r,s)}function NA(t,{x:e,y:n}){yp(t.x,e.translate,e.scale,e.originPoint),yp(t.y,n.translate,n.scale,n.originPoint)}const $x=.999999999999,Gx=1.0000000000001;function U5(t,e,n,r=!1){const s=n.length;if(!s)return;e.x=e.y=1;let o,c;for(let h=0;h<s;h++){o=n[h],c=o.projectionDelta;const{visualElement:g}=o.options;g&&g.props.style&&g.props.style.display==="contents"||(r&&o.options.layoutScroll&&o.scroll&&o!==o.root&&Da(t,{x:-o.scroll.offset.x,y:-o.scroll.offset.y}),c&&(e.x*=c.x.scale,e.y*=c.y.scale,NA(t,c)),r&&wo(o.latestValues)&&Da(t,o.latestValues))}e.x<Gx&&e.x>$x&&(e.x=1),e.y<Gx&&e.y>$x&&(e.y=1)}function Ma(t,e){t.min=t.min+e,t.max=t.max+e}function Yx(t,e,n,r,s=.5){const o=Mt(t.min,t.max,s);yp(t,e,n,o,r)}function Da(t,e){Yx(t.x,e.x,e.scaleX,e.scale,e.originX),Yx(t.y,e.y,e.scaleY,e.scale,e.originY)}function OA(t,e){return IA(j5(t.getBoundingClientRect(),e))}function V5(t,e,n){const r=OA(t,n),{scroll:s}=e;return s&&(Ma(r.x,s.offset.x),Ma(r.y,s.offset.y)),r}const z5={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},H5=Sl.length;function W5(t,e,n){let r="",s=!0;for(let o=0;o<H5;o++){const c=Sl[o],h=t[c];if(h===void 0)continue;let g=!0;if(typeof h=="number")g=h===(c.startsWith("scale")?1:0);else{const p=parseFloat(h);g=c.startsWith("scale")?p===1:p===0}if(!g||n){const p=xA(h,fm[c]);if(!g){s=!1;const y=z5[c]||c;r+=`${y}(${p}) `}n&&(e[c]=p)}}return r=r.trim(),n?r=n(e,s?"":r):s&&(r="none"),r}function xm(t,e,n){const{style:r,vars:s,transformOrigin:o}=t;let c=!1,h=!1;for(const g in e){const p=e[g];if(Al.has(g)){c=!0;continue}else if(HS(g)){s[g]=p;continue}else{const y=xA(p,fm[g]);g.startsWith("origin")?(h=!0,o[g]=y):r[g]=y}}if(e.transform||(c||n?r.transform=W5(e,t.transform,n):r.transform&&(r.transform="none")),h){const{originX:g="50%",originY:p="50%",originZ:y=0}=o;r.transformOrigin=`${g} ${p} ${y}`}}function kA(t,{style:e,vars:n},r,s){const o=t.style;let c;for(c in e)o[c]=e[c];s==null||s.applyProjectionStyles(o,r);for(c in n)o.setProperty(c,n[c])}function Xx(t,e){return e.max===e.min?0:t/(e.max-e.min)*100}const Xl={correct:(t,e)=>{if(!e.target)return t;if(typeof t=="string")if(be.test(t))t=parseFloat(t);else return t;const n=Xx(t,e.target.x),r=Xx(t,e.target.y);return`${n}% ${r}%`}},$5={correct:(t,{treeScale:e,projectionDelta:n})=>{const r=t,s=qs.parse(t);if(s.length>5)return r;const o=qs.createTransformer(t),c=typeof s[0]!="number"?1:0,h=n.x.scale*e.x,g=n.y.scale*e.y;s[0+c]/=h,s[1+c]/=g;const p=Mt(h,g,.5);return typeof s[2+c]=="number"&&(s[2+c]/=p),typeof s[3+c]=="number"&&(s[3+c]/=p),o(s)}},wp={borderRadius:{...Xl,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:Xl,borderTopRightRadius:Xl,borderBottomLeftRadius:Xl,borderBottomRightRadius:Xl,boxShadow:$5};function MA(t,{layout:e,layoutId:n}){return Al.has(t)||t.startsWith("origin")||(e||n!==void 0)&&(!!wp[t]||t==="opacity")}function vm(t,e,n){var c;const r=t.style,s=e==null?void 0:e.style,o={};if(!r)return o;for(const h in r)(Rn(r[h])||s&&Rn(s[h])||MA(h,t)||((c=n==null?void 0:n.getValue(h))==null?void 0:c.liveStyle)!==void 0)&&(o[h]=r[h]);return o}function G5(t){return window.getComputedStyle(t)}class Y5 extends TA{constructor(){super(...arguments),this.type="html",this.renderInstance=kA}readValueFromInstance(e,n){var r;if(Al.has(n))return(r=this.projection)!=null&&r.isProjecting?ip(n):uP(e,n);{const s=G5(e),o=(HS(n)?s.getPropertyValue(n):s[n])||0;return typeof o=="string"?o.trim():o}}measureInstanceViewportBox(e,{transformPagePoint:n}){return OA(e,n)}build(e,n,r){xm(e,n,r.transformTemplate)}scrapeMotionValuesFromProps(e,n,r){return vm(e,n,r)}}const X5={offset:"stroke-dashoffset",array:"stroke-dasharray"},K5={offset:"strokeDashoffset",array:"strokeDasharray"};function q5(t,e,n=1,r=0,s=!0){t.pathLength=1;const o=s?X5:K5;t[o.offset]=`${-r}`,t[o.array]=`${e} ${n}`}const Z5=["offsetDistance","offsetPath","offsetRotate","offsetAnchor"];function DA(t,{attrX:e,attrY:n,attrScale:r,pathLength:s,pathSpacing:o=1,pathOffset:c=0,...h},g,p,y){if(xm(t,h,p),g){t.style.viewBox&&(t.attrs.viewBox=t.style.viewBox);return}t.attrs=t.style,t.style={};const{attrs:x,style:E}=t;x.transform&&(E.transform=x.transform,delete x.transform),(E.transform||x.transformOrigin)&&(E.transformOrigin=x.transformOrigin??"50% 50%",delete x.transformOrigin),E.transform&&(E.transformBox=(y==null?void 0:y.transformBox)??"fill-box",delete x.transformBox);for(const b of Z5)x[b]!==void 0&&(E[b]=x[b],delete x[b]);e!==void 0&&(x.x=e),n!==void 0&&(x.y=n),r!==void 0&&(x.scale=r),s!==void 0&&q5(x,s,o,c,!1)}const PA=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]),LA=t=>typeof t=="string"&&t.toLowerCase()==="svg";function Q5(t,e,n,r){kA(t,e,void 0,r);for(const s in e.attrs)t.setAttribute(PA.has(s)?s:hm(s),e.attrs[s])}function BA(t,e,n){const r=vm(t,e,n);for(const s in t)if(Rn(t[s])||Rn(e[s])){const o=Sl.indexOf(s)!==-1?"attr"+s.charAt(0).toUpperCase()+s.substring(1):s;r[o]=t[s]}return r}class J5 extends TA{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1,this.measureInstanceViewportBox=tn}getBaseTargetFromProps(e,n){return e[n]}readValueFromInstance(e,n){if(Al.has(n)){const r=mA(n);return r&&r.default||0}return n=PA.has(n)?n:hm(n),e.getAttribute(n)}scrapeMotionValuesFromProps(e,n,r){return BA(e,n,r)}build(e,n,r){DA(e,n,this.isSVGTag,r.transformTemplate,r.style)}renderInstance(e,n,r,s){Q5(e,n,r,s)}mount(e){this.isSVGTag=LA(e.tagName),super.mount(e)}}const eL=wm.length;function FA(t){if(!t)return;if(!t.isControllingVariants){const n=t.parent?FA(t.parent)||{}:{};return t.props.initial!==void 0&&(n.initial=t.props.initial),n}const e={};for(let n=0;n<eL;n++){const r=wm[n],s=t.props[r];(Qc(s)||s===!1)&&(e[r]=s)}return e}function jA(t,e){if(!Array.isArray(e))return!1;const n=e.length;if(n!==t.length)return!1;for(let r=0;r<n;r++)if(e[r]!==t[r])return!1;return!0}const tL=[...ym].reverse(),nL=ym.length;function rL(t){return e=>Promise.all(e.map(({animation:n,options:r})=>e5(t,n,r)))}function iL(t){let e=rL(t),n=Kx(),r=!0;const s=g=>(p,y)=>{var E;const x=Wa(t,y,g==="exit"?(E=t.presenceContext)==null?void 0:E.custom:void 0);if(x){const{transition:b,transitionEnd:I,...S}=x;p={...p,...S,...I}}return p};function o(g){e=g(t)}function c(g){const{props:p}=t,y=FA(t.parent)||{},x=[],E=new Set;let b={},I=1/0;for(let R=0;R<nL;R++){const A=tL[R],_=n[A],T=p[A]!==void 0?p[A]:y[A],D=Qc(T),F=A===g?_.isActive:null;F===!1&&(I=R);let j=T===y[A]&&T!==p[A]&&D;if(j&&r&&t.manuallyAnimateOnMount&&(j=!1),_.protectedKeys={...b},!_.isActive&&F===null||!T&&!_.prevProp||lf(T)||typeof T=="boolean")continue;const B=sL(_.prevProp,T);let W=B||A===g&&_.isActive&&!j&&D||R>I&&D,H=!1;const te=Array.isArray(T)?T:[T];let he=te.reduce(s(A),{});F===!1&&(he={});const{prevResolvedValues:Q={}}=_,fe={...Q,...he},ie=ne=>{W=!0,E.has(ne)&&(H=!0,E.delete(ne)),_.needsAnimating[ne]=!0;const q=t.getValue(ne);q&&(q.liveStyle=!1)};for(const ne in fe){const q=he[ne],Z=Q[ne];if(b.hasOwnProperty(ne))continue;let ue=!1;up(q)&&up(Z)?ue=!jA(q,Z):ue=q!==Z,ue?q!=null?ie(ne):E.add(ne):q!==void 0&&E.has(ne)?ie(ne):_.protectedKeys[ne]=!0}_.prevProp=T,_.prevResolvedValues=he,_.isActive&&(b={...b,...he}),r&&t.blockInitialAnimation&&(W=!1);const $=j&&B;W&&(!$||H)&&x.push(...te.map(ne=>{const q={type:A};if(typeof ne=="string"&&r&&!$&&t.manuallyAnimateOnMount&&t.parent){const{parent:Z}=t,ue=Wa(Z,ne);if(Z.enteringChildren&&ue){const{delayChildren:De}=ue.transition||{};q.delay=aA(Z.enteringChildren,t,De)}}return{animation:ne,options:q}}))}if(E.size){const R={};if(typeof p.initial!="boolean"){const A=Wa(t,Array.isArray(p.initial)?p.initial[0]:p.initial);A&&A.transition&&(R.transition=A.transition)}E.forEach(A=>{const _=t.getBaseTarget(A),T=t.getValue(A);T&&(T.liveStyle=!0),R[A]=_??null}),x.push({animation:R})}let S=!!x.length;return r&&(p.initial===!1||p.initial===p.animate)&&!t.manuallyAnimateOnMount&&(S=!1),r=!1,S?e(x):Promise.resolve()}function h(g,p){var x;if(n[g].isActive===p)return Promise.resolve();(x=t.variantChildren)==null||x.forEach(E=>{var b;return(b=E.animationState)==null?void 0:b.setActive(g,p)}),n[g].isActive=p;const y=c(g);for(const E in n)n[E].protectedKeys={};return y}return{animateChanges:c,setActive:h,setAnimateFunction:o,getState:()=>n,reset:()=>{n=Kx()}}}function sL(t,e){return typeof e=="string"?e!==t:Array.isArray(e)?!jA(e,t):!1}function po(t=!1){return{isActive:t,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function Kx(){return{animate:po(!0),whileInView:po(),whileHover:po(),whileTap:po(),whileDrag:po(),whileFocus:po(),exit:po()}}function qx(t,e){t.min=e.min,t.max=e.max}function zr(t,e){qx(t.x,e.x),qx(t.y,e.y)}function Zx(t,e){t.translate=e.translate,t.scale=e.scale,t.originPoint=e.originPoint,t.origin=e.origin}const UA=1e-4,oL=1-UA,aL=1+UA,VA=.01,lL=0-VA,cL=0+VA;function Bn(t){return t.max-t.min}function uL(t,e,n){return Math.abs(t-e)<=n}function Qx(t,e,n,r=.5){t.origin=r,t.originPoint=Mt(e.min,e.max,t.origin),t.scale=Bn(n)/Bn(e),t.translate=Mt(n.min,n.max,t.origin)-t.originPoint,(t.scale>=oL&&t.scale<=aL||isNaN(t.scale))&&(t.scale=1),(t.translate>=lL&&t.translate<=cL||isNaN(t.translate))&&(t.translate=0)}function yc(t,e,n,r){Qx(t.x,e.x,n.x,r?r.originX:void 0),Qx(t.y,e.y,n.y,r?r.originY:void 0)}function Jx(t,e,n){t.min=n.min+e.min,t.max=t.min+Bn(e)}function dL(t,e,n){Jx(t.x,e.x,n.x),Jx(t.y,e.y,n.y)}function ev(t,e,n){t.min=e.min-n.min,t.max=t.min+Bn(e)}function xh(t,e,n){ev(t.x,e.x,n.x),ev(t.y,e.y,n.y)}function tv(t,e,n,r,s){return t-=e,t=wh(t,1/n,r),s!==void 0&&(t=wh(t,1/s,r)),t}function hL(t,e=0,n=1,r=.5,s,o=t,c=t){if(Ii.test(e)&&(e=parseFloat(e),e=Mt(c.min,c.max,e/100)-c.min),typeof e!="number")return;let h=Mt(o.min,o.max,r);t===o&&(h-=e),t.min=tv(t.min,e,n,h,s),t.max=tv(t.max,e,n,h,s)}function nv(t,e,[n,r,s],o,c){hL(t,e[n],e[r],e[s],e.scale,o,c)}const fL=["x","scaleX","originX"],pL=["y","scaleY","originY"];function rv(t,e,n,r){nv(t.x,e,fL,n?n.x:void 0,r?r.x:void 0),nv(t.y,e,pL,n?n.y:void 0,r?r.y:void 0)}function iv(t){return t.translate===0&&t.scale===1}function zA(t){return iv(t.x)&&iv(t.y)}function sv(t,e){return t.min===e.min&&t.max===e.max}function gL(t,e){return sv(t.x,e.x)&&sv(t.y,e.y)}function ov(t,e){return Math.round(t.min)===Math.round(e.min)&&Math.round(t.max)===Math.round(e.max)}function HA(t,e){return ov(t.x,e.x)&&ov(t.y,e.y)}function av(t){return Bn(t.x)/Bn(t.y)}function lv(t,e){return t.translate===e.translate&&t.scale===e.scale&&t.originPoint===e.originPoint}function xi(t){return[t("x"),t("y")]}function mL(t,e,n){let r="";const s=t.x.translate/e.x,o=t.y.translate/e.y,c=(n==null?void 0:n.z)||0;if((s||o||c)&&(r=`translate3d(${s}px, ${o}px, ${c}px) `),(e.x!==1||e.y!==1)&&(r+=`scale(${1/e.x}, ${1/e.y}) `),n){const{transformPerspective:p,rotate:y,rotateX:x,rotateY:E,skewX:b,skewY:I}=n;p&&(r=`perspective(${p}px) ${r}`),y&&(r+=`rotate(${y}deg) `),x&&(r+=`rotateX(${x}deg) `),E&&(r+=`rotateY(${E}deg) `),b&&(r+=`skewX(${b}deg) `),I&&(r+=`skewY(${I}deg) `)}const h=t.x.scale*e.x,g=t.y.scale*e.y;return(h!==1||g!==1)&&(r+=`scale(${h}, ${g})`),r||"none"}const WA=["TopLeft","TopRight","BottomLeft","BottomRight"],yL=WA.length,cv=t=>typeof t=="string"?parseFloat(t):t,uv=t=>typeof t=="number"||be.test(t);function wL(t,e,n,r,s,o){s?(t.opacity=Mt(0,n.opacity??1,xL(r)),t.opacityExit=Mt(e.opacity??1,0,vL(r))):o&&(t.opacity=Mt(e.opacity??1,n.opacity??1,r));for(let c=0;c<yL;c++){const h=`border${WA[c]}Radius`;let g=dv(e,h),p=dv(n,h);if(g===void 0&&p===void 0)continue;g||(g=0),p||(p=0),g===0||p===0||uv(g)===uv(p)?(t[h]=Math.max(Mt(cv(g),cv(p),r),0),(Ii.test(p)||Ii.test(g))&&(t[h]+="%")):t[h]=p}(e.rotate||n.rotate)&&(t.rotate=Mt(e.rotate||0,n.rotate||0,r))}function dv(t,e){return t[e]!==void 0?t[e]:t.borderRadius}const xL=$A(0,.5,BS),vL=$A(.5,.95,Rr);function $A(t,e,n){return r=>r<t?0:r>e?1:n(Kc(t,e,r))}function EL(t,e,n){const r=Rn(t)?t:Wo(t);return r.start(um("",r,e,n)),r.animation}function Jc(t,e,n,r={passive:!0}){return t.addEventListener(e,n,r),()=>t.removeEventListener(e,n)}const bL=(t,e)=>t.depth-e.depth;class CL{constructor(){this.children=[],this.isDirty=!1}add(e){Xg(this.children,e),this.isDirty=!0}remove(e){Kg(this.children,e),this.isDirty=!0}forEach(e){this.isDirty&&this.children.sort(bL),this.isDirty=!1,this.children.forEach(e)}}function SL(t,e){const n=Ln.now(),r=({timestamp:s})=>{const o=s-n;o>=e&&(Qi(r),t(o-e))};return ft.setup(r,!0),()=>Qi(r)}function Id(t){return Rn(t)?t.get():t}class AL{constructor(){this.members=[]}add(e){Xg(this.members,e),e.scheduleRender()}remove(e){if(Kg(this.members,e),e===this.prevLead&&(this.prevLead=void 0),e===this.lead){const n=this.members[this.members.length-1];n&&this.promote(n)}}relegate(e){const n=this.members.findIndex(s=>e===s);if(n===0)return!1;let r;for(let s=n;s>=0;s--){const o=this.members[s];if(o.isPresent!==!1){r=o;break}}return r?(this.promote(r),!0):!1}promote(e,n){const r=this.lead;if(e!==r&&(this.prevLead=r,this.lead=e,e.show(),r)){r.instance&&r.scheduleRender(),e.scheduleRender();const s=r.options.layoutDependency,o=e.options.layoutDependency;s!==void 0&&o!==void 0&&s===o||(e.resumeFrom=r,n&&(e.resumeFrom.preserveOpacity=!0),r.snapshot&&(e.snapshot=r.snapshot,e.snapshot.latestValues=r.animationValues||r.latestValues),e.root&&e.root.isUpdating&&(e.isLayoutDirty=!0));const{crossfade:h}=e.options;h===!1&&r.hide()}}exitAnimationComplete(){this.members.forEach(e=>{const{options:n,resumingFrom:r}=e;n.onExitComplete&&n.onExitComplete(),r&&r.options.onExitComplete&&r.options.onExitComplete()})}scheduleRender(){this.members.forEach(e=>{e.instance&&e.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}const Rd={hasAnimatedSinceResize:!0,hasEverUpdated:!1},S0=["","X","Y","Z"],_L=1e3;let TL=0;function A0(t,e,n,r){const{latestValues:s}=e;s[t]&&(n[t]=s[t],e.setStaticValue(t,0),r&&(r[t]=0))}function GA(t){if(t.hasCheckedOptimisedAppear=!0,t.root===t)return;const{visualElement:e}=t.options;if(!e)return;const n=hA(e);if(window.MotionHasOptimisedAnimation(n,"transform")){const{layout:s,layoutId:o}=t.options;window.MotionCancelOptimisedAnimation(n,"transform",ft,!(s||o))}const{parent:r}=t;r&&!r.hasCheckedOptimisedAppear&&GA(r)}function YA({attachResizeListener:t,defaultParent:e,measureScroll:n,checkIsScrollRoot:r,resetTransform:s}){return class{constructor(c={},h=e==null?void 0:e()){this.id=TL++,this.animationId=0,this.animationCommitId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.hasCheckedOptimisedAppear=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.layoutVersion=0,this.updateScheduled=!1,this.scheduleUpdate=()=>this.update(),this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,this.nodes.forEach(NL),this.nodes.forEach(DL),this.nodes.forEach(PL),this.nodes.forEach(OL)},this.resolvedRelativeTargetAt=0,this.linkedParentVersion=0,this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=c,this.root=h?h.root||h:this,this.path=h?[...h.path,h]:[],this.parent=h,this.depth=h?h.depth+1:0;for(let g=0;g<this.path.length;g++)this.path[g].shouldResetTransform=!0;this.root===this&&(this.nodes=new CL)}addEventListener(c,h){return this.eventHandlers.has(c)||this.eventHandlers.set(c,new Zg),this.eventHandlers.get(c).add(h)}notifyListeners(c,...h){const g=this.eventHandlers.get(c);g&&g.notify(...h)}hasListeners(c){return this.eventHandlers.has(c)}mount(c){if(this.instance)return;this.isSVG=mm(c)&&!I5(c),this.instance=c;const{layoutId:h,layout:g,visualElement:p}=this.options;if(p&&!p.current&&p.mount(c),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),this.root.hasTreeAnimated&&(g||h)&&(this.isLayoutDirty=!0),t){let y,x=0;const E=()=>this.root.updateBlockedByResize=!1;ft.read(()=>{x=window.innerWidth}),t(c,()=>{const b=window.innerWidth;b!==x&&(x=b,this.root.updateBlockedByResize=!0,y&&y(),y=SL(E,250),Rd.hasAnimatedSinceResize&&(Rd.hasAnimatedSinceResize=!1,this.nodes.forEach(pv)))})}h&&this.root.registerSharedNode(h,this),this.options.animate!==!1&&p&&(h||g)&&this.addEventListener("didUpdate",({delta:y,hasLayoutChanged:x,hasRelativeLayoutChanged:E,layout:b})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const I=this.options.transition||p.getDefaultTransition()||UL,{onLayoutAnimationStart:S,onLayoutAnimationComplete:R}=p.getProps(),A=!this.targetLayout||!HA(this.targetLayout,b),_=!x&&E;if(this.options.layoutRoot||this.resumeFrom||_||x&&(A||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0);const T={...cm(I,"layout"),onPlay:S,onComplete:R};(p.shouldReduceMotion||this.options.layoutRoot)&&(T.delay=0,T.type=!1),this.startAnimation(T),this.setAnimationOrigin(y,_)}else x||pv(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=b})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const c=this.getStack();c&&c.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,this.eventHandlers.clear(),Qi(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(LL),this.animationId++)}getTransformTemplate(){const{visualElement:c}=this.options;return c&&c.getProps().transformTemplate}willUpdate(c=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(window.MotionCancelOptimisedAnimation&&!this.hasCheckedOptimisedAppear&&GA(this),!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let y=0;y<this.path.length;y++){const x=this.path[y];x.shouldResetTransform=!0,x.updateScroll("snapshot"),x.options.layoutRoot&&x.willUpdate(!1)}const{layoutId:h,layout:g}=this.options;if(h===void 0&&!g)return;const p=this.getTransformTemplate();this.prevTransformTemplateValue=p?p(this.latestValues,""):void 0,this.updateSnapshot(),c&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(hv);return}if(this.animationId<=this.animationCommitId){this.nodes.forEach(fv);return}this.animationCommitId=this.animationId,this.isUpdating?(this.isUpdating=!1,this.nodes.forEach(ML),this.nodes.forEach(IL),this.nodes.forEach(RL)):this.nodes.forEach(fv),this.clearAllSnapshots();const h=Ln.now();xn.delta=Oi(0,1e3/60,h-xn.timestamp),xn.timestamp=h,xn.isProcessing=!0,m0.update.process(xn),m0.preRender.process(xn),m0.render.process(xn),xn.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,pm.read(this.scheduleUpdate))}clearAllSnapshots(){this.nodes.forEach(kL),this.sharedNodes.forEach(BL)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,ft.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){ft.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure(),this.snapshot&&!Bn(this.snapshot.measuredBox.x)&&!Bn(this.snapshot.measuredBox.y)&&(this.snapshot=void 0))}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let g=0;g<this.path.length;g++)this.path[g].updateScroll();const c=this.layout;this.layout=this.measure(!1),this.layoutVersion++,this.layoutCorrected=tn(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:h}=this.options;h&&h.notify("LayoutMeasure",this.layout.layoutBox,c?c.layoutBox:void 0)}updateScroll(c="measure"){let h=!!(this.options.layoutScroll&&this.instance);if(this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===c&&(h=!1),h&&this.instance){const g=r(this.instance);this.scroll={animationId:this.root.animationId,phase:c,isRoot:g,offset:n(this.instance),wasRoot:this.scroll?this.scroll.isRoot:g}}}resetTransform(){if(!s)return;const c=this.isLayoutDirty||this.shouldResetTransform||this.options.alwaysMeasureLayout,h=this.projectionDelta&&!zA(this.projectionDelta),g=this.getTransformTemplate(),p=g?g(this.latestValues,""):void 0,y=p!==this.prevTransformTemplateValue;c&&this.instance&&(h||wo(this.latestValues)||y)&&(s(this.instance,p),this.shouldResetTransform=!1,this.scheduleRender())}measure(c=!0){const h=this.measurePageBox();let g=this.removeElementScroll(h);return c&&(g=this.removeTransform(g)),VL(g),{animationId:this.root.animationId,measuredBox:h,layoutBox:g,latestValues:{},source:this.id}}measurePageBox(){var p;const{visualElement:c}=this.options;if(!c)return tn();const h=c.measureViewportBox();if(!(((p=this.scroll)==null?void 0:p.wasRoot)||this.path.some(zL))){const{scroll:y}=this.root;y&&(Ma(h.x,y.offset.x),Ma(h.y,y.offset.y))}return h}removeElementScroll(c){var g;const h=tn();if(zr(h,c),(g=this.scroll)!=null&&g.wasRoot)return h;for(let p=0;p<this.path.length;p++){const y=this.path[p],{scroll:x,options:E}=y;y!==this.root&&x&&E.layoutScroll&&(x.wasRoot&&zr(h,c),Ma(h.x,x.offset.x),Ma(h.y,x.offset.y))}return h}applyTransform(c,h=!1){const g=tn();zr(g,c);for(let p=0;p<this.path.length;p++){const y=this.path[p];!h&&y.options.layoutScroll&&y.scroll&&y!==y.root&&Da(g,{x:-y.scroll.offset.x,y:-y.scroll.offset.y}),wo(y.latestValues)&&Da(g,y.latestValues)}return wo(this.latestValues)&&Da(g,this.latestValues),g}removeTransform(c){const h=tn();zr(h,c);for(let g=0;g<this.path.length;g++){const p=this.path[g];if(!p.instance||!wo(p.latestValues))continue;mp(p.latestValues)&&p.updateSnapshot();const y=tn(),x=p.measurePageBox();zr(y,x),rv(h,p.latestValues,p.snapshot?p.snapshot.layoutBox:void 0,y)}return wo(this.latestValues)&&rv(h,this.latestValues),h}setTargetDelta(c){this.targetDelta=c,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(c){this.options={...this.options,...c,crossfade:c.crossfade!==void 0?c.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==xn.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(c=!1){var b;const h=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=h.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=h.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=h.isSharedProjectionDirty);const g=!!this.resumingFrom||this!==h;if(!(c||g&&this.isSharedProjectionDirty||this.isProjectionDirty||(b=this.parent)!=null&&b.isProjectionDirty||this.attemptToResolveRelativeTarget||this.root.updateBlockedByResize))return;const{layout:y,layoutId:x}=this.options;if(!this.layout||!(y||x))return;this.resolvedRelativeTargetAt=xn.timestamp;const E=this.getClosestProjectingParent();E&&this.linkedParentVersion!==E.layoutVersion&&!E.options.layoutRoot&&this.removeRelativeTarget(),!this.targetDelta&&!this.relativeTarget&&(E&&E.layout?this.createRelativeTarget(E,this.layout.layoutBox,E.layout.layoutBox):this.removeRelativeTarget()),!(!this.relativeTarget&&!this.targetDelta)&&(this.target||(this.target=tn(),this.targetWithTransforms=tn()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),dL(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):zr(this.target,this.layout.layoutBox),NA(this.target,this.targetDelta)):zr(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget&&(this.attemptToResolveRelativeTarget=!1,E&&!!E.resumingFrom==!!this.resumingFrom&&!E.options.layoutScroll&&E.target&&this.animationProgress!==1?this.createRelativeTarget(E,this.target,E.target):this.relativeParent=this.relativeTarget=void 0))}getClosestProjectingParent(){if(!(!this.parent||mp(this.parent.latestValues)||RA(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}createRelativeTarget(c,h,g){this.relativeParent=c,this.linkedParentVersion=c.layoutVersion,this.forceRelativeParentToResolveTarget(),this.relativeTarget=tn(),this.relativeTargetOrigin=tn(),xh(this.relativeTargetOrigin,h,g),zr(this.relativeTarget,this.relativeTargetOrigin)}removeRelativeTarget(){this.relativeParent=this.relativeTarget=void 0}calcProjection(){var I;const c=this.getLead(),h=!!this.resumingFrom||this!==c;let g=!0;if((this.isProjectionDirty||(I=this.parent)!=null&&I.isProjectionDirty)&&(g=!1),h&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(g=!1),this.resolvedRelativeTargetAt===xn.timestamp&&(g=!1),g)return;const{layout:p,layoutId:y}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(p||y))return;zr(this.layoutCorrected,this.layout.layoutBox);const x=this.treeScale.x,E=this.treeScale.y;U5(this.layoutCorrected,this.treeScale,this.path,h),c.layout&&!c.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(c.target=c.layout.layoutBox,c.targetWithTransforms=tn());const{target:b}=c;if(!b){this.prevProjectionDelta&&(this.createProjectionDeltas(),this.scheduleRender());return}!this.projectionDelta||!this.prevProjectionDelta?this.createProjectionDeltas():(Zx(this.prevProjectionDelta.x,this.projectionDelta.x),Zx(this.prevProjectionDelta.y,this.projectionDelta.y)),yc(this.projectionDelta,this.layoutCorrected,b,this.latestValues),(this.treeScale.x!==x||this.treeScale.y!==E||!lv(this.projectionDelta.x,this.prevProjectionDelta.x)||!lv(this.projectionDelta.y,this.prevProjectionDelta.y))&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",b))}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(c=!0){var h;if((h=this.options.visualElement)==null||h.scheduleRender(),c){const g=this.getStack();g&&g.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}createProjectionDeltas(){this.prevProjectionDelta=ka(),this.projectionDelta=ka(),this.projectionDeltaWithTransform=ka()}setAnimationOrigin(c,h=!1){const g=this.snapshot,p=g?g.latestValues:{},y={...this.latestValues},x=ka();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!h;const E=tn(),b=g?g.source:void 0,I=this.layout?this.layout.source:void 0,S=b!==I,R=this.getStack(),A=!R||R.members.length<=1,_=!!(S&&!A&&this.options.crossfade===!0&&!this.path.some(jL));this.animationProgress=0;let T;this.mixTargetDelta=D=>{const F=D/1e3;gv(x.x,c.x,F),gv(x.y,c.y,F),this.setTargetDelta(x),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(xh(E,this.layout.layoutBox,this.relativeParent.layout.layoutBox),FL(this.relativeTarget,this.relativeTargetOrigin,E,F),T&&gL(this.relativeTarget,T)&&(this.isProjectionDirty=!1),T||(T=tn()),zr(T,this.relativeTarget)),S&&(this.animationValues=y,wL(y,p,this.latestValues,F,_,A)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=F},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(c){var h,g,p;this.notifyListeners("animationStart"),(h=this.currentAnimation)==null||h.stop(),(p=(g=this.resumingFrom)==null?void 0:g.currentAnimation)==null||p.stop(),this.pendingAnimation&&(Qi(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=ft.update(()=>{Rd.hasAnimatedSinceResize=!0,this.motionValue||(this.motionValue=Wo(0)),this.currentAnimation=EL(this.motionValue,[0,1e3],{...c,velocity:0,isSync:!0,onUpdate:y=>{this.mixTargetDelta(y),c.onUpdate&&c.onUpdate(y)},onStop:()=>{},onComplete:()=>{c.onComplete&&c.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const c=this.getStack();c&&c.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(_L),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const c=this.getLead();let{targetWithTransforms:h,target:g,layout:p,latestValues:y}=c;if(!(!h||!g||!p)){if(this!==c&&this.layout&&p&&XA(this.options.animationType,this.layout.layoutBox,p.layoutBox)){g=this.target||tn();const x=Bn(this.layout.layoutBox.x);g.x.min=c.target.x.min,g.x.max=g.x.min+x;const E=Bn(this.layout.layoutBox.y);g.y.min=c.target.y.min,g.y.max=g.y.min+E}zr(h,g),Da(h,y),yc(this.projectionDeltaWithTransform,this.layoutCorrected,h,y)}}registerSharedNode(c,h){this.sharedNodes.has(c)||this.sharedNodes.set(c,new AL),this.sharedNodes.get(c).add(h);const p=h.options.initialPromotionConfig;h.promote({transition:p?p.transition:void 0,preserveFollowOpacity:p&&p.shouldPreserveFollowOpacity?p.shouldPreserveFollowOpacity(h):void 0})}isLead(){const c=this.getStack();return c?c.lead===this:!0}getLead(){var h;const{layoutId:c}=this.options;return c?((h=this.getStack())==null?void 0:h.lead)||this:this}getPrevLead(){var h;const{layoutId:c}=this.options;return c?(h=this.getStack())==null?void 0:h.prevLead:void 0}getStack(){const{layoutId:c}=this.options;if(c)return this.root.sharedNodes.get(c)}promote({needsReset:c,transition:h,preserveFollowOpacity:g}={}){const p=this.getStack();p&&p.promote(this,g),c&&(this.projectionDelta=void 0,this.needsReset=!0),h&&this.setOptions({transition:h})}relegate(){const c=this.getStack();return c?c.relegate(this):!1}resetSkewAndRotation(){const{visualElement:c}=this.options;if(!c)return;let h=!1;const{latestValues:g}=c;if((g.z||g.rotate||g.rotateX||g.rotateY||g.rotateZ||g.skewX||g.skewY)&&(h=!0),!h)return;const p={};g.z&&A0("z",c,p,this.animationValues);for(let y=0;y<S0.length;y++)A0(`rotate${S0[y]}`,c,p,this.animationValues),A0(`skew${S0[y]}`,c,p,this.animationValues);c.render();for(const y in p)c.setStaticValue(y,p[y]),this.animationValues&&(this.animationValues[y]=p[y]);c.scheduleRender()}applyProjectionStyles(c,h){if(!this.instance||this.isSVG)return;if(!this.isVisible){c.visibility="hidden";return}const g=this.getTransformTemplate();if(this.needsReset){this.needsReset=!1,c.visibility="",c.opacity="",c.pointerEvents=Id(h==null?void 0:h.pointerEvents)||"",c.transform=g?g(this.latestValues,""):"none";return}const p=this.getLead();if(!this.projectionDelta||!this.layout||!p.target){this.options.layoutId&&(c.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,c.pointerEvents=Id(h==null?void 0:h.pointerEvents)||""),this.hasProjected&&!wo(this.latestValues)&&(c.transform=g?g({},""):"none",this.hasProjected=!1);return}c.visibility="";const y=p.animationValues||p.latestValues;this.applyTransformsToTarget();let x=mL(this.projectionDeltaWithTransform,this.treeScale,y);g&&(x=g(y,x)),c.transform=x;const{x:E,y:b}=this.projectionDelta;c.transformOrigin=`${E.origin*100}% ${b.origin*100}% 0`,p.animationValues?c.opacity=p===this?y.opacity??this.latestValues.opacity??1:this.preserveOpacity?this.latestValues.opacity:y.opacityExit:c.opacity=p===this?y.opacity!==void 0?y.opacity:"":y.opacityExit!==void 0?y.opacityExit:0;for(const I in wp){if(y[I]===void 0)continue;const{correct:S,applyTo:R,isCSSVariable:A}=wp[I],_=x==="none"?y[I]:S(y[I],p);if(R){const T=R.length;for(let D=0;D<T;D++)c[R[D]]=_}else A?this.options.visualElement.renderState.vars[I]=_:c[I]=_}this.options.layoutId&&(c.pointerEvents=p===this?Id(h==null?void 0:h.pointerEvents)||"":"none")}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(c=>{var h;return(h=c.currentAnimation)==null?void 0:h.stop()}),this.root.nodes.forEach(hv),this.root.sharedNodes.clear()}}}function IL(t){t.updateLayout()}function RL(t){var n;const e=((n=t.resumeFrom)==null?void 0:n.snapshot)||t.snapshot;if(t.isLead()&&t.layout&&e&&t.hasListeners("didUpdate")){const{layoutBox:r,measuredBox:s}=t.layout,{animationType:o}=t.options,c=e.source!==t.layout.source;o==="size"?xi(x=>{const E=c?e.measuredBox[x]:e.layoutBox[x],b=Bn(E);E.min=r[x].min,E.max=E.min+b}):XA(o,e.layoutBox,r)&&xi(x=>{const E=c?e.measuredBox[x]:e.layoutBox[x],b=Bn(r[x]);E.max=E.min+b,t.relativeTarget&&!t.currentAnimation&&(t.isProjectionDirty=!0,t.relativeTarget[x].max=t.relativeTarget[x].min+b)});const h=ka();yc(h,r,e.layoutBox);const g=ka();c?yc(g,t.applyTransform(s,!0),e.measuredBox):yc(g,r,e.layoutBox);const p=!zA(h);let y=!1;if(!t.resumeFrom){const x=t.getClosestProjectingParent();if(x&&!x.resumeFrom){const{snapshot:E,layout:b}=x;if(E&&b){const I=tn();xh(I,e.layoutBox,E.layoutBox);const S=tn();xh(S,r,b.layoutBox),HA(I,S)||(y=!0),x.options.layoutRoot&&(t.relativeTarget=S,t.relativeTargetOrigin=I,t.relativeParent=x)}}}t.notifyListeners("didUpdate",{layout:r,snapshot:e,delta:g,layoutDelta:h,hasLayoutChanged:p,hasRelativeLayoutChanged:y})}else if(t.isLead()){const{onExitComplete:r}=t.options;r&&r()}t.options.transition=void 0}function NL(t){t.parent&&(t.isProjecting()||(t.isProjectionDirty=t.parent.isProjectionDirty),t.isSharedProjectionDirty||(t.isSharedProjectionDirty=!!(t.isProjectionDirty||t.parent.isProjectionDirty||t.parent.isSharedProjectionDirty)),t.isTransformDirty||(t.isTransformDirty=t.parent.isTransformDirty))}function OL(t){t.isProjectionDirty=t.isSharedProjectionDirty=t.isTransformDirty=!1}function kL(t){t.clearSnapshot()}function hv(t){t.clearMeasurements()}function fv(t){t.isLayoutDirty=!1}function ML(t){const{visualElement:e}=t.options;e&&e.getProps().onBeforeLayoutMeasure&&e.notify("BeforeLayoutMeasure"),t.resetTransform()}function pv(t){t.finishAnimation(),t.targetDelta=t.relativeTarget=t.target=void 0,t.isProjectionDirty=!0}function DL(t){t.resolveTargetDelta()}function PL(t){t.calcProjection()}function LL(t){t.resetSkewAndRotation()}function BL(t){t.removeLeadSnapshot()}function gv(t,e,n){t.translate=Mt(e.translate,0,n),t.scale=Mt(e.scale,1,n),t.origin=e.origin,t.originPoint=e.originPoint}function mv(t,e,n,r){t.min=Mt(e.min,n.min,r),t.max=Mt(e.max,n.max,r)}function FL(t,e,n,r){mv(t.x,e.x,n.x,r),mv(t.y,e.y,n.y,r)}function jL(t){return t.animationValues&&t.animationValues.opacityExit!==void 0}const UL={duration:.45,ease:[.4,0,.1,1]},yv=t=>typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().includes(t),wv=yv("applewebkit/")&&!yv("chrome/")?Math.round:Rr;function xv(t){t.min=wv(t.min),t.max=wv(t.max)}function VL(t){xv(t.x),xv(t.y)}function XA(t,e,n){return t==="position"||t==="preserve-aspect"&&!uL(av(e),av(n),.2)}function zL(t){var e;return t!==t.root&&((e=t.scroll)==null?void 0:e.wasRoot)}const HL=YA({attachResizeListener:(t,e)=>Jc(t,"resize",e),measureScroll:()=>{var t,e;return{x:document.documentElement.scrollLeft||((t=document.body)==null?void 0:t.scrollLeft)||0,y:document.documentElement.scrollTop||((e=document.body)==null?void 0:e.scrollTop)||0}},checkIsScrollRoot:()=>!0}),_0={current:void 0},KA=YA({measureScroll:t=>({x:t.scrollLeft,y:t.scrollTop}),defaultParent:()=>{if(!_0.current){const t=new HL({});t.mount(window),t.setOptions({layoutScroll:!0}),_0.current=t}return _0.current},resetTransform:(t,e)=>{t.style.transform=e!==void 0?e:"none"},checkIsScrollRoot:t=>window.getComputedStyle(t).position==="fixed"}),uf=M.createContext({transformPagePoint:t=>t,isStatic:!1,reducedMotion:"never"});function vv(t,e){if(typeof t=="function")return t(e);t!=null&&(t.current=e)}function WL(...t){return e=>{let n=!1;const r=t.map(s=>{const o=vv(s,e);return!n&&typeof o=="function"&&(n=!0),o});if(n)return()=>{for(let s=0;s<r.length;s++){const o=r[s];typeof o=="function"?o():vv(t[s],null)}}}}function $L(...t){return M.useCallback(WL(...t),t)}class GL extends M.Component{getSnapshotBeforeUpdate(e){const n=this.props.childRef.current;if(n&&e.isPresent&&!this.props.isPresent&&this.props.pop!==!1){const r=n.offsetParent,s=pp(r)&&r.offsetWidth||0,o=pp(r)&&r.offsetHeight||0,c=this.props.sizeRef.current;c.height=n.offsetHeight||0,c.width=n.offsetWidth||0,c.top=n.offsetTop,c.left=n.offsetLeft,c.right=s-c.width-c.left,c.bottom=o-c.height-c.top}return null}componentDidUpdate(){}render(){return this.props.children}}function YL({children:t,isPresent:e,anchorX:n,anchorY:r,root:s,pop:o}){var E;const c=M.useId(),h=M.useRef(null),g=M.useRef({width:0,height:0,top:0,left:0,right:0,bottom:0}),{nonce:p}=M.useContext(uf),y=((E=t.props)==null?void 0:E.ref)??(t==null?void 0:t.ref),x=$L(h,y);return M.useInsertionEffect(()=>{const{width:b,height:I,top:S,left:R,right:A,bottom:_}=g.current;if(e||o===!1||!h.current||!b||!I)return;const T=n==="left"?`left: ${R}`:`right: ${A}`,D=r==="bottom"?`bottom: ${_}`:`top: ${S}`;h.current.dataset.motionPopId=c;const F=document.createElement("style");p&&(F.nonce=p);const j=s??document.head;return j.appendChild(F),F.sheet&&F.sheet.insertRule(`
          [data-motion-pop-id="${c}"] {
            position: absolute !important;
            width: ${b}px !important;
            height: ${I}px !important;
            ${T}px !important;
            ${D}px !important;
          }
        `),()=>{j.contains(F)&&j.removeChild(F)}},[e]),U.jsx(GL,{isPresent:e,childRef:h,sizeRef:g,pop:o,children:o===!1?t:M.cloneElement(t,{ref:x})})}const XL=({children:t,initial:e,isPresent:n,onExitComplete:r,custom:s,presenceAffectsLayout:o,mode:c,anchorX:h,anchorY:g,root:p})=>{const y=Ho(KL),x=M.useId();let E=!0,b=M.useMemo(()=>(E=!1,{id:x,initial:e,isPresent:n,custom:s,onExitComplete:I=>{y.set(I,!0);for(const S of y.values())if(!S)return;r&&r()},register:I=>(y.set(I,!1),()=>y.delete(I))}),[n,y,r]);return o&&E&&(b={...b}),M.useMemo(()=>{y.forEach((I,S)=>y.set(S,!1))},[n]),M.useEffect(()=>{!n&&!y.size&&r&&r()},[n]),t=U.jsx(YL,{pop:c==="popLayout",isPresent:n,anchorX:h,anchorY:g,root:p,children:t}),U.jsx(of.Provider,{value:b,children:t})};function KL(){return new Map}function qA(t=!0){const e=M.useContext(of);if(e===null)return[!0,null];const{isPresent:n,onExitComplete:r,register:s}=e,o=M.useId();M.useEffect(()=>{if(t)return s(o)},[t]);const c=M.useCallback(()=>t&&r&&r(o),[o,r,t]);return!n&&r?[!1,c]:[!0]}const od=t=>t.key||"";function Ev(t){const e=[];return M.Children.forEach(t,n=>{M.isValidElement(n)&&e.push(n)}),e}const Em=({children:t,custom:e,initial:n=!0,onExitComplete:r,presenceAffectsLayout:s=!0,mode:o="sync",propagate:c=!1,anchorX:h="left",anchorY:g="top",root:p})=>{const[y,x]=qA(c),E=M.useMemo(()=>Ev(t),[t]),b=c&&!y?[]:E.map(od),I=M.useRef(!0),S=M.useRef(E),R=Ho(()=>new Map),A=M.useRef(new Set),[_,T]=M.useState(E),[D,F]=M.useState(E);Yg(()=>{I.current=!1,S.current=E;for(let W=0;W<D.length;W++){const H=od(D[W]);b.includes(H)?(R.delete(H),A.current.delete(H)):R.get(H)!==!0&&R.set(H,!1)}},[D,b.length,b.join("-")]);const j=[];if(E!==_){let W=[...E];for(let H=0;H<D.length;H++){const te=D[H],he=od(te);b.includes(he)||(W.splice(H,0,te),j.push(te))}return o==="wait"&&j.length&&(W=j),F(Ev(W)),T(E),null}const{forceRender:B}=M.useContext(Gg);return U.jsx(U.Fragment,{children:D.map(W=>{const H=od(W),te=c&&!y?!1:E===D||b.includes(H),he=()=>{if(A.current.has(H))return;if(A.current.add(H),R.has(H))R.set(H,!0);else return;let Q=!0;R.forEach(fe=>{fe||(Q=!1)}),Q&&(B==null||B(),F(S.current),c&&(x==null||x()),r&&r())};return U.jsx(XL,{isPresent:te,initial:!I.current||n?void 0:!1,custom:e,presenceAffectsLayout:s,mode:o,root:p,onExitComplete:te?void 0:he,anchorX:h,anchorY:g,children:W},H)})})},ZA=M.createContext({strict:!1}),bv={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]};let Cv=!1;function qL(){if(Cv)return;const t={};for(const e in bv)t[e]={isEnabled:n=>bv[e].some(r=>!!n[r])};_A(t),Cv=!0}function QA(){return qL(),L5()}function ZL(t){const e=QA();for(const n in t)e[n]={...e[n],...t[n]};_A(e)}const QL=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","propagate","ignoreStrict","viewport"]);function vh(t){return t.startsWith("while")||t.startsWith("drag")&&t!=="draggable"||t.startsWith("layout")||t.startsWith("onTap")||t.startsWith("onPan")||t.startsWith("onLayout")||QL.has(t)}let JA=t=>!vh(t);function JL(t){typeof t=="function"&&(JA=e=>e.startsWith("on")?!vh(e):t(e))}try{JL(require("@emotion/is-prop-valid").default)}catch{}function e7(t,e,n){const r={};for(const s in t)s==="values"&&typeof t.values=="object"||(JA(s)||n===!0&&vh(s)||!e&&!vh(s)||t.draggable&&s.startsWith("onDrag"))&&(r[s]=t[s]);return r}const df=M.createContext({});function t7(t,e){if(cf(t)){const{initial:n,animate:r}=t;return{initial:n===!1||Qc(n)?n:void 0,animate:Qc(r)?r:void 0}}return t.inherit!==!1?e:{}}function n7(t){const{initial:e,animate:n}=t7(t,M.useContext(df));return M.useMemo(()=>({initial:e,animate:n}),[Sv(e),Sv(n)])}function Sv(t){return Array.isArray(t)?t.join(" "):t}const bm=()=>({style:{},transform:{},transformOrigin:{},vars:{}});function e_(t,e,n){for(const r in e)!Rn(e[r])&&!MA(r,n)&&(t[r]=e[r])}function r7({transformTemplate:t},e){return M.useMemo(()=>{const n=bm();return xm(n,e,t),Object.assign({},n.vars,n.style)},[e])}function i7(t,e){const n=t.style||{},r={};return e_(r,n,t),Object.assign(r,r7(t,e)),r}function s7(t,e){const n={},r=i7(t,e);return t.drag&&t.dragListener!==!1&&(n.draggable=!1,r.userSelect=r.WebkitUserSelect=r.WebkitTouchCallout="none",r.touchAction=t.drag===!0?"none":`pan-${t.drag==="x"?"y":"x"}`),t.tabIndex===void 0&&(t.onTap||t.onTapStart||t.whileTap)&&(n.tabIndex=0),n.style=r,n}const t_=()=>({...bm(),attrs:{}});function o7(t,e,n,r){const s=M.useMemo(()=>{const o=t_();return DA(o,e,LA(r),t.transformTemplate,t.style),{...o.attrs,style:{...o.style}}},[e]);if(t.style){const o={};e_(o,t.style,t),s.style={...o,...s.style}}return s}const a7=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function Cm(t){return typeof t!="string"||t.includes("-")?!1:!!(a7.indexOf(t)>-1||/[A-Z]/u.test(t))}function l7(t,e,n,{latestValues:r},s,o=!1,c){const g=(c??Cm(t)?o7:s7)(e,r,s,t),p=e7(e,typeof t=="string",o),y=t!==M.Fragment?{...p,...g,ref:n}:{},{children:x}=e,E=M.useMemo(()=>Rn(x)?x.get():x,[x]);return M.createElement(t,{...y,children:E})}function c7({scrapeMotionValuesFromProps:t,createRenderState:e},n,r,s){return{latestValues:u7(n,r,s,t),renderState:e()}}function u7(t,e,n,r){const s={},o=r(t,{});for(const E in o)s[E]=Id(o[E]);let{initial:c,animate:h}=t;const g=cf(t),p=AA(t);e&&p&&!g&&t.inherit!==!1&&(c===void 0&&(c=e.initial),h===void 0&&(h=e.animate));let y=n?n.initial===!1:!1;y=y||c===!1;const x=y?h:c;if(x&&typeof x!="boolean"&&!lf(x)){const E=Array.isArray(x)?x:[x];for(let b=0;b<E.length;b++){const I=dm(t,E[b]);if(I){const{transitionEnd:S,transition:R,...A}=I;for(const _ in A){let T=A[_];if(Array.isArray(T)){const D=y?T.length-1:0;T=T[D]}T!==null&&(s[_]=T)}for(const _ in S)s[_]=S[_]}}}return s}const n_=t=>(e,n)=>{const r=M.useContext(df),s=M.useContext(of),o=()=>c7(t,e,r,s);return n?o():Ho(o)},d7=n_({scrapeMotionValuesFromProps:vm,createRenderState:bm}),h7=n_({scrapeMotionValuesFromProps:BA,createRenderState:t_}),f7=Symbol.for("motionComponentSymbol");function p7(t,e,n){const r=M.useRef(n);M.useInsertionEffect(()=>{r.current=n});const s=M.useRef(null);return M.useCallback(o=>{var h;o&&((h=t.onMount)==null||h.call(t,o)),e&&(o?e.mount(o):e.unmount());const c=r.current;if(typeof c=="function")if(o){const g=c(o);typeof g=="function"&&(s.current=g)}else s.current?(s.current(),s.current=null):c(o);else c&&(c.current=o)},[e])}const r_=M.createContext({});function pa(t){return t&&typeof t=="object"&&Object.prototype.hasOwnProperty.call(t,"current")}function g7(t,e,n,r,s,o){var T,D;const{visualElement:c}=M.useContext(df),h=M.useContext(ZA),g=M.useContext(of),p=M.useContext(uf),y=p.reducedMotion,x=p.skipAnimations,E=M.useRef(null),b=M.useRef(!1);r=r||h.renderer,!E.current&&r&&(E.current=r(t,{visualState:e,parent:c,props:n,presenceContext:g,blockInitialAnimation:g?g.initial===!1:!1,reducedMotionConfig:y,skipAnimations:x,isSVG:o}),b.current&&E.current&&(E.current.manuallyAnimateOnMount=!0));const I=E.current,S=M.useContext(r_);I&&!I.projection&&s&&(I.type==="html"||I.type==="svg")&&m7(E.current,n,s,S);const R=M.useRef(!1);M.useInsertionEffect(()=>{I&&R.current&&I.update(n,g)});const A=n[dA],_=M.useRef(!!A&&!((T=window.MotionHandoffIsComplete)!=null&&T.call(window,A))&&((D=window.MotionHasOptimisedAnimation)==null?void 0:D.call(window,A)));return Yg(()=>{b.current=!0,I&&(R.current=!0,window.MotionIsMounted=!0,I.updateFeatures(),I.scheduleRenderMicrotask(),_.current&&I.animationState&&I.animationState.animateChanges())}),M.useEffect(()=>{I&&(!_.current&&I.animationState&&I.animationState.animateChanges(),_.current&&(queueMicrotask(()=>{var F;(F=window.MotionHandoffMarkAsComplete)==null||F.call(window,A)}),_.current=!1),I.enteringChildren=void 0)}),I}function m7(t,e,n,r){const{layoutId:s,layout:o,drag:c,dragConstraints:h,layoutScroll:g,layoutRoot:p,layoutCrossfade:y}=e;t.projection=new n(t.latestValues,e["data-framer-portal-id"]?void 0:i_(t.parent)),t.projection.setOptions({layoutId:s,layout:o,alwaysMeasureLayout:!!c||h&&pa(h),visualElement:t,animationType:typeof o=="string"?o:"both",initialPromotionConfig:r,crossfade:y,layoutScroll:g,layoutRoot:p})}function i_(t){if(t)return t.options.allowProjection!==!1?t.projection:i_(t.parent)}function T0(t,{forwardMotionProps:e=!1,type:n}={},r,s){r&&ZL(r);const o=n?n==="svg":Cm(t),c=o?h7:d7;function h(p,y){let x;const E={...M.useContext(uf),...p,layoutId:y7(p)},{isStatic:b}=E,I=n7(p),S=c(p,b);if(!b&&_S){w7();const R=x7(E);x=R.MeasureLayout,I.visualElement=g7(t,S,E,s,R.ProjectionNode,o)}return U.jsxs(df.Provider,{value:I,children:[x&&I.visualElement?U.jsx(x,{visualElement:I.visualElement,...E}):null,l7(t,p,p7(S,I.visualElement,y),S,b,e,o)]})}h.displayName=`motion.${typeof t=="string"?t:`create(${t.displayName??t.name??""})`}`;const g=M.forwardRef(h);return g[f7]=t,g}function y7({layoutId:t}){const e=M.useContext(Gg).id;return e&&t!==void 0?e+"-"+t:t}function w7(t,e){M.useContext(ZA).strict}function x7(t){const e=QA(),{drag:n,layout:r}=e;if(!n&&!r)return{};const s={...n,...r};return{MeasureLayout:n!=null&&n.isEnabled(t)||r!=null&&r.isEnabled(t)?s.MeasureLayout:void 0,ProjectionNode:s.ProjectionNode}}function v7(t,e){if(typeof Proxy>"u")return T0;const n=new Map,r=(o,c)=>T0(o,c,t,e),s=(o,c)=>r(o,c);return new Proxy(s,{get:(o,c)=>c==="create"?r:(n.has(c)||n.set(c,T0(c,void 0,t,e)),n.get(c))})}const E7=(t,e)=>e.isSVG??Cm(t)?new J5(e):new Y5(e,{allowProjection:t!==M.Fragment});class b7 extends no{constructor(e){super(e),e.animationState||(e.animationState=iL(e))}updateAnimationControlsSubscription(){const{animate:e}=this.node.getProps();lf(e)&&(this.unmountControls=e.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:e}=this.node.getProps(),{animate:n}=this.node.prevProps||{};e!==n&&this.updateAnimationControlsSubscription()}unmount(){var e;this.node.animationState.reset(),(e=this.unmountControls)==null||e.call(this)}}let C7=0;class S7 extends no{constructor(){super(...arguments),this.id=C7++}update(){if(!this.node.presenceContext)return;const{isPresent:e,onExitComplete:n}=this.node.presenceContext,{isPresent:r}=this.node.prevPresenceContext||{};if(!this.node.animationState||e===r)return;const s=this.node.animationState.setActive("exit",!e);n&&!e&&s.then(()=>{n(this.id)})}mount(){const{register:e,onExitComplete:n}=this.node.presenceContext||{};n&&n(this.id),e&&(this.unmount=e(this.id))}unmount(){}}const A7={animation:{Feature:b7},exit:{Feature:S7}};function yu(t){return{point:{x:t.pageX,y:t.pageY}}}const _7=t=>e=>gm(e)&&t(e,yu(e));function wc(t,e,n,r){return Jc(t,e,_7(n),r)}const s_=({current:t})=>t?t.ownerDocument.defaultView:null,Av=(t,e)=>Math.abs(t-e);function T7(t,e){const n=Av(t.x,e.x),r=Av(t.y,e.y);return Math.sqrt(n**2+r**2)}const _v=new Set(["auto","scroll"]);class o_{constructor(e,n,{transformPagePoint:r,contextWindow:s=window,dragSnapToOrigin:o=!1,distanceThreshold:c=3,element:h}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.scrollPositions=new Map,this.removeScrollListeners=null,this.onElementScroll=b=>{this.handleScroll(b.target)},this.onWindowScroll=()=>{this.handleScroll(window)},this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const b=R0(this.lastMoveEventInfo,this.history),I=this.startEvent!==null,S=T7(b.offset,{x:0,y:0})>=this.distanceThreshold;if(!I&&!S)return;const{point:R}=b,{timestamp:A}=xn;this.history.push({...R,timestamp:A});const{onStart:_,onMove:T}=this.handlers;I||(_&&_(this.lastMoveEvent,b),this.startEvent=this.lastMoveEvent),T&&T(this.lastMoveEvent,b)},this.handlePointerMove=(b,I)=>{this.lastMoveEvent=b,this.lastMoveEventInfo=I0(I,this.transformPagePoint),ft.update(this.updatePoint,!0)},this.handlePointerUp=(b,I)=>{this.end();const{onEnd:S,onSessionEnd:R,resumeAnimation:A}=this.handlers;if((this.dragSnapToOrigin||!this.startEvent)&&A&&A(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const _=R0(b.type==="pointercancel"?this.lastMoveEventInfo:I0(I,this.transformPagePoint),this.history);this.startEvent&&S&&S(b,_),R&&R(b,_)},!gm(e))return;this.dragSnapToOrigin=o,this.handlers=n,this.transformPagePoint=r,this.distanceThreshold=c,this.contextWindow=s||window;const g=yu(e),p=I0(g,this.transformPagePoint),{point:y}=p,{timestamp:x}=xn;this.history=[{...y,timestamp:x}];const{onSessionStart:E}=n;E&&E(e,R0(p,this.history)),this.removeListeners=pu(wc(this.contextWindow,"pointermove",this.handlePointerMove),wc(this.contextWindow,"pointerup",this.handlePointerUp),wc(this.contextWindow,"pointercancel",this.handlePointerUp)),h&&this.startScrollTracking(h)}startScrollTracking(e){let n=e.parentElement;for(;n;){const r=getComputedStyle(n);(_v.has(r.overflowX)||_v.has(r.overflowY))&&this.scrollPositions.set(n,{x:n.scrollLeft,y:n.scrollTop}),n=n.parentElement}this.scrollPositions.set(window,{x:window.scrollX,y:window.scrollY}),window.addEventListener("scroll",this.onElementScroll,{capture:!0,passive:!0}),window.addEventListener("scroll",this.onWindowScroll,{passive:!0}),this.removeScrollListeners=()=>{window.removeEventListener("scroll",this.onElementScroll,{capture:!0}),window.removeEventListener("scroll",this.onWindowScroll)}}handleScroll(e){const n=this.scrollPositions.get(e);if(!n)return;const r=e===window,s=r?{x:window.scrollX,y:window.scrollY}:{x:e.scrollLeft,y:e.scrollTop},o={x:s.x-n.x,y:s.y-n.y};o.x===0&&o.y===0||(r?this.lastMoveEventInfo&&(this.lastMoveEventInfo.point.x+=o.x,this.lastMoveEventInfo.point.y+=o.y):this.history.length>0&&(this.history[0].x-=o.x,this.history[0].y-=o.y),this.scrollPositions.set(e,s),ft.update(this.updatePoint,!0))}updateHandlers(e){this.handlers=e}end(){this.removeListeners&&this.removeListeners(),this.removeScrollListeners&&this.removeScrollListeners(),this.scrollPositions.clear(),Qi(this.updatePoint)}}function I0(t,e){return e?{point:e(t.point)}:t}function Tv(t,e){return{x:t.x-e.x,y:t.y-e.y}}function R0({point:t},e){return{point:t,delta:Tv(t,a_(e)),offset:Tv(t,I7(e)),velocity:R7(e,.1)}}function I7(t){return t[0]}function a_(t){return t[t.length-1]}function R7(t,e){if(t.length<2)return{x:0,y:0};let n=t.length-1,r=null;const s=a_(t);for(;n>=0&&(r=t[n],!(s.timestamp-r.timestamp>ni(e)));)n--;if(!r)return{x:0,y:0};r===t[0]&&t.length>2&&s.timestamp-r.timestamp>ni(e)*2&&(r=t[1]);const o=Tr(s.timestamp-r.timestamp);if(o===0)return{x:0,y:0};const c={x:(s.x-r.x)/o,y:(s.y-r.y)/o};return c.x===1/0&&(c.x=0),c.y===1/0&&(c.y=0),c}function N7(t,{min:e,max:n},r){return e!==void 0&&t<e?t=r?Mt(e,t,r.min):Math.max(t,e):n!==void 0&&t>n&&(t=r?Mt(n,t,r.max):Math.min(t,n)),t}function Iv(t,e,n){return{min:e!==void 0?t.min+e:void 0,max:n!==void 0?t.max+n-(t.max-t.min):void 0}}function O7(t,{top:e,left:n,bottom:r,right:s}){return{x:Iv(t.x,n,s),y:Iv(t.y,e,r)}}function Rv(t,e){let n=e.min-t.min,r=e.max-t.max;return e.max-e.min<t.max-t.min&&([n,r]=[r,n]),{min:n,max:r}}function k7(t,e){return{x:Rv(t.x,e.x),y:Rv(t.y,e.y)}}function M7(t,e){let n=.5;const r=Bn(t),s=Bn(e);return s>r?n=Kc(e.min,e.max-r,t.min):r>s&&(n=Kc(t.min,t.max-s,e.min)),Oi(0,1,n)}function D7(t,e){const n={};return e.min!==void 0&&(n.min=e.min-t.min),e.max!==void 0&&(n.max=e.max-t.min),n}const xp=.35;function P7(t=xp){return t===!1?t=0:t===!0&&(t=xp),{x:Nv(t,"left","right"),y:Nv(t,"top","bottom")}}function Nv(t,e,n){return{min:Ov(t,e),max:Ov(t,n)}}function Ov(t,e){return typeof t=="number"?t:t[e]||0}const L7=new WeakMap;class B7{constructor(e){this.openDragLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=tn(),this.latestPointerEvent=null,this.latestPanInfo=null,this.visualElement=e}start(e,{snapToCursor:n=!1,distanceThreshold:r}={}){const{presenceContext:s}=this.visualElement;if(s&&s.isPresent===!1)return;const o=x=>{n&&this.snapToCursor(yu(x).point),this.stopAnimation()},c=(x,E)=>{const{drag:b,dragPropagation:I,onDragStart:S}=this.getProps();if(b&&!I&&(this.openDragLock&&this.openDragLock(),this.openDragLock=d5(b),!this.openDragLock))return;this.latestPointerEvent=x,this.latestPanInfo=E,this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),xi(A=>{let _=this.getAxisMotionValue(A).get()||0;if(Ii.test(_)){const{projection:T}=this.visualElement;if(T&&T.layout){const D=T.layout.layoutBox[A];D&&(_=Bn(D)*(parseFloat(_)/100))}}this.originPoint[A]=_}),S&&ft.update(()=>S(x,E),!1,!0),dp(this.visualElement,"transform");const{animationState:R}=this.visualElement;R&&R.setActive("whileDrag",!0)},h=(x,E)=>{this.latestPointerEvent=x,this.latestPanInfo=E;const{dragPropagation:b,dragDirectionLock:I,onDirectionLock:S,onDrag:R}=this.getProps();if(!b&&!this.openDragLock)return;const{offset:A}=E;if(I&&this.currentDirection===null){this.currentDirection=j7(A),this.currentDirection!==null&&S&&S(this.currentDirection);return}this.updateAxis("x",E.point,A),this.updateAxis("y",E.point,A),this.visualElement.render(),R&&ft.update(()=>R(x,E),!1,!0)},g=(x,E)=>{this.latestPointerEvent=x,this.latestPanInfo=E,this.stop(x,E),this.latestPointerEvent=null,this.latestPanInfo=null},p=()=>{const{dragSnapToOrigin:x}=this.getProps();(x||this.constraints)&&this.startAnimation({x:0,y:0})},{dragSnapToOrigin:y}=this.getProps();this.panSession=new o_(e,{onSessionStart:o,onStart:c,onMove:h,onSessionEnd:g,resumeAnimation:p},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:y,distanceThreshold:r,contextWindow:s_(this.visualElement),element:this.visualElement.current})}stop(e,n){const r=e||this.latestPointerEvent,s=n||this.latestPanInfo,o=this.isDragging;if(this.cancel(),!o||!s||!r)return;const{velocity:c}=s;this.startAnimation(c);const{onDragEnd:h}=this.getProps();h&&ft.postRender(()=>h(r,s))}cancel(){this.isDragging=!1;const{projection:e,animationState:n}=this.visualElement;e&&(e.isAnimationBlocked=!1),this.endPanSession();const{dragPropagation:r}=this.getProps();!r&&this.openDragLock&&(this.openDragLock(),this.openDragLock=null),n&&n.setActive("whileDrag",!1)}endPanSession(){this.panSession&&this.panSession.end(),this.panSession=void 0}updateAxis(e,n,r){const{drag:s}=this.getProps();if(!r||!ad(e,s,this.currentDirection))return;const o=this.getAxisMotionValue(e);let c=this.originPoint[e]+r[e];this.constraints&&this.constraints[e]&&(c=N7(c,this.constraints[e],this.elastic[e])),o.set(c)}resolveConstraints(){var o;const{dragConstraints:e,dragElastic:n}=this.getProps(),r=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):(o=this.visualElement.projection)==null?void 0:o.layout,s=this.constraints;e&&pa(e)?this.constraints||(this.constraints=this.resolveRefConstraints()):e&&r?this.constraints=O7(r.layoutBox,e):this.constraints=!1,this.elastic=P7(n),s!==this.constraints&&!pa(e)&&r&&this.constraints&&!this.hasMutatedConstraints&&xi(c=>{this.constraints!==!1&&this.getAxisMotionValue(c)&&(this.constraints[c]=D7(r.layoutBox[c],this.constraints[c]))})}resolveRefConstraints(){const{dragConstraints:e,onMeasureDragConstraints:n}=this.getProps();if(!e||!pa(e))return!1;const r=e.current;cl(r!==null,"If `dragConstraints` is set as a React ref, that ref must be passed to another component's `ref` prop.","drag-constraints-ref");const{projection:s}=this.visualElement;if(!s||!s.layout)return!1;const o=V5(r,s.root,this.visualElement.getTransformPagePoint());let c=k7(s.layout.layoutBox,o);if(n){const h=n(F5(c));this.hasMutatedConstraints=!!h,h&&(c=IA(h))}return c}startAnimation(e){const{drag:n,dragMomentum:r,dragElastic:s,dragTransition:o,dragSnapToOrigin:c,onDragTransitionEnd:h}=this.getProps(),g=this.constraints||{},p=xi(y=>{if(!ad(y,n,this.currentDirection))return;let x=g&&g[y]||{};c&&(x={min:0,max:0});const E=s?200:1e6,b=s?40:1e7,I={type:"inertia",velocity:r?e[y]:0,bounceStiffness:E,bounceDamping:b,timeConstant:750,restDelta:1,restSpeed:10,...o,...x};return this.startAxisValueAnimation(y,I)});return Promise.all(p).then(h)}startAxisValueAnimation(e,n){const r=this.getAxisMotionValue(e);return dp(this.visualElement,e),r.start(um(e,r,0,n,this.visualElement,!1))}stopAnimation(){xi(e=>this.getAxisMotionValue(e).stop())}getAxisMotionValue(e){const n=`_drag${e.toUpperCase()}`,r=this.visualElement.getProps(),s=r[n];return s||this.visualElement.getValue(e,(r.initial?r.initial[e]:void 0)||0)}snapToCursor(e){xi(n=>{const{drag:r}=this.getProps();if(!ad(n,r,this.currentDirection))return;const{projection:s}=this.visualElement,o=this.getAxisMotionValue(n);if(s&&s.layout){const{min:c,max:h}=s.layout.layoutBox[n],g=o.get()||0;o.set(e[n]-Mt(c,h,.5)+g)}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:e,dragConstraints:n}=this.getProps(),{projection:r}=this.visualElement;if(!pa(n)||!r||!this.constraints)return;this.stopAnimation();const s={x:0,y:0};xi(c=>{const h=this.getAxisMotionValue(c);if(h&&this.constraints!==!1){const g=h.get();s[c]=M7({min:g,max:g},this.constraints[c])}});const{transformTemplate:o}=this.visualElement.getProps();this.visualElement.current.style.transform=o?o({},""):"none",r.root&&r.root.updateScroll(),r.updateLayout(),this.constraints=!1,this.resolveConstraints(),xi(c=>{if(!ad(c,e,null))return;const h=this.getAxisMotionValue(c),{min:g,max:p}=this.constraints[c];h.set(Mt(g,p,s[c]))}),this.visualElement.render()}addListeners(){if(!this.visualElement.current)return;L7.set(this.visualElement,this);const e=this.visualElement.current,n=wc(e,"pointerdown",p=>{const{drag:y,dragListener:x=!0}=this.getProps(),E=p.target,b=E!==e&&y5(E);y&&x&&!b&&this.start(p)});let r;const s=()=>{const{dragConstraints:p}=this.getProps();pa(p)&&p.current&&(this.constraints=this.resolveRefConstraints(),r||(r=F7(e,p.current,()=>this.scalePositionWithinConstraints())))},{projection:o}=this.visualElement,c=o.addEventListener("measure",s);o&&!o.layout&&(o.root&&o.root.updateScroll(),o.updateLayout()),ft.read(s);const h=Jc(window,"resize",()=>this.scalePositionWithinConstraints()),g=o.addEventListener("didUpdate",({delta:p,hasLayoutChanged:y})=>{this.isDragging&&y&&(xi(x=>{const E=this.getAxisMotionValue(x);E&&(this.originPoint[x]+=p[x].translate,E.set(E.get()+p[x].translate))}),this.visualElement.render())});return()=>{h(),n(),c(),g&&g(),r&&r()}}getProps(){const e=this.visualElement.getProps(),{drag:n=!1,dragDirectionLock:r=!1,dragPropagation:s=!1,dragConstraints:o=!1,dragElastic:c=xp,dragMomentum:h=!0}=e;return{...e,drag:n,dragDirectionLock:r,dragPropagation:s,dragConstraints:o,dragElastic:c,dragMomentum:h}}}function kv(t){let e=!0;return()=>{if(e){e=!1;return}t()}}function F7(t,e,n){const r=jx(t,kv(n)),s=jx(e,kv(n));return()=>{r(),s()}}function ad(t,e,n){return(e===!0||e===t)&&(n===null||n===t)}function j7(t,e=10){let n=null;return Math.abs(t.y)>e?n="y":Math.abs(t.x)>e&&(n="x"),n}class U7 extends no{constructor(e){super(e),this.removeGroupControls=Rr,this.removeListeners=Rr,this.controls=new B7(e)}mount(){const{dragControls:e}=this.node.getProps();e&&(this.removeGroupControls=e.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||Rr}update(){const{dragControls:e}=this.node.getProps(),{dragControls:n}=this.node.prevProps||{};e!==n&&(this.removeGroupControls(),e&&(this.removeGroupControls=e.subscribe(this.controls)))}unmount(){this.removeGroupControls(),this.removeListeners(),this.controls.isDragging||this.controls.endPanSession()}}const N0=t=>(e,n)=>{t&&ft.update(()=>t(e,n),!1,!0)};class V7 extends no{constructor(){super(...arguments),this.removePointerDownListener=Rr}onPointerDown(e){this.session=new o_(e,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:s_(this.node)})}createPanHandlers(){const{onPanSessionStart:e,onPanStart:n,onPan:r,onPanEnd:s}=this.node.getProps();return{onSessionStart:N0(e),onStart:N0(n),onMove:N0(r),onEnd:(o,c)=>{delete this.session,s&&ft.postRender(()=>s(o,c))}}}mount(){this.removePointerDownListener=wc(this.node.current,"pointerdown",e=>this.onPointerDown(e))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}let O0=!1;class z7 extends M.Component{componentDidMount(){const{visualElement:e,layoutGroup:n,switchLayoutGroup:r,layoutId:s}=this.props,{projection:o}=e;o&&(n.group&&n.group.add(o),r&&r.register&&s&&r.register(o),O0&&o.root.didUpdate(),o.addEventListener("animationComplete",()=>{this.safeToRemove()}),o.setOptions({...o.options,layoutDependency:this.props.layoutDependency,onExitComplete:()=>this.safeToRemove()})),Rd.hasEverUpdated=!0}getSnapshotBeforeUpdate(e){const{layoutDependency:n,visualElement:r,drag:s,isPresent:o}=this.props,{projection:c}=r;return c&&(c.isPresent=o,e.layoutDependency!==n&&c.setOptions({...c.options,layoutDependency:n}),O0=!0,s||e.layoutDependency!==n||n===void 0||e.isPresent!==o?c.willUpdate():this.safeToRemove(),e.isPresent!==o&&(o?c.promote():c.relegate()||ft.postRender(()=>{const h=c.getStack();(!h||!h.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:e}=this.props.visualElement;e&&(e.root.didUpdate(),pm.postRender(()=>{!e.currentAnimation&&e.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:e,layoutGroup:n,switchLayoutGroup:r}=this.props,{projection:s}=e;O0=!0,s&&(s.scheduleCheckAfterUnmount(),n&&n.group&&n.group.remove(s),r&&r.deregister&&r.deregister(s))}safeToRemove(){const{safeToRemove:e}=this.props;e&&e()}render(){return null}}function l_(t){const[e,n]=qA(),r=M.useContext(Gg);return U.jsx(z7,{...t,layoutGroup:r,switchLayoutGroup:M.useContext(r_),isPresent:e,safeToRemove:n})}const H7={pan:{Feature:V7},drag:{Feature:U7,ProjectionNode:KA,MeasureLayout:l_}};function Mv(t,e,n){const{props:r}=t;t.animationState&&r.whileHover&&t.animationState.setActive("whileHover",n==="Start");const s="onHover"+n,o=r[s];o&&ft.postRender(()=>o(e,yu(e)))}class W7 extends no{mount(){const{current:e}=this.node;e&&(this.unmount=f5(e,(n,r)=>(Mv(this.node,r,"Start"),s=>Mv(this.node,s,"End"))))}unmount(){}}class $7 extends no{constructor(){super(...arguments),this.isActive=!1}onFocus(){let e=!1;try{e=this.node.current.matches(":focus-visible")}catch{e=!0}!e||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=pu(Jc(this.node.current,"focus",()=>this.onFocus()),Jc(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}function Dv(t,e,n){const{props:r}=t;if(t.current instanceof HTMLButtonElement&&t.current.disabled)return;t.animationState&&r.whileTap&&t.animationState.setActive("whileTap",n==="Start");const s="onTap"+(n==="End"?"":n),o=r[s];o&&ft.postRender(()=>o(e,yu(e)))}class G7 extends no{mount(){const{current:e}=this.node;if(!e)return;const{globalTapTarget:n,propagate:r}=this.node.props;this.unmount=x5(e,(s,o)=>(Dv(this.node,o,"Start"),(c,{success:h})=>Dv(this.node,c,h?"End":"Cancel")),{useGlobalTarget:n,stopPropagation:(r==null?void 0:r.tap)===!1})}unmount(){}}const vp=new WeakMap,k0=new WeakMap,Y7=t=>{const e=vp.get(t.target);e&&e(t)},X7=t=>{t.forEach(Y7)};function K7({root:t,...e}){const n=t||document;k0.has(n)||k0.set(n,{});const r=k0.get(n),s=JSON.stringify(e);return r[s]||(r[s]=new IntersectionObserver(X7,{root:t,...e})),r[s]}function q7(t,e,n){const r=K7(e);return vp.set(t,n),r.observe(t),()=>{vp.delete(t),r.unobserve(t)}}const Z7={some:0,all:1};class Q7 extends no{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:e={}}=this.node.getProps(),{root:n,margin:r,amount:s="some",once:o}=e,c={root:n?n.current:void 0,rootMargin:r,threshold:typeof s=="number"?s:Z7[s]},h=g=>{const{isIntersecting:p}=g;if(this.isInView===p||(this.isInView=p,o&&!p&&this.hasEnteredView))return;p&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",p);const{onViewportEnter:y,onViewportLeave:x}=this.node.getProps(),E=p?y:x;E&&E(g)};return q7(this.node.current,c,h)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:e,prevProps:n}=this.node;["amount","margin","root"].some(J7(e,n))&&this.startObserver()}unmount(){}}function J7({viewport:t={}},{viewport:e={}}={}){return n=>t[n]!==e[n]}const e9={inView:{Feature:Q7},tap:{Feature:G7},focus:{Feature:$7},hover:{Feature:W7}},t9={layout:{ProjectionNode:KA,MeasureLayout:l_}},n9={...A7,...e9,...H7,...t9},Vs=v7(n9,E7);function c_(t){const e=Ho(()=>Wo(t)),{isStatic:n}=M.useContext(uf);if(n){const[,r]=M.useState(t);M.useEffect(()=>e.on("change",r),[])}return e}function u_(t,e){const n=c_(e()),r=()=>n.set(e());return r(),Yg(()=>{const s=()=>ft.preRender(r,!1,!0),o=t.map(c=>c.on("change",s));return()=>{o.forEach(c=>c()),Qi(r)}}),n}function r9(t){mc.current=[],t();const e=u_(mc.current,t);return mc.current=void 0,e}function Nd(t,e,n,r){if(typeof t=="function")return r9(t);if(n!==void 0&&!Array.isArray(n)&&typeof e!="function")return i9(t,e,n,r);const c=typeof e=="function"?e:R5(e,n,r);return Array.isArray(t)?Pv(t,c):Pv([t],([h])=>c(h))}function Pv(t,e){const n=Ho(()=>[]);return u_(t,()=>{n.length=0;const r=t.length;for(let s=0;s<r;s++)n[s]=t[s].get();return e(n)})}function i9(t,e,n,r){const s=Ho(()=>Object.keys(n)),o=Ho(()=>({}));for(const c of s)o[c]=Nd(t,e,n[c],r);return o}function s9({userName:t,userId:e}){const[n,r]=M.useState(""),[s,o]=M.useState([]),[c,h]=M.useState(!1),[g,p]=M.useState(new Set),[y,x]=M.useState(null),[E,b]=M.useState(!1),I=A=>{r(A),b(!1),setTimeout(()=>S(),100)},S=async()=>{var F;if(!n.trim())return;h(!0);const A=n.replace(/[-\s]/g,""),T=/^\d{10}(\d{3})?$/.test(A)?`isbn:${A}`:n,D=`https://www.googleapis.com/books/v1/volumes?q=${encodeURIComponent(T)}&maxResults=10&key=AIzaSyDS8MzMPdZIQhByGDbCgs58lgaSO1TA-I4`;try{let j=await fetch(D);if(j.status===503&&(console.log("Server service unavailable (503), retry in 1s..."),await new Promise(W=>setTimeout(W,1e3)),j=await fetch(D)),j.status===429){Dn.error("Google Books API-Limit erreicht. Bitte versuche es in ein paar Minuten erneut.");return}if(!j.ok){Dn.error("Suche fehlgeschlagen");return}const B=await j.json();o(B.items||[]),(F=B.items)!=null&&F.length||Dn.info("Keine Ergebnisse gefunden")}catch{Dn.error("Suche fehlgeschlagen  prfe deine Internetverbindung")}finally{h(!1)}},R=async A=>{var _,T,D;x(A.id);try{const{data:F}=await Zn.from("books").select("id").eq("google_id",A.id).maybeSingle();if(F){Dn.info("Dieses Buch wurde bereits vorgeschlagen!"),p(B=>new Set(B).add(A.id));return}const{error:j}=await Zn.from("books").insert({google_id:A.id,title:A.volumeInfo.title,author:((_=A.volumeInfo.authors)==null?void 0:_.join(", "))||"Unbekannt",cover_url:((D=(T=A.volumeInfo.imageLinks)==null?void 0:T.thumbnail)==null?void 0:D.replace("http:","https:"))||"",description:A.volumeInfo.description||"",suggested_by:t,user_id:e});if(j)throw j;p(B=>new Set(B).add(A.id)),Dn.success(`${A.volumeInfo.title}" hinzugefgt!`)}catch{Dn.error("Fehler beim Hinzufgen")}finally{x(null)}};return U.jsxs("div",{className:"px-4 pb-24 pt-4",children:[U.jsx("h2",{className:"mb-4 text-2xl font-bold",children:"Buch vorschlagen"}),U.jsxs("form",{onSubmit:A=>{A.preventDefault(),S()},className:"mb-6 flex gap-2",children:[U.jsx(dh,{placeholder:"Titel oder ISBN suchen",value:n,onChange:A=>r(A.target.value),className:"h-11 rounded-xl bg-card"}),U.jsx(Us,{type:"button",variant:"outline",size:"icon",className:"h-11 w-11 shrink-0 rounded-xl bg-card border-none",onClick:()=>b(!0),children:U.jsx(w4,{className:"h-5 w-5"})}),U.jsx(Us,{type:"submit",size:"icon",className:"h-11 w-11 shrink-0 rounded-xl",disabled:c,children:c?U.jsx(ol,{className:"h-5 w-5 animate-spin"}):U.jsx(C4,{className:"h-5 w-5"})})]}),E&&U.jsx(cD,{onScanResult:I,onClose:()=>b(!1)}),U.jsx(Em,{mode:"popLayout",children:s.map(A=>{var _,T,D;return U.jsxs(Vs.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},exit:{opacity:0,y:-10},className:"mb-3 flex gap-3 rounded-xl bg-card p-3 shadow-sm",children:[U.jsx("img",{src:((T=(_=A.volumeInfo.imageLinks)==null?void 0:_.thumbnail)==null?void 0:T.replace("http:","https:"))||"/placeholder.svg",alt:A.volumeInfo.title,className:"h-24 w-16 shrink-0 rounded-lg object-cover"}),U.jsxs("div",{className:"flex min-w-0 flex-1 flex-col justify-between",children:[U.jsxs("div",{children:[U.jsx("p",{className:"truncate font-semibold leading-tight",children:A.volumeInfo.title}),U.jsx("p",{className:"truncate text-sm text-muted-foreground",children:((D=A.volumeInfo.authors)==null?void 0:D.join(", "))||"Unbekannt"})]}),U.jsx(Us,{size:"sm",className:"mt-2 w-fit rounded-lg",disabled:g.has(A.id)||y===A.id,onClick:()=>R(A),children:g.has(A.id)?U.jsxs(U.Fragment,{children:[U.jsx(x4,{className:"h-4 w-4"})," Hinzugefgt"]}):y===A.id?U.jsx(ol,{className:"h-4 w-4 animate-spin"}):U.jsxs(U.Fragment,{children:[U.jsx(b4,{className:"h-4 w-4"})," Hinzufgen"]})})]})]},A.id)})}),s.length===0&&!c&&U.jsxs("div",{className:"mt-16 text-center text-muted-foreground",children:[U.jsx(o9,{className:"mx-auto mb-3 h-16 w-16 opacity-30"}),U.jsx("p",{children:"Suche nach einem Buch, um es dem Buchclub vorzuschlagen"})]})]})}function o9({className:t}){return U.jsx("svg",{className:t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",children:U.jsx("path",{d:"M4 19.5v-15A2.5 2.5 0 0 1 6.5 2H20v20H6.5a2.5 2.5 0 0 1 0-5H20"})})}function a9({book:t,onSwipe:e,isTop:n}){const r=c_(0),s=Nd(r,[-200,200],[-15,15]),o=Nd(r,[0,100],[0,1]),c=Nd(r,[-100,0],[1,0]),h=(g,p)=>{p.offset.x>100?e("right"):p.offset.x<-100&&e("left")};return U.jsx(Vs.div,{className:"absolute inset-0 cursor-grab active:cursor-grabbing",style:{x:r,rotate:s,zIndex:n?10:0},drag:n?"x":!1,dragConstraints:{left:0,right:0},dragElastic:.9,onDragEnd:h,initial:{scale:n?1:.95,opacity:n?1:.7},animate:{scale:n?1:.95,opacity:n?1:.7},exit:{x:300,opacity:0,transition:{duration:.3}},children:U.jsxs("div",{className:"relative h-full w-full overflow-hidden rounded-2xl bg-card shadow-lg",children:[U.jsx("div",{className:"flex h-[65%] items-center justify-center bg-secondary/50 p-6",children:U.jsx("img",{src:t.cover_url||"/placeholder.svg",alt:t.title,className:"max-h-full rounded-lg object-contain shadow-md"})}),U.jsxs("div",{className:"p-5",children:[U.jsx("h3",{className:"text-xl font-bold leading-tight",children:t.title}),U.jsx("p",{className:"mt-1 text-muted-foreground",children:t.author})]}),U.jsx(Vs.div,{className:"absolute inset-0 flex items-center justify-center rounded-2xl bg-success/20",style:{opacity:o},children:U.jsx(_g,{className:"h-24 w-24 text-success fill-success"})}),U.jsx(Vs.div,{className:"absolute inset-0 flex items-center justify-center rounded-2xl bg-destructive/20",style:{opacity:c},children:U.jsx(Tg,{className:"h-24 w-24 text-destructive"})})]})})}function l9({userName:t,userId:e}){const[n,r]=M.useState([]),[s,o]=M.useState(!0),c=M.useCallback(async()=>{o(!0);try{const{data:g}=await Zn.from("votes").select("book_id").eq("user_id",e),p=(g||[]).map(E=>E.book_id);let y=Zn.from("books").select("id, title, author, cover_url");p.length>0&&(y=y.not("id","in",`(${p.join(",")})`));const{data:x}=await y.order("created_at",{ascending:!1});r(x||[])}catch{Dn.error("Fehler beim Laden der Bcher")}finally{o(!1)}},[e]);M.useEffect(()=>{c()},[c]);const h=async g=>{const p=n[0];if(p){r(y=>y.slice(1));try{await Zn.from("votes").insert({book_id:p.id,user_name:t,user_id:e,vote_value:g==="right"?1:-1})}catch{Dn.error("Fehler beim Speichern")}}};return s?U.jsx("div",{className:"flex h-[70vh] items-center justify-center",children:U.jsx(ol,{className:"h-8 w-8 animate-spin text-primary"})}):n.length===0?U.jsxs("div",{className:"flex h-[70vh] flex-col items-center justify-center px-6 text-center",children:[U.jsx(Qb,{className:"mb-4 h-16 w-16 text-muted-foreground/30"}),U.jsx("h3",{className:"text-xl font-bold",children:"Alle Bcher bewertet!"}),U.jsx("p",{className:"mt-2 text-muted-foreground",children:"Schlag neue Bcher vor oder warte auf Vorschlge deines Buchclubs."})]}):U.jsxs("div",{className:"flex flex-col items-center px-4 pb-24 pt-4",children:[U.jsx("h2",{className:"mb-4 self-start text-2xl font-bold",children:"Swipen"}),U.jsx("div",{className:"relative h-[60vh] w-full max-w-sm",children:U.jsx(Em,{children:n.slice(0,2).map((g,p)=>U.jsx(a9,{book:g,isTop:p===0,onSwipe:h},g.id))})}),U.jsxs("div",{className:"mt-6 flex gap-6",children:[U.jsx(Us,{size:"icon",variant:"outline",className:"h-16 w-16 rounded-full border-2 border-destructive text-destructive hover:bg-destructive hover:text-destructive-foreground",onClick:()=>h("left"),children:U.jsx(Tg,{className:"h-7 w-7"})}),U.jsx(Us,{size:"icon",className:"h-16 w-16 rounded-full bg-success text-success-foreground hover:bg-success/90",onClick:()=>h("right"),children:U.jsx(_g,{className:"h-7 w-7"})})]})]})}function c9(){const[t,e]=M.useState([]),[n,r]=M.useState(!0);return M.useEffect(()=>{(async()=>{const{data:o}=await Zn.from("books").select("id, title, author, cover_url"),{data:c}=await Zn.from("votes").select("book_id, user_name, vote_value");if(!o){r(!1);return}const h=o.map(g=>{const p=(c||[]).filter(E=>E.book_id===g.id),y=p.filter(E=>E.vote_value===1).length,x=p.filter(E=>E.vote_value===1).map(E=>E.user_name);return{...g,likes:y,likedBy:x}});h.sort((g,p)=>p.likes-g.likes),e(h),r(!1)})()},[]),n?U.jsx("div",{className:"flex h-[70vh] items-center justify-center",children:U.jsx(ol,{className:"h-8 w-8 animate-spin text-primary"})}):U.jsxs("div",{className:"px-4 pb-24 pt-4",children:[U.jsx("h2",{className:"mb-4 text-2xl font-bold",children:"Ranking"}),t.length===0?U.jsx("p",{className:"mt-16 text-center text-muted-foreground",children:"Noch keine Bcher vorgeschlagen."}):t.map((s,o)=>U.jsxs(Vs.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{delay:o*.05},className:"mb-3 flex gap-3 rounded-xl bg-card p-3 shadow-sm",children:[U.jsx("div",{className:"flex h-10 w-10 shrink-0 items-center justify-center rounded-full bg-primary/10 font-bold text-primary",children:o+1}),U.jsx("img",{src:s.cover_url||"/placeholder.svg",alt:s.title,className:"h-20 w-14 shrink-0 rounded-lg object-cover"}),U.jsxs("div",{className:"flex min-w-0 flex-1 flex-col justify-between",children:[U.jsxs("div",{children:[U.jsx("p",{className:"truncate font-semibold leading-tight",children:s.title}),U.jsx("p",{className:"truncate text-sm text-muted-foreground",children:s.author})]}),U.jsxs("div",{className:"mt-1 flex items-center gap-1 text-sm",children:[U.jsx(_g,{className:"h-4 w-4 fill-primary text-primary"}),U.jsx("span",{className:"font-medium text-primary",children:s.likes}),s.likedBy.length>0&&U.jsxs("span",{className:"ml-1 truncate text-muted-foreground",children:[" ",s.likedBy.join(", ")]})]})]})]},s.id))]})}const u9=()=>{const{user:t,loading:e,displayName:n,signOut:r}=E6(),s=eS(),[o,c]=M.useState("swipe");if(M.useEffect(()=>{!e&&!t&&s("/auth")},[e,t,s]),e)return U.jsx("div",{className:"flex min-h-screen items-center justify-center",children:U.jsx(ol,{className:"h-8 w-8 animate-spin text-primary"})});if(!t)return null;const h=n||t.email||"User";return U.jsxs("div",{className:"mx-auto min-h-screen max-w-md bg-background",children:[U.jsxs("header",{className:"flex items-center justify-between px-4 pt-3 pb-1",children:[U.jsxs("span",{className:"text-sm text-muted-foreground",children:["Hallo, ",h]}),U.jsxs(Us,{variant:"ghost",size:"sm",onClick:r,className:"text-muted-foreground",children:[U.jsx(E4,{className:"h-4 w-4 mr-1"}),"Logout"]})]}),o==="suggest"&&U.jsx(s9,{userName:h,userId:t.id}),o==="swipe"&&U.jsx(l9,{userName:h,userId:t.id}),o==="ranking"&&U.jsx(c9,{}),U.jsx(C6,{activeTab:o,onTabChange:c})]})};var st;(function(t){t.assertEqual=s=>{};function e(s){}t.assertIs=e;function n(s){throw new Error}t.assertNever=n,t.arrayToEnum=s=>{const o={};for(const c of s)o[c]=c;return o},t.getValidEnumValues=s=>{const o=t.objectKeys(s).filter(h=>typeof s[s[h]]!="number"),c={};for(const h of o)c[h]=s[h];return t.objectValues(c)},t.objectValues=s=>t.objectKeys(s).map(function(o){return s[o]}),t.objectKeys=typeof Object.keys=="function"?s=>Object.keys(s):s=>{const o=[];for(const c in s)Object.prototype.hasOwnProperty.call(s,c)&&o.push(c);return o},t.find=(s,o)=>{for(const c of s)if(o(c))return c},t.isInteger=typeof Number.isInteger=="function"?s=>Number.isInteger(s):s=>typeof s=="number"&&Number.isFinite(s)&&Math.floor(s)===s;function r(s,o=" | "){return s.map(c=>typeof c=="string"?`'${c}'`:c).join(o)}t.joinValues=r,t.jsonStringifyReplacer=(s,o)=>typeof o=="bigint"?o.toString():o})(st||(st={}));var Lv;(function(t){t.mergeShapes=(e,n)=>({...e,...n})})(Lv||(Lv={}));const Ce=st.arrayToEnum(["string","nan","number","integer","float","boolean","date","bigint","symbol","function","undefined","null","array","object","unknown","promise","void","never","map","set"]),ws=t=>{switch(typeof t){case"undefined":return Ce.undefined;case"string":return Ce.string;case"number":return Number.isNaN(t)?Ce.nan:Ce.number;case"boolean":return Ce.boolean;case"function":return Ce.function;case"bigint":return Ce.bigint;case"symbol":return Ce.symbol;case"object":return Array.isArray(t)?Ce.array:t===null?Ce.null:t.then&&typeof t.then=="function"&&t.catch&&typeof t.catch=="function"?Ce.promise:typeof Map<"u"&&t instanceof Map?Ce.map:typeof Set<"u"&&t instanceof Set?Ce.set:typeof Date<"u"&&t instanceof Date?Ce.date:Ce.object;default:return Ce.unknown}},le=st.arrayToEnum(["invalid_type","invalid_literal","custom","invalid_union","invalid_union_discriminator","invalid_enum_value","unrecognized_keys","invalid_arguments","invalid_return_type","invalid_date","invalid_string","too_small","too_big","invalid_intersection_types","not_multiple_of","not_finite"]);class Ji extends Error{get errors(){return this.issues}constructor(e){super(),this.issues=[],this.addIssue=r=>{this.issues=[...this.issues,r]},this.addIssues=(r=[])=>{this.issues=[...this.issues,...r]};const n=new.target.prototype;Object.setPrototypeOf?Object.setPrototypeOf(this,n):this.__proto__=n,this.name="ZodError",this.issues=e}format(e){const n=e||function(o){return o.message},r={_errors:[]},s=o=>{for(const c of o.issues)if(c.code==="invalid_union")c.unionErrors.map(s);else if(c.code==="invalid_return_type")s(c.returnTypeError);else if(c.code==="invalid_arguments")s(c.argumentsError);else if(c.path.length===0)r._errors.push(n(c));else{let h=r,g=0;for(;g<c.path.length;){const p=c.path[g];g===c.path.length-1?(h[p]=h[p]||{_errors:[]},h[p]._errors.push(n(c))):h[p]=h[p]||{_errors:[]},h=h[p],g++}}};return s(this),r}static assert(e){if(!(e instanceof Ji))throw new Error(`Not a ZodError: ${e}`)}toString(){return this.message}get message(){return JSON.stringify(this.issues,st.jsonStringifyReplacer,2)}get isEmpty(){return this.issues.length===0}flatten(e=n=>n.message){const n={},r=[];for(const s of this.issues)if(s.path.length>0){const o=s.path[0];n[o]=n[o]||[],n[o].push(e(s))}else r.push(e(s));return{formErrors:r,fieldErrors:n}}get formErrors(){return this.flatten()}}Ji.create=t=>new Ji(t);const Ep=(t,e)=>{let n;switch(t.code){case le.invalid_type:t.received===Ce.undefined?n="Required":n=`Expected ${t.expected}, received ${t.received}`;break;case le.invalid_literal:n=`Invalid literal value, expected ${JSON.stringify(t.expected,st.jsonStringifyReplacer)}`;break;case le.unrecognized_keys:n=`Unrecognized key(s) in object: ${st.joinValues(t.keys,", ")}`;break;case le.invalid_union:n="Invalid input";break;case le.invalid_union_discriminator:n=`Invalid discriminator value. Expected ${st.joinValues(t.options)}`;break;case le.invalid_enum_value:n=`Invalid enum value. Expected ${st.joinValues(t.options)}, received '${t.received}'`;break;case le.invalid_arguments:n="Invalid function arguments";break;case le.invalid_return_type:n="Invalid function return type";break;case le.invalid_date:n="Invalid date";break;case le.invalid_string:typeof t.validation=="object"?"includes"in t.validation?(n=`Invalid input: must include "${t.validation.includes}"`,typeof t.validation.position=="number"&&(n=`${n} at one or more positions greater than or equal to ${t.validation.position}`)):"startsWith"in t.validation?n=`Invalid input: must start with "${t.validation.startsWith}"`:"endsWith"in t.validation?n=`Invalid input: must end with "${t.validation.endsWith}"`:st.assertNever(t.validation):t.validation!=="regex"?n=`Invalid ${t.validation}`:n="Invalid";break;case le.too_small:t.type==="array"?n=`Array must contain ${t.exact?"exactly":t.inclusive?"at least":"more than"} ${t.minimum} element(s)`:t.type==="string"?n=`String must contain ${t.exact?"exactly":t.inclusive?"at least":"over"} ${t.minimum} character(s)`:t.type==="number"?n=`Number must be ${t.exact?"exactly equal to ":t.inclusive?"greater than or equal to ":"greater than "}${t.minimum}`:t.type==="bigint"?n=`Number must be ${t.exact?"exactly equal to ":t.inclusive?"greater than or equal to ":"greater than "}${t.minimum}`:t.type==="date"?n=`Date must be ${t.exact?"exactly equal to ":t.inclusive?"greater than or equal to ":"greater than "}${new Date(Number(t.minimum))}`:n="Invalid input";break;case le.too_big:t.type==="array"?n=`Array must contain ${t.exact?"exactly":t.inclusive?"at most":"less than"} ${t.maximum} element(s)`:t.type==="string"?n=`String must contain ${t.exact?"exactly":t.inclusive?"at most":"under"} ${t.maximum} character(s)`:t.type==="number"?n=`Number must be ${t.exact?"exactly":t.inclusive?"less than or equal to":"less than"} ${t.maximum}`:t.type==="bigint"?n=`BigInt must be ${t.exact?"exactly":t.inclusive?"less than or equal to":"less than"} ${t.maximum}`:t.type==="date"?n=`Date must be ${t.exact?"exactly":t.inclusive?"smaller than or equal to":"smaller than"} ${new Date(Number(t.maximum))}`:n="Invalid input";break;case le.custom:n="Invalid input";break;case le.invalid_intersection_types:n="Intersection results could not be merged";break;case le.not_multiple_of:n=`Number must be a multiple of ${t.multipleOf}`;break;case le.not_finite:n="Number must be finite";break;default:n=e.defaultError,st.assertNever(t)}return{message:n}};let d9=Ep;function h9(){return d9}const f9=t=>{const{data:e,path:n,errorMaps:r,issueData:s}=t,o=[...n,...s.path||[]],c={...s,path:o};if(s.message!==void 0)return{...s,path:o,message:s.message};let h="";const g=r.filter(p=>!!p).slice().reverse();for(const p of g)h=p(c,{data:e,defaultError:h}).message;return{...s,path:o,message:h}};function pe(t,e){const n=h9(),r=f9({issueData:e,data:t.data,path:t.path,errorMaps:[t.common.contextualErrorMap,t.schemaErrorMap,n,n===Ep?void 0:Ep].filter(s=>!!s)});t.common.issues.push(r)}class gr{constructor(){this.value="valid"}dirty(){this.value==="valid"&&(this.value="dirty")}abort(){this.value!=="aborted"&&(this.value="aborted")}static mergeArray(e,n){const r=[];for(const s of n){if(s.status==="aborted")return Le;s.status==="dirty"&&e.dirty(),r.push(s.value)}return{status:e.value,value:r}}static async mergeObjectAsync(e,n){const r=[];for(const s of n){const o=await s.key,c=await s.value;r.push({key:o,value:c})}return gr.mergeObjectSync(e,r)}static mergeObjectSync(e,n){const r={};for(const s of n){const{key:o,value:c}=s;if(o.status==="aborted"||c.status==="aborted")return Le;o.status==="dirty"&&e.dirty(),c.status==="dirty"&&e.dirty(),o.value!=="__proto__"&&(typeof c.value<"u"||s.alwaysSet)&&(r[o.value]=c.value)}return{status:e.value,value:r}}}const Le=Object.freeze({status:"aborted"}),tc=t=>({status:"dirty",value:t}),Mr=t=>({status:"valid",value:t}),Bv=t=>t.status==="aborted",Fv=t=>t.status==="dirty",ul=t=>t.status==="valid",Eh=t=>typeof Promise<"u"&&t instanceof Promise;var Se;(function(t){t.errToObj=e=>typeof e=="string"?{message:e}:e||{},t.toString=e=>typeof e=="string"?e:e==null?void 0:e.message})(Se||(Se={}));class Zs{constructor(e,n,r,s){this._cachedPath=[],this.parent=e,this.data=n,this._path=r,this._key=s}get path(){return this._cachedPath.length||(Array.isArray(this._key)?this._cachedPath.push(...this._path,...this._key):this._cachedPath.push(...this._path,this._key)),this._cachedPath}}const jv=(t,e)=>{if(ul(e))return{success:!0,data:e.value};if(!t.common.issues.length)throw new Error("Validation failed but no issues detected.");return{success:!1,get error(){if(this._error)return this._error;const n=new Ji(t.common.issues);return this._error=n,this._error}}};function Ge(t){if(!t)return{};const{errorMap:e,invalid_type_error:n,required_error:r,description:s}=t;if(e&&(n||r))throw new Error(`Can't use "invalid_type_error" or "required_error" in conjunction with custom error map.`);return e?{errorMap:e,description:s}:{errorMap:(c,h)=>{const{message:g}=t;return c.code==="invalid_enum_value"?{message:g??h.defaultError}:typeof h.data>"u"?{message:g??r??h.defaultError}:c.code!=="invalid_type"?{message:h.defaultError}:{message:g??n??h.defaultError}},description:s}}class tt{get description(){return this._def.description}_getType(e){return ws(e.data)}_getOrReturnCtx(e,n){return n||{common:e.parent.common,data:e.data,parsedType:ws(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}_processInputParams(e){return{status:new gr,ctx:{common:e.parent.common,data:e.data,parsedType:ws(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}}_parseSync(e){const n=this._parse(e);if(Eh(n))throw new Error("Synchronous parse encountered promise.");return n}_parseAsync(e){const n=this._parse(e);return Promise.resolve(n)}parse(e,n){const r=this.safeParse(e,n);if(r.success)return r.data;throw r.error}safeParse(e,n){const r={common:{issues:[],async:(n==null?void 0:n.async)??!1,contextualErrorMap:n==null?void 0:n.errorMap},path:(n==null?void 0:n.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:ws(e)},s=this._parseSync({data:e,path:r.path,parent:r});return jv(r,s)}"~validate"(e){var r,s;const n={common:{issues:[],async:!!this["~standard"].async},path:[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:ws(e)};if(!this["~standard"].async)try{const o=this._parseSync({data:e,path:[],parent:n});return ul(o)?{value:o.value}:{issues:n.common.issues}}catch(o){(s=(r=o==null?void 0:o.message)==null?void 0:r.toLowerCase())!=null&&s.includes("encountered")&&(this["~standard"].async=!0),n.common={issues:[],async:!0}}return this._parseAsync({data:e,path:[],parent:n}).then(o=>ul(o)?{value:o.value}:{issues:n.common.issues})}async parseAsync(e,n){const r=await this.safeParseAsync(e,n);if(r.success)return r.data;throw r.error}async safeParseAsync(e,n){const r={common:{issues:[],contextualErrorMap:n==null?void 0:n.errorMap,async:!0},path:(n==null?void 0:n.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:ws(e)},s=this._parse({data:e,path:r.path,parent:r}),o=await(Eh(s)?s:Promise.resolve(s));return jv(r,o)}refine(e,n){const r=s=>typeof n=="string"||typeof n>"u"?{message:n}:typeof n=="function"?n(s):n;return this._refinement((s,o)=>{const c=e(s),h=()=>o.addIssue({code:le.custom,...r(s)});return typeof Promise<"u"&&c instanceof Promise?c.then(g=>g?!0:(h(),!1)):c?!0:(h(),!1)})}refinement(e,n){return this._refinement((r,s)=>e(r)?!0:(s.addIssue(typeof n=="function"?n(r,s):n),!1))}_refinement(e){return new hl({schema:this,typeName:Be.ZodEffects,effect:{type:"refinement",refinement:e}})}superRefine(e){return this._refinement(e)}constructor(e){this.spa=this.safeParseAsync,this._def=e,this.parse=this.parse.bind(this),this.safeParse=this.safeParse.bind(this),this.parseAsync=this.parseAsync.bind(this),this.safeParseAsync=this.safeParseAsync.bind(this),this.spa=this.spa.bind(this),this.refine=this.refine.bind(this),this.refinement=this.refinement.bind(this),this.superRefine=this.superRefine.bind(this),this.optional=this.optional.bind(this),this.nullable=this.nullable.bind(this),this.nullish=this.nullish.bind(this),this.array=this.array.bind(this),this.promise=this.promise.bind(this),this.or=this.or.bind(this),this.and=this.and.bind(this),this.transform=this.transform.bind(this),this.brand=this.brand.bind(this),this.default=this.default.bind(this),this.catch=this.catch.bind(this),this.describe=this.describe.bind(this),this.pipe=this.pipe.bind(this),this.readonly=this.readonly.bind(this),this.isNullable=this.isNullable.bind(this),this.isOptional=this.isOptional.bind(this),this["~standard"]={version:1,vendor:"zod",validate:n=>this["~validate"](n)}}optional(){return zs.create(this,this._def)}nullable(){return fl.create(this,this._def)}nullish(){return this.nullable().optional()}array(){return Ri.create(this)}promise(){return Ah.create(this,this._def)}or(e){return Ch.create([this,e],this._def)}and(e){return Sh.create(this,e,this._def)}transform(e){return new hl({...Ge(this._def),schema:this,typeName:Be.ZodEffects,effect:{type:"transform",transform:e}})}default(e){const n=typeof e=="function"?e:()=>e;return new Cp({...Ge(this._def),innerType:this,defaultValue:n,typeName:Be.ZodDefault})}brand(){return new L9({typeName:Be.ZodBranded,type:this,...Ge(this._def)})}catch(e){const n=typeof e=="function"?e:()=>e;return new Sp({...Ge(this._def),innerType:this,catchValue:n,typeName:Be.ZodCatch})}describe(e){const n=this.constructor;return new n({...this._def,description:e})}pipe(e){return Sm.create(this,e)}readonly(){return Ap.create(this)}isOptional(){return this.safeParse(void 0).success}isNullable(){return this.safeParse(null).success}}const p9=/^c[^\s-]{8,}$/i,g9=/^[0-9a-z]+$/,m9=/^[0-9A-HJKMNP-TV-Z]{26}$/i,y9=/^[0-9a-fA-F]{8}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{12}$/i,w9=/^[a-z0-9_-]{21}$/i,x9=/^[A-Za-z0-9-_]+\.[A-Za-z0-9-_]+\.[A-Za-z0-9-_]*$/,v9=/^[-+]?P(?!$)(?:(?:[-+]?\d+Y)|(?:[-+]?\d+[.,]\d+Y$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:(?:[-+]?\d+W)|(?:[-+]?\d+[.,]\d+W$))?(?:(?:[-+]?\d+D)|(?:[-+]?\d+[.,]\d+D$))?(?:T(?=[\d+-])(?:(?:[-+]?\d+H)|(?:[-+]?\d+[.,]\d+H$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:[-+]?\d+(?:[.,]\d+)?S)?)??$/,E9=/^(?!\.)(?!.*\.\.)([A-Z0-9_'+\-\.]*)[A-Z0-9_+-]@([A-Z0-9][A-Z0-9\-]*\.)+[A-Z]{2,}$/i,b9="^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$";let M0;const C9=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,S9=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\/(3[0-2]|[12]?[0-9])$/,A9=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))$/,_9=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))\/(12[0-8]|1[01][0-9]|[1-9]?[0-9])$/,T9=/^([0-9a-zA-Z+/]{4})*(([0-9a-zA-Z+/]{2}==)|([0-9a-zA-Z+/]{3}=))?$/,I9=/^([0-9a-zA-Z-_]{4})*(([0-9a-zA-Z-_]{2}(==)?)|([0-9a-zA-Z-_]{3}(=)?))?$/,d_="((\\d\\d[2468][048]|\\d\\d[13579][26]|\\d\\d0[48]|[02468][048]00|[13579][26]00)-02-29|\\d{4}-((0[13578]|1[02])-(0[1-9]|[12]\\d|3[01])|(0[469]|11)-(0[1-9]|[12]\\d|30)|(02)-(0[1-9]|1\\d|2[0-8])))",R9=new RegExp(`^${d_}$`);function h_(t){let e="[0-5]\\d";t.precision?e=`${e}\\.\\d{${t.precision}}`:t.precision==null&&(e=`${e}(\\.\\d+)?`);const n=t.precision?"+":"?";return`([01]\\d|2[0-3]):[0-5]\\d(:${e})${n}`}function N9(t){return new RegExp(`^${h_(t)}$`)}function O9(t){let e=`${d_}T${h_(t)}`;const n=[];return n.push(t.local?"Z?":"Z"),t.offset&&n.push("([+-]\\d{2}:?\\d{2})"),e=`${e}(${n.join("|")})`,new RegExp(`^${e}$`)}function k9(t,e){return!!((e==="v4"||!e)&&C9.test(t)||(e==="v6"||!e)&&A9.test(t))}function M9(t,e){if(!x9.test(t))return!1;try{const[n]=t.split(".");if(!n)return!1;const r=n.replace(/-/g,"+").replace(/_/g,"/").padEnd(n.length+(4-n.length%4)%4,"="),s=JSON.parse(atob(r));return!(typeof s!="object"||s===null||"typ"in s&&(s==null?void 0:s.typ)!=="JWT"||!s.alg||e&&s.alg!==e)}catch{return!1}}function D9(t,e){return!!((e==="v4"||!e)&&S9.test(t)||(e==="v6"||!e)&&_9.test(t))}class Os extends tt{_parse(e){if(this._def.coerce&&(e.data=String(e.data)),this._getType(e)!==Ce.string){const o=this._getOrReturnCtx(e);return pe(o,{code:le.invalid_type,expected:Ce.string,received:o.parsedType}),Le}const r=new gr;let s;for(const o of this._def.checks)if(o.kind==="min")e.data.length<o.value&&(s=this._getOrReturnCtx(e,s),pe(s,{code:le.too_small,minimum:o.value,type:"string",inclusive:!0,exact:!1,message:o.message}),r.dirty());else if(o.kind==="max")e.data.length>o.value&&(s=this._getOrReturnCtx(e,s),pe(s,{code:le.too_big,maximum:o.value,type:"string",inclusive:!0,exact:!1,message:o.message}),r.dirty());else if(o.kind==="length"){const c=e.data.length>o.value,h=e.data.length<o.value;(c||h)&&(s=this._getOrReturnCtx(e,s),c?pe(s,{code:le.too_big,maximum:o.value,type:"string",inclusive:!0,exact:!0,message:o.message}):h&&pe(s,{code:le.too_small,minimum:o.value,type:"string",inclusive:!0,exact:!0,message:o.message}),r.dirty())}else if(o.kind==="email")E9.test(e.data)||(s=this._getOrReturnCtx(e,s),pe(s,{validation:"email",code:le.invalid_string,message:o.message}),r.dirty());else if(o.kind==="emoji")M0||(M0=new RegExp(b9,"u")),M0.test(e.data)||(s=this._getOrReturnCtx(e,s),pe(s,{validation:"emoji",code:le.invalid_string,message:o.message}),r.dirty());else if(o.kind==="uuid")y9.test(e.data)||(s=this._getOrReturnCtx(e,s),pe(s,{validation:"uuid",code:le.invalid_string,message:o.message}),r.dirty());else if(o.kind==="nanoid")w9.test(e.data)||(s=this._getOrReturnCtx(e,s),pe(s,{validation:"nanoid",code:le.invalid_string,message:o.message}),r.dirty());else if(o.kind==="cuid")p9.test(e.data)||(s=this._getOrReturnCtx(e,s),pe(s,{validation:"cuid",code:le.invalid_string,message:o.message}),r.dirty());else if(o.kind==="cuid2")g9.test(e.data)||(s=this._getOrReturnCtx(e,s),pe(s,{validation:"cuid2",code:le.invalid_string,message:o.message}),r.dirty());else if(o.kind==="ulid")m9.test(e.data)||(s=this._getOrReturnCtx(e,s),pe(s,{validation:"ulid",code:le.invalid_string,message:o.message}),r.dirty());else if(o.kind==="url")try{new URL(e.data)}catch{s=this._getOrReturnCtx(e,s),pe(s,{validation:"url",code:le.invalid_string,message:o.message}),r.dirty()}else o.kind==="regex"?(o.regex.lastIndex=0,o.regex.test(e.data)||(s=this._getOrReturnCtx(e,s),pe(s,{validation:"regex",code:le.invalid_string,message:o.message}),r.dirty())):o.kind==="trim"?e.data=e.data.trim():o.kind==="includes"?e.data.includes(o.value,o.position)||(s=this._getOrReturnCtx(e,s),pe(s,{code:le.invalid_string,validation:{includes:o.value,position:o.position},message:o.message}),r.dirty()):o.kind==="toLowerCase"?e.data=e.data.toLowerCase():o.kind==="toUpperCase"?e.data=e.data.toUpperCase():o.kind==="startsWith"?e.data.startsWith(o.value)||(s=this._getOrReturnCtx(e,s),pe(s,{code:le.invalid_string,validation:{startsWith:o.value},message:o.message}),r.dirty()):o.kind==="endsWith"?e.data.endsWith(o.value)||(s=this._getOrReturnCtx(e,s),pe(s,{code:le.invalid_string,validation:{endsWith:o.value},message:o.message}),r.dirty()):o.kind==="datetime"?O9(o).test(e.data)||(s=this._getOrReturnCtx(e,s),pe(s,{code:le.invalid_string,validation:"datetime",message:o.message}),r.dirty()):o.kind==="date"?R9.test(e.data)||(s=this._getOrReturnCtx(e,s),pe(s,{code:le.invalid_string,validation:"date",message:o.message}),r.dirty()):o.kind==="time"?N9(o).test(e.data)||(s=this._getOrReturnCtx(e,s),pe(s,{code:le.invalid_string,validation:"time",message:o.message}),r.dirty()):o.kind==="duration"?v9.test(e.data)||(s=this._getOrReturnCtx(e,s),pe(s,{validation:"duration",code:le.invalid_string,message:o.message}),r.dirty()):o.kind==="ip"?k9(e.data,o.version)||(s=this._getOrReturnCtx(e,s),pe(s,{validation:"ip",code:le.invalid_string,message:o.message}),r.dirty()):o.kind==="jwt"?M9(e.data,o.alg)||(s=this._getOrReturnCtx(e,s),pe(s,{validation:"jwt",code:le.invalid_string,message:o.message}),r.dirty()):o.kind==="cidr"?D9(e.data,o.version)||(s=this._getOrReturnCtx(e,s),pe(s,{validation:"cidr",code:le.invalid_string,message:o.message}),r.dirty()):o.kind==="base64"?T9.test(e.data)||(s=this._getOrReturnCtx(e,s),pe(s,{validation:"base64",code:le.invalid_string,message:o.message}),r.dirty()):o.kind==="base64url"?I9.test(e.data)||(s=this._getOrReturnCtx(e,s),pe(s,{validation:"base64url",code:le.invalid_string,message:o.message}),r.dirty()):st.assertNever(o);return{status:r.value,value:e.data}}_regex(e,n,r){return this.refinement(s=>e.test(s),{validation:n,code:le.invalid_string,...Se.errToObj(r)})}_addCheck(e){return new Os({...this._def,checks:[...this._def.checks,e]})}email(e){return this._addCheck({kind:"email",...Se.errToObj(e)})}url(e){return this._addCheck({kind:"url",...Se.errToObj(e)})}emoji(e){return this._addCheck({kind:"emoji",...Se.errToObj(e)})}uuid(e){return this._addCheck({kind:"uuid",...Se.errToObj(e)})}nanoid(e){return this._addCheck({kind:"nanoid",...Se.errToObj(e)})}cuid(e){return this._addCheck({kind:"cuid",...Se.errToObj(e)})}cuid2(e){return this._addCheck({kind:"cuid2",...Se.errToObj(e)})}ulid(e){return this._addCheck({kind:"ulid",...Se.errToObj(e)})}base64(e){return this._addCheck({kind:"base64",...Se.errToObj(e)})}base64url(e){return this._addCheck({kind:"base64url",...Se.errToObj(e)})}jwt(e){return this._addCheck({kind:"jwt",...Se.errToObj(e)})}ip(e){return this._addCheck({kind:"ip",...Se.errToObj(e)})}cidr(e){return this._addCheck({kind:"cidr",...Se.errToObj(e)})}datetime(e){return typeof e=="string"?this._addCheck({kind:"datetime",precision:null,offset:!1,local:!1,message:e}):this._addCheck({kind:"datetime",precision:typeof(e==null?void 0:e.precision)>"u"?null:e==null?void 0:e.precision,offset:(e==null?void 0:e.offset)??!1,local:(e==null?void 0:e.local)??!1,...Se.errToObj(e==null?void 0:e.message)})}date(e){return this._addCheck({kind:"date",message:e})}time(e){return typeof e=="string"?this._addCheck({kind:"time",precision:null,message:e}):this._addCheck({kind:"time",precision:typeof(e==null?void 0:e.precision)>"u"?null:e==null?void 0:e.precision,...Se.errToObj(e==null?void 0:e.message)})}duration(e){return this._addCheck({kind:"duration",...Se.errToObj(e)})}regex(e,n){return this._addCheck({kind:"regex",regex:e,...Se.errToObj(n)})}includes(e,n){return this._addCheck({kind:"includes",value:e,position:n==null?void 0:n.position,...Se.errToObj(n==null?void 0:n.message)})}startsWith(e,n){return this._addCheck({kind:"startsWith",value:e,...Se.errToObj(n)})}endsWith(e,n){return this._addCheck({kind:"endsWith",value:e,...Se.errToObj(n)})}min(e,n){return this._addCheck({kind:"min",value:e,...Se.errToObj(n)})}max(e,n){return this._addCheck({kind:"max",value:e,...Se.errToObj(n)})}length(e,n){return this._addCheck({kind:"length",value:e,...Se.errToObj(n)})}nonempty(e){return this.min(1,Se.errToObj(e))}trim(){return new Os({...this._def,checks:[...this._def.checks,{kind:"trim"}]})}toLowerCase(){return new Os({...this._def,checks:[...this._def.checks,{kind:"toLowerCase"}]})}toUpperCase(){return new Os({...this._def,checks:[...this._def.checks,{kind:"toUpperCase"}]})}get isDatetime(){return!!this._def.checks.find(e=>e.kind==="datetime")}get isDate(){return!!this._def.checks.find(e=>e.kind==="date")}get isTime(){return!!this._def.checks.find(e=>e.kind==="time")}get isDuration(){return!!this._def.checks.find(e=>e.kind==="duration")}get isEmail(){return!!this._def.checks.find(e=>e.kind==="email")}get isURL(){return!!this._def.checks.find(e=>e.kind==="url")}get isEmoji(){return!!this._def.checks.find(e=>e.kind==="emoji")}get isUUID(){return!!this._def.checks.find(e=>e.kind==="uuid")}get isNANOID(){return!!this._def.checks.find(e=>e.kind==="nanoid")}get isCUID(){return!!this._def.checks.find(e=>e.kind==="cuid")}get isCUID2(){return!!this._def.checks.find(e=>e.kind==="cuid2")}get isULID(){return!!this._def.checks.find(e=>e.kind==="ulid")}get isIP(){return!!this._def.checks.find(e=>e.kind==="ip")}get isCIDR(){return!!this._def.checks.find(e=>e.kind==="cidr")}get isBase64(){return!!this._def.checks.find(e=>e.kind==="base64")}get isBase64url(){return!!this._def.checks.find(e=>e.kind==="base64url")}get minLength(){let e=null;for(const n of this._def.checks)n.kind==="min"&&(e===null||n.value>e)&&(e=n.value);return e}get maxLength(){let e=null;for(const n of this._def.checks)n.kind==="max"&&(e===null||n.value<e)&&(e=n.value);return e}}Os.create=t=>new Os({checks:[],typeName:Be.ZodString,coerce:(t==null?void 0:t.coerce)??!1,...Ge(t)});function P9(t,e){const n=(t.toString().split(".")[1]||"").length,r=(e.toString().split(".")[1]||"").length,s=n>r?n:r,o=Number.parseInt(t.toFixed(s).replace(".","")),c=Number.parseInt(e.toFixed(s).replace(".",""));return o%c/10**s}class eu extends tt{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte,this.step=this.multipleOf}_parse(e){if(this._def.coerce&&(e.data=Number(e.data)),this._getType(e)!==Ce.number){const o=this._getOrReturnCtx(e);return pe(o,{code:le.invalid_type,expected:Ce.number,received:o.parsedType}),Le}let r;const s=new gr;for(const o of this._def.checks)o.kind==="int"?st.isInteger(e.data)||(r=this._getOrReturnCtx(e,r),pe(r,{code:le.invalid_type,expected:"integer",received:"float",message:o.message}),s.dirty()):o.kind==="min"?(o.inclusive?e.data<o.value:e.data<=o.value)&&(r=this._getOrReturnCtx(e,r),pe(r,{code:le.too_small,minimum:o.value,type:"number",inclusive:o.inclusive,exact:!1,message:o.message}),s.dirty()):o.kind==="max"?(o.inclusive?e.data>o.value:e.data>=o.value)&&(r=this._getOrReturnCtx(e,r),pe(r,{code:le.too_big,maximum:o.value,type:"number",inclusive:o.inclusive,exact:!1,message:o.message}),s.dirty()):o.kind==="multipleOf"?P9(e.data,o.value)!==0&&(r=this._getOrReturnCtx(e,r),pe(r,{code:le.not_multiple_of,multipleOf:o.value,message:o.message}),s.dirty()):o.kind==="finite"?Number.isFinite(e.data)||(r=this._getOrReturnCtx(e,r),pe(r,{code:le.not_finite,message:o.message}),s.dirty()):st.assertNever(o);return{status:s.value,value:e.data}}gte(e,n){return this.setLimit("min",e,!0,Se.toString(n))}gt(e,n){return this.setLimit("min",e,!1,Se.toString(n))}lte(e,n){return this.setLimit("max",e,!0,Se.toString(n))}lt(e,n){return this.setLimit("max",e,!1,Se.toString(n))}setLimit(e,n,r,s){return new eu({...this._def,checks:[...this._def.checks,{kind:e,value:n,inclusive:r,message:Se.toString(s)}]})}_addCheck(e){return new eu({...this._def,checks:[...this._def.checks,e]})}int(e){return this._addCheck({kind:"int",message:Se.toString(e)})}positive(e){return this._addCheck({kind:"min",value:0,inclusive:!1,message:Se.toString(e)})}negative(e){return this._addCheck({kind:"max",value:0,inclusive:!1,message:Se.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:0,inclusive:!0,message:Se.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:0,inclusive:!0,message:Se.toString(e)})}multipleOf(e,n){return this._addCheck({kind:"multipleOf",value:e,message:Se.toString(n)})}finite(e){return this._addCheck({kind:"finite",message:Se.toString(e)})}safe(e){return this._addCheck({kind:"min",inclusive:!0,value:Number.MIN_SAFE_INTEGER,message:Se.toString(e)})._addCheck({kind:"max",inclusive:!0,value:Number.MAX_SAFE_INTEGER,message:Se.toString(e)})}get minValue(){let e=null;for(const n of this._def.checks)n.kind==="min"&&(e===null||n.value>e)&&(e=n.value);return e}get maxValue(){let e=null;for(const n of this._def.checks)n.kind==="max"&&(e===null||n.value<e)&&(e=n.value);return e}get isInt(){return!!this._def.checks.find(e=>e.kind==="int"||e.kind==="multipleOf"&&st.isInteger(e.value))}get isFinite(){let e=null,n=null;for(const r of this._def.checks){if(r.kind==="finite"||r.kind==="int"||r.kind==="multipleOf")return!0;r.kind==="min"?(n===null||r.value>n)&&(n=r.value):r.kind==="max"&&(e===null||r.value<e)&&(e=r.value)}return Number.isFinite(n)&&Number.isFinite(e)}}eu.create=t=>new eu({checks:[],typeName:Be.ZodNumber,coerce:(t==null?void 0:t.coerce)||!1,...Ge(t)});class tu extends tt{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte}_parse(e){if(this._def.coerce)try{e.data=BigInt(e.data)}catch{return this._getInvalidInput(e)}if(this._getType(e)!==Ce.bigint)return this._getInvalidInput(e);let r;const s=new gr;for(const o of this._def.checks)o.kind==="min"?(o.inclusive?e.data<o.value:e.data<=o.value)&&(r=this._getOrReturnCtx(e,r),pe(r,{code:le.too_small,type:"bigint",minimum:o.value,inclusive:o.inclusive,message:o.message}),s.dirty()):o.kind==="max"?(o.inclusive?e.data>o.value:e.data>=o.value)&&(r=this._getOrReturnCtx(e,r),pe(r,{code:le.too_big,type:"bigint",maximum:o.value,inclusive:o.inclusive,message:o.message}),s.dirty()):o.kind==="multipleOf"?e.data%o.value!==BigInt(0)&&(r=this._getOrReturnCtx(e,r),pe(r,{code:le.not_multiple_of,multipleOf:o.value,message:o.message}),s.dirty()):st.assertNever(o);return{status:s.value,value:e.data}}_getInvalidInput(e){const n=this._getOrReturnCtx(e);return pe(n,{code:le.invalid_type,expected:Ce.bigint,received:n.parsedType}),Le}gte(e,n){return this.setLimit("min",e,!0,Se.toString(n))}gt(e,n){return this.setLimit("min",e,!1,Se.toString(n))}lte(e,n){return this.setLimit("max",e,!0,Se.toString(n))}lt(e,n){return this.setLimit("max",e,!1,Se.toString(n))}setLimit(e,n,r,s){return new tu({...this._def,checks:[...this._def.checks,{kind:e,value:n,inclusive:r,message:Se.toString(s)}]})}_addCheck(e){return new tu({...this._def,checks:[...this._def.checks,e]})}positive(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!1,message:Se.toString(e)})}negative(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!1,message:Se.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!0,message:Se.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!0,message:Se.toString(e)})}multipleOf(e,n){return this._addCheck({kind:"multipleOf",value:e,message:Se.toString(n)})}get minValue(){let e=null;for(const n of this._def.checks)n.kind==="min"&&(e===null||n.value>e)&&(e=n.value);return e}get maxValue(){let e=null;for(const n of this._def.checks)n.kind==="max"&&(e===null||n.value<e)&&(e=n.value);return e}}tu.create=t=>new tu({checks:[],typeName:Be.ZodBigInt,coerce:(t==null?void 0:t.coerce)??!1,...Ge(t)});class Uv extends tt{_parse(e){if(this._def.coerce&&(e.data=!!e.data),this._getType(e)!==Ce.boolean){const r=this._getOrReturnCtx(e);return pe(r,{code:le.invalid_type,expected:Ce.boolean,received:r.parsedType}),Le}return Mr(e.data)}}Uv.create=t=>new Uv({typeName:Be.ZodBoolean,coerce:(t==null?void 0:t.coerce)||!1,...Ge(t)});class bh extends tt{_parse(e){if(this._def.coerce&&(e.data=new Date(e.data)),this._getType(e)!==Ce.date){const o=this._getOrReturnCtx(e);return pe(o,{code:le.invalid_type,expected:Ce.date,received:o.parsedType}),Le}if(Number.isNaN(e.data.getTime())){const o=this._getOrReturnCtx(e);return pe(o,{code:le.invalid_date}),Le}const r=new gr;let s;for(const o of this._def.checks)o.kind==="min"?e.data.getTime()<o.value&&(s=this._getOrReturnCtx(e,s),pe(s,{code:le.too_small,message:o.message,inclusive:!0,exact:!1,minimum:o.value,type:"date"}),r.dirty()):o.kind==="max"?e.data.getTime()>o.value&&(s=this._getOrReturnCtx(e,s),pe(s,{code:le.too_big,message:o.message,inclusive:!0,exact:!1,maximum:o.value,type:"date"}),r.dirty()):st.assertNever(o);return{status:r.value,value:new Date(e.data.getTime())}}_addCheck(e){return new bh({...this._def,checks:[...this._def.checks,e]})}min(e,n){return this._addCheck({kind:"min",value:e.getTime(),message:Se.toString(n)})}max(e,n){return this._addCheck({kind:"max",value:e.getTime(),message:Se.toString(n)})}get minDate(){let e=null;for(const n of this._def.checks)n.kind==="min"&&(e===null||n.value>e)&&(e=n.value);return e!=null?new Date(e):null}get maxDate(){let e=null;for(const n of this._def.checks)n.kind==="max"&&(e===null||n.value<e)&&(e=n.value);return e!=null?new Date(e):null}}bh.create=t=>new bh({checks:[],coerce:(t==null?void 0:t.coerce)||!1,typeName:Be.ZodDate,...Ge(t)});class Vv extends tt{_parse(e){if(this._getType(e)!==Ce.symbol){const r=this._getOrReturnCtx(e);return pe(r,{code:le.invalid_type,expected:Ce.symbol,received:r.parsedType}),Le}return Mr(e.data)}}Vv.create=t=>new Vv({typeName:Be.ZodSymbol,...Ge(t)});class zv extends tt{_parse(e){if(this._getType(e)!==Ce.undefined){const r=this._getOrReturnCtx(e);return pe(r,{code:le.invalid_type,expected:Ce.undefined,received:r.parsedType}),Le}return Mr(e.data)}}zv.create=t=>new zv({typeName:Be.ZodUndefined,...Ge(t)});class Hv extends tt{_parse(e){if(this._getType(e)!==Ce.null){const r=this._getOrReturnCtx(e);return pe(r,{code:le.invalid_type,expected:Ce.null,received:r.parsedType}),Le}return Mr(e.data)}}Hv.create=t=>new Hv({typeName:Be.ZodNull,...Ge(t)});class Wv extends tt{constructor(){super(...arguments),this._any=!0}_parse(e){return Mr(e.data)}}Wv.create=t=>new Wv({typeName:Be.ZodAny,...Ge(t)});class $v extends tt{constructor(){super(...arguments),this._unknown=!0}_parse(e){return Mr(e.data)}}$v.create=t=>new $v({typeName:Be.ZodUnknown,...Ge(t)});class Qs extends tt{_parse(e){const n=this._getOrReturnCtx(e);return pe(n,{code:le.invalid_type,expected:Ce.never,received:n.parsedType}),Le}}Qs.create=t=>new Qs({typeName:Be.ZodNever,...Ge(t)});class Gv extends tt{_parse(e){if(this._getType(e)!==Ce.undefined){const r=this._getOrReturnCtx(e);return pe(r,{code:le.invalid_type,expected:Ce.void,received:r.parsedType}),Le}return Mr(e.data)}}Gv.create=t=>new Gv({typeName:Be.ZodVoid,...Ge(t)});class Ri extends tt{_parse(e){const{ctx:n,status:r}=this._processInputParams(e),s=this._def;if(n.parsedType!==Ce.array)return pe(n,{code:le.invalid_type,expected:Ce.array,received:n.parsedType}),Le;if(s.exactLength!==null){const c=n.data.length>s.exactLength.value,h=n.data.length<s.exactLength.value;(c||h)&&(pe(n,{code:c?le.too_big:le.too_small,minimum:h?s.exactLength.value:void 0,maximum:c?s.exactLength.value:void 0,type:"array",inclusive:!0,exact:!0,message:s.exactLength.message}),r.dirty())}if(s.minLength!==null&&n.data.length<s.minLength.value&&(pe(n,{code:le.too_small,minimum:s.minLength.value,type:"array",inclusive:!0,exact:!1,message:s.minLength.message}),r.dirty()),s.maxLength!==null&&n.data.length>s.maxLength.value&&(pe(n,{code:le.too_big,maximum:s.maxLength.value,type:"array",inclusive:!0,exact:!1,message:s.maxLength.message}),r.dirty()),n.common.async)return Promise.all([...n.data].map((c,h)=>s.type._parseAsync(new Zs(n,c,n.path,h)))).then(c=>gr.mergeArray(r,c));const o=[...n.data].map((c,h)=>s.type._parseSync(new Zs(n,c,n.path,h)));return gr.mergeArray(r,o)}get element(){return this._def.type}min(e,n){return new Ri({...this._def,minLength:{value:e,message:Se.toString(n)}})}max(e,n){return new Ri({...this._def,maxLength:{value:e,message:Se.toString(n)}})}length(e,n){return new Ri({...this._def,exactLength:{value:e,message:Se.toString(n)}})}nonempty(e){return this.min(1,e)}}Ri.create=(t,e)=>new Ri({type:t,minLength:null,maxLength:null,exactLength:null,typeName:Be.ZodArray,...Ge(e)});function ga(t){if(t instanceof zt){const e={};for(const n in t.shape){const r=t.shape[n];e[n]=zs.create(ga(r))}return new zt({...t._def,shape:()=>e})}else return t instanceof Ri?new Ri({...t._def,type:ga(t.element)}):t instanceof zs?zs.create(ga(t.unwrap())):t instanceof fl?fl.create(ga(t.unwrap())):t instanceof $o?$o.create(t.items.map(e=>ga(e))):t}class zt extends tt{constructor(){super(...arguments),this._cached=null,this.nonstrict=this.passthrough,this.augment=this.extend}_getCached(){if(this._cached!==null)return this._cached;const e=this._def.shape(),n=st.objectKeys(e);return this._cached={shape:e,keys:n},this._cached}_parse(e){if(this._getType(e)!==Ce.object){const p=this._getOrReturnCtx(e);return pe(p,{code:le.invalid_type,expected:Ce.object,received:p.parsedType}),Le}const{status:r,ctx:s}=this._processInputParams(e),{shape:o,keys:c}=this._getCached(),h=[];if(!(this._def.catchall instanceof Qs&&this._def.unknownKeys==="strip"))for(const p in s.data)c.includes(p)||h.push(p);const g=[];for(const p of c){const y=o[p],x=s.data[p];g.push({key:{status:"valid",value:p},value:y._parse(new Zs(s,x,s.path,p)),alwaysSet:p in s.data})}if(this._def.catchall instanceof Qs){const p=this._def.unknownKeys;if(p==="passthrough")for(const y of h)g.push({key:{status:"valid",value:y},value:{status:"valid",value:s.data[y]}});else if(p==="strict")h.length>0&&(pe(s,{code:le.unrecognized_keys,keys:h}),r.dirty());else if(p!=="strip")throw new Error("Internal ZodObject error: invalid unknownKeys value.")}else{const p=this._def.catchall;for(const y of h){const x=s.data[y];g.push({key:{status:"valid",value:y},value:p._parse(new Zs(s,x,s.path,y)),alwaysSet:y in s.data})}}return s.common.async?Promise.resolve().then(async()=>{const p=[];for(const y of g){const x=await y.key,E=await y.value;p.push({key:x,value:E,alwaysSet:y.alwaysSet})}return p}).then(p=>gr.mergeObjectSync(r,p)):gr.mergeObjectSync(r,g)}get shape(){return this._def.shape()}strict(e){return Se.errToObj,new zt({...this._def,unknownKeys:"strict",...e!==void 0?{errorMap:(n,r)=>{var o,c;const s=((c=(o=this._def).errorMap)==null?void 0:c.call(o,n,r).message)??r.defaultError;return n.code==="unrecognized_keys"?{message:Se.errToObj(e).message??s}:{message:s}}}:{}})}strip(){return new zt({...this._def,unknownKeys:"strip"})}passthrough(){return new zt({...this._def,unknownKeys:"passthrough"})}extend(e){return new zt({...this._def,shape:()=>({...this._def.shape(),...e})})}merge(e){return new zt({unknownKeys:e._def.unknownKeys,catchall:e._def.catchall,shape:()=>({...this._def.shape(),...e._def.shape()}),typeName:Be.ZodObject})}setKey(e,n){return this.augment({[e]:n})}catchall(e){return new zt({...this._def,catchall:e})}pick(e){const n={};for(const r of st.objectKeys(e))e[r]&&this.shape[r]&&(n[r]=this.shape[r]);return new zt({...this._def,shape:()=>n})}omit(e){const n={};for(const r of st.objectKeys(this.shape))e[r]||(n[r]=this.shape[r]);return new zt({...this._def,shape:()=>n})}deepPartial(){return ga(this)}partial(e){const n={};for(const r of st.objectKeys(this.shape)){const s=this.shape[r];e&&!e[r]?n[r]=s:n[r]=s.optional()}return new zt({...this._def,shape:()=>n})}required(e){const n={};for(const r of st.objectKeys(this.shape))if(e&&!e[r])n[r]=this.shape[r];else{let o=this.shape[r];for(;o instanceof zs;)o=o._def.innerType;n[r]=o}return new zt({...this._def,shape:()=>n})}keyof(){return f_(st.objectKeys(this.shape))}}zt.create=(t,e)=>new zt({shape:()=>t,unknownKeys:"strip",catchall:Qs.create(),typeName:Be.ZodObject,...Ge(e)});zt.strictCreate=(t,e)=>new zt({shape:()=>t,unknownKeys:"strict",catchall:Qs.create(),typeName:Be.ZodObject,...Ge(e)});zt.lazycreate=(t,e)=>new zt({shape:t,unknownKeys:"strip",catchall:Qs.create(),typeName:Be.ZodObject,...Ge(e)});class Ch extends tt{_parse(e){const{ctx:n}=this._processInputParams(e),r=this._def.options;function s(o){for(const h of o)if(h.result.status==="valid")return h.result;for(const h of o)if(h.result.status==="dirty")return n.common.issues.push(...h.ctx.common.issues),h.result;const c=o.map(h=>new Ji(h.ctx.common.issues));return pe(n,{code:le.invalid_union,unionErrors:c}),Le}if(n.common.async)return Promise.all(r.map(async o=>{const c={...n,common:{...n.common,issues:[]},parent:null};return{result:await o._parseAsync({data:n.data,path:n.path,parent:c}),ctx:c}})).then(s);{let o;const c=[];for(const g of r){const p={...n,common:{...n.common,issues:[]},parent:null},y=g._parseSync({data:n.data,path:n.path,parent:p});if(y.status==="valid")return y;y.status==="dirty"&&!o&&(o={result:y,ctx:p}),p.common.issues.length&&c.push(p.common.issues)}if(o)return n.common.issues.push(...o.ctx.common.issues),o.result;const h=c.map(g=>new Ji(g));return pe(n,{code:le.invalid_union,unionErrors:h}),Le}}get options(){return this._def.options}}Ch.create=(t,e)=>new Ch({options:t,typeName:Be.ZodUnion,...Ge(e)});function bp(t,e){const n=ws(t),r=ws(e);if(t===e)return{valid:!0,data:t};if(n===Ce.object&&r===Ce.object){const s=st.objectKeys(e),o=st.objectKeys(t).filter(h=>s.indexOf(h)!==-1),c={...t,...e};for(const h of o){const g=bp(t[h],e[h]);if(!g.valid)return{valid:!1};c[h]=g.data}return{valid:!0,data:c}}else if(n===Ce.array&&r===Ce.array){if(t.length!==e.length)return{valid:!1};const s=[];for(let o=0;o<t.length;o++){const c=t[o],h=e[o],g=bp(c,h);if(!g.valid)return{valid:!1};s.push(g.data)}return{valid:!0,data:s}}else return n===Ce.date&&r===Ce.date&&+t==+e?{valid:!0,data:t}:{valid:!1}}class Sh extends tt{_parse(e){const{status:n,ctx:r}=this._processInputParams(e),s=(o,c)=>{if(Bv(o)||Bv(c))return Le;const h=bp(o.value,c.value);return h.valid?((Fv(o)||Fv(c))&&n.dirty(),{status:n.value,value:h.data}):(pe(r,{code:le.invalid_intersection_types}),Le)};return r.common.async?Promise.all([this._def.left._parseAsync({data:r.data,path:r.path,parent:r}),this._def.right._parseAsync({data:r.data,path:r.path,parent:r})]).then(([o,c])=>s(o,c)):s(this._def.left._parseSync({data:r.data,path:r.path,parent:r}),this._def.right._parseSync({data:r.data,path:r.path,parent:r}))}}Sh.create=(t,e,n)=>new Sh({left:t,right:e,typeName:Be.ZodIntersection,...Ge(n)});class $o extends tt{_parse(e){const{status:n,ctx:r}=this._processInputParams(e);if(r.parsedType!==Ce.array)return pe(r,{code:le.invalid_type,expected:Ce.array,received:r.parsedType}),Le;if(r.data.length<this._def.items.length)return pe(r,{code:le.too_small,minimum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),Le;!this._def.rest&&r.data.length>this._def.items.length&&(pe(r,{code:le.too_big,maximum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),n.dirty());const o=[...r.data].map((c,h)=>{const g=this._def.items[h]||this._def.rest;return g?g._parse(new Zs(r,c,r.path,h)):null}).filter(c=>!!c);return r.common.async?Promise.all(o).then(c=>gr.mergeArray(n,c)):gr.mergeArray(n,o)}get items(){return this._def.items}rest(e){return new $o({...this._def,rest:e})}}$o.create=(t,e)=>{if(!Array.isArray(t))throw new Error("You must pass an array of schemas to z.tuple([ ... ])");return new $o({items:t,typeName:Be.ZodTuple,rest:null,...Ge(e)})};class Yv extends tt{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){const{status:n,ctx:r}=this._processInputParams(e);if(r.parsedType!==Ce.map)return pe(r,{code:le.invalid_type,expected:Ce.map,received:r.parsedType}),Le;const s=this._def.keyType,o=this._def.valueType,c=[...r.data.entries()].map(([h,g],p)=>({key:s._parse(new Zs(r,h,r.path,[p,"key"])),value:o._parse(new Zs(r,g,r.path,[p,"value"]))}));if(r.common.async){const h=new Map;return Promise.resolve().then(async()=>{for(const g of c){const p=await g.key,y=await g.value;if(p.status==="aborted"||y.status==="aborted")return Le;(p.status==="dirty"||y.status==="dirty")&&n.dirty(),h.set(p.value,y.value)}return{status:n.value,value:h}})}else{const h=new Map;for(const g of c){const p=g.key,y=g.value;if(p.status==="aborted"||y.status==="aborted")return Le;(p.status==="dirty"||y.status==="dirty")&&n.dirty(),h.set(p.value,y.value)}return{status:n.value,value:h}}}}Yv.create=(t,e,n)=>new Yv({valueType:e,keyType:t,typeName:Be.ZodMap,...Ge(n)});class nu extends tt{_parse(e){const{status:n,ctx:r}=this._processInputParams(e);if(r.parsedType!==Ce.set)return pe(r,{code:le.invalid_type,expected:Ce.set,received:r.parsedType}),Le;const s=this._def;s.minSize!==null&&r.data.size<s.minSize.value&&(pe(r,{code:le.too_small,minimum:s.minSize.value,type:"set",inclusive:!0,exact:!1,message:s.minSize.message}),n.dirty()),s.maxSize!==null&&r.data.size>s.maxSize.value&&(pe(r,{code:le.too_big,maximum:s.maxSize.value,type:"set",inclusive:!0,exact:!1,message:s.maxSize.message}),n.dirty());const o=this._def.valueType;function c(g){const p=new Set;for(const y of g){if(y.status==="aborted")return Le;y.status==="dirty"&&n.dirty(),p.add(y.value)}return{status:n.value,value:p}}const h=[...r.data.values()].map((g,p)=>o._parse(new Zs(r,g,r.path,p)));return r.common.async?Promise.all(h).then(g=>c(g)):c(h)}min(e,n){return new nu({...this._def,minSize:{value:e,message:Se.toString(n)}})}max(e,n){return new nu({...this._def,maxSize:{value:e,message:Se.toString(n)}})}size(e,n){return this.min(e,n).max(e,n)}nonempty(e){return this.min(1,e)}}nu.create=(t,e)=>new nu({valueType:t,minSize:null,maxSize:null,typeName:Be.ZodSet,...Ge(e)});class Xv extends tt{get schema(){return this._def.getter()}_parse(e){const{ctx:n}=this._processInputParams(e);return this._def.getter()._parse({data:n.data,path:n.path,parent:n})}}Xv.create=(t,e)=>new Xv({getter:t,typeName:Be.ZodLazy,...Ge(e)});class Kv extends tt{_parse(e){if(e.data!==this._def.value){const n=this._getOrReturnCtx(e);return pe(n,{received:n.data,code:le.invalid_literal,expected:this._def.value}),Le}return{status:"valid",value:e.data}}get value(){return this._def.value}}Kv.create=(t,e)=>new Kv({value:t,typeName:Be.ZodLiteral,...Ge(e)});function f_(t,e){return new dl({values:t,typeName:Be.ZodEnum,...Ge(e)})}class dl extends tt{_parse(e){if(typeof e.data!="string"){const n=this._getOrReturnCtx(e),r=this._def.values;return pe(n,{expected:st.joinValues(r),received:n.parsedType,code:le.invalid_type}),Le}if(this._cache||(this._cache=new Set(this._def.values)),!this._cache.has(e.data)){const n=this._getOrReturnCtx(e),r=this._def.values;return pe(n,{received:n.data,code:le.invalid_enum_value,options:r}),Le}return Mr(e.data)}get options(){return this._def.values}get enum(){const e={};for(const n of this._def.values)e[n]=n;return e}get Values(){const e={};for(const n of this._def.values)e[n]=n;return e}get Enum(){const e={};for(const n of this._def.values)e[n]=n;return e}extract(e,n=this._def){return dl.create(e,{...this._def,...n})}exclude(e,n=this._def){return dl.create(this.options.filter(r=>!e.includes(r)),{...this._def,...n})}}dl.create=f_;class qv extends tt{_parse(e){const n=st.getValidEnumValues(this._def.values),r=this._getOrReturnCtx(e);if(r.parsedType!==Ce.string&&r.parsedType!==Ce.number){const s=st.objectValues(n);return pe(r,{expected:st.joinValues(s),received:r.parsedType,code:le.invalid_type}),Le}if(this._cache||(this._cache=new Set(st.getValidEnumValues(this._def.values))),!this._cache.has(e.data)){const s=st.objectValues(n);return pe(r,{received:r.data,code:le.invalid_enum_value,options:s}),Le}return Mr(e.data)}get enum(){return this._def.values}}qv.create=(t,e)=>new qv({values:t,typeName:Be.ZodNativeEnum,...Ge(e)});class Ah extends tt{unwrap(){return this._def.type}_parse(e){const{ctx:n}=this._processInputParams(e);if(n.parsedType!==Ce.promise&&n.common.async===!1)return pe(n,{code:le.invalid_type,expected:Ce.promise,received:n.parsedType}),Le;const r=n.parsedType===Ce.promise?n.data:Promise.resolve(n.data);return Mr(r.then(s=>this._def.type.parseAsync(s,{path:n.path,errorMap:n.common.contextualErrorMap})))}}Ah.create=(t,e)=>new Ah({type:t,typeName:Be.ZodPromise,...Ge(e)});class hl extends tt{innerType(){return this._def.schema}sourceType(){return this._def.schema._def.typeName===Be.ZodEffects?this._def.schema.sourceType():this._def.schema}_parse(e){const{status:n,ctx:r}=this._processInputParams(e),s=this._def.effect||null,o={addIssue:c=>{pe(r,c),c.fatal?n.abort():n.dirty()},get path(){return r.path}};if(o.addIssue=o.addIssue.bind(o),s.type==="preprocess"){const c=s.transform(r.data,o);if(r.common.async)return Promise.resolve(c).then(async h=>{if(n.value==="aborted")return Le;const g=await this._def.schema._parseAsync({data:h,path:r.path,parent:r});return g.status==="aborted"?Le:g.status==="dirty"||n.value==="dirty"?tc(g.value):g});{if(n.value==="aborted")return Le;const h=this._def.schema._parseSync({data:c,path:r.path,parent:r});return h.status==="aborted"?Le:h.status==="dirty"||n.value==="dirty"?tc(h.value):h}}if(s.type==="refinement"){const c=h=>{const g=s.refinement(h,o);if(r.common.async)return Promise.resolve(g);if(g instanceof Promise)throw new Error("Async refinement encountered during synchronous parse operation. Use .parseAsync instead.");return h};if(r.common.async===!1){const h=this._def.schema._parseSync({data:r.data,path:r.path,parent:r});return h.status==="aborted"?Le:(h.status==="dirty"&&n.dirty(),c(h.value),{status:n.value,value:h.value})}else return this._def.schema._parseAsync({data:r.data,path:r.path,parent:r}).then(h=>h.status==="aborted"?Le:(h.status==="dirty"&&n.dirty(),c(h.value).then(()=>({status:n.value,value:h.value}))))}if(s.type==="transform")if(r.common.async===!1){const c=this._def.schema._parseSync({data:r.data,path:r.path,parent:r});if(!ul(c))return Le;const h=s.transform(c.value,o);if(h instanceof Promise)throw new Error("Asynchronous transform encountered during synchronous parse operation. Use .parseAsync instead.");return{status:n.value,value:h}}else return this._def.schema._parseAsync({data:r.data,path:r.path,parent:r}).then(c=>ul(c)?Promise.resolve(s.transform(c.value,o)).then(h=>({status:n.value,value:h})):Le);st.assertNever(s)}}hl.create=(t,e,n)=>new hl({schema:t,typeName:Be.ZodEffects,effect:e,...Ge(n)});hl.createWithPreprocess=(t,e,n)=>new hl({schema:e,effect:{type:"preprocess",transform:t},typeName:Be.ZodEffects,...Ge(n)});class zs extends tt{_parse(e){return this._getType(e)===Ce.undefined?Mr(void 0):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}}zs.create=(t,e)=>new zs({innerType:t,typeName:Be.ZodOptional,...Ge(e)});class fl extends tt{_parse(e){return this._getType(e)===Ce.null?Mr(null):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}}fl.create=(t,e)=>new fl({innerType:t,typeName:Be.ZodNullable,...Ge(e)});class Cp extends tt{_parse(e){const{ctx:n}=this._processInputParams(e);let r=n.data;return n.parsedType===Ce.undefined&&(r=this._def.defaultValue()),this._def.innerType._parse({data:r,path:n.path,parent:n})}removeDefault(){return this._def.innerType}}Cp.create=(t,e)=>new Cp({innerType:t,typeName:Be.ZodDefault,defaultValue:typeof e.default=="function"?e.default:()=>e.default,...Ge(e)});class Sp extends tt{_parse(e){const{ctx:n}=this._processInputParams(e),r={...n,common:{...n.common,issues:[]}},s=this._def.innerType._parse({data:r.data,path:r.path,parent:{...r}});return Eh(s)?s.then(o=>({status:"valid",value:o.status==="valid"?o.value:this._def.catchValue({get error(){return new Ji(r.common.issues)},input:r.data})})):{status:"valid",value:s.status==="valid"?s.value:this._def.catchValue({get error(){return new Ji(r.common.issues)},input:r.data})}}removeCatch(){return this._def.innerType}}Sp.create=(t,e)=>new Sp({innerType:t,typeName:Be.ZodCatch,catchValue:typeof e.catch=="function"?e.catch:()=>e.catch,...Ge(e)});class Zv extends tt{_parse(e){if(this._getType(e)!==Ce.nan){const r=this._getOrReturnCtx(e);return pe(r,{code:le.invalid_type,expected:Ce.nan,received:r.parsedType}),Le}return{status:"valid",value:e.data}}}Zv.create=t=>new Zv({typeName:Be.ZodNaN,...Ge(t)});class L9 extends tt{_parse(e){const{ctx:n}=this._processInputParams(e),r=n.data;return this._def.type._parse({data:r,path:n.path,parent:n})}unwrap(){return this._def.type}}class Sm extends tt{_parse(e){const{status:n,ctx:r}=this._processInputParams(e);if(r.common.async)return(async()=>{const o=await this._def.in._parseAsync({data:r.data,path:r.path,parent:r});return o.status==="aborted"?Le:o.status==="dirty"?(n.dirty(),tc(o.value)):this._def.out._parseAsync({data:o.value,path:r.path,parent:r})})();{const s=this._def.in._parseSync({data:r.data,path:r.path,parent:r});return s.status==="aborted"?Le:s.status==="dirty"?(n.dirty(),{status:"dirty",value:s.value}):this._def.out._parseSync({data:s.value,path:r.path,parent:r})}}static create(e,n){return new Sm({in:e,out:n,typeName:Be.ZodPipeline})}}class Ap extends tt{_parse(e){const n=this._def.innerType._parse(e),r=s=>(ul(s)&&(s.value=Object.freeze(s.value)),s);return Eh(n)?n.then(s=>r(s)):r(n)}unwrap(){return this._def.innerType}}Ap.create=(t,e)=>new Ap({innerType:t,typeName:Be.ZodReadonly,...Ge(e)});zt.lazycreate;var Be;(function(t){t.ZodString="ZodString",t.ZodNumber="ZodNumber",t.ZodNaN="ZodNaN",t.ZodBigInt="ZodBigInt",t.ZodBoolean="ZodBoolean",t.ZodDate="ZodDate",t.ZodSymbol="ZodSymbol",t.ZodUndefined="ZodUndefined",t.ZodNull="ZodNull",t.ZodAny="ZodAny",t.ZodUnknown="ZodUnknown",t.ZodNever="ZodNever",t.ZodVoid="ZodVoid",t.ZodArray="ZodArray",t.ZodObject="ZodObject",t.ZodUnion="ZodUnion",t.ZodDiscriminatedUnion="ZodDiscriminatedUnion",t.ZodIntersection="ZodIntersection",t.ZodTuple="ZodTuple",t.ZodRecord="ZodRecord",t.ZodMap="ZodMap",t.ZodSet="ZodSet",t.ZodFunction="ZodFunction",t.ZodLazy="ZodLazy",t.ZodLiteral="ZodLiteral",t.ZodEnum="ZodEnum",t.ZodEffects="ZodEffects",t.ZodNativeEnum="ZodNativeEnum",t.ZodOptional="ZodOptional",t.ZodNullable="ZodNullable",t.ZodDefault="ZodDefault",t.ZodCatch="ZodCatch",t.ZodPromise="ZodPromise",t.ZodBranded="ZodBranded",t.ZodPipeline="ZodPipeline",t.ZodReadonly="ZodReadonly"})(Be||(Be={}));const p_=Os.create;Qs.create;Ri.create;zt.create;zt.strictCreate;Ch.create;Sh.create;$o.create;dl.create;Ah.create;zs.create;fl.create;const B9=p_().trim().min(1,"Name ist erforderlich").max(50,"Max. 50 Zeichen"),F9=p_().regex(/^\d{4}$/,"PIN muss genau 4 Ziffern haben");function j9(t){return`${t.toLowerCase().replace(/[^a-z0-9]/g,"")||"user"}@buchclub.local`}function U9(t){return`buchclub-pin-${t}`}function V9(){const t=eS(),[e,n]=M.useState(!0),[r,s]=M.useState(""),[o,c]=M.useState(""),[h,g]=M.useState(!1),p=async y=>{y.preventDefault();const x=B9.safeParse(r);if(!x.success){Dn.error(x.error.errors[0].message);return}const E=F9.safeParse(o);if(!E.success){Dn.error(E.error.errors[0].message);return}const b=j9(x.data),I=U9(o);g(!0);try{if(e){const{data:S,error:R}=await Zn.auth.signUp({email:b,password:I,options:{emailRedirectTo:`${window.location.origin}/`}});if(R){R.message.includes("already registered")?Dn.error("Dieser Name ist bereits vergeben. Bitte einloggen."):Dn.error(R.message);return}S.user&&(await Zn.from("profiles").insert({user_id:S.user.id,display_name:x.data}),Dn.success("Willkommen im Buchclub!"),t("/"))}else{const{error:S}=await Zn.auth.signInWithPassword({email:b,password:I});if(S){Dn.error("Name oder PIN falsch.");return}t("/")}}finally{g(!1)}};return U.jsx("div",{className:"flex min-h-screen items-center justify-center bg-background px-6",children:U.jsxs(Vs.div,{initial:{opacity:0,y:30},animate:{opacity:1,y:0},transition:{duration:.6,ease:"easeOut"},className:"w-full max-w-sm text-center",children:[U.jsx(Vs.div,{initial:{scale:0},animate:{scale:1},transition:{delay:.2,type:"spring",stiffness:200},className:"mx-auto mb-6 flex h-20 w-20 items-center justify-center rounded-full bg-primary",children:U.jsx(Qb,{className:"h-10 w-10 text-primary-foreground"})}),U.jsx(Em,{mode:"wait",children:U.jsxs(Vs.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},exit:{opacity:0,y:-10},transition:{duration:.3},children:[U.jsx("h1",{className:"mb-2 text-3xl font-bold text-foreground",children:"Buchclub"}),U.jsx("p",{className:"mb-8 text-muted-foreground",children:e?"Werde Teil unserer Leserunde ":"Schn, dass du wieder da bist "})]},e?"signup":"login")}),U.jsxs("form",{onSubmit:p,className:"space-y-4",children:[U.jsx(dh,{placeholder:"Dein Name",value:r,onChange:y=>s(y.target.value),className:"h-12 rounded-xl bg-card text-center text-lg",autoFocus:!0}),U.jsx(dh,{type:"password",inputMode:"numeric",maxLength:4,placeholder:"4-stelliger PIN",value:o,onChange:y=>c(y.target.value.replace(/\D/g,"").slice(0,4)),className:"h-12 rounded-xl bg-card text-center text-lg tracking-[0.5em]"}),U.jsx(Us,{type:"submit",disabled:h||!r.trim()||o.length!==4,className:"h-12 w-full rounded-xl text-lg font-semibold",children:h?U.jsx(ol,{className:"h-5 w-5 animate-spin"}):e?"Beitreten ":"Einloggen "})]}),U.jsx("button",{onClick:()=>n(!e),className:"mt-4 text-sm text-muted-foreground underline",children:e?"Schon dabei? Einloggen":"Neu hier? Beitreten"})]})})}const z9=()=>{const t=Vg();return M.useEffect(()=>{console.error("404 Error: User attempted to access non-existent route:",t.pathname)},[t.pathname]),U.jsx("div",{className:"flex min-h-screen items-center justify-center bg-muted",children:U.jsxs("div",{className:"text-center",children:[U.jsx("h1",{className:"mb-4 text-4xl font-bold",children:"404"}),U.jsx("p",{className:"mb-4 text-xl text-muted-foreground",children:"Oops! Page not found"}),U.jsx("a",{href:"/",className:"text-primary underline hover:text-primary/90",children:"Return to Home"})]})})},H9=new YO,W9=()=>U.jsx(KO,{client:H9,children:U.jsxs(CO,{children:[U.jsx(oR,{}),U.jsx(FR,{}),U.jsx(z8,{basename:"/BookCLubKA",children:U.jsxs(j8,{children:[U.jsx(Cd,{path:"/",element:U.jsx(u9,{})}),U.jsx(Cd,{path:"/auth",element:U.jsx(V9,{})}),U.jsx(Cd,{path:"*",element:U.jsx(z9,{})})]})})]})});Eb(document.getElementById("root")).render(U.jsx(W9,{}));
